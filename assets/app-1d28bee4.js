const Rz="modulepreload",zz=function(e){return"/"+e},yT={},Oe=function(t,r,i){if(!r||r.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=zz(a),a in yT)return;yT[a]=!0;const u=a.endsWith(".css"),o=u?'[rel="stylesheet"]':"";if(!!i)for(let v=n.length-1;v>=0;v--){const _=n[v];if(_.href===a&&(!u||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${o}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Rz,u||(p.as="script",p.crossOrigin=""),p.href=a,document.head.appendChild(p),u)return new Promise((v,_)=>{p.addEventListener("load",v),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t())};function Oz(e,t){const r=Object.create(null),i=e.split(",");for(let n=0;n<i.length;n++)r[i[n]]=!0;return t?n=>!!r[n.toLowerCase()]:n=>!!r[n]}const Bz=()=>{},Fz=Object.assign,Nz=Object.prototype.hasOwnProperty,f_=(e,t)=>Nz.call(e,t),Es=Array.isArray,ig=e=>QI(e)==="[object Map]",JI=e=>typeof e=="function",Vz=e=>typeof e=="string",Lb=e=>typeof e=="symbol",Pp=e=>e!==null&&typeof e=="object",$z=Object.prototype.toString,QI=e=>$z.call(e),Uz=e=>QI(e).slice(8,-1),kb=e=>Vz(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Rb=(e,t)=>!Object.is(e,t),Gz=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})};let xa;class Hz{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=xa,!t&&xa&&(this.index=(xa.scopes||(xa.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const r=xa;try{return xa=this,t()}finally{xa=r}}}on(){xa=this}off(){xa=this.parent}stop(t){if(this._active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function qz(e,t=xa){t&&t.active&&t.effects.push(e)}function eP(){return xa}function jz(e){xa&&xa.cleanups.push(e)}const zb=e=>{const t=new Set(e);return t.w=0,t.n=0,t},tP=e=>(e.w&Dl)>0,rP=e=>(e.n&Dl)>0,Wz=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Dl},Zz=e=>{const{deps:t}=e;if(t.length){let r=0;for(let i=0;i<t.length;i++){const n=t[i];tP(n)&&!rP(n)?n.delete(e):t[r++]=n,n.w&=~Dl,n.n&=~Dl}t.length=r}},Tg=new WeakMap;let wd=0,Dl=1;const sx=30;let fo;const Ku=Symbol(""),lx=Symbol("");class Ob{constructor(t,r=null,i){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,qz(this,i)}run(){if(!this.active)return this.fn();let t=fo,r=El;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=fo,fo=this,El=!0,Dl=1<<++wd,wd<=sx?Wz(this):xT(this),this.fn()}finally{wd<=sx&&Zz(this),Dl=1<<--wd,fo=this.parent,El=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){fo===this?this.deferStop=!0:this.active&&(xT(this),this.onStop&&this.onStop(),this.active=!1)}}function xT(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let El=!0;const iP=[];function $h(){iP.push(El),El=!1}function Uh(){const e=iP.pop();El=e===void 0?!0:e}function la(e,t,r){if(El&&fo){let i=Tg.get(e);i||Tg.set(e,i=new Map);let n=i.get(r);n||i.set(r,n=zb()),nP(n)}}function nP(e,t){let r=!1;wd<=sx?rP(e)||(e.n|=Dl,r=!tP(e)):r=!e.has(fo),r&&(e.add(fo),fo.deps.push(e))}function Is(e,t,r,i,n,a){const u=Tg.get(e);if(!u)return;let o=[];if(t==="clear")o=[...u.values()];else if(r==="length"&&Es(e)){const f=Number(i);u.forEach((p,v)=>{(v==="length"||v>=f)&&o.push(p)})}else switch(r!==void 0&&o.push(u.get(r)),t){case"add":Es(e)?kb(r)&&o.push(u.get("length")):(o.push(u.get(Ku)),ig(e)&&o.push(u.get(lx)));break;case"delete":Es(e)||(o.push(u.get(Ku)),ig(e)&&o.push(u.get(lx)));break;case"set":ig(e)&&o.push(u.get(Ku));break}if(o.length===1)o[0]&&ux(o[0]);else{const f=[];for(const p of o)p&&f.push(...p);ux(zb(f))}}function ux(e,t){const r=Es(e)?e:[...e];for(const i of r)i.computed&&bT(i);for(const i of r)i.computed||bT(i)}function bT(e,t){(e!==fo||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}function Xz(e,t){var r;return(r=Tg.get(e))==null?void 0:r.get(t)}const Yz=Oz("__proto__,__v_isRef,__isVue"),aP=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Lb)),Kz=Bb(),Jz=Bb(!1,!0),Qz=Bb(!0),wT=e6();function e6(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const i=Or(this);for(let a=0,u=this.length;a<u;a++)la(i,"get",a+"");const n=i[t](...r);return n===-1||n===!1?i[t](...r.map(Or)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){$h();const i=Or(this)[t].apply(this,r);return Uh(),i}}),e}function t6(e){const t=Or(this);return la(t,"has",e),t.hasOwnProperty(e)}function Bb(e=!1,t=!1){return function(i,n,a){if(n==="__v_isReactive")return!e;if(n==="__v_isReadonly")return e;if(n==="__v_isShallow")return t;if(n==="__v_raw"&&a===(e?t?g6:cP:t?uP:lP).get(i))return i;const u=Es(i);if(!e){if(u&&f_(wT,n))return Reflect.get(wT,n,a);if(n==="hasOwnProperty")return t6}const o=Reflect.get(i,n,a);return(Lb(n)?aP.has(n):Yz(n))||(e||la(i,"get",n),t)?o:Ki(o)?u&&kb(n)?o:o.value:Pp(o)?e?Dp(o):Gh(o):o}}const r6=oP(),i6=oP(!0);function oP(e=!1){return function(r,i,n,a){let u=r[i];if(Ch(u)&&Ki(u)&&!Ki(n))return!1;if(!e&&(!Eg(n)&&!Ch(n)&&(u=Or(u),n=Or(n)),!Es(r)&&Ki(u)&&!Ki(n)))return u.value=n,!0;const o=Es(r)&&kb(i)?Number(i)<r.length:f_(r,i),f=Reflect.set(r,i,n,a);return r===Or(a)&&(o?Rb(n,u)&&Is(r,"set",i,n):Is(r,"add",i,n)),f}}function n6(e,t){const r=f_(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&Is(e,"delete",t,void 0),i}function a6(e,t){const r=Reflect.has(e,t);return(!Lb(t)||!aP.has(t))&&la(e,"has",t),r}function o6(e){return la(e,"iterate",Es(e)?"length":Ku),Reflect.ownKeys(e)}const sP={get:Kz,set:r6,deleteProperty:n6,has:a6,ownKeys:o6},s6={get:Qz,set(e,t){return!0},deleteProperty(e,t){return!0}},l6=Fz({},sP,{get:Jz,set:i6}),Fb=e=>e,d_=e=>Reflect.getPrototypeOf(e);function nv(e,t,r=!1,i=!1){e=e.__v_raw;const n=Or(e),a=Or(t);r||(t!==a&&la(n,"get",t),la(n,"get",a));const{has:u}=d_(n),o=i?Fb:r?$b:Qd;if(u.call(n,t))return o(e.get(t));if(u.call(n,a))return o(e.get(a));e!==n&&e.get(t)}function av(e,t=!1){const r=this.__v_raw,i=Or(r),n=Or(e);return t||(e!==n&&la(i,"has",e),la(i,"has",n)),e===n?r.has(e):r.has(e)||r.has(n)}function ov(e,t=!1){return e=e.__v_raw,!t&&la(Or(e),"iterate",Ku),Reflect.get(e,"size",e)}function ST(e){e=Or(e);const t=Or(this);return d_(t).has.call(t,e)||(t.add(e),Is(t,"add",e,e)),this}function TT(e,t){t=Or(t);const r=Or(this),{has:i,get:n}=d_(r);let a=i.call(r,e);a||(e=Or(e),a=i.call(r,e));const u=n.call(r,e);return r.set(e,t),a?Rb(t,u)&&Is(r,"set",e,t):Is(r,"add",e,t),this}function ET(e){const t=Or(this),{has:r,get:i}=d_(t);let n=r.call(t,e);n||(e=Or(e),n=r.call(t,e)),i&&i.call(t,e);const a=t.delete(e);return n&&Is(t,"delete",e,void 0),a}function CT(){const e=Or(this),t=e.size!==0,r=e.clear();return t&&Is(e,"clear",void 0,void 0),r}function sv(e,t){return function(i,n){const a=this,u=a.__v_raw,o=Or(u),f=t?Fb:e?$b:Qd;return!e&&la(o,"iterate",Ku),u.forEach((p,v)=>i.call(n,f(p),f(v),a))}}function lv(e,t,r){return function(...i){const n=this.__v_raw,a=Or(n),u=ig(a),o=e==="entries"||e===Symbol.iterator&&u,f=e==="keys"&&u,p=n[e](...i),v=r?Fb:t?$b:Qd;return!t&&la(a,"iterate",f?lx:Ku),{next(){const{value:_,done:y}=p.next();return y?{value:_,done:y}:{value:o?[v(_[0]),v(_[1])]:v(_),done:y}},[Symbol.iterator](){return this}}}}function al(e){return function(...t){return e==="delete"?!1:this}}function u6(){const e={get(a){return nv(this,a)},get size(){return ov(this)},has:av,add:ST,set:TT,delete:ET,clear:CT,forEach:sv(!1,!1)},t={get(a){return nv(this,a,!1,!0)},get size(){return ov(this)},has:av,add:ST,set:TT,delete:ET,clear:CT,forEach:sv(!1,!0)},r={get(a){return nv(this,a,!0)},get size(){return ov(this,!0)},has(a){return av.call(this,a,!0)},add:al("add"),set:al("set"),delete:al("delete"),clear:al("clear"),forEach:sv(!0,!1)},i={get(a){return nv(this,a,!0,!0)},get size(){return ov(this,!0)},has(a){return av.call(this,a,!0)},add:al("add"),set:al("set"),delete:al("delete"),clear:al("clear"),forEach:sv(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=lv(a,!1,!1),r[a]=lv(a,!0,!1),t[a]=lv(a,!1,!0),i[a]=lv(a,!0,!0)}),[e,r,t,i]}const[c6,h6,f6,d6]=u6();function Nb(e,t){const r=t?e?d6:f6:e?h6:c6;return(i,n,a)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?i:Reflect.get(f_(r,n)&&n in i?r:i,n,a)}const p6={get:Nb(!1,!1)},m6={get:Nb(!1,!0)},v6={get:Nb(!0,!1)},lP=new WeakMap,uP=new WeakMap,cP=new WeakMap,g6=new WeakMap;function _6(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function y6(e){return e.__v_skip||!Object.isExtensible(e)?0:_6(Uz(e))}function Gh(e){return Ch(e)?e:Vb(e,!1,sP,p6,lP)}function x6(e){return Vb(e,!1,l6,m6,uP)}function Dp(e){return Vb(e,!0,s6,v6,cP)}function Vb(e,t,r,i,n){if(!Pp(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=n.get(e);if(a)return a;const u=y6(e);if(u===0)return e;const o=new Proxy(e,u===2?i:r);return n.set(e,o),o}function vh(e){return Ch(e)?vh(e.__v_raw):!!(e&&e.__v_isReactive)}function Ch(e){return!!(e&&e.__v_isReadonly)}function Eg(e){return!!(e&&e.__v_isShallow)}function hP(e){return vh(e)||Ch(e)}function Or(e){const t=e&&e.__v_raw;return t?Or(t):e}function fP(e){return Gz(e,"__v_skip",!0),e}const Qd=e=>Pp(e)?Gh(e):e,$b=e=>Pp(e)?Dp(e):e;function Ub(e){El&&fo&&(e=Or(e),nP(e.dep||(e.dep=zb())))}function Gb(e,t){e=Or(e);const r=e.dep;r&&ux(r)}function Ki(e){return!!(e&&e.__v_isRef===!0)}function Kr(e){return dP(e,!1)}function Ld(e){return dP(e,!0)}function dP(e,t){return Ki(e)?e:new b6(e,t)}class b6{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:Or(t),this._value=r?t:Qd(t)}get value(){return Ub(this),this._value}set value(t){const r=this.__v_isShallow||Eg(t)||Ch(t);t=r?t:Or(t),Rb(t,this._rawValue)&&(this._rawValue=t,this._value=r?t:Qd(t),Gb(this))}}function jt(e){return Ki(e)?e.value:e}const w6={get:(e,t,r)=>jt(Reflect.get(e,t,r)),set:(e,t,r,i)=>{const n=e[t];return Ki(n)&&!Ki(r)?(n.value=r,!0):Reflect.set(e,t,r,i)}};function pP(e){return vh(e)?e:new Proxy(e,w6)}class S6{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:r,set:i}=t(()=>Ub(this),()=>Gb(this));this._get=r,this._set=i}get value(){return this._get()}set value(t){this._set(t)}}function T6(e){return new S6(e)}function Lp(e){const t=Es(e)?new Array(e.length):{};for(const r in e)t[r]=mP(e,r);return t}class E6{constructor(t,r,i){this._object=t,this._key=r,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Xz(Or(this._object),this._key)}}class C6{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function A6(e,t,r){return Ki(e)?e:JI(e)?new C6(e):Pp(e)&&arguments.length>1?mP(e,t,r):Kr(e)}function mP(e,t,r){const i=e[t];return Ki(i)?i:new E6(e,t,r)}class M6{constructor(t,r,i,n){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Ob(t,()=>{this._dirty||(this._dirty=!0,Gb(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const t=Or(this);return Ub(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function I6(e,t,r=!1){let i,n;const a=JI(e);return a?(i=e,n=Bz):(i=e.get,n=e.set),new M6(i,n,a||!n,r)}function P6(e,t){const r=Object.create(null),i=e.split(",");for(let n=0;n<i.length;n++)r[i[n]]=!0;return t?n=>!!r[n.toLowerCase()]:n=>!!r[n]}const mi={},gh=[],qo=()=>{},D6=()=>!1,L6=/^on[^a-z]/,p_=e=>L6.test(e),vP=e=>e.startsWith("onUpdate:"),kn=Object.assign,Hb=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},k6=Object.prototype.hasOwnProperty,Yr=(e,t)=>k6.call(e,t),Tr=Array.isArray,gP=e=>qb(e)==="[object Map]",_P=e=>qb(e)==="[object Set]",mr=e=>typeof e=="function",Yn=e=>typeof e=="string",ji=e=>e!==null&&typeof e=="object",yP=e=>ji(e)&&mr(e.then)&&mr(e.catch),xP=Object.prototype.toString,qb=e=>xP.call(e),bP=e=>qb(e)==="[object Object]",kd=P6(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),m_=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},R6=/-(\w)/g,Zo=m_(e=>e.replace(R6,(t,r)=>r?r.toUpperCase():"")),z6=/\B([A-Z])/g,v_=m_(e=>e.replace(z6,"-$1").toLowerCase()),jb=m_(e=>e.charAt(0).toUpperCase()+e.slice(1)),l0=m_(e=>e?`on${jb(e)}`:""),AT=(e,t)=>!Object.is(e,t),u0=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},cx=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},O6=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let MT;const hx=()=>MT||(MT=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Hh(e){if(Tr(e)){const t={};for(let r=0;r<e.length;r++){const i=e[r],n=Yn(i)?V6(i):Hh(i);if(n)for(const a in n)t[a]=n[a]}return t}else{if(Yn(e))return e;if(ji(e))return e}}const B6=/;(?![^(]*\))/g,F6=/:([^]+)/,N6=new RegExp("\\/\\*.*?\\*\\/","gs");function V6(e){const t={};return e.replace(N6,"").split(B6).forEach(r=>{if(r){const i=r.split(F6);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function gn(e){let t="";if(Yn(e))t=e;else if(Tr(e))for(let r=0;r<e.length;r++){const i=gn(e[r]);i&&(t+=i+" ")}else if(ji(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function $6(e){if(!e)return null;let{class:t,style:r}=e;return t&&!Yn(t)&&(e.class=gn(t)),r&&(e.style=Hh(r)),e}const Vr=e=>Yn(e)?e:e==null?"":Tr(e)||ji(e)&&(e.toString===xP||!mr(e.toString))?JSON.stringify(e,wP,2):String(e),wP=(e,t)=>t&&t.__v_isRef?wP(e,t.value):gP(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[i,n])=>(r[`${i} =>`]=n,r),{})}:_P(t)?{[`Set(${t.size})`]:[...t.values()]}:ji(t)&&!Tr(t)&&!bP(t)?String(t):t;function Cl(e,t,r,i){let n;try{n=i?e(...i):e()}catch(a){kp(a,t,r)}return n}function Wa(e,t,r,i){if(mr(e)){const a=Cl(e,t,r,i);return a&&yP(a)&&a.catch(u=>{kp(u,t,r)}),a}const n=[];for(let a=0;a<e.length;a++)n.push(Wa(e[a],t,r,i));return n}function kp(e,t,r,i=!0){const n=t?t.vnode:null;if(t){let a=t.parent;const u=t.proxy,o=r;for(;a;){const p=a.ec;if(p){for(let v=0;v<p.length;v++)if(p[v](e,u,o)===!1)return}a=a.parent}const f=t.appContext.config.errorHandler;if(f){Cl(f,null,10,[e,u,o]);return}}U6(e,r,n,i)}function U6(e,t,r,i=!0){console.error(e)}let ep=!1,fx=!1;const Dn=[];let Vo=0;const _h=[];let bs=null,Uu=0;const SP=Promise.resolve();let Wb=null;function Rp(e){const t=Wb||SP;return e?t.then(this?e.bind(this):e):t}function G6(e){let t=Vo+1,r=Dn.length;for(;t<r;){const i=t+r>>>1;tp(Dn[i])<e?t=i+1:r=i}return t}function g_(e){(!Dn.length||!Dn.includes(e,ep&&e.allowRecurse?Vo+1:Vo))&&(e.id==null?Dn.push(e):Dn.splice(G6(e.id),0,e),TP())}function TP(){!ep&&!fx&&(fx=!0,Wb=SP.then(EP))}function H6(e){const t=Dn.indexOf(e);t>Vo&&Dn.splice(t,1)}function q6(e){Tr(e)?_h.push(...e):(!bs||!bs.includes(e,e.allowRecurse?Uu+1:Uu))&&_h.push(e),TP()}function IT(e,t=ep?Vo+1:0){for(;t<Dn.length;t++){const r=Dn[t];r&&r.pre&&(Dn.splice(t,1),t--,r())}}function Cg(e){if(_h.length){const t=[...new Set(_h)];if(_h.length=0,bs){bs.push(...t);return}for(bs=t,bs.sort((r,i)=>tp(r)-tp(i)),Uu=0;Uu<bs.length;Uu++)bs[Uu]();bs=null,Uu=0}}const tp=e=>e.id==null?1/0:e.id,j6=(e,t)=>{const r=tp(e)-tp(t);if(r===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return r};function EP(e){fx=!1,ep=!0,Dn.sort(j6);const t=qo;try{for(Vo=0;Vo<Dn.length;Vo++){const r=Dn[Vo];r&&r.active!==!1&&Cl(r,null,14)}}finally{Vo=0,Dn.length=0,Cg(),ep=!1,Wb=null,(Dn.length||_h.length)&&EP()}}function W6(e,t,...r){if(e.isUnmounted)return;const i=e.vnode.props||mi;let n=r;const a=t.startsWith("update:"),u=a&&t.slice(7);if(u&&u in i){const v=`${u==="modelValue"?"model":u}Modifiers`,{number:_,trim:y}=i[v]||mi;y&&(n=r.map(S=>Yn(S)?S.trim():S)),_&&(n=r.map(O6))}let o,f=i[o=l0(t)]||i[o=l0(Zo(t))];!f&&a&&(f=i[o=l0(v_(t))]),f&&Wa(f,e,6,n);const p=i[o+"Once"];if(p){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,Wa(p,e,6,n)}}function CP(e,t,r=!1){const i=t.emitsCache,n=i.get(e);if(n!==void 0)return n;const a=e.emits;let u={},o=!1;if(!mr(e)){const f=p=>{const v=CP(p,t,!0);v&&(o=!0,kn(u,v))};!r&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}return!a&&!o?(ji(e)&&i.set(e,null),null):(Tr(a)?a.forEach(f=>u[f]=null):kn(u,a),ji(e)&&i.set(e,u),u)}function __(e,t){return!e||!p_(t)?!1:(t=t.slice(2).replace(/Once$/,""),Yr(e,t[0].toLowerCase()+t.slice(1))||Yr(e,v_(t))||Yr(e,t))}let vn=null,y_=null;function Ag(e){const t=vn;return vn=e,y_=e&&e.type.__scopeId||null,t}function AP(e){y_=e}function MP(){y_=null}function qi(e,t=vn,r){if(!t||e._n)return e;const i=(...n)=>{i._d&&$T(-1);const a=Ag(t);let u;try{u=e(...n)}finally{Ag(a),i._d&&$T(1)}return u};return i._n=!0,i._c=!0,i._d=!0,i}function c0(e){const{type:t,vnode:r,proxy:i,withProxy:n,props:a,propsOptions:[u],slots:o,attrs:f,emit:p,render:v,renderCache:_,data:y,setupState:S,ctx:A,inheritAttrs:L}=e;let I,M;const D=Ag(e);try{if(r.shapeFlag&4){const N=n||i;I=ho(v.call(N,N,_,a,S,y,A)),M=f}else{const N=t;I=ho(N.length>1?N(a,{attrs:f,slots:o,emit:p}):N(a,null)),M=t.props?f:Z6(f)}}catch(N){Od.length=0,kp(N,e,1),I=er(Sa)}let O=I;if(M&&L!==!1){const N=Object.keys(M),{shapeFlag:q}=O;N.length&&q&7&&(u&&N.some(vP)&&(M=X6(M,u)),O=Ll(O,M))}return r.dirs&&(O=Ll(O),O.dirs=O.dirs?O.dirs.concat(r.dirs):r.dirs),r.transition&&(O.transition=r.transition),I=O,Ag(D),I}const Z6=e=>{let t;for(const r in e)(r==="class"||r==="style"||p_(r))&&((t||(t={}))[r]=e[r]);return t},X6=(e,t)=>{const r={};for(const i in e)(!vP(i)||!(i.slice(9)in t))&&(r[i]=e[i]);return r};function Y6(e,t,r){const{props:i,children:n,component:a}=e,{props:u,children:o,patchFlag:f}=t,p=a.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&f>=0){if(f&1024)return!0;if(f&16)return i?PT(i,u,p):!!u;if(f&8){const v=t.dynamicProps;for(let _=0;_<v.length;_++){const y=v[_];if(u[y]!==i[y]&&!__(p,y))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:i===u?!1:i?u?PT(i,u,p):!0:!!u;return!1}function PT(e,t,r){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let n=0;n<i.length;n++){const a=i[n];if(t[a]!==e[a]&&!__(r,a))return!0}return!1}function K6({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const J6=e=>e.__isSuspense;function IP(e,t){t&&t.pendingBranch?Tr(e)?t.effects.push(...e):t.effects.push(e):q6(e)}function dx(e,t){return Zb(e,null,t)}const uv={};function Ln(e,t,r){return Zb(e,t,r)}function Zb(e,t,{immediate:r,deep:i,flush:n,onTrack:a,onTrigger:u}=mi){var o;const f=eP()===((o=Yi)==null?void 0:o.scope)?Yi:null;let p,v=!1,_=!1;if(Ki(e)?(p=()=>e.value,v=Eg(e)):vh(e)?(p=()=>e,i=!0):Tr(e)?(_=!0,v=e.some(N=>vh(N)||Eg(N)),p=()=>e.map(N=>{if(Ki(N))return N.value;if(vh(N))return Zu(N);if(mr(N))return Cl(N,f,2)})):mr(e)?t?p=()=>Cl(e,f,2):p=()=>{if(!(f&&f.isUnmounted))return y&&y(),Wa(e,f,3,[S])}:p=qo,t&&i){const N=p;p=()=>Zu(N())}let y,S=N=>{y=D.onStop=()=>{Cl(N,f,4)}},A;if(Ih)if(S=qo,t?r&&Wa(t,f,3,[p(),_?[]:void 0,S]):p(),n==="sync"){const N=WO();A=N.__watcherHandles||(N.__watcherHandles=[])}else return qo;let L=_?new Array(e.length).fill(uv):uv;const I=()=>{if(D.active)if(t){const N=D.run();(i||v||(_?N.some((q,Z)=>AT(q,L[Z])):AT(N,L)))&&(y&&y(),Wa(t,f,3,[N,L===uv?void 0:_&&L[0]===uv?[]:L,S]),L=N)}else D.run()};I.allowRecurse=!!t;let M;n==="sync"?M=I:n==="post"?M=()=>na(I,f&&f.suspense):(I.pre=!0,f&&(I.id=f.uid),M=()=>g_(I));const D=new Ob(p,M);t?r?I():L=D.run():n==="post"?na(D.run.bind(D),f&&f.suspense):D.run();const O=()=>{D.stop(),f&&f.scope&&Hb(f.scope.effects,D)};return A&&A.push(O),O}function Q6(e,t,r){const i=this.proxy,n=Yn(e)?e.includes(".")?PP(i,e):()=>i[e]:e.bind(i,i);let a;mr(t)?a=t:(a=t.handler,r=t);const u=Yi;Mh(this);const o=Zb(n,a.bind(i),r);return u?Mh(u):Ju(),o}function PP(e,t){const r=t.split(".");return()=>{let i=e;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}function Zu(e,t){if(!ji(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),Ki(e))Zu(e.value,t);else if(Tr(e))for(let r=0;r<e.length;r++)Zu(e[r],t);else if(_P(e)||gP(e))e.forEach(r=>{Zu(r,t)});else if(bP(e))for(const r in e)Zu(e[r],t);return e}function Mg(e,t){const r=vn;if(r===null)return e;const i=S_(r)||r.proxy,n=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[u,o,f,p=mi]=t[a];u&&(mr(u)&&(u={mounted:u,updated:u}),u.deep&&Zu(o),n.push({dir:u,instance:i,value:o,oldValue:void 0,arg:f,modifiers:p}))}return e}function Fo(e,t,r,i){const n=e.dirs,a=t&&t.dirs;for(let u=0;u<n.length;u++){const o=n[u];a&&(o.oldValue=a[u].value);let f=o.dir[i];f&&($h(),Wa(f,r,8,[e.el,o,e,t]),Uh())}}function eO(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Kn(()=>{e.isMounted=!0}),b_(()=>{e.isUnmounting=!0}),e}const ka=[Function,Array],DP={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ka,onEnter:ka,onAfterEnter:ka,onEnterCancelled:ka,onBeforeLeave:ka,onLeave:ka,onAfterLeave:ka,onLeaveCancelled:ka,onBeforeAppear:ka,onAppear:ka,onAfterAppear:ka,onAppearCancelled:ka},tO={name:"BaseTransition",props:DP,setup(e,{slots:t}){const r=Jb(),i=eO();let n;return()=>{const a=t.default&&kP(t.default(),!0);if(!a||!a.length)return;let u=a[0];if(a.length>1){for(const L of a)if(L.type!==Sa){u=L;break}}const o=Or(e),{mode:f}=o;if(i.isLeaving)return h0(u);const p=DT(u);if(!p)return h0(u);const v=px(p,o,i,r);mx(p,v);const _=r.subTree,y=_&&DT(_);let S=!1;const{getTransitionKey:A}=p.type;if(A){const L=A();n===void 0?n=L:L!==n&&(n=L,S=!0)}if(y&&y.type!==Sa&&(!Gu(p,y)||S)){const L=px(y,o,i,r);if(mx(y,L),f==="out-in")return i.isLeaving=!0,L.afterLeave=()=>{i.isLeaving=!1,r.update.active!==!1&&r.update()},h0(u);f==="in-out"&&p.type!==Sa&&(L.delayLeave=(I,M,D)=>{const O=LP(i,y);O[String(y.key)]=y,I._leaveCb=()=>{M(),I._leaveCb=void 0,delete v.delayedLeave},v.delayedLeave=D})}return u}}},rO=tO;function LP(e,t){const{leavingVNodes:r}=e;let i=r.get(t.type);return i||(i=Object.create(null),r.set(t.type,i)),i}function px(e,t,r,i){const{appear:n,mode:a,persisted:u=!1,onBeforeEnter:o,onEnter:f,onAfterEnter:p,onEnterCancelled:v,onBeforeLeave:_,onLeave:y,onAfterLeave:S,onLeaveCancelled:A,onBeforeAppear:L,onAppear:I,onAfterAppear:M,onAppearCancelled:D}=t,O=String(e.key),N=LP(r,e),q=(j,ie)=>{j&&Wa(j,i,9,ie)},Z=(j,ie)=>{const ae=ie[1];q(j,ie),Tr(j)?j.every(he=>he.length<=1)&&ae():j.length<=1&&ae()},Q={mode:a,persisted:u,beforeEnter(j){let ie=o;if(!r.isMounted)if(n)ie=L||o;else return;j._leaveCb&&j._leaveCb(!0);const ae=N[O];ae&&Gu(e,ae)&&ae.el._leaveCb&&ae.el._leaveCb(),q(ie,[j])},enter(j){let ie=f,ae=p,he=v;if(!r.isMounted)if(n)ie=I||f,ae=M||p,he=D||v;else return;let ue=!1;const fe=j._enterCb=ye=>{ue||(ue=!0,ye?q(he,[j]):q(ae,[j]),Q.delayedLeave&&Q.delayedLeave(),j._enterCb=void 0)};ie?Z(ie,[j,fe]):fe()},leave(j,ie){const ae=String(e.key);if(j._enterCb&&j._enterCb(!0),r.isUnmounting)return ie();q(_,[j]);let he=!1;const ue=j._leaveCb=fe=>{he||(he=!0,ie(),fe?q(A,[j]):q(S,[j]),j._leaveCb=void 0,N[ae]===e&&delete N[ae])};N[ae]=e,y?Z(y,[j,ue]):ue()},clone(j){return px(j,t,r,i)}};return Q}function h0(e){if(zp(e))return e=Ll(e),e.children=null,e}function DT(e){return zp(e)?e.children?e.children[0]:void 0:e}function mx(e,t){e.shapeFlag&6&&e.component?mx(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function kP(e,t=!1,r){let i=[],n=0;for(let a=0;a<e.length;a++){let u=e[a];const o=r==null?u.key:String(r)+String(u.key!=null?u.key:a);u.type===Nr?(u.patchFlag&128&&n++,i=i.concat(kP(u.children,t,o))):(t||u.type!==Sa)&&i.push(o!=null?Ll(u,{key:o}):u)}if(n>1)for(let a=0;a<i.length;a++)i[a].patchFlag=-2;return i}function Er(e,t){return mr(e)?(()=>kn({name:e.name},t,{setup:e}))():e}const yh=e=>!!e.type.__asyncLoader;function Et(e){mr(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:i,delay:n=200,timeout:a,suspensible:u=!0,onError:o}=e;let f=null,p,v=0;const _=()=>(v++,f=null,y()),y=()=>{let S;return f||(S=f=t().catch(A=>{if(A=A instanceof Error?A:new Error(String(A)),o)return new Promise((L,I)=>{o(A,()=>L(_()),()=>I(A),v+1)});throw A}).then(A=>S!==f&&f?f:(A&&(A.__esModule||A[Symbol.toStringTag]==="Module")&&(A=A.default),p=A,A)))};return Er({name:"AsyncComponentWrapper",__asyncLoader:y,get __asyncResolved(){return p},setup(){const S=Yi;if(p)return()=>f0(p,S);const A=D=>{f=null,kp(D,S,13,!i)};if(u&&S.suspense||Ih)return y().then(D=>()=>f0(D,S)).catch(D=>(A(D),()=>i?er(i,{error:D}):null));const L=Kr(!1),I=Kr(),M=Kr(!!n);return n&&setTimeout(()=>{M.value=!1},n),a!=null&&setTimeout(()=>{if(!L.value&&!I.value){const D=new Error(`Async component timed out after ${a}ms.`);A(D),I.value=D}},a),y().then(()=>{L.value=!0,S.parent&&zp(S.parent.vnode)&&g_(S.parent.update)}).catch(D=>{A(D),I.value=D}),()=>{if(L.value&&p)return f0(p,S);if(I.value&&i)return er(i,{error:I.value});if(r&&!M.value)return er(r)}}})}function f0(e,t){const{ref:r,props:i,children:n,ce:a}=t.vnode,u=er(e,i,n);return u.ref=r,u.ce=a,delete t.vnode.ce,u}const zp=e=>e.type.__isKeepAlive;function iO(e,t){RP(e,"a",t)}function nO(e,t){RP(e,"da",t)}function RP(e,t,r=Yi){const i=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(x_(t,i,r),r){let n=r.parent;for(;n&&n.parent;)zp(n.parent.vnode)&&aO(i,t,r,n),n=n.parent}}function aO(e,t,r,i){const n=x_(t,e,i,!0);Op(()=>{Hb(i[t],n)},r)}function x_(e,t,r=Yi,i=!1){if(r){const n=r[e]||(r[e]=[]),a=t.__weh||(t.__weh=(...u)=>{if(r.isUnmounted)return;$h(),Mh(r);const o=Wa(t,r,e,u);return Ju(),Uh(),o});return i?n.unshift(a):n.push(a),a}}const Ls=e=>(t,r=Yi)=>(!Ih||e==="sp")&&x_(e,(...i)=>t(...i),r),oO=Ls("bm"),Kn=Ls("m"),sO=Ls("bu"),lO=Ls("u"),b_=Ls("bum"),Op=Ls("um"),uO=Ls("sp"),cO=Ls("rtg"),hO=Ls("rtc");function fO(e,t=Yi){x_("ec",e,t)}const zP="components";function qn(e,t){return pO(zP,e,!0,t)||e}const dO=Symbol.for("v-ndc");function pO(e,t,r=!0,i=!1){const n=vn||Yi;if(n){const a=n.type;if(e===zP){const o=HO(a,!1);if(o&&(o===t||o===Zo(t)||o===jb(Zo(t))))return a}const u=LT(n[e]||a[e],t)||LT(n.appContext[e],t);return!u&&i?a:u}}function LT(e,t){return e&&(e[t]||e[Zo(t)]||e[jb(Zo(t))])}function vo(e,t,r,i){let n;const a=r&&r[i];if(Tr(e)||Yn(e)){n=new Array(e.length);for(let u=0,o=e.length;u<o;u++)n[u]=t(e[u],u,void 0,a&&a[u])}else if(typeof e=="number"){n=new Array(e);for(let u=0;u<e;u++)n[u]=t(u+1,u,void 0,a&&a[u])}else if(ji(e))if(e[Symbol.iterator])n=Array.from(e,(u,o)=>t(u,o,void 0,a&&a[o]));else{const u=Object.keys(e);n=new Array(u.length);for(let o=0,f=u.length;o<f;o++){const p=u[o];n[o]=t(e[p],p,o,a&&a[o])}}else n=[];return r&&(r[i]=n),n}function ti(e,t,r={},i,n){if(vn.isCE||vn.parent&&yh(vn.parent)&&vn.parent.isCE)return t!=="default"&&(r.name=t),er("slot",r,i&&i());let a=e[t];a&&a._c&&(a._d=!1),lt();const u=a&&OP(a(r)),o=wi(Nr,{key:r.key||u&&u.key||`_${t}`},u||(i?i():[]),u&&e._===1?64:-2);return!n&&o.scopeId&&(o.slotScopeIds=[o.scopeId+"-s"]),a&&a._c&&(a._d=!0),o}function OP(e){return e.some(t=>Lg(t)?!(t.type===Sa||t.type===Nr&&!OP(t.children)):!0)?e:null}const vx=e=>e?WP(e)?S_(e)||e.proxy:vx(e.parent):null,Rd=kn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>vx(e.parent),$root:e=>vx(e.root),$emit:e=>e.emit,$options:e=>Xb(e),$forceUpdate:e=>e.f||(e.f=()=>g_(e.update)),$nextTick:e=>e.n||(e.n=Rp.bind(e.proxy)),$watch:e=>Q6.bind(e)}),d0=(e,t)=>e!==mi&&!e.__isScriptSetup&&Yr(e,t),mO={get({_:e},t){const{ctx:r,setupState:i,data:n,props:a,accessCache:u,type:o,appContext:f}=e;let p;if(t[0]!=="$"){const S=u[t];if(S!==void 0)switch(S){case 1:return i[t];case 2:return n[t];case 4:return r[t];case 3:return a[t]}else{if(d0(i,t))return u[t]=1,i[t];if(n!==mi&&Yr(n,t))return u[t]=2,n[t];if((p=e.propsOptions[0])&&Yr(p,t))return u[t]=3,a[t];if(r!==mi&&Yr(r,t))return u[t]=4,r[t];gx&&(u[t]=0)}}const v=Rd[t];let _,y;if(v)return t==="$attrs"&&la(e,"get",t),v(e);if((_=o.__cssModules)&&(_=_[t]))return _;if(r!==mi&&Yr(r,t))return u[t]=4,r[t];if(y=f.config.globalProperties,Yr(y,t))return y[t]},set({_:e},t,r){const{data:i,setupState:n,ctx:a}=e;return d0(n,t)?(n[t]=r,!0):i!==mi&&Yr(i,t)?(i[t]=r,!0):Yr(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:i,appContext:n,propsOptions:a}},u){let o;return!!r[u]||e!==mi&&Yr(e,u)||d0(t,u)||(o=a[0])&&Yr(o,u)||Yr(i,u)||Yr(Rd,u)||Yr(n.config.globalProperties,u)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:Yr(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function kT(e){return Tr(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let gx=!0;function vO(e){const t=Xb(e),r=e.proxy,i=e.ctx;gx=!1,t.beforeCreate&&RT(t.beforeCreate,e,"bc");const{data:n,computed:a,methods:u,watch:o,provide:f,inject:p,created:v,beforeMount:_,mounted:y,beforeUpdate:S,updated:A,activated:L,deactivated:I,beforeDestroy:M,beforeUnmount:D,destroyed:O,unmounted:N,render:q,renderTracked:Z,renderTriggered:Q,errorCaptured:j,serverPrefetch:ie,expose:ae,inheritAttrs:he,components:ue,directives:fe,filters:ye}=t;if(p&&gO(p,i,null),u)for(const it in u){const et=u[it];mr(et)&&(i[it]=et.bind(r))}if(n){const it=n.call(r,r);ji(it)&&(e.data=Gh(it))}if(gx=!0,a)for(const it in a){const et=a[it],Ct=mr(et)?et.bind(r,r):mr(et.get)?et.get.bind(r,r):qo,zt=!mr(et)&&mr(et.set)?et.set.bind(r):qo,tr=St({get:Ct,set:zt});Object.defineProperty(i,it,{enumerable:!0,configurable:!0,get:()=>tr.value,set:$t=>tr.value=$t})}if(o)for(const it in o)BP(o[it],i,r,it);if(f){const it=mr(f)?f.call(r):f;Reflect.ownKeys(it).forEach(et=>{Al(et,it[et])})}v&&RT(v,e,"c");function we(it,et){Tr(et)?et.forEach(Ct=>it(Ct.bind(r))):et&&it(et.bind(r))}if(we(oO,_),we(Kn,y),we(sO,S),we(lO,A),we(iO,L),we(nO,I),we(fO,j),we(hO,Z),we(cO,Q),we(b_,D),we(Op,N),we(uO,ie),Tr(ae))if(ae.length){const it=e.exposed||(e.exposed={});ae.forEach(et=>{Object.defineProperty(it,et,{get:()=>r[et],set:Ct=>r[et]=Ct})})}else e.exposed||(e.exposed={});q&&e.render===qo&&(e.render=q),he!=null&&(e.inheritAttrs=he),ue&&(e.components=ue),fe&&(e.directives=fe)}function gO(e,t,r=qo){Tr(e)&&(e=_x(e));for(const i in e){const n=e[i];let a;ji(n)?"default"in n?a=yi(n.from||i,n.default,!0):a=yi(n.from||i):a=yi(n),Ki(a)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):t[i]=a}}function RT(e,t,r){Wa(Tr(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,r)}function BP(e,t,r,i){const n=i.includes(".")?PP(r,i):()=>r[i];if(Yn(e)){const a=t[e];mr(a)&&Ln(n,a)}else if(mr(e))Ln(n,e.bind(r));else if(ji(e))if(Tr(e))e.forEach(a=>BP(a,t,r,i));else{const a=mr(e.handler)?e.handler.bind(r):t[e.handler];mr(a)&&Ln(n,a,e)}}function Xb(e){const t=e.type,{mixins:r,extends:i}=t,{mixins:n,optionsCache:a,config:{optionMergeStrategies:u}}=e.appContext,o=a.get(t);let f;return o?f=o:!n.length&&!r&&!i?f=t:(f={},n.length&&n.forEach(p=>Ig(f,p,u,!0)),Ig(f,t,u)),ji(t)&&a.set(t,f),f}function Ig(e,t,r,i=!1){const{mixins:n,extends:a}=t;a&&Ig(e,a,r,!0),n&&n.forEach(u=>Ig(e,u,r,!0));for(const u in t)if(!(i&&u==="expose")){const o=_O[u]||r&&r[u];e[u]=o?o(e[u],t[u]):t[u]}return e}const _O={data:zT,props:OT,emits:OT,methods:Sd,computed:Sd,beforeCreate:Un,created:Un,beforeMount:Un,mounted:Un,beforeUpdate:Un,updated:Un,beforeDestroy:Un,beforeUnmount:Un,destroyed:Un,unmounted:Un,activated:Un,deactivated:Un,errorCaptured:Un,serverPrefetch:Un,components:Sd,directives:Sd,watch:xO,provide:zT,inject:yO};function zT(e,t){return t?e?function(){return kn(mr(e)?e.call(this,this):e,mr(t)?t.call(this,this):t)}:t:e}function yO(e,t){return Sd(_x(e),_x(t))}function _x(e){if(Tr(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Un(e,t){return e?[...new Set([].concat(e,t))]:t}function Sd(e,t){return e?kn(Object.create(null),e,t):t}function OT(e,t){return e?Tr(e)&&Tr(t)?[...new Set([...e,...t])]:kn(Object.create(null),kT(e),kT(t??{})):t}function xO(e,t){if(!e)return t;if(!t)return e;const r=kn(Object.create(null),e);for(const i in t)r[i]=Un(e[i],t[i]);return r}function FP(){return{app:null,config:{isNativeTag:D6,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let bO=0;function wO(e,t){return function(i,n=null){mr(i)||(i=kn({},i)),n!=null&&!ji(n)&&(n=null);const a=FP(),u=new Set;let o=!1;const f=a.app={_uid:bO++,_component:i,_props:n,_container:null,_context:a,_instance:null,version:ZO,get config(){return a.config},set config(p){},use(p,...v){return u.has(p)||(p&&mr(p.install)?(u.add(p),p.install(f,...v)):mr(p)&&(u.add(p),p(f,...v))),f},mixin(p){return a.mixins.includes(p)||a.mixins.push(p),f},component(p,v){return v?(a.components[p]=v,f):a.components[p]},directive(p,v){return v?(a.directives[p]=v,f):a.directives[p]},mount(p,v,_){if(!o){const y=er(i,n);return y.appContext=a,v&&t?t(y,p):e(y,p,_),o=!0,f._container=p,p.__vue_app__=f,S_(y.component)||y.component.proxy}},unmount(){o&&(e(null,f._container),delete f._container.__vue_app__)},provide(p,v){return a.provides[p]=v,f},runWithContext(p){Pg=f;try{return p()}finally{Pg=null}}};return f}}let Pg=null;function Al(e,t){if(Yi){let r=Yi.provides;const i=Yi.parent&&Yi.parent.provides;i===r&&(r=Yi.provides=Object.create(i)),r[e]=t}}function yi(e,t,r=!1){const i=Yi||vn;if(i||Pg){const n=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:Pg._context.provides;if(n&&e in n)return n[e];if(arguments.length>1)return r&&mr(t)?t.call(i&&i.proxy):t}}function SO(e,t,r,i=!1){const n={},a={};cx(a,w_,1),e.propsDefaults=Object.create(null),NP(e,t,n,a);for(const u in e.propsOptions[0])u in n||(n[u]=void 0);r?e.props=i?n:x6(n):e.type.props?e.props=n:e.props=a,e.attrs=a}function TO(e,t,r,i){const{props:n,attrs:a,vnode:{patchFlag:u}}=e,o=Or(n),[f]=e.propsOptions;let p=!1;if((i||u>0)&&!(u&16)){if(u&8){const v=e.vnode.dynamicProps;for(let _=0;_<v.length;_++){let y=v[_];if(__(e.emitsOptions,y))continue;const S=t[y];if(f)if(Yr(a,y))S!==a[y]&&(a[y]=S,p=!0);else{const A=Zo(y);n[A]=yx(f,o,A,S,e,!1)}else S!==a[y]&&(a[y]=S,p=!0)}}}else{NP(e,t,n,a)&&(p=!0);let v;for(const _ in o)(!t||!Yr(t,_)&&((v=v_(_))===_||!Yr(t,v)))&&(f?r&&(r[_]!==void 0||r[v]!==void 0)&&(n[_]=yx(f,o,_,void 0,e,!0)):delete n[_]);if(a!==o)for(const _ in a)(!t||!Yr(t,_))&&(delete a[_],p=!0)}p&&Is(e,"set","$attrs")}function NP(e,t,r,i){const[n,a]=e.propsOptions;let u=!1,o;if(t)for(let f in t){if(kd(f))continue;const p=t[f];let v;n&&Yr(n,v=Zo(f))?!a||!a.includes(v)?r[v]=p:(o||(o={}))[v]=p:__(e.emitsOptions,f)||(!(f in i)||p!==i[f])&&(i[f]=p,u=!0)}if(a){const f=Or(r),p=o||mi;for(let v=0;v<a.length;v++){const _=a[v];r[_]=yx(n,f,_,p[_],e,!Yr(p,_))}}return u}function yx(e,t,r,i,n,a){const u=e[r];if(u!=null){const o=Yr(u,"default");if(o&&i===void 0){const f=u.default;if(u.type!==Function&&!u.skipFactory&&mr(f)){const{propsDefaults:p}=n;r in p?i=p[r]:(Mh(n),i=p[r]=f.call(null,t),Ju())}else i=f}u[0]&&(a&&!o?i=!1:u[1]&&(i===""||i===v_(r))&&(i=!0))}return i}function VP(e,t,r=!1){const i=t.propsCache,n=i.get(e);if(n)return n;const a=e.props,u={},o=[];let f=!1;if(!mr(e)){const v=_=>{f=!0;const[y,S]=VP(_,t,!0);kn(u,y),S&&o.push(...S)};!r&&t.mixins.length&&t.mixins.forEach(v),e.extends&&v(e.extends),e.mixins&&e.mixins.forEach(v)}if(!a&&!f)return ji(e)&&i.set(e,gh),gh;if(Tr(a))for(let v=0;v<a.length;v++){const _=Zo(a[v]);BT(_)&&(u[_]=mi)}else if(a)for(const v in a){const _=Zo(v);if(BT(_)){const y=a[v],S=u[_]=Tr(y)||mr(y)?{type:y}:kn({},y);if(S){const A=VT(Boolean,S.type),L=VT(String,S.type);S[0]=A>-1,S[1]=L<0||A<L,(A>-1||Yr(S,"default"))&&o.push(_)}}}const p=[u,o];return ji(e)&&i.set(e,p),p}function BT(e){return e[0]!=="$"}function FT(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function NT(e,t){return FT(e)===FT(t)}function VT(e,t){return Tr(t)?t.findIndex(r=>NT(r,e)):mr(t)&&NT(t,e)?0:-1}const $P=e=>e[0]==="_"||e==="$stable",Yb=e=>Tr(e)?e.map(ho):[ho(e)],EO=(e,t,r)=>{if(t._n)return t;const i=qi((...n)=>Yb(t(...n)),r);return i._c=!1,i},UP=(e,t,r)=>{const i=e._ctx;for(const n in e){if($P(n))continue;const a=e[n];if(mr(a))t[n]=EO(n,a,i);else if(a!=null){const u=Yb(a);t[n]=()=>u}}},GP=(e,t)=>{const r=Yb(t);e.slots.default=()=>r},CO=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=Or(t),cx(t,"_",r)):UP(t,e.slots={})}else e.slots={},t&&GP(e,t);cx(e.slots,w_,1)},AO=(e,t,r)=>{const{vnode:i,slots:n}=e;let a=!0,u=mi;if(i.shapeFlag&32){const o=t._;o?r&&o===1?a=!1:(kn(n,t),!r&&o===1&&delete n._):(a=!t.$stable,UP(t,n)),u=t}else t&&(GP(e,t),u={default:1});if(a)for(const o in n)!$P(o)&&!(o in u)&&delete n[o]};function Dg(e,t,r,i,n=!1){if(Tr(e)){e.forEach((y,S)=>Dg(y,t&&(Tr(t)?t[S]:t),r,i,n));return}if(yh(i)&&!n)return;const a=i.shapeFlag&4?S_(i.component)||i.component.proxy:i.el,u=n?null:a,{i:o,r:f}=e,p=t&&t.r,v=o.refs===mi?o.refs={}:o.refs,_=o.setupState;if(p!=null&&p!==f&&(Yn(p)?(v[p]=null,Yr(_,p)&&(_[p]=null)):Ki(p)&&(p.value=null)),mr(f))Cl(f,o,12,[u,v]);else{const y=Yn(f),S=Ki(f);if(y||S){const A=()=>{if(e.f){const L=y?Yr(_,f)?_[f]:v[f]:f.value;n?Tr(L)&&Hb(L,a):Tr(L)?L.includes(a)||L.push(a):y?(v[f]=[a],Yr(_,f)&&(_[f]=v[f])):(f.value=[a],e.k&&(v[e.k]=f.value))}else y?(v[f]=u,Yr(_,f)&&(_[f]=u)):S&&(f.value=u,e.k&&(v[e.k]=u))};u?(A.id=-1,na(A,r)):A()}}}let ol=!1;const cv=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",hv=e=>e.nodeType===8;function MO(e){const{mt:t,p:r,o:{patchProp:i,createText:n,nextSibling:a,parentNode:u,remove:o,insert:f,createComment:p}}=e,v=(M,D)=>{if(!D.hasChildNodes()){r(null,M,D),Cg(),D._vnode=M;return}ol=!1,_(D.firstChild,M,null,null,null),Cg(),D._vnode=M,ol&&console.error("Hydration completed but contains mismatches.")},_=(M,D,O,N,q,Z=!1)=>{const Q=hv(M)&&M.data==="[",j=()=>L(M,D,O,N,q,Q),{type:ie,ref:ae,shapeFlag:he,patchFlag:ue}=D;let fe=M.nodeType;D.el=M,ue===-2&&(Z=!1,D.dynamicChildren=null);let ye=null;switch(ie){case Ah:fe!==3?D.children===""?(f(D.el=n(""),u(M),M),ye=M):ye=j():(M.data!==D.children&&(ol=!0,M.data=D.children),ye=a(M));break;case Sa:fe!==8||Q?ye=j():ye=a(M);break;case zd:if(Q&&(M=a(M),fe=M.nodeType),fe===1||fe===3){ye=M;const He=!D.children.length;for(let we=0;we<D.staticCount;we++)He&&(D.children+=ye.nodeType===1?ye.outerHTML:ye.data),we===D.staticCount-1&&(D.anchor=ye),ye=a(ye);return Q?a(ye):ye}else j();break;case Nr:Q?ye=A(M,D,O,N,q,Z):ye=j();break;default:if(he&1)fe!==1||D.type.toLowerCase()!==M.tagName.toLowerCase()?ye=j():ye=y(M,D,O,N,q,Z);else if(he&6){D.slotScopeIds=q;const He=u(M);if(t(D,He,null,O,N,cv(He),Z),ye=Q?I(M):a(M),ye&&hv(ye)&&ye.data==="teleport end"&&(ye=a(ye)),yh(D)){let we;Q?(we=er(Nr),we.anchor=ye?ye.previousSibling:He.lastChild):we=M.nodeType===3?kl(""):er("div"),we.el=M,D.component.subTree=we}}else he&64?fe!==8?ye=j():ye=D.type.hydrate(M,D,O,N,q,Z,e,S):he&128&&(ye=D.type.hydrate(M,D,O,N,cv(u(M)),q,Z,e,_))}return ae!=null&&Dg(ae,null,N,D),ye},y=(M,D,O,N,q,Z)=>{Z=Z||!!D.dynamicChildren;const{type:Q,props:j,patchFlag:ie,shapeFlag:ae,dirs:he}=D,ue=Q==="input"&&he||Q==="option";if(ue||ie!==-1){if(he&&Fo(D,null,O,"created"),j)if(ue||!Z||ie&48)for(const ye in j)(ue&&ye.endsWith("value")||p_(ye)&&!kd(ye))&&i(M,ye,null,j[ye],!1,void 0,O);else j.onClick&&i(M,"onClick",null,j.onClick,!1,void 0,O);let fe;if((fe=j&&j.onVnodeBeforeMount)&&Ba(fe,O,D),he&&Fo(D,null,O,"beforeMount"),((fe=j&&j.onVnodeMounted)||he)&&IP(()=>{fe&&Ba(fe,O,D),he&&Fo(D,null,O,"mounted")},N),ae&16&&!(j&&(j.innerHTML||j.textContent))){let ye=S(M.firstChild,D,M,O,N,q,Z);for(;ye;){ol=!0;const He=ye;ye=ye.nextSibling,o(He)}}else ae&8&&M.textContent!==D.children&&(ol=!0,M.textContent=D.children)}return M.nextSibling},S=(M,D,O,N,q,Z,Q)=>{Q=Q||!!D.dynamicChildren;const j=D.children,ie=j.length;for(let ae=0;ae<ie;ae++){const he=Q?j[ae]:j[ae]=ho(j[ae]);if(M)M=_(M,he,N,q,Z,Q);else{if(he.type===Ah&&!he.children)continue;ol=!0,r(null,he,O,null,N,q,cv(O),Z)}}return M},A=(M,D,O,N,q,Z)=>{const{slotScopeIds:Q}=D;Q&&(q=q?q.concat(Q):Q);const j=u(M),ie=S(a(M),D,j,O,N,q,Z);return ie&&hv(ie)&&ie.data==="]"?a(D.anchor=ie):(ol=!0,f(D.anchor=p("]"),j,ie),ie)},L=(M,D,O,N,q,Z)=>{if(ol=!0,D.el=null,Z){const ie=I(M);for(;;){const ae=a(M);if(ae&&ae!==ie)o(ae);else break}}const Q=a(M),j=u(M);return o(M),r(null,D,j,Q,O,N,cv(j),q),Q},I=M=>{let D=0;for(;M;)if(M=a(M),M&&hv(M)&&(M.data==="["&&D++,M.data==="]")){if(D===0)return a(M);D--}return M};return[v,_]}const na=IP;function IO(e){return PO(e,MO)}function PO(e,t){const r=hx();r.__VUE__=!0;const{insert:i,remove:n,patchProp:a,createElement:u,createText:o,createComment:f,setText:p,setElementText:v,parentNode:_,nextSibling:y,setScopeId:S=qo,insertStaticContent:A}=e,L=(se,me,Ae,Ve=null,We=null,Ke=null,dt=!1,qe=null,at=!!me.dynamicChildren)=>{if(se===me)return;se&&!Gu(se,me)&&(Ve=Ge(se),$t(se,We,Ke,!0),se=null),me.patchFlag===-2&&(at=!1,me.dynamicChildren=null);const{type:Qe,ref:Bt,shapeFlag:Lt}=me;switch(Qe){case Ah:I(se,me,Ae,Ve);break;case Sa:M(se,me,Ae,Ve);break;case zd:se==null&&D(me,Ae,Ve,dt);break;case Nr:ue(se,me,Ae,Ve,We,Ke,dt,qe,at);break;default:Lt&1?q(se,me,Ae,Ve,We,Ke,dt,qe,at):Lt&6?fe(se,me,Ae,Ve,We,Ke,dt,qe,at):(Lt&64||Lt&128)&&Qe.process(se,me,Ae,Ve,We,Ke,dt,qe,at,Ye)}Bt!=null&&We&&Dg(Bt,se&&se.ref,Ke,me||se,!me)},I=(se,me,Ae,Ve)=>{if(se==null)i(me.el=o(me.children),Ae,Ve);else{const We=me.el=se.el;me.children!==se.children&&p(We,me.children)}},M=(se,me,Ae,Ve)=>{se==null?i(me.el=f(me.children||""),Ae,Ve):me.el=se.el},D=(se,me,Ae,Ve)=>{[se.el,se.anchor]=A(se.children,me,Ae,Ve,se.el,se.anchor)},O=({el:se,anchor:me},Ae,Ve)=>{let We;for(;se&&se!==me;)We=y(se),i(se,Ae,Ve),se=We;i(me,Ae,Ve)},N=({el:se,anchor:me})=>{let Ae;for(;se&&se!==me;)Ae=y(se),n(se),se=Ae;n(me)},q=(se,me,Ae,Ve,We,Ke,dt,qe,at)=>{dt=dt||me.type==="svg",se==null?Z(me,Ae,Ve,We,Ke,dt,qe,at):ie(se,me,We,Ke,dt,qe,at)},Z=(se,me,Ae,Ve,We,Ke,dt,qe)=>{let at,Qe;const{type:Bt,props:Lt,shapeFlag:Ot,transition:Ht,dirs:ir}=se;if(at=se.el=u(se.type,Ke,Lt&&Lt.is,Lt),Ot&8?v(at,se.children):Ot&16&&j(se.children,at,null,Ve,We,Ke&&Bt!=="foreignObject",dt,qe),ir&&Fo(se,null,Ve,"created"),Q(at,se,se.scopeId,dt,Ve),Lt){for(const ke in Lt)ke!=="value"&&!kd(ke)&&a(at,ke,null,Lt[ke],Ke,se.children,Ve,We,dr);"value"in Lt&&a(at,"value",null,Lt.value),(Qe=Lt.onVnodeBeforeMount)&&Ba(Qe,Ve,se)}ir&&Fo(se,null,Ve,"beforeMount");const vr=(!We||We&&!We.pendingBranch)&&Ht&&!Ht.persisted;vr&&Ht.beforeEnter(at),i(at,me,Ae),((Qe=Lt&&Lt.onVnodeMounted)||vr||ir)&&na(()=>{Qe&&Ba(Qe,Ve,se),vr&&Ht.enter(at),ir&&Fo(se,null,Ve,"mounted")},We)},Q=(se,me,Ae,Ve,We)=>{if(Ae&&S(se,Ae),Ve)for(let Ke=0;Ke<Ve.length;Ke++)S(se,Ve[Ke]);if(We){let Ke=We.subTree;if(me===Ke){const dt=We.vnode;Q(se,dt,dt.scopeId,dt.slotScopeIds,We.parent)}}},j=(se,me,Ae,Ve,We,Ke,dt,qe,at=0)=>{for(let Qe=at;Qe<se.length;Qe++){const Bt=se[Qe]=qe?gl(se[Qe]):ho(se[Qe]);L(null,Bt,me,Ae,Ve,We,Ke,dt,qe)}},ie=(se,me,Ae,Ve,We,Ke,dt)=>{const qe=me.el=se.el;let{patchFlag:at,dynamicChildren:Qe,dirs:Bt}=me;at|=se.patchFlag&16;const Lt=se.props||mi,Ot=me.props||mi;let Ht;Ae&&du(Ae,!1),(Ht=Ot.onVnodeBeforeUpdate)&&Ba(Ht,Ae,me,se),Bt&&Fo(me,se,Ae,"beforeUpdate"),Ae&&du(Ae,!0);const ir=We&&me.type!=="foreignObject";if(Qe?ae(se.dynamicChildren,Qe,qe,Ae,Ve,ir,Ke):dt||et(se,me,qe,null,Ae,Ve,ir,Ke,!1),at>0){if(at&16)he(qe,me,Lt,Ot,Ae,Ve,We);else if(at&2&&Lt.class!==Ot.class&&a(qe,"class",null,Ot.class,We),at&4&&a(qe,"style",Lt.style,Ot.style,We),at&8){const vr=me.dynamicProps;for(let ke=0;ke<vr.length;ke++){const tt=vr[ke],Ii=Lt[tt],Oi=Ot[tt];(Oi!==Ii||tt==="value")&&a(qe,tt,Ii,Oi,We,se.children,Ae,Ve,dr)}}at&1&&se.children!==me.children&&v(qe,me.children)}else!dt&&Qe==null&&he(qe,me,Lt,Ot,Ae,Ve,We);((Ht=Ot.onVnodeUpdated)||Bt)&&na(()=>{Ht&&Ba(Ht,Ae,me,se),Bt&&Fo(me,se,Ae,"updated")},Ve)},ae=(se,me,Ae,Ve,We,Ke,dt)=>{for(let qe=0;qe<me.length;qe++){const at=se[qe],Qe=me[qe],Bt=at.el&&(at.type===Nr||!Gu(at,Qe)||at.shapeFlag&70)?_(at.el):Ae;L(at,Qe,Bt,null,Ve,We,Ke,dt,!0)}},he=(se,me,Ae,Ve,We,Ke,dt)=>{if(Ae!==Ve){if(Ae!==mi)for(const qe in Ae)!kd(qe)&&!(qe in Ve)&&a(se,qe,Ae[qe],null,dt,me.children,We,Ke,dr);for(const qe in Ve){if(kd(qe))continue;const at=Ve[qe],Qe=Ae[qe];at!==Qe&&qe!=="value"&&a(se,qe,Qe,at,dt,me.children,We,Ke,dr)}"value"in Ve&&a(se,"value",Ae.value,Ve.value)}},ue=(se,me,Ae,Ve,We,Ke,dt,qe,at)=>{const Qe=me.el=se?se.el:o(""),Bt=me.anchor=se?se.anchor:o("");let{patchFlag:Lt,dynamicChildren:Ot,slotScopeIds:Ht}=me;Ht&&(qe=qe?qe.concat(Ht):Ht),se==null?(i(Qe,Ae,Ve),i(Bt,Ae,Ve),j(me.children,Ae,Bt,We,Ke,dt,qe,at)):Lt>0&&Lt&64&&Ot&&se.dynamicChildren?(ae(se.dynamicChildren,Ot,Ae,We,Ke,dt,qe),(me.key!=null||We&&me===We.subTree)&&HP(se,me,!0)):et(se,me,Ae,Bt,We,Ke,dt,qe,at)},fe=(se,me,Ae,Ve,We,Ke,dt,qe,at)=>{me.slotScopeIds=qe,se==null?me.shapeFlag&512?We.ctx.activate(me,Ae,Ve,dt,at):ye(me,Ae,Ve,We,Ke,dt,at):He(se,me,at)},ye=(se,me,Ae,Ve,We,Ke,dt)=>{const qe=se.component=NO(se,Ve,We);if(zp(se)&&(qe.ctx.renderer=Ye),VO(qe),qe.asyncDep){if(We&&We.registerDep(qe,we),!se.el){const at=qe.subTree=er(Sa);M(null,at,me,Ae)}return}we(qe,se,me,Ae,We,Ke,dt)},He=(se,me,Ae)=>{const Ve=me.component=se.component;if(Y6(se,me,Ae))if(Ve.asyncDep&&!Ve.asyncResolved){it(Ve,me,Ae);return}else Ve.next=me,H6(Ve.update),Ve.update();else me.el=se.el,Ve.vnode=me},we=(se,me,Ae,Ve,We,Ke,dt)=>{const qe=()=>{if(se.isMounted){let{next:Bt,bu:Lt,u:Ot,parent:Ht,vnode:ir}=se,vr=Bt,ke;du(se,!1),Bt?(Bt.el=ir.el,it(se,Bt,dt)):Bt=ir,Lt&&u0(Lt),(ke=Bt.props&&Bt.props.onVnodeBeforeUpdate)&&Ba(ke,Ht,Bt,ir),du(se,!0);const tt=c0(se),Ii=se.subTree;se.subTree=tt,L(Ii,tt,_(Ii.el),Ge(Ii),se,We,Ke),Bt.el=tt.el,vr===null&&K6(se,tt.el),Ot&&na(Ot,We),(ke=Bt.props&&Bt.props.onVnodeUpdated)&&na(()=>Ba(ke,Ht,Bt,ir),We)}else{let Bt;const{el:Lt,props:Ot}=me,{bm:Ht,m:ir,parent:vr}=se,ke=yh(me);if(du(se,!1),Ht&&u0(Ht),!ke&&(Bt=Ot&&Ot.onVnodeBeforeMount)&&Ba(Bt,vr,me),du(se,!0),Lt&&ut){const tt=()=>{se.subTree=c0(se),ut(Lt,se.subTree,se,We,null)};ke?me.type.__asyncLoader().then(()=>!se.isUnmounted&&tt()):tt()}else{const tt=se.subTree=c0(se);L(null,tt,Ae,Ve,se,We,Ke),me.el=tt.el}if(ir&&na(ir,We),!ke&&(Bt=Ot&&Ot.onVnodeMounted)){const tt=me;na(()=>Ba(Bt,vr,tt),We)}(me.shapeFlag&256||vr&&yh(vr.vnode)&&vr.vnode.shapeFlag&256)&&se.a&&na(se.a,We),se.isMounted=!0,me=Ae=Ve=null}},at=se.effect=new Ob(qe,()=>g_(Qe),se.scope),Qe=se.update=()=>at.run();Qe.id=se.uid,du(se,!0),Qe()},it=(se,me,Ae)=>{me.component=se;const Ve=se.vnode.props;se.vnode=me,se.next=null,TO(se,me.props,Ve,Ae),AO(se,me.children,Ae),$h(),IT(),Uh()},et=(se,me,Ae,Ve,We,Ke,dt,qe,at=!1)=>{const Qe=se&&se.children,Bt=se?se.shapeFlag:0,Lt=me.children,{patchFlag:Ot,shapeFlag:Ht}=me;if(Ot>0){if(Ot&128){zt(Qe,Lt,Ae,Ve,We,Ke,dt,qe,at);return}else if(Ot&256){Ct(Qe,Lt,Ae,Ve,We,Ke,dt,qe,at);return}}Ht&8?(Bt&16&&dr(Qe,We,Ke),Lt!==Qe&&v(Ae,Lt)):Bt&16?Ht&16?zt(Qe,Lt,Ae,Ve,We,Ke,dt,qe,at):dr(Qe,We,Ke,!0):(Bt&8&&v(Ae,""),Ht&16&&j(Lt,Ae,Ve,We,Ke,dt,qe,at))},Ct=(se,me,Ae,Ve,We,Ke,dt,qe,at)=>{se=se||gh,me=me||gh;const Qe=se.length,Bt=me.length,Lt=Math.min(Qe,Bt);let Ot;for(Ot=0;Ot<Lt;Ot++){const Ht=me[Ot]=at?gl(me[Ot]):ho(me[Ot]);L(se[Ot],Ht,Ae,null,We,Ke,dt,qe,at)}Qe>Bt?dr(se,We,Ke,!0,!1,Lt):j(me,Ae,Ve,We,Ke,dt,qe,at,Lt)},zt=(se,me,Ae,Ve,We,Ke,dt,qe,at)=>{let Qe=0;const Bt=me.length;let Lt=se.length-1,Ot=Bt-1;for(;Qe<=Lt&&Qe<=Ot;){const Ht=se[Qe],ir=me[Qe]=at?gl(me[Qe]):ho(me[Qe]);if(Gu(Ht,ir))L(Ht,ir,Ae,null,We,Ke,dt,qe,at);else break;Qe++}for(;Qe<=Lt&&Qe<=Ot;){const Ht=se[Lt],ir=me[Ot]=at?gl(me[Ot]):ho(me[Ot]);if(Gu(Ht,ir))L(Ht,ir,Ae,null,We,Ke,dt,qe,at);else break;Lt--,Ot--}if(Qe>Lt){if(Qe<=Ot){const Ht=Ot+1,ir=Ht<Bt?me[Ht].el:Ve;for(;Qe<=Ot;)L(null,me[Qe]=at?gl(me[Qe]):ho(me[Qe]),Ae,ir,We,Ke,dt,qe,at),Qe++}}else if(Qe>Ot)for(;Qe<=Lt;)$t(se[Qe],We,Ke,!0),Qe++;else{const Ht=Qe,ir=Qe,vr=new Map;for(Qe=ir;Qe<=Ot;Qe++){const Wr=me[Qe]=at?gl(me[Qe]):ho(me[Qe]);Wr.key!=null&&vr.set(Wr.key,Qe)}let ke,tt=0;const Ii=Ot-ir+1;let Oi=!1,hr=0;const Bi=new Array(Ii);for(Qe=0;Qe<Ii;Qe++)Bi[Qe]=0;for(Qe=Ht;Qe<=Lt;Qe++){const Wr=se[Qe];if(tt>=Ii){$t(Wr,We,Ke,!0);continue}let Pi;if(Wr.key!=null)Pi=vr.get(Wr.key);else for(ke=ir;ke<=Ot;ke++)if(Bi[ke-ir]===0&&Gu(Wr,me[ke])){Pi=ke;break}Pi===void 0?$t(Wr,We,Ke,!0):(Bi[Pi-ir]=Qe+1,Pi>=hr?hr=Pi:Oi=!0,L(Wr,me[Pi],Ae,null,We,Ke,dt,qe,at),tt++)}const en=Oi?DO(Bi):gh;for(ke=en.length-1,Qe=Ii-1;Qe>=0;Qe--){const Wr=ir+Qe,Pi=me[Wr],st=Wr+1<Bt?me[Wr+1].el:Ve;Bi[Qe]===0?L(null,Pi,Ae,st,We,Ke,dt,qe,at):Oi&&(ke<0||Qe!==en[ke]?tr(Pi,Ae,st,2):ke--)}}},tr=(se,me,Ae,Ve,We=null)=>{const{el:Ke,type:dt,transition:qe,children:at,shapeFlag:Qe}=se;if(Qe&6){tr(se.component.subTree,me,Ae,Ve);return}if(Qe&128){se.suspense.move(me,Ae,Ve);return}if(Qe&64){dt.move(se,me,Ae,Ye);return}if(dt===Nr){i(Ke,me,Ae);for(let Lt=0;Lt<at.length;Lt++)tr(at[Lt],me,Ae,Ve);i(se.anchor,me,Ae);return}if(dt===zd){O(se,me,Ae);return}if(Ve!==2&&Qe&1&&qe)if(Ve===0)qe.beforeEnter(Ke),i(Ke,me,Ae),na(()=>qe.enter(Ke),We);else{const{leave:Lt,delayLeave:Ot,afterLeave:Ht}=qe,ir=()=>i(Ke,me,Ae),vr=()=>{Lt(Ke,()=>{ir(),Ht&&Ht()})};Ot?Ot(Ke,ir,vr):vr()}else i(Ke,me,Ae)},$t=(se,me,Ae,Ve=!1,We=!1)=>{const{type:Ke,props:dt,ref:qe,children:at,dynamicChildren:Qe,shapeFlag:Bt,patchFlag:Lt,dirs:Ot}=se;if(qe!=null&&Dg(qe,null,Ae,se,!0),Bt&256){me.ctx.deactivate(se);return}const Ht=Bt&1&&Ot,ir=!yh(se);let vr;if(ir&&(vr=dt&&dt.onVnodeBeforeUnmount)&&Ba(vr,me,se),Bt&6)Cr(se.component,Ae,Ve);else{if(Bt&128){se.suspense.unmount(Ae,Ve);return}Ht&&Fo(se,null,me,"beforeUnmount"),Bt&64?se.type.remove(se,me,Ae,We,Ye,Ve):Qe&&(Ke!==Nr||Lt>0&&Lt&64)?dr(Qe,me,Ae,!1,!0):(Ke===Nr&&Lt&384||!We&&Bt&16)&&dr(at,me,Ae),Ve&&Lr(se)}(ir&&(vr=dt&&dt.onVnodeUnmounted)||Ht)&&na(()=>{vr&&Ba(vr,me,se),Ht&&Fo(se,null,me,"unmounted")},Ae)},Lr=se=>{const{type:me,el:Ae,anchor:Ve,transition:We}=se;if(me===Nr){Ir(Ae,Ve);return}if(me===zd){N(se);return}const Ke=()=>{n(Ae),We&&!We.persisted&&We.afterLeave&&We.afterLeave()};if(se.shapeFlag&1&&We&&!We.persisted){const{leave:dt,delayLeave:qe}=We,at=()=>dt(Ae,Ke);qe?qe(se.el,Ke,at):at()}else Ke()},Ir=(se,me)=>{let Ae;for(;se!==me;)Ae=y(se),n(se),se=Ae;n(me)},Cr=(se,me,Ae)=>{const{bum:Ve,scope:We,update:Ke,subTree:dt,um:qe}=se;Ve&&u0(Ve),We.stop(),Ke&&(Ke.active=!1,$t(dt,se,me,Ae)),qe&&na(qe,me),na(()=>{se.isUnmounted=!0},me),me&&me.pendingBranch&&!me.isUnmounted&&se.asyncDep&&!se.asyncResolved&&se.suspenseId===me.pendingId&&(me.deps--,me.deps===0&&me.resolve())},dr=(se,me,Ae,Ve=!1,We=!1,Ke=0)=>{for(let dt=Ke;dt<se.length;dt++)$t(se[dt],me,Ae,Ve,We)},Ge=se=>se.shapeFlag&6?Ge(se.component.subTree):se.shapeFlag&128?se.suspense.next():y(se.anchor||se.el),nt=(se,me,Ae)=>{se==null?me._vnode&&$t(me._vnode,null,null,!0):L(me._vnode||null,se,me,null,null,null,Ae),IT(),Cg(),me._vnode=se},Ye={p:L,um:$t,m:tr,r:Lr,mt:ye,mc:j,pc:et,pbc:ae,n:Ge,o:e};let ft,ut;return t&&([ft,ut]=t(Ye)),{render:nt,hydrate:ft,createApp:wO(nt,ft)}}function du({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function HP(e,t,r=!1){const i=e.children,n=t.children;if(Tr(i)&&Tr(n))for(let a=0;a<i.length;a++){const u=i[a];let o=n[a];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[a]=gl(n[a]),o.el=u.el),r||HP(u,o)),o.type===Ah&&(o.el=u.el)}}function DO(e){const t=e.slice(),r=[0];let i,n,a,u,o;const f=e.length;for(i=0;i<f;i++){const p=e[i];if(p!==0){if(n=r[r.length-1],e[n]<p){t[i]=n,r.push(i);continue}for(a=0,u=r.length-1;a<u;)o=a+u>>1,e[r[o]]<p?a=o+1:u=o;p<e[r[a]]&&(a>0&&(t[i]=r[a-1]),r[a]=i)}}for(a=r.length,u=r[a-1];a-- >0;)r[a]=u,u=t[u];return r}const LO=e=>e.__isTeleport,Nr=Symbol.for("v-fgt"),Ah=Symbol.for("v-txt"),Sa=Symbol.for("v-cmt"),zd=Symbol.for("v-stc"),Od=[];let po=null;function lt(e=!1){Od.push(po=e?null:[])}function kO(){Od.pop(),po=Od[Od.length-1]||null}let rp=1;function $T(e){rp+=e}function qP(e){return e.dynamicChildren=rp>0?po||gh:null,kO(),rp>0&&po&&po.push(e),e}function Rt(e,t,r,i,n,a){return qP(rr(e,t,r,i,n,a,!0))}function wi(e,t,r,i,n){return qP(er(e,t,r,i,n,!0))}function Lg(e){return e?e.__v_isVNode===!0:!1}function Gu(e,t){return e.type===t.type&&e.key===t.key}const w_="__vInternal",jP=({key:e})=>e??null,ng=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?Yn(e)||Ki(e)||mr(e)?{i:vn,r:e,k:t,f:!!r}:e:null);function rr(e,t=null,r=null,i=0,n=null,a=e===Nr?0:1,u=!1,o=!1){const f={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&jP(t),ref:t&&ng(t),scopeId:y_,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:vn};return o?(Kb(f,r),a&128&&e.normalize(f)):r&&(f.shapeFlag|=Yn(r)?8:16),rp>0&&!u&&po&&(f.patchFlag>0||a&6)&&f.patchFlag!==32&&po.push(f),f}const er=RO;function RO(e,t=null,r=null,i=0,n=null,a=!1){if((!e||e===dO)&&(e=Sa),Lg(e)){const o=Ll(e,t,!0);return r&&Kb(o,r),rp>0&&!a&&po&&(o.shapeFlag&6?po[po.indexOf(e)]=o:po.push(o)),o.patchFlag|=-2,o}if(qO(e)&&(e=e.__vccOpts),t){t=zO(t);let{class:o,style:f}=t;o&&!Yn(o)&&(t.class=gn(o)),ji(f)&&(hP(f)&&!Tr(f)&&(f=kn({},f)),t.style=Hh(f))}const u=Yn(e)?1:J6(e)?128:LO(e)?64:ji(e)?4:mr(e)?2:0;return rr(e,t,r,i,n,u,a,!0)}function zO(e){return e?hP(e)||w_ in e?kn({},e):e:null}function Ll(e,t,r=!1){const{props:i,ref:n,patchFlag:a,children:u}=e,o=t?kg(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:o,key:o&&jP(o),ref:t&&t.ref?r&&n?Tr(n)?n.concat(ng(t)):[n,ng(t)]:ng(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Nr?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Ll(e.ssContent),ssFallback:e.ssFallback&&Ll(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function kl(e=" ",t=0){return er(Ah,null,e,t)}function OO(e,t){const r=er(zd,null,e);return r.staticCount=t,r}function di(e="",t=!1){return t?(lt(),wi(Sa,null,e)):er(Sa,null,e)}function ho(e){return e==null||typeof e=="boolean"?er(Sa):Tr(e)?er(Nr,null,e.slice()):typeof e=="object"?gl(e):er(Ah,null,String(e))}function gl(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Ll(e)}function Kb(e,t){let r=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Tr(t))r=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),Kb(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!(w_ in t)?t._ctx=vn:n===3&&vn&&(vn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else mr(t)?(t={default:t,_ctx:vn},r=32):(t=String(t),i&64?(r=16,t=[kl(t)]):r=8);e.children=t,e.shapeFlag|=r}function kg(...e){const t={};for(let r=0;r<e.length;r++){const i=e[r];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=gn([t.class,i.class]));else if(n==="style")t.style=Hh([t.style,i.style]);else if(p_(n)){const a=t[n],u=i[n];u&&a!==u&&!(Tr(a)&&a.includes(u))&&(t[n]=a?[].concat(a,u):u)}else n!==""&&(t[n]=i[n])}return t}function Ba(e,t,r,i=null){Wa(e,t,7,[r,i])}const BO=FP();let FO=0;function NO(e,t,r){const i=e.type,n=(t?t.appContext:e.appContext)||BO,a={uid:FO++,vnode:e,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new Hz(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:VP(i,n),emitsOptions:CP(i,n),emit:null,emitted:null,propsDefaults:mi,inheritAttrs:i.inheritAttrs,ctx:mi,data:mi,props:mi,attrs:mi,slots:mi,refs:mi,setupState:mi,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=W6.bind(null,a),e.ce&&e.ce(a),a}let Yi=null;const Jb=()=>Yi||vn;let Qb,Gc,UT="__VUE_INSTANCE_SETTERS__";(Gc=hx()[UT])||(Gc=hx()[UT]=[]),Gc.push(e=>Yi=e),Qb=e=>{Gc.length>1?Gc.forEach(t=>t(e)):Gc[0](e)};const Mh=e=>{Qb(e),e.scope.on()},Ju=()=>{Yi&&Yi.scope.off(),Qb(null)};function WP(e){return e.vnode.shapeFlag&4}let Ih=!1;function VO(e,t=!1){Ih=t;const{props:r,children:i}=e.vnode,n=WP(e);SO(e,r,n,t),CO(e,i);const a=n?$O(e,t):void 0;return Ih=!1,a}function $O(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=fP(new Proxy(e.ctx,mO));const{setup:i}=r;if(i){const n=e.setupContext=i.length>1?GO(e):null;Mh(e),$h();const a=Cl(i,e,0,[e.props,n]);if(Uh(),Ju(),yP(a)){if(a.then(Ju,Ju),t)return a.then(u=>{GT(e,u,t)}).catch(u=>{kp(u,e,0)});e.asyncDep=a}else GT(e,a,t)}else ZP(e,t)}function GT(e,t,r){mr(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ji(t)&&(e.setupState=pP(t)),ZP(e,r)}let HT;function ZP(e,t,r){const i=e.type;if(!e.render){if(!t&&HT&&!i.render){const n=i.template||Xb(e).template;if(n){const{isCustomElement:a,compilerOptions:u}=e.appContext.config,{delimiters:o,compilerOptions:f}=i,p=kn(kn({isCustomElement:a,delimiters:o},u),f);i.render=HT(n,p)}}e.render=i.render||qo}Mh(e),$h(),vO(e),Uh(),Ju()}function UO(e){return e.attrsProxy||(e.attrsProxy=new Proxy(e.attrs,{get(t,r){return la(e,"get","$attrs"),t[r]}}))}function GO(e){const t=r=>{e.exposed=r||{}};return{get attrs(){return UO(e)},slots:e.slots,emit:e.emit,expose:t}}function S_(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(pP(fP(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in Rd)return Rd[r](e)},has(t,r){return r in t||r in Rd}}))}function HO(e,t=!0){return mr(e)?e.displayName||e.name:e.name||t&&e.__name}function qO(e){return mr(e)&&"__vccOpts"in e}const St=(e,t)=>I6(e,t,Ih);function Sr(e,t,r){const i=arguments.length;return i===2?ji(t)&&!Tr(t)?Lg(t)?er(e,null,[t]):er(e,t):er(e,null,t):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&Lg(r)&&(r=[r]),er(e,t,r))}const jO=Symbol.for("v-scx"),WO=()=>yi(jO),ZO="3.3.2";function XO(e,t){const r=Object.create(null),i=e.split(",");for(let n=0;n<i.length;n++)r[i[n]]=!0;return t?n=>!!r[n.toLowerCase()]:n=>!!r[n]}const YO=/^on[^a-z]/,KO=e=>YO.test(e),JO=e=>e.startsWith("onUpdate:"),ew=Object.assign,T_=Array.isArray,QO=e=>typeof e=="function",ip=e=>typeof e=="string",eB=e=>e!==null&&typeof e=="object",XP=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},tB=/\B([A-Z])/g,tw=XP(e=>e.replace(tB,"-$1").toLowerCase()),rB=XP(e=>e.charAt(0).toUpperCase()+e.slice(1)),iB=e=>{const t=ip(e)?Number(e):NaN;return isNaN(t)?e:t},nB="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",aB=XO(nB);function YP(e){return!!e||e===""}const oB="http://www.w3.org/2000/svg",Hu=typeof document<"u"?document:null,qT=Hu&&Hu.createElement("template"),sB={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,i)=>{const n=t?Hu.createElementNS(oB,e):Hu.createElement(e,r?{is:r}:void 0);return e==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:e=>Hu.createTextNode(e),createComment:e=>Hu.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Hu.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,i,n,a){const u=r?r.previousSibling:t.lastChild;if(n&&(n===a||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),r),!(n===a||!(n=n.nextSibling)););else{qT.innerHTML=i?`<svg>${e}</svg>`:e;const o=qT.content;if(i){const f=o.firstChild;for(;f.firstChild;)o.appendChild(f.firstChild);o.removeChild(f)}t.insertBefore(o,r)}return[u?u.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function lB(e,t,r){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function uB(e,t,r){const i=e.style,n=ip(r);if(r&&!n){if(t&&!ip(t))for(const a in t)r[a]==null&&xx(i,a,"");for(const a in r)xx(i,a,r[a])}else{const a=i.display;n?t!==r&&(i.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=a)}}const jT=/\s*!important$/;function xx(e,t,r){if(T_(r))r.forEach(i=>xx(e,t,i));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const i=cB(e,t);jT.test(r)?e.setProperty(tw(i),r.replace(jT,""),"important"):e[i]=r}}const WT=["Webkit","Moz","ms"],p0={};function cB(e,t){const r=p0[t];if(r)return r;let i=Zo(t);if(i!=="filter"&&i in e)return p0[t]=i;i=rB(i);for(let n=0;n<WT.length;n++){const a=WT[n]+i;if(a in e)return p0[t]=a}return t}const ZT="http://www.w3.org/1999/xlink";function hB(e,t,r,i,n){if(i&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(ZT,t.slice(6,t.length)):e.setAttributeNS(ZT,t,r);else{const a=aB(t);r==null||a&&!YP(r)?e.removeAttribute(t):e.setAttribute(t,a?"":r)}}function fB(e,t,r,i,n,a,u){if(t==="innerHTML"||t==="textContent"){i&&u(i,n,a),e[t]=r??"";return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){e._value=r;const p=o==="OPTION"?e.getAttribute("value"):e.value,v=r??"";p!==v&&(e.value=v),r==null&&e.removeAttribute(t);return}let f=!1;if(r===""||r==null){const p=typeof e[t];p==="boolean"?r=YP(r):r==null&&p==="string"?(r="",f=!0):p==="number"&&(r=0,f=!0)}try{e[t]=r}catch{}f&&e.removeAttribute(t)}function dB(e,t,r,i){e.addEventListener(t,r,i)}function pB(e,t,r,i){e.removeEventListener(t,r,i)}function mB(e,t,r,i,n=null){const a=e._vei||(e._vei={}),u=a[t];if(i&&u)u.value=i;else{const[o,f]=vB(t);if(i){const p=a[t]=yB(i,n);dB(e,o,p,f)}else u&&(pB(e,o,u,f),a[t]=void 0)}}const XT=/(?:Once|Passive|Capture)$/;function vB(e){let t;if(XT.test(e)){t={};let i;for(;i=e.match(XT);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):tw(e.slice(2)),t]}let m0=0;const gB=Promise.resolve(),_B=()=>m0||(gB.then(()=>m0=0),m0=Date.now());function yB(e,t){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;Wa(xB(i,r.value),t,5,[i])};return r.value=e,r.attached=_B(),r}function xB(e,t){if(T_(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const YT=/^on[a-z]/,bB=(e,t,r,i,n=!1,a,u,o,f)=>{t==="class"?lB(e,i,n):t==="style"?uB(e,r,i):KO(t)?JO(t)||mB(e,t,r,i,u):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):wB(e,t,i,n))?fB(e,t,i,a,u,o,f):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),hB(e,t,i,n))};function wB(e,t,r,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&YT.test(t)&&QO(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||YT.test(t)&&ip(r)?!1:t in e}const sl="transition",Jf="animation",Bp=(e,{slots:t})=>Sr(rO,SB(e),t);Bp.displayName="Transition";const KP={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Bp.props=ew({},DP,KP);const pu=(e,t=[])=>{T_(e)?e.forEach(r=>r(...t)):e&&e(...t)},KT=e=>e?T_(e)?e.some(t=>t.length>1):e.length>1:!1;function SB(e){const t={};for(const ue in e)ue in KP||(t[ue]=e[ue]);if(e.css===!1)return t;const{name:r="v",type:i,duration:n,enterFromClass:a=`${r}-enter-from`,enterActiveClass:u=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:f=a,appearActiveClass:p=u,appearToClass:v=o,leaveFromClass:_=`${r}-leave-from`,leaveActiveClass:y=`${r}-leave-active`,leaveToClass:S=`${r}-leave-to`}=e,A=TB(n),L=A&&A[0],I=A&&A[1],{onBeforeEnter:M,onEnter:D,onEnterCancelled:O,onLeave:N,onLeaveCancelled:q,onBeforeAppear:Z=M,onAppear:Q=D,onAppearCancelled:j=O}=t,ie=(ue,fe,ye)=>{mu(ue,fe?v:o),mu(ue,fe?p:u),ye&&ye()},ae=(ue,fe)=>{ue._isLeaving=!1,mu(ue,_),mu(ue,S),mu(ue,y),fe&&fe()},he=ue=>(fe,ye)=>{const He=ue?Q:D,we=()=>ie(fe,ue,ye);pu(He,[fe,we]),JT(()=>{mu(fe,ue?f:a),ll(fe,ue?v:o),KT(He)||QT(fe,i,L,we)})};return ew(t,{onBeforeEnter(ue){pu(M,[ue]),ll(ue,a),ll(ue,u)},onBeforeAppear(ue){pu(Z,[ue]),ll(ue,f),ll(ue,p)},onEnter:he(!1),onAppear:he(!0),onLeave(ue,fe){ue._isLeaving=!0;const ye=()=>ae(ue,fe);ll(ue,_),AB(),ll(ue,y),JT(()=>{ue._isLeaving&&(mu(ue,_),ll(ue,S),KT(N)||QT(ue,i,I,ye))}),pu(N,[ue,ye])},onEnterCancelled(ue){ie(ue,!1),pu(O,[ue])},onAppearCancelled(ue){ie(ue,!0),pu(j,[ue])},onLeaveCancelled(ue){ae(ue),pu(q,[ue])}})}function TB(e){if(e==null)return null;if(eB(e))return[v0(e.enter),v0(e.leave)];{const t=v0(e);return[t,t]}}function v0(e){return iB(e)}function ll(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e._vtc||(e._vtc=new Set)).add(t)}function mu(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:r}=e;r&&(r.delete(t),r.size||(e._vtc=void 0))}function JT(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let EB=0;function QT(e,t,r,i){const n=e._endId=++EB,a=()=>{n===e._endId&&i()};if(r)return setTimeout(a,r);const{type:u,timeout:o,propCount:f}=CB(e,t);if(!u)return i();const p=u+"end";let v=0;const _=()=>{e.removeEventListener(p,y),a()},y=S=>{S.target===e&&++v>=f&&_()};setTimeout(()=>{v<f&&_()},o+1),e.addEventListener(p,y)}function CB(e,t){const r=window.getComputedStyle(e),i=A=>(r[A]||"").split(", "),n=i(`${sl}Delay`),a=i(`${sl}Duration`),u=eE(n,a),o=i(`${Jf}Delay`),f=i(`${Jf}Duration`),p=eE(o,f);let v=null,_=0,y=0;t===sl?u>0&&(v=sl,_=u,y=a.length):t===Jf?p>0&&(v=Jf,_=p,y=f.length):(_=Math.max(u,p),v=_>0?u>p?sl:Jf:null,y=v?v===sl?a.length:f.length:0);const S=v===sl&&/\b(transform|all)(,|$)/.test(i(`${sl}Property`).toString());return{type:v,timeout:_,propCount:y,hasTransform:S}}function eE(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,i)=>tE(r)+tE(e[i])))}function tE(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function AB(){return document.body.offsetHeight}const MB={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},IB=(e,t)=>r=>{if(!("key"in r))return;const i=tw(r.key);if(t.some(n=>n===i||MB[n]===i))return e(r)},Rg={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):Qf(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:i}){!t!=!r&&(i?t?(i.beforeEnter(e),Qf(e,!0),i.enter(e)):i.leave(e,()=>{Qf(e,!1)}):Qf(e,t))},beforeUnmount(e,{value:t}){Qf(e,t)}};function Qf(e,t){e.style.display=t?e._vod:"none"}const PB=ew({patchProp:bB},sB);let g0,rE=!1;function DB(){return g0=rE?g0:IO(PB),rE=!0,g0}const LB=(...e)=>{const t=DB().createApp(...e),{mount:r}=t;return t.mount=i=>{const n=kB(i);if(n)return r(n,!0,n instanceof SVGElement)},t};function kB(e){return ip(e)?document.querySelector(e):e}const RB={"v-8daa1a0e":()=>Oe(()=>import("./index.html-61570f8a.js"),[]).then(({data:e})=>e),"v-74bc627b":()=>Oe(()=>import("./index.html-eb18c019.js"),[]).then(({data:e})=>e),"v-08ae5eba":()=>Oe(()=>import("./2018-2019.html-6df7b75f.js"),[]).then(({data:e})=>e),"v-93cfbde4":()=>Oe(()=>import("./2019-2020.html-4ce2d375.js"),[]).then(({data:e})=>e),"v-f917537a":()=>Oe(()=>import("./2020-2021.html-93c2659b.js"),[]).then(({data:e})=>e),"v-1a0de1a3":()=>Oe(()=>import("./2021-2022.html-0c8f639e.js"),[]).then(({data:e})=>e),"v-190ab309":()=>Oe(()=>import("./2021fall.html-fecf308b.js"),[]).then(({data:e})=>e),"v-9eb125fa":()=>Oe(()=>import("./2022-2023.html-c6606309.js"),[]).then(({data:e})=>e),"v-96167c50":()=>Oe(()=>import("./index.html-be8a5214.js"),[]).then(({data:e})=>e),"v-96536bf0":()=>Oe(()=>import("./index.html-12e2a17e.js"),[]).then(({data:e})=>e),"v-dbd38712":()=>Oe(()=>import("./index.html-f6e4f59a.js"),[]).then(({data:e})=>e),"v-c73889da":()=>Oe(()=>import("./index.html-bca1b7e0.js"),[]).then(({data:e})=>e),"v-2c5c0e04":()=>Oe(()=>import("./building-11-elevator.html-41e8732d.js"),[]).then(({data:e})=>e),"v-104cfa63":()=>Oe(()=>import("./2021.html-ab8984b0.js"),[]).then(({data:e})=>e),"v-780207b9":()=>Oe(()=>import("./index.html-0db73764.js"),[]).then(({data:e})=>e),"v-14e6315a":()=>Oe(()=>import("./index.html-edcdf602.js"),[]).then(({data:e})=>e),"v-42f2be94":()=>Oe(()=>import("./vehicle-charger.html-a72444cb.js"),[]).then(({data:e})=>e),"v-ed48bdf8":()=>Oe(()=>import("./index.html-834a4f2f.js"),[]).then(({data:e})=>e),"v-f4bc5604":()=>Oe(()=>import("./index.html-eb5540a3.js"),[]).then(({data:e})=>e),"v-1500d063":()=>Oe(()=>import("./index.html-6ebee453.js"),[]).then(({data:e})=>e),"v-014445c8":()=>Oe(()=>import("./index.html-f08a1eb2.js"),[]).then(({data:e})=>e),"v-461d4a7c":()=>Oe(()=>import("./registered-organization-2019.html-980e7607.js"),[]).then(({data:e})=>e),"v-6ba7e826":()=>Oe(()=>import("./registered-organization-2020.html-84bee617.js"),[]).then(({data:e})=>e),"v-6d5cc0c5":()=>Oe(()=>import("./registered-organization-2021.html-f788e063.js"),[]).then(({data:e})=>e),"v-28ddfa13":()=>Oe(()=>import("./index.html-19cbfb61.js"),[]).then(({data:e})=>e),"v-be92ea7e":()=>Oe(()=>import("./index.html-449d2048.js"),[]).then(({data:e})=>e),"v-d7188082":()=>Oe(()=>import("./index.html-a63adfde.js"),[]).then(({data:e})=>e),"v-d1061704":()=>Oe(()=>import("./paper-tools.html-60251304.js"),[]).then(({data:e})=>e),"v-4322d0a7":()=>Oe(()=>import("./index.html-8deb1c72.js"),[]).then(({data:e})=>e),"v-69b23ddf":()=>Oe(()=>import("./index.html-83cc8007.js"),[]).then(({data:e})=>e),"v-1678dd6f":()=>Oe(()=>import("./bustimer-wx.html-467a5a5e.js"),[]).then(({data:e})=>e),"v-1630dfb5":()=>Oe(()=>import("./bustimer.html-f07745df.js"),[]).then(({data:e})=>e),"v-6a28f6e0":()=>Oe(()=>import("./holiday.html-154443ae.js"),[]).then(({data:e})=>e),"v-48975204":()=>Oe(()=>import("./redirect.html-d18ba873.js"),[]).then(({data:e})=>e),"v-8059a7a6":()=>Oe(()=>import("./workday.html-2d182c51.js"),[]).then(({data:e})=>e),"v-181cc452":()=>Oe(()=>import("./index.html-8738d0f4.js"),[]).then(({data:e})=>e),"v-22cd7d0c":()=>Oe(()=>import("./index.html-64466982.js"),[]).then(({data:e})=>e),"v-0e92d420":()=>Oe(()=>import("./index.html-75b00be9.js"),[]).then(({data:e})=>e),"v-2b8cac58":()=>Oe(()=>import("./.html-0d2fe2da.js"),[]).then(({data:e})=>e),"v-66965350":()=>Oe(()=>import("./.html-72f9af6d.js"),[]).then(({data:e})=>e),"v-66317da4":()=>Oe(()=>import("./.html-c33ad481.js"),[]).then(({data:e})=>e),"v-5c3fcdf6":()=>Oe(()=>import("./index.html-9b12143b.js"),[]).then(({data:e})=>e),"v-04710004":()=>Oe(()=>import("./index.html-6e033e10.js"),[]).then(({data:e})=>e),"v-5589dd0c":()=>Oe(()=>import("./dorm-floor-plan.html-6ee8bfb0.js"),[]).then(({data:e})=>e),"v-d42194b6":()=>Oe(()=>import("./index.html-f8e292f5.js"),[]).then(({data:e})=>e),"v-20383a78":()=>Oe(()=>import("./index.html-bf6a4e46.js"),[]).then(({data:e})=>e),"v-42c1fa44":()=>Oe(()=>import("./index.html-a7f6b4a6.js"),[]).then(({data:e})=>e),"v-76cff034":()=>Oe(()=>import("./index.html-e5b751d4.js"),[]).then(({data:e})=>e),"v-ac3449b2":()=>Oe(()=>import("./send-receive-email-by-proxy.html-ef9676fa.js"),[]).then(({data:e})=>e),"v-29860ed0":()=>Oe(()=>import("./index.html-19231713.js"),[]).then(({data:e})=>e),"v-622da02f":()=>Oe(()=>import("./index.html-46ffb0d9.js"),[]).then(({data:e})=>e),"v-5e590ec6":()=>Oe(()=>import("./index.html-55df6efe.js"),[]).then(({data:e})=>e),"v-1fa222d4":()=>Oe(()=>import("./index.html-029f5c94.js"),[]).then(({data:e})=>e),"v-48519846":()=>Oe(()=>import("./index.html-3e960530.js"),[]).then(({data:e})=>e),"v-369295b4":()=>Oe(()=>import("./index.html-552b04b5.js"),[]).then(({data:e})=>e),"v-3692bb1f":()=>Oe(()=>import("./index.html-9fe9badf.js"),[]).then(({data:e})=>e),"v-425958ce":()=>Oe(()=>import("./index.html-e591657c.js"),[]).then(({data:e})=>e),"v-3692ee77":()=>Oe(()=>import("./index.html-f923fcd8.js"),[]).then(({data:e})=>e),"v-2686552a":()=>Oe(()=>import("./index.html-2f188677.js"),[]).then(({data:e})=>e),"v-45d74ec0":()=>Oe(()=>import("./index.html-14741737.js"),[]).then(({data:e})=>e),"v-772a5784":()=>Oe(()=>import("./index.html-789f2b28.js"),[]).then(({data:e})=>e),"v-8460eeb8":()=>Oe(()=>import("./advice-on-study.html-ef8bfd6e.js"),[]).then(({data:e})=>e),"v-435bd49a":()=>Oe(()=>import("./info-on-study.html-25641cb9.js"),[]).then(({data:e})=>e),"v-6323734e":()=>Oe(()=>import("./.html-85ec4859.js"),[]).then(({data:e})=>e),"v-5eb748bf":()=>Oe(()=>import("./innovative-project.html-71803d9e.js"),[]).then(({data:e})=>e),"v-2a23f022":()=>Oe(()=>import("./index.html-454a6b7e.js"),[]).then(({data:e})=>e),"v-66061b92":()=>Oe(()=>import("./index.html-75885907.js"),[]).then(({data:e})=>e),"v-89ac2bec":()=>Oe(()=>import("./index.html-10468cac.js"),[]).then(({data:e})=>e),"v-1549b190":()=>Oe(()=>import("./index.html-5a2e0f63.js"),[]).then(({data:e})=>e),"v-9e1961f8":()=>Oe(()=>import("./index.html-67d10bc8.js"),[]).then(({data:e})=>e),"v-6bba5e58":()=>Oe(()=>import("./index.html-b9c5d45e.js"),[]).then(({data:e})=>e),"v-83a77034":()=>Oe(()=>import("./index.html-b292bf67.js"),[]).then(({data:e})=>e),"v-296d1d15":()=>Oe(()=>import("./index.html-0f8514a5.js"),[]).then(({data:e})=>e),"v-fb711be8":()=>Oe(()=>import("./index.html-252b8cfb.js"),[]).then(({data:e})=>e),"v-3706649a":()=>Oe(()=>import("./404.html-f9875e7b.js"),[]).then(({data:e})=>e)},zB=JSON.parse(`{"base":"/","lang":"en-US","title":"","description":"","head":[["link",{"rel":"icon","href":"/logo-assets/touch/homescreen192.png"}],["meta",{"name":"theme-color","content":"#49BF7C"}],["link",{"rel":"manifest","href":"/manifest.webmanifest"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:type","content":"article"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:image","content":"https://mirrors.sustech.edu.cn/git/sustech-online/sustech-online-ng/-/raw/master/docs/assets/og-image.png"}],["meta",{"prefix":"og: http://ogp.me/ns#","property":"og:article:author","content":"sustech.online"}],["meta",{"name":"apple-mobile-web-app-capable","content":"yes"}],["meta",{"name":"apple-mobile-web-app-status-bar-style","content":"black"}],["link",{"rel":"apple-touch-icon","href":"/logo-assets/touch/homescreen168.png"}],["meta",{"name":"msapplication-TileImage","content":"/logo-assets/touch/homescreen144.png"}],["meta",{"name":"msapplication-TileColor","content":"#49BF7C"}],["meta",{"name":"google-site-verification","content":"Av-srANCmFA_yZ8Iasa1yQsIPJCF_zlP5AoD35m6_Ww"}],["script",{"async":true,"src":"https://googletagmanager.com/gtag/js?id=G-1BQBXDGY3R"}],["script",{},"\\n                        window.dataLayer = window.dataLayer || [];\\n                        function gtag(){dataLayer.push(arguments);}\\n                        gtag('js', new Date());\\n                        gtag('config', 'G-1BQBXDGY3R');\\n                        "],["script",{"src":"/wx_helper.js"}],["script",{"src":"https://res.wx.qq.com/open/js/jweixin-1.6.0.js"}],["script",{"src":"https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"}],["script",{"src":"https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js"}],["link",{"rel":"stylesheet","type":"text/css","href":"https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"}],["script",{"src":"https://lib.baomitu.com/datatables/1.10.21/js/jquery.dataTables.min.js"}],["link",{"rel":"stylesheet","type":"text/css","href":"https://lib.baomitu.com/datatables/1.10.21/css/jquery.dataTables.min.css"}]],"locales":{"/":{"title":"","lang":"zh-CN","description":"Online manual for sustecher"}}}`),Fp=Array.isArray,OB=e=>typeof e=="function",jo=e=>typeof e=="string";var BB=([e,t,r])=>e==="meta"&&t.name?`${e}.${t.name}`:["title","base"].includes(e)?e:e==="template"&&t.id?`${e}.${t.id}`:JSON.stringify([e,t,r]),FB=e=>{const t=new Set,r=[];return e.forEach(i=>{const n=BB(i);t.has(n)||(t.add(n),r.push(i))}),r},Np=e=>/^(https?:)?\/\//.test(e),NB=e=>/^mailto:/.test(e),VB=e=>/^tel:/.test(e),rw=e=>Object.prototype.toString.call(e)==="[object Object]",JP=e=>e[e.length-1]==="/"?e.slice(0,-1):e,QP=e=>e[0]==="/"?e.slice(1):e,eD=(e,t)=>{const r=Object.keys(e).sort((i,n)=>{const a=n.split("/").length-i.split("/").length;return a!==0?a:n.length-i.length});for(const i of r)if(t.startsWith(i))return i;return"/"},iE=(e,t="/")=>{const r=e.replace(/^(https?:)?\/\/[^/]*/,"");return r.startsWith(t)?`/${r.slice(t.length)}`:r};const tD={"v-8daa1a0e":Et(()=>Oe(()=>import("./index.html-573d22a9.js"),[])),"v-74bc627b":Et(()=>Oe(()=>import("./index.html-c79414a3.js"),[])),"v-08ae5eba":Et(()=>Oe(()=>import("./2018-2019.html-c011380a.js"),[])),"v-93cfbde4":Et(()=>Oe(()=>import("./2019-2020.html-bbca5d1d.js"),[])),"v-f917537a":Et(()=>Oe(()=>import("./2020-2021.html-52675374.js"),[])),"v-1a0de1a3":Et(()=>Oe(()=>import("./2021-2022.html-e95b4797.js"),[])),"v-190ab309":Et(()=>Oe(()=>import("./2021fall.html-bdb026de.js"),[])),"v-9eb125fa":Et(()=>Oe(()=>import("./2022-2023.html-8c2539bb.js"),["assets/2022-2023.html-8c2539bb.js","assets/22-23-spring-0b3d9f4c.js"])),"v-96167c50":Et(()=>Oe(()=>import("./index.html-a6356529.js"),["assets/index.html-a6356529.js","assets/22-23-spring-0b3d9f4c.js"])),"v-96536bf0":Et(()=>Oe(()=>import("./index.html-a9f48152.js"),[])),"v-dbd38712":Et(()=>Oe(()=>import("./index.html-7ffc04a7.js"),[])),"v-c73889da":Et(()=>Oe(()=>import("./index.html-278408e5.js"),[])),"v-2c5c0e04":Et(()=>Oe(()=>import("./building-11-elevator.html-3ae25718.js"),[])),"v-104cfa63":Et(()=>Oe(()=>import("./2021.html-2a8f5088.js"),[])),"v-780207b9":Et(()=>Oe(()=>import("./index.html-395f8149.js"),[])),"v-14e6315a":Et(()=>Oe(()=>import("./index.html-6ca41916.js"),[])),"v-42f2be94":Et(()=>Oe(()=>import("./vehicle-charger.html-80c46ad3.js"),[])),"v-ed48bdf8":Et(()=>Oe(()=>import("./index.html-5a3c7e66.js"),[])),"v-f4bc5604":Et(()=>Oe(()=>import("./index.html-4aaf1f6d.js"),[])),"v-1500d063":Et(()=>Oe(()=>import("./index.html-836eb560.js"),[])),"v-014445c8":Et(()=>Oe(()=>import("./index.html-827e8c6e.js"),[])),"v-461d4a7c":Et(()=>Oe(()=>import("./registered-organization-2019.html-89c4a690.js"),[])),"v-6ba7e826":Et(()=>Oe(()=>import("./registered-organization-2020.html-f2c5e4f6.js"),[])),"v-6d5cc0c5":Et(()=>Oe(()=>import("./registered-organization-2021.html-1f41f2f4.js"),[])),"v-28ddfa13":Et(()=>Oe(()=>import("./index.html-41932bcc.js"),[])),"v-be92ea7e":Et(()=>Oe(()=>import("./index.html-4ab098e5.js"),[])),"v-d7188082":Et(()=>Oe(()=>import("./index.html-c2e1eccb.js"),[])),"v-d1061704":Et(()=>Oe(()=>import("./paper-tools.html-94d436d6.js"),[])),"v-4322d0a7":Et(()=>Oe(()=>import("./index.html-68f16579.js"),["assets/index.html-68f16579.js","assets/1-ba814636.js"])),"v-69b23ddf":Et(()=>Oe(()=>import("./index.html-ca5c2a59.js"),["assets/index.html-ca5c2a59.js","assets/1-ba814636.js"])),"v-1678dd6f":Et(()=>Oe(()=>import("./bustimer-wx.html-9f1b2ef8.js"),["assets/bustimer-wx.html-9f1b2ef8.js","assets/busline2-c318b2e1.js"])),"v-1630dfb5":Et(()=>Oe(()=>import("./bustimer.html-43baf99b.js"),["assets/bustimer.html-43baf99b.js","assets/busline2-c318b2e1.js"])),"v-6a28f6e0":Et(()=>Oe(()=>import("./holiday.html-0e9210fc.js"),["assets/holiday.html-0e9210fc.js","assets/busline2-c318b2e1.js"])),"v-48975204":Et(()=>Oe(()=>import("./redirect.html-9eff9949.js"),[])),"v-8059a7a6":Et(()=>Oe(()=>import("./workday.html-f8d33b6a.js"),["assets/workday.html-f8d33b6a.js","assets/busline2-c318b2e1.js"])),"v-181cc452":Et(()=>Oe(()=>import("./index.html-01c55d26.js"),[])),"v-22cd7d0c":Et(()=>Oe(()=>import("./index.html-8374844d.js"),[])),"v-0e92d420":Et(()=>Oe(()=>import("./index.html-473fba57.js"),[])),"v-2b8cac58":Et(()=>Oe(()=>import("./.html-db1dd9df.js"),[])),"v-66965350":Et(()=>Oe(()=>import("./.html-118b6dd7.js"),[])),"v-66317da4":Et(()=>Oe(()=>import("./.html-191de1a2.js"),[])),"v-5c3fcdf6":Et(()=>Oe(()=>import("./index.html-9c1044f5.js"),[])),"v-04710004":Et(()=>Oe(()=>import("./index.html-475f1dfc.js"),[])),"v-5589dd0c":Et(()=>Oe(()=>import("./dorm-floor-plan.html-24872182.js"),[])),"v-d42194b6":Et(()=>Oe(()=>import("./index.html-2a62e38d.js"),[])),"v-20383a78":Et(()=>Oe(()=>import("./index.html-225121ad.js"),[])),"v-42c1fa44":Et(()=>Oe(()=>import("./index.html-15b1abab.js"),[])),"v-76cff034":Et(()=>Oe(()=>import("./index.html-277d009d.js"),[])),"v-ac3449b2":Et(()=>Oe(()=>import("./send-receive-email-by-proxy.html-2af77bdb.js"),[])),"v-29860ed0":Et(()=>Oe(()=>import("./index.html-d781b069.js"),[])),"v-622da02f":Et(()=>Oe(()=>import("./index.html-c8ad1730.js"),[])),"v-5e590ec6":Et(()=>Oe(()=>import("./index.html-e7116e9f.js"),[])),"v-1fa222d4":Et(()=>Oe(()=>import("./index.html-839d0d33.js"),[])),"v-48519846":Et(()=>Oe(()=>import("./index.html-5b1dcdca.js"),[])),"v-369295b4":Et(()=>Oe(()=>import("./index.html-af5a7f7b.js"),[])),"v-3692bb1f":Et(()=>Oe(()=>import("./index.html-59bbfb2e.js"),[])),"v-425958ce":Et(()=>Oe(()=>import("./index.html-2a8dcb40.js"),[])),"v-3692ee77":Et(()=>Oe(()=>import("./index.html-84e521ce.js"),[])),"v-2686552a":Et(()=>Oe(()=>import("./index.html-d6daa1d1.js"),[])),"v-45d74ec0":Et(()=>Oe(()=>import("./index.html-3000df48.js"),[])),"v-772a5784":Et(()=>Oe(()=>import("./index.html-9dcfd677.js"),[])),"v-8460eeb8":Et(()=>Oe(()=>import("./advice-on-study.html-84358f38.js"),[])),"v-435bd49a":Et(()=>Oe(()=>import("./info-on-study.html-1052be55.js"),[])),"v-6323734e":Et(()=>Oe(()=>import("./.html-0dc70b20.js"),[])),"v-5eb748bf":Et(()=>Oe(()=>import("./innovative-project.html-34f4fd54.js"),[])),"v-2a23f022":Et(()=>Oe(()=>import("./index.html-9b2beeb0.js"),[])),"v-66061b92":Et(()=>Oe(()=>import("./index.html-d173a2ab.js"),[])),"v-89ac2bec":Et(()=>Oe(()=>import("./index.html-507875fe.js"),[])),"v-1549b190":Et(()=>Oe(()=>import("./index.html-bde671c0.js"),[])),"v-9e1961f8":Et(()=>Oe(()=>import("./index.html-5f8c6cf9.js"),[])),"v-6bba5e58":Et(()=>Oe(()=>import("./index.html-63505f7b.js"),[])),"v-83a77034":Et(()=>Oe(()=>import("./index.html-3602a7a9.js"),[])),"v-296d1d15":Et(()=>Oe(()=>import("./index.html-e41669cf.js"),[])),"v-fb711be8":Et(()=>Oe(()=>import("./index.html-882f5f10.js"),[])),"v-3706649a":Et(()=>Oe(()=>import("./404.html-7c1db9a2.js"),[]))};var $B=Symbol(""),UB=Kr(RB),rD=Dp({key:"",path:"",title:"",lang:"",frontmatter:{},headers:[]}),_l=Kr(rD),Ml=()=>_l,iD=Symbol(""),Cs=()=>{const e=yi(iD);if(!e)throw new Error("usePageFrontmatter() is called without provider.");return e},nD=Symbol(""),GB=()=>{const e=yi(nD);if(!e)throw new Error("usePageHead() is called without provider.");return e},HB=Symbol(""),aD=Symbol(""),oD=()=>{const e=yi(aD);if(!e)throw new Error("usePageLang() is called without provider.");return e},sD=Symbol(""),qB=()=>{const e=yi(sD);if(!e)throw new Error("usePageLayout() is called without provider.");return e},iw=Symbol(""),Vp=()=>{const e=yi(iw);if(!e)throw new Error("useRouteLocale() is called without provider.");return e},ch=Kr(zB),jB=()=>ch,lD=Symbol(""),nw=()=>{const e=yi(lD);if(!e)throw new Error("useSiteLocaleData() is called without provider.");return e},WB=Symbol(""),ZB="Layout",XB="NotFound",ys=Gh({resolveLayouts:e=>e.reduce((t,r)=>({...t,...r.layouts}),{}),resolvePageData:async e=>{const t=UB.value[e];return await(t==null?void 0:t())??rD},resolvePageFrontmatter:e=>e.frontmatter,resolvePageHead:(e,t,r)=>{const i=jo(t.description)?t.description:r.description,n=[...Fp(t.head)?t.head:[],...r.head,["title",{},e],["meta",{name:"description",content:i}]];return FB(n)},resolvePageHeadTitle:(e,t)=>[e.title,t.title].filter(r=>!!r).join(" | "),resolvePageLang:e=>e.lang||"en",resolvePageLayout:(e,t)=>{let r;if(e.path){const i=e.frontmatter.layout;jo(i)?r=i:r=ZB}else r=XB;return t[r]},resolveRouteLocale:(e,t)=>eD(e,t),resolveSiteLocaleData:(e,t)=>({...e,...e.locales[t]})}),aw=Er({name:"ClientOnly",setup(e,t){const r=Kr(!1);return Kn(()=>{r.value=!0}),()=>{var i,n;return r.value?(n=(i=t.slots).default)==null?void 0:n.call(i):null}}}),YB=Er({name:"Content",props:{pageKey:{type:String,required:!1,default:""}},setup(e){const t=Ml(),r=St(()=>tD[e.pageKey||t.value.key]);return()=>r.value?Sr(r.value):Sr("div","404 Not Found")}}),xo=(e={})=>e,E_=e=>Np(e)?e:`/${QP(e)}`;function ow(e,t,r){var i,n,a;t===void 0&&(t=50),r===void 0&&(r={});var u=(i=r.isImmediate)!=null&&i,o=(n=r.callback)!=null&&n,f=r.maxWait,p=Date.now(),v=[];function _(){if(f!==void 0){var S=Date.now()-p;if(S+t>=f)return f-S}return t}var y=function(){var S=[].slice.call(arguments),A=this;return new Promise(function(L,I){var M=u&&a===void 0;if(a!==void 0&&clearTimeout(a),a=setTimeout(function(){if(a=void 0,p=Date.now(),!u){var O=e.apply(A,S);o&&o(O),v.forEach(function(N){return(0,N.resolve)(O)}),v=[]}},_()),M){var D=e.apply(A,S);return o&&o(D),L(D)}v.push({resolve:L,reject:I})})};return y.cancel=function(S){a!==void 0&&clearTimeout(a),v.forEach(function(A){return(0,A.reject)(S)}),v=[]},y}/*!
  * vue-router v4.2.0
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const oh=typeof window<"u";function KB(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Xr=Object.assign;function _0(e,t){const r={};for(const i in t){const n=t[i];r[i]=go(n)?n.map(e):e(n)}return r}const Bd=()=>{},go=Array.isArray,JB=/\/$/,QB=e=>e.replace(JB,"");function y0(e,t,r="/"){let i,n={},a="",u="";const o=t.indexOf("#");let f=t.indexOf("?");return o<f&&o>=0&&(f=-1),f>-1&&(i=t.slice(0,f),a=t.slice(f+1,o>-1?o:t.length),n=e(a)),o>-1&&(i=i||t.slice(0,o),u=t.slice(o,t.length)),i=i9(i??t,r),{fullPath:i+(a&&"?")+a+u,path:i,query:n,hash:u}}function e9(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function nE(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function t9(e,t,r){const i=t.matched.length-1,n=r.matched.length-1;return i>-1&&i===n&&Ph(t.matched[i],r.matched[n])&&uD(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function Ph(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function uD(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!r9(e[r],t[r]))return!1;return!0}function r9(e,t){return go(e)?aE(e,t):go(t)?aE(t,e):e===t}function aE(e,t){return go(t)?e.length===t.length&&e.every((r,i)=>r===t[i]):e.length===1&&e[0]===t}function i9(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),i=e.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let a=r.length-1,u,o;for(u=0;u<i.length;u++)if(o=i[u],o!==".")if(o==="..")a>1&&a--;else break;return r.slice(0,a).join("/")+"/"+i.slice(u-(u===i.length?1:0)).join("/")}var np;(function(e){e.pop="pop",e.push="push"})(np||(np={}));var Fd;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Fd||(Fd={}));function n9(e){if(!e)if(oh){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),QB(e)}const a9=/^[^#]+#/;function o9(e,t){return e.replace(a9,"#")+t}function s9(e,t){const r=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-r.left-(t.left||0),top:i.top-r.top-(t.top||0)}}const C_=()=>({left:window.pageXOffset,top:window.pageYOffset});function l9(e){let t;if("el"in e){const r=e.el,i=typeof r=="string"&&r.startsWith("#"),n=typeof r=="string"?i?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!n)return;t=s9(n,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function oE(e,t){return(history.state?history.state.position-t:-1)+e}const bx=new Map;function u9(e,t){bx.set(e,t)}function c9(e){const t=bx.get(e);return bx.delete(e),t}let h9=()=>location.protocol+"//"+location.host;function cD(e,t){const{pathname:r,search:i,hash:n}=t,a=e.indexOf("#");if(a>-1){let o=n.includes(e.slice(a))?e.slice(a).length:1,f=n.slice(o);return f[0]!=="/"&&(f="/"+f),nE(f,"")}return nE(r,e)+i+n}function f9(e,t,r,i){let n=[],a=[],u=null;const o=({state:y})=>{const S=cD(e,location),A=r.value,L=t.value;let I=0;if(y){if(r.value=S,t.value=y,u&&u===A){u=null;return}I=L?y.position-L.position:0}else i(S);n.forEach(M=>{M(r.value,A,{delta:I,type:np.pop,direction:I?I>0?Fd.forward:Fd.back:Fd.unknown})})};function f(){u=r.value}function p(y){n.push(y);const S=()=>{const A=n.indexOf(y);A>-1&&n.splice(A,1)};return a.push(S),S}function v(){const{history:y}=window;y.state&&y.replaceState(Xr({},y.state,{scroll:C_()}),"")}function _(){for(const y of a)y();a=[],window.removeEventListener("popstate",o),window.removeEventListener("beforeunload",v)}return window.addEventListener("popstate",o),window.addEventListener("beforeunload",v,{passive:!0}),{pauseListeners:f,listen:p,destroy:_}}function sE(e,t,r,i=!1,n=!1){return{back:e,current:t,forward:r,replaced:i,position:window.history.length,scroll:n?C_():null}}function d9(e){const{history:t,location:r}=window,i={value:cD(e,r)},n={value:t.state};n.value||a(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function a(f,p,v){const _=e.indexOf("#"),y=_>-1?(r.host&&document.querySelector("base")?e:e.slice(_))+f:h9()+e+f;try{t[v?"replaceState":"pushState"](p,"",y),n.value=p}catch(S){console.error(S),r[v?"replace":"assign"](y)}}function u(f,p){const v=Xr({},t.state,sE(n.value.back,f,n.value.forward,!0),p,{position:n.value.position});a(f,v,!0),i.value=f}function o(f,p){const v=Xr({},n.value,t.state,{forward:f,scroll:C_()});a(v.current,v,!0);const _=Xr({},sE(i.value,f,null),{position:v.position+1},p);a(f,_,!1),i.value=f}return{location:i,state:n,push:o,replace:u}}function p9(e){e=n9(e);const t=d9(e),r=f9(e,t.state,t.location,t.replace);function i(a,u=!0){u||r.pauseListeners(),history.go(a)}const n=Xr({location:"",base:e,go:i,createHref:o9.bind(null,e)},t,r);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function m9(e){return typeof e=="string"||e&&typeof e=="object"}function hD(e){return typeof e=="string"||typeof e=="symbol"}const xs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},fD=Symbol("");var lE;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(lE||(lE={}));function Dh(e,t){return Xr(new Error,{type:e,[fD]:!0},t)}function ps(e,t){return e instanceof Error&&fD in e&&(t==null||!!(e.type&t))}const uE="[^/]+?",v9={sensitive:!1,strict:!1,start:!0,end:!0},g9=/[.+*?^${}()[\]/\\]/g;function _9(e,t){const r=Xr({},v9,t),i=[];let n=r.start?"^":"";const a=[];for(const p of e){const v=p.length?[]:[90];r.strict&&!p.length&&(n+="/");for(let _=0;_<p.length;_++){const y=p[_];let S=40+(r.sensitive?.25:0);if(y.type===0)_||(n+="/"),n+=y.value.replace(g9,"\\$&"),S+=40;else if(y.type===1){const{value:A,repeatable:L,optional:I,regexp:M}=y;a.push({name:A,repeatable:L,optional:I});const D=M||uE;if(D!==uE){S+=10;try{new RegExp(`(${D})`)}catch(N){throw new Error(`Invalid custom RegExp for param "${A}" (${D}): `+N.message)}}let O=L?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;_||(O=I&&p.length<2?`(?:/${O})`:"/"+O),I&&(O+="?"),n+=O,S+=20,I&&(S+=-8),L&&(S+=-20),D===".*"&&(S+=-50)}v.push(S)}i.push(v)}if(r.strict&&r.end){const p=i.length-1;i[p][i[p].length-1]+=.7000000000000001}r.strict||(n+="/?"),r.end?n+="$":r.strict&&(n+="(?:/|$)");const u=new RegExp(n,r.sensitive?"":"i");function o(p){const v=p.match(u),_={};if(!v)return null;for(let y=1;y<v.length;y++){const S=v[y]||"",A=a[y-1];_[A.name]=S&&A.repeatable?S.split("/"):S}return _}function f(p){let v="",_=!1;for(const y of e){(!_||!v.endsWith("/"))&&(v+="/"),_=!1;for(const S of y)if(S.type===0)v+=S.value;else if(S.type===1){const{value:A,repeatable:L,optional:I}=S,M=A in p?p[A]:"";if(go(M)&&!L)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const D=go(M)?M.join("/"):M;if(!D)if(I)y.length<2&&(v.endsWith("/")?v=v.slice(0,-1):_=!0);else throw new Error(`Missing required param "${A}"`);v+=D}}return v||"/"}return{re:u,score:i,keys:a,parse:o,stringify:f}}function y9(e,t){let r=0;for(;r<e.length&&r<t.length;){const i=t[r]-e[r];if(i)return i;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function x9(e,t){let r=0;const i=e.score,n=t.score;for(;r<i.length&&r<n.length;){const a=y9(i[r],n[r]);if(a)return a;r++}if(Math.abs(n.length-i.length)===1){if(cE(i))return 1;if(cE(n))return-1}return n.length-i.length}function cE(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const b9={type:0,value:""},w9=/[a-zA-Z0-9_]/;function S9(e){if(!e)return[[]];if(e==="/")return[[b9]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(S){throw new Error(`ERR (${r})/"${p}": ${S}`)}let r=0,i=r;const n=[];let a;function u(){a&&n.push(a),a=[]}let o=0,f,p="",v="";function _(){p&&(r===0?a.push({type:0,value:p}):r===1||r===2||r===3?(a.length>1&&(f==="*"||f==="+")&&t(`A repeatable param (${p}) must be alone in its segment. eg: '/:ids+.`),a.push({type:1,value:p,regexp:v,repeatable:f==="*"||f==="+",optional:f==="*"||f==="?"})):t("Invalid state to consume buffer"),p="")}function y(){p+=f}for(;o<e.length;){if(f=e[o++],f==="\\"&&r!==2){i=r,r=4;continue}switch(r){case 0:f==="/"?(p&&_(),u()):f===":"?(_(),r=1):y();break;case 4:y(),r=i;break;case 1:f==="("?r=2:w9.test(f)?y():(_(),r=0,f!=="*"&&f!=="?"&&f!=="+"&&o--);break;case 2:f===")"?v[v.length-1]=="\\"?v=v.slice(0,-1)+f:r=3:v+=f;break;case 3:_(),r=0,f!=="*"&&f!=="?"&&f!=="+"&&o--,v="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${p}"`),_(),u(),n}function T9(e,t,r){const i=_9(S9(e.path),r),n=Xr(i,{record:e,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function E9(e,t){const r=[],i=new Map;t=dE({strict:!1,end:!0,sensitive:!1},t);function n(v){return i.get(v)}function a(v,_,y){const S=!y,A=C9(v);A.aliasOf=y&&y.record;const L=dE(t,v),I=[A];if("alias"in v){const O=typeof v.alias=="string"?[v.alias]:v.alias;for(const N of O)I.push(Xr({},A,{components:y?y.record.components:A.components,path:N,aliasOf:y?y.record:A}))}let M,D;for(const O of I){const{path:N}=O;if(_&&N[0]!=="/"){const q=_.record.path,Z=q[q.length-1]==="/"?"":"/";O.path=_.record.path+(N&&Z+N)}if(M=T9(O,_,L),y?y.alias.push(M):(D=D||M,D!==M&&D.alias.push(M),S&&v.name&&!fE(M)&&u(v.name)),A.children){const q=A.children;for(let Z=0;Z<q.length;Z++)a(q[Z],M,y&&y.children[Z])}y=y||M,(M.record.components&&Object.keys(M.record.components).length||M.record.name||M.record.redirect)&&f(M)}return D?()=>{u(D)}:Bd}function u(v){if(hD(v)){const _=i.get(v);_&&(i.delete(v),r.splice(r.indexOf(_),1),_.children.forEach(u),_.alias.forEach(u))}else{const _=r.indexOf(v);_>-1&&(r.splice(_,1),v.record.name&&i.delete(v.record.name),v.children.forEach(u),v.alias.forEach(u))}}function o(){return r}function f(v){let _=0;for(;_<r.length&&x9(v,r[_])>=0&&(v.record.path!==r[_].record.path||!dD(v,r[_]));)_++;r.splice(_,0,v),v.record.name&&!fE(v)&&i.set(v.record.name,v)}function p(v,_){let y,S={},A,L;if("name"in v&&v.name){if(y=i.get(v.name),!y)throw Dh(1,{location:v});L=y.record.name,S=Xr(hE(_.params,y.keys.filter(D=>!D.optional).map(D=>D.name)),v.params&&hE(v.params,y.keys.map(D=>D.name))),A=y.stringify(S)}else if("path"in v)A=v.path,y=r.find(D=>D.re.test(A)),y&&(S=y.parse(A),L=y.record.name);else{if(y=_.name?i.get(_.name):r.find(D=>D.re.test(_.path)),!y)throw Dh(1,{location:v,currentLocation:_});L=y.record.name,S=Xr({},_.params,v.params),A=y.stringify(S)}const I=[];let M=y;for(;M;)I.unshift(M.record),M=M.parent;return{name:L,path:A,params:S,matched:I,meta:M9(I)}}return e.forEach(v=>a(v)),{addRoute:a,resolve:p,removeRoute:u,getRoutes:o,getRecordMatcher:n}}function hE(e,t){const r={};for(const i of t)i in e&&(r[i]=e[i]);return r}function C9(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:A9(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function A9(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const i in e.components)t[i]=typeof r=="boolean"?r:r[i];return t}function fE(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function M9(e){return e.reduce((t,r)=>Xr(t,r.meta),{})}function dE(e,t){const r={};for(const i in e)r[i]=i in t?t[i]:e[i];return r}function dD(e,t){return t.children.some(r=>r===e||dD(e,r))}const pD=/#/g,I9=/&/g,P9=/\//g,D9=/=/g,L9=/\?/g,mD=/\+/g,k9=/%5B/g,R9=/%5D/g,vD=/%5E/g,z9=/%60/g,gD=/%7B/g,O9=/%7C/g,_D=/%7D/g,B9=/%20/g;function sw(e){return encodeURI(""+e).replace(O9,"|").replace(k9,"[").replace(R9,"]")}function F9(e){return sw(e).replace(gD,"{").replace(_D,"}").replace(vD,"^")}function Sx(e){return sw(e).replace(mD,"%2B").replace(B9,"+").replace(pD,"%23").replace(I9,"%26").replace(z9,"`").replace(gD,"{").replace(_D,"}").replace(vD,"^")}function N9(e){return Sx(e).replace(D9,"%3D")}function V9(e){return sw(e).replace(pD,"%23").replace(L9,"%3F")}function $9(e){return e==null?"":V9(e).replace(P9,"%2F")}function zg(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function U9(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<i.length;++n){const a=i[n].replace(mD," "),u=a.indexOf("="),o=zg(u<0?a:a.slice(0,u)),f=u<0?null:zg(a.slice(u+1));if(o in t){let p=t[o];go(p)||(p=t[o]=[p]),p.push(f)}else t[o]=f}return t}function pE(e){let t="";for(let r in e){const i=e[r];if(r=N9(r),i==null){i!==void 0&&(t+=(t.length?"&":"")+r);continue}(go(i)?i.map(a=>a&&Sx(a)):[i&&Sx(i)]).forEach(a=>{a!==void 0&&(t+=(t.length?"&":"")+r,a!=null&&(t+="="+a))})}return t}function G9(e){const t={};for(const r in e){const i=e[r];i!==void 0&&(t[r]=go(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return t}const H9=Symbol(""),mE=Symbol(""),A_=Symbol(""),lw=Symbol(""),Tx=Symbol("");function ed(){let e=[];function t(i){return e.push(i),()=>{const n=e.indexOf(i);n>-1&&e.splice(n,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function yl(e,t,r,i,n){const a=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((u,o)=>{const f=_=>{_===!1?o(Dh(4,{from:r,to:t})):_ instanceof Error?o(_):m9(_)?o(Dh(2,{from:t,to:_})):(a&&i.enterCallbacks[n]===a&&typeof _=="function"&&a.push(_),u())},p=e.call(i&&i.instances[n],t,r,f);let v=Promise.resolve(p);e.length<3&&(v=v.then(f)),v.catch(_=>o(_))})}function x0(e,t,r,i){const n=[];for(const a of e)for(const u in a.components){let o=a.components[u];if(!(t!=="beforeRouteEnter"&&!a.instances[u]))if(q9(o)){const p=(o.__vccOpts||o)[t];p&&n.push(yl(p,r,i,a,u))}else{let f=o();n.push(()=>f.then(p=>{if(!p)return Promise.reject(new Error(`Couldn't resolve component "${u}" at "${a.path}"`));const v=KB(p)?p.default:p;a.components[u]=v;const y=(v.__vccOpts||v)[t];return y&&yl(y,r,i,a,u)()}))}}return n}function q9(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function vE(e){const t=yi(A_),r=yi(lw),i=St(()=>t.resolve(jt(e.to))),n=St(()=>{const{matched:f}=i.value,{length:p}=f,v=f[p-1],_=r.matched;if(!v||!_.length)return-1;const y=_.findIndex(Ph.bind(null,v));if(y>-1)return y;const S=gE(f[p-2]);return p>1&&gE(v)===S&&_[_.length-1].path!==S?_.findIndex(Ph.bind(null,f[p-2])):y}),a=St(()=>n.value>-1&&Z9(r.params,i.value.params)),u=St(()=>n.value>-1&&n.value===r.matched.length-1&&uD(r.params,i.value.params));function o(f={}){return W9(f)?t[jt(e.replace)?"replace":"push"](jt(e.to)).catch(Bd):Promise.resolve()}return{route:i,href:St(()=>i.value.href),isActive:a,isExactActive:u,navigate:o}}const j9=Er({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:vE,setup(e,{slots:t}){const r=Gh(vE(e)),{options:i}=yi(A_),n=St(()=>({[_E(e.activeClass,i.linkActiveClass,"router-link-active")]:r.isActive,[_E(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const a=t.default&&t.default(r);return e.custom?a:Sr("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:n.value},a)}}}),yD=j9;function W9(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Z9(e,t){for(const r in t){const i=t[r],n=e[r];if(typeof i=="string"){if(i!==n)return!1}else if(!go(n)||n.length!==i.length||i.some((a,u)=>a!==n[u]))return!1}return!0}function gE(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const _E=(e,t,r)=>e??t??r,X9=Er({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const i=yi(Tx),n=St(()=>e.route||i.value),a=yi(mE,0),u=St(()=>{let p=jt(a);const{matched:v}=n.value;let _;for(;(_=v[p])&&!_.components;)p++;return p}),o=St(()=>n.value.matched[u.value]);Al(mE,St(()=>u.value+1)),Al(H9,o),Al(Tx,n);const f=Kr();return Ln(()=>[f.value,o.value,e.name],([p,v,_],[y,S,A])=>{v&&(v.instances[_]=p,S&&S!==v&&p&&p===y&&(v.leaveGuards.size||(v.leaveGuards=S.leaveGuards),v.updateGuards.size||(v.updateGuards=S.updateGuards))),p&&v&&(!S||!Ph(v,S)||!y)&&(v.enterCallbacks[_]||[]).forEach(L=>L(p))},{flush:"post"}),()=>{const p=n.value,v=e.name,_=o.value,y=_&&_.components[v];if(!y)return yE(r.default,{Component:y,route:p});const S=_.props[v],A=S?S===!0?p.params:typeof S=="function"?S(p):S:null,I=Sr(y,Xr({},A,t,{onVnodeUnmounted:M=>{M.component.isUnmounted&&(_.instances[v]=null)},ref:f}));return yE(r.default,{Component:I,route:p})||I}}});function yE(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const xD=X9;function Y9(e){const t=E9(e.routes,e),r=e.parseQuery||U9,i=e.stringifyQuery||pE,n=e.history,a=ed(),u=ed(),o=ed(),f=Ld(xs);let p=xs;oh&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const v=_0.bind(null,Ge=>""+Ge),_=_0.bind(null,$9),y=_0.bind(null,zg);function S(Ge,nt){let Ye,ft;return hD(Ge)?(Ye=t.getRecordMatcher(Ge),ft=nt):ft=Ge,t.addRoute(ft,Ye)}function A(Ge){const nt=t.getRecordMatcher(Ge);nt&&t.removeRoute(nt)}function L(){return t.getRoutes().map(Ge=>Ge.record)}function I(Ge){return!!t.getRecordMatcher(Ge)}function M(Ge,nt){if(nt=Xr({},nt||f.value),typeof Ge=="string"){const Ae=y0(r,Ge,nt.path),Ve=t.resolve({path:Ae.path},nt),We=n.createHref(Ae.fullPath);return Xr(Ae,Ve,{params:y(Ve.params),hash:zg(Ae.hash),redirectedFrom:void 0,href:We})}let Ye;if("path"in Ge)Ye=Xr({},Ge,{path:y0(r,Ge.path,nt.path).path});else{const Ae=Xr({},Ge.params);for(const Ve in Ae)Ae[Ve]==null&&delete Ae[Ve];Ye=Xr({},Ge,{params:_(Ae)}),nt.params=_(nt.params)}const ft=t.resolve(Ye,nt),ut=Ge.hash||"";ft.params=v(y(ft.params));const se=e9(i,Xr({},Ge,{hash:F9(ut),path:ft.path})),me=n.createHref(se);return Xr({fullPath:se,hash:ut,query:i===pE?G9(Ge.query):Ge.query||{}},ft,{redirectedFrom:void 0,href:me})}function D(Ge){return typeof Ge=="string"?y0(r,Ge,f.value.path):Xr({},Ge)}function O(Ge,nt){if(p!==Ge)return Dh(8,{from:nt,to:Ge})}function N(Ge){return Q(Ge)}function q(Ge){return N(Xr(D(Ge),{replace:!0}))}function Z(Ge){const nt=Ge.matched[Ge.matched.length-1];if(nt&&nt.redirect){const{redirect:Ye}=nt;let ft=typeof Ye=="function"?Ye(Ge):Ye;return typeof ft=="string"&&(ft=ft.includes("?")||ft.includes("#")?ft=D(ft):{path:ft},ft.params={}),Xr({query:Ge.query,hash:Ge.hash,params:"path"in ft?{}:Ge.params},ft)}}function Q(Ge,nt){const Ye=p=M(Ge),ft=f.value,ut=Ge.state,se=Ge.force,me=Ge.replace===!0,Ae=Z(Ye);if(Ae)return Q(Xr(D(Ae),{state:typeof Ae=="object"?Xr({},ut,Ae.state):ut,force:se,replace:me}),nt||Ye);const Ve=Ye;Ve.redirectedFrom=nt;let We;return!se&&t9(i,ft,Ye)&&(We=Dh(16,{to:Ve,from:ft}),tr(ft,ft,!0,!1)),(We?Promise.resolve(We):ae(Ve,ft)).catch(Ke=>ps(Ke)?ps(Ke,2)?Ke:zt(Ke):et(Ke,Ve,ft)).then(Ke=>{if(Ke){if(ps(Ke,2))return Q(Xr({replace:me},D(Ke.to),{state:typeof Ke.to=="object"?Xr({},ut,Ke.to.state):ut,force:se}),nt||Ve)}else Ke=ue(Ve,ft,!0,me,ut);return he(Ve,ft,Ke),Ke})}function j(Ge,nt){const Ye=O(Ge,nt);return Ye?Promise.reject(Ye):Promise.resolve()}function ie(Ge){const nt=Ir.values().next().value;return nt&&typeof nt.runWithContext=="function"?nt.runWithContext(Ge):Ge()}function ae(Ge,nt){let Ye;const[ft,ut,se]=K9(Ge,nt);Ye=x0(ft.reverse(),"beforeRouteLeave",Ge,nt);for(const Ae of ft)Ae.leaveGuards.forEach(Ve=>{Ye.push(yl(Ve,Ge,nt))});const me=j.bind(null,Ge,nt);return Ye.push(me),dr(Ye).then(()=>{Ye=[];for(const Ae of a.list())Ye.push(yl(Ae,Ge,nt));return Ye.push(me),dr(Ye)}).then(()=>{Ye=x0(ut,"beforeRouteUpdate",Ge,nt);for(const Ae of ut)Ae.updateGuards.forEach(Ve=>{Ye.push(yl(Ve,Ge,nt))});return Ye.push(me),dr(Ye)}).then(()=>{Ye=[];for(const Ae of Ge.matched)if(Ae.beforeEnter&&!nt.matched.includes(Ae))if(go(Ae.beforeEnter))for(const Ve of Ae.beforeEnter)Ye.push(yl(Ve,Ge,nt));else Ye.push(yl(Ae.beforeEnter,Ge,nt));return Ye.push(me),dr(Ye)}).then(()=>(Ge.matched.forEach(Ae=>Ae.enterCallbacks={}),Ye=x0(se,"beforeRouteEnter",Ge,nt),Ye.push(me),dr(Ye))).then(()=>{Ye=[];for(const Ae of u.list())Ye.push(yl(Ae,Ge,nt));return Ye.push(me),dr(Ye)}).catch(Ae=>ps(Ae,8)?Ae:Promise.reject(Ae))}function he(Ge,nt,Ye){for(const ft of o.list())ie(()=>ft(Ge,nt,Ye))}function ue(Ge,nt,Ye,ft,ut){const se=O(Ge,nt);if(se)return se;const me=nt===xs,Ae=oh?history.state:{};Ye&&(ft||me?n.replace(Ge.fullPath,Xr({scroll:me&&Ae&&Ae.scroll},ut)):n.push(Ge.fullPath,ut)),f.value=Ge,tr(Ge,nt,Ye,me),zt()}let fe;function ye(){fe||(fe=n.listen((Ge,nt,Ye)=>{if(!Cr.listening)return;const ft=M(Ge),ut=Z(ft);if(ut){Q(Xr(ut,{replace:!0}),ft).catch(Bd);return}p=ft;const se=f.value;oh&&u9(oE(se.fullPath,Ye.delta),C_()),ae(ft,se).catch(me=>ps(me,12)?me:ps(me,2)?(Q(me.to,ft).then(Ae=>{ps(Ae,20)&&!Ye.delta&&Ye.type===np.pop&&n.go(-1,!1)}).catch(Bd),Promise.reject()):(Ye.delta&&n.go(-Ye.delta,!1),et(me,ft,se))).then(me=>{me=me||ue(ft,se,!1),me&&(Ye.delta&&!ps(me,8)?n.go(-Ye.delta,!1):Ye.type===np.pop&&ps(me,20)&&n.go(-1,!1)),he(ft,se,me)}).catch(Bd)}))}let He=ed(),we=ed(),it;function et(Ge,nt,Ye){zt(Ge);const ft=we.list();return ft.length?ft.forEach(ut=>ut(Ge,nt,Ye)):console.error(Ge),Promise.reject(Ge)}function Ct(){return it&&f.value!==xs?Promise.resolve():new Promise((Ge,nt)=>{He.add([Ge,nt])})}function zt(Ge){return it||(it=!Ge,ye(),He.list().forEach(([nt,Ye])=>Ge?Ye(Ge):nt()),He.reset()),Ge}function tr(Ge,nt,Ye,ft){const{scrollBehavior:ut}=e;if(!oh||!ut)return Promise.resolve();const se=!Ye&&c9(oE(Ge.fullPath,0))||(ft||!Ye)&&history.state&&history.state.scroll||null;return Rp().then(()=>ut(Ge,nt,se)).then(me=>me&&l9(me)).catch(me=>et(me,Ge,nt))}const $t=Ge=>n.go(Ge);let Lr;const Ir=new Set,Cr={currentRoute:f,listening:!0,addRoute:S,removeRoute:A,hasRoute:I,getRoutes:L,resolve:M,options:e,push:N,replace:q,go:$t,back:()=>$t(-1),forward:()=>$t(1),beforeEach:a.add,beforeResolve:u.add,afterEach:o.add,onError:we.add,isReady:Ct,install(Ge){const nt=this;Ge.component("RouterLink",yD),Ge.component("RouterView",xD),Ge.config.globalProperties.$router=nt,Object.defineProperty(Ge.config.globalProperties,"$route",{enumerable:!0,get:()=>jt(f)}),oh&&!Lr&&f.value===xs&&(Lr=!0,N(n.location).catch(ut=>{}));const Ye={};for(const ut in xs)Ye[ut]=St(()=>f.value[ut]);Ge.provide(A_,nt),Ge.provide(lw,Gh(Ye)),Ge.provide(Tx,f);const ft=Ge.unmount;Ir.add(Ge),Ge.unmount=function(){Ir.delete(Ge),Ir.size<1&&(p=xs,fe&&fe(),fe=null,f.value=xs,Lr=!1,it=!1),ft()}}};function dr(Ge){return Ge.reduce((nt,Ye)=>nt.then(()=>ie(Ye)),Promise.resolve())}return Cr}function K9(e,t){const r=[],i=[],n=[],a=Math.max(t.matched.length,e.matched.length);for(let u=0;u<a;u++){const o=t.matched[u];o&&(e.matched.find(p=>Ph(p,o))?i.push(o):r.push(o));const f=e.matched[u];f&&(t.matched.find(p=>Ph(p,f))||n.push(f))}return[r,i,n]}function lc(){return yi(A_)}function Bl(){return yi(lw)}const J9=({headerLinkSelector:e,headerAnchorSelector:t,delay:r,offset:i=5})=>{const n=lc(),u=ow(()=>{var L,I;const o=Math.max(window.scrollY,document.documentElement.scrollTop,document.body.scrollTop);if(Math.abs(o-0)<i){xE(n,"");return}const p=window.innerHeight+o,v=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),_=Math.abs(v-p)<i,y=Array.from(document.querySelectorAll(e)),A=Array.from(document.querySelectorAll(t)).filter(M=>y.some(D=>D.hash===M.hash));for(let M=0;M<A.length;M++){const D=A[M],O=A[M+1],N=o>=(((L=D.parentElement)==null?void 0:L.offsetTop)??0)-i,q=!O||o<(((I=O.parentElement)==null?void 0:I.offsetTop)??0)-i;if(!(N&&q))continue;const Q=decodeURIComponent(n.currentRoute.value.hash),j=decodeURIComponent(D.hash);if(Q===j)return;if(_){for(let ie=M+1;ie<A.length;ie++)if(Q===decodeURIComponent(A[ie].hash))return}xE(n,j);return}},r);Kn(()=>{window.addEventListener("scroll",u)}),b_(()=>{window.removeEventListener("scroll",u)})},xE=async(e,t)=>{const{scrollBehavior:r}=e.options;e.options.scrollBehavior=void 0,await e.replace({query:e.currentRoute.value.query,hash:t,force:!0}).finally(()=>e.options.scrollBehavior=r)},Q9="a.sidebar-item",eF=".header-anchor",tF=300,rF=5,iF=xo({setup(){J9({headerLinkSelector:Q9,headerAnchorSelector:eF,delay:tF,offset:rF})}}),bE=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,nF=()=>window.scrollTo({top:0,behavior:"smooth"});const aF=Er({name:"BackToTop",setup(){const e=Kr(0),t=St(()=>e.value>300),r=ow(()=>{e.value=bE()},100);Kn(()=>{e.value=bE(),window.addEventListener("scroll",()=>r())});const i=Sr("div",{class:"back-to-top",onClick:nF});return()=>Sr(Bp,{name:"back-to-top"},()=>t.value?i:null)}}),oF=xo({rootComponents:[aF]});const sF=Sr("svg",{class:"external-link-icon",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",x:"0px",y:"0px",viewBox:"0 0 100 100",width:"15",height:"15"},[Sr("path",{fill:"currentColor",d:"M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"}),Sr("polygon",{fill:"currentColor",points:"45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"})]),lF=Er({name:"ExternalLinkIcon",props:{locales:{type:Object,required:!1,default:()=>({})}},setup(e){const t=Vp(),r=St(()=>e.locales[t.value]??{openInNewWindow:"open in new window"});return()=>Sr("span",[sF,Sr("span",{class:"external-link-icon-sr-only"},r.value.openInNewWindow)])}}),uF={"/":{openInNewWindow:""}},cF=xo({enhance({app:e}){e.component("ExternalLinkIcon",Sr(lF,{locales:uF}))}});/*! medium-zoom 1.0.8 | MIT License | https://github.com/francoischalifour/medium-zoom */var Nu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},fv=function(t){return t.tagName==="IMG"},hF=function(t){return NodeList.prototype.isPrototypeOf(t)},ag=function(t){return t&&t.nodeType===1},wE=function(t){var r=t.currentSrc||t.src;return r.substr(-4).toLowerCase()===".svg"},SE=function(t){try{return Array.isArray(t)?t.filter(fv):hF(t)?[].slice.call(t).filter(fv):ag(t)?[t].filter(fv):typeof t=="string"?[].slice.call(document.querySelectorAll(t)).filter(fv):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},fF=function(t){var r=document.createElement("div");return r.classList.add("medium-zoom-overlay"),r.style.background=t,r},dF=function(t){var r=t.getBoundingClientRect(),i=r.top,n=r.left,a=r.width,u=r.height,o=t.cloneNode(),f=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,p=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return o.removeAttribute("id"),o.style.position="absolute",o.style.top=i+f+"px",o.style.left=n+p+"px",o.style.width=a+"px",o.style.height=u+"px",o.style.transform="",o},Hc=function(t,r){var i=Nu({bubbles:!1,cancelable:!1,detail:void 0},r);if(typeof window.CustomEvent=="function")return new CustomEvent(t,i);var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,i.bubbles,i.cancelable,i.detail),n},pF=function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=window.Promise||function(ue){function fe(){}ue(fe,fe)},n=function(ue){var fe=ue.target;if(fe===ie){A();return}O.indexOf(fe)!==-1&&L({target:fe})},a=function(){if(!(q||!j.original)){var ue=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(Z-ue)>Q.scrollOffset&&setTimeout(A,150)}},u=function(ue){var fe=ue.key||ue.keyCode;(fe==="Escape"||fe==="Esc"||fe===27)&&A()},o=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=ue;if(ue.background&&(ie.style.background=ue.background),ue.container&&ue.container instanceof Object&&(fe.container=Nu({},Q.container,ue.container)),ue.template){var ye=ag(ue.template)?ue.template:document.querySelector(ue.template);fe.template=ye}return Q=Nu({},Q,fe),O.forEach(function(He){He.dispatchEvent(Hc("medium-zoom:update",{detail:{zoom:ae}}))}),ae},f=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e(Nu({},Q,ue))},p=function(){for(var ue=arguments.length,fe=Array(ue),ye=0;ye<ue;ye++)fe[ye]=arguments[ye];var He=fe.reduce(function(we,it){return[].concat(we,SE(it))},[]);return He.filter(function(we){return O.indexOf(we)===-1}).forEach(function(we){O.push(we),we.classList.add("medium-zoom-image")}),N.forEach(function(we){var it=we.type,et=we.listener,Ct=we.options;He.forEach(function(zt){zt.addEventListener(it,et,Ct)})}),ae},v=function(){for(var ue=arguments.length,fe=Array(ue),ye=0;ye<ue;ye++)fe[ye]=arguments[ye];j.zoomed&&A();var He=fe.length>0?fe.reduce(function(we,it){return[].concat(we,SE(it))},[]):O;return He.forEach(function(we){we.classList.remove("medium-zoom-image"),we.dispatchEvent(Hc("medium-zoom:detach",{detail:{zoom:ae}}))}),O=O.filter(function(we){return He.indexOf(we)===-1}),ae},_=function(ue,fe){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O.forEach(function(He){He.addEventListener("medium-zoom:"+ue,fe,ye)}),N.push({type:"medium-zoom:"+ue,listener:fe,options:ye}),ae},y=function(ue,fe){var ye=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O.forEach(function(He){He.removeEventListener("medium-zoom:"+ue,fe,ye)}),N=N.filter(function(He){return!(He.type==="medium-zoom:"+ue&&He.listener.toString()===fe.toString())}),ae},S=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=ue.target,ye=function(){var we={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},it=void 0,et=void 0;if(Q.container)if(Q.container instanceof Object)we=Nu({},we,Q.container),it=we.width-we.left-we.right-Q.margin*2,et=we.height-we.top-we.bottom-Q.margin*2;else{var Ct=ag(Q.container)?Q.container:document.querySelector(Q.container),zt=Ct.getBoundingClientRect(),tr=zt.width,$t=zt.height,Lr=zt.left,Ir=zt.top;we=Nu({},we,{width:tr,height:$t,left:Lr,top:Ir})}it=it||we.width-Q.margin*2,et=et||we.height-Q.margin*2;var Cr=j.zoomedHd||j.original,dr=wE(Cr)?it:Cr.naturalWidth||it,Ge=wE(Cr)?et:Cr.naturalHeight||et,nt=Cr.getBoundingClientRect(),Ye=nt.top,ft=nt.left,ut=nt.width,se=nt.height,me=Math.min(Math.max(ut,dr),it)/ut,Ae=Math.min(Math.max(se,Ge),et)/se,Ve=Math.min(me,Ae),We=(-ft+(it-ut)/2+Q.margin+we.left)/Ve,Ke=(-Ye+(et-se)/2+Q.margin+we.top)/Ve,dt="scale("+Ve+") translate3d("+We+"px, "+Ke+"px, 0)";j.zoomed.style.transform=dt,j.zoomedHd&&(j.zoomedHd.style.transform=dt)};return new i(function(He){if(fe&&O.indexOf(fe)===-1){He(ae);return}var we=function tr(){q=!1,j.zoomed.removeEventListener("transitionend",tr),j.original.dispatchEvent(Hc("medium-zoom:opened",{detail:{zoom:ae}})),He(ae)};if(j.zoomed){He(ae);return}if(fe)j.original=fe;else if(O.length>0){var it=O;j.original=it[0]}else{He(ae);return}if(j.original.dispatchEvent(Hc("medium-zoom:open",{detail:{zoom:ae}})),Z=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,q=!0,j.zoomed=dF(j.original),document.body.appendChild(ie),Q.template){var et=ag(Q.template)?Q.template:document.querySelector(Q.template);j.template=document.createElement("div"),j.template.appendChild(et.content.cloneNode(!0)),document.body.appendChild(j.template)}if(j.original.parentElement&&j.original.parentElement.tagName==="PICTURE"&&j.original.currentSrc&&(j.zoomed.src=j.original.currentSrc),document.body.appendChild(j.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),j.original.classList.add("medium-zoom-image--hidden"),j.zoomed.classList.add("medium-zoom-image--opened"),j.zoomed.addEventListener("click",A),j.zoomed.addEventListener("transitionend",we),j.original.getAttribute("data-zoom-src")){j.zoomedHd=j.zoomed.cloneNode(),j.zoomedHd.removeAttribute("srcset"),j.zoomedHd.removeAttribute("sizes"),j.zoomedHd.removeAttribute("loading"),j.zoomedHd.src=j.zoomed.getAttribute("data-zoom-src"),j.zoomedHd.onerror=function(){clearInterval(Ct),console.warn("Unable to reach the zoom image target "+j.zoomedHd.src),j.zoomedHd=null,ye()};var Ct=setInterval(function(){j.zoomedHd.complete&&(clearInterval(Ct),j.zoomedHd.classList.add("medium-zoom-image--opened"),j.zoomedHd.addEventListener("click",A),document.body.appendChild(j.zoomedHd),ye())},10)}else if(j.original.hasAttribute("srcset")){j.zoomedHd=j.zoomed.cloneNode(),j.zoomedHd.removeAttribute("sizes"),j.zoomedHd.removeAttribute("loading");var zt=j.zoomedHd.addEventListener("load",function(){j.zoomedHd.removeEventListener("load",zt),j.zoomedHd.classList.add("medium-zoom-image--opened"),j.zoomedHd.addEventListener("click",A),document.body.appendChild(j.zoomedHd),ye()})}else ye()})},A=function(){return new i(function(ue){if(q||!j.original){ue(ae);return}var fe=function ye(){j.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(j.zoomed),j.zoomedHd&&document.body.removeChild(j.zoomedHd),document.body.removeChild(ie),j.zoomed.classList.remove("medium-zoom-image--opened"),j.template&&document.body.removeChild(j.template),q=!1,j.zoomed.removeEventListener("transitionend",ye),j.original.dispatchEvent(Hc("medium-zoom:closed",{detail:{zoom:ae}})),j.original=null,j.zoomed=null,j.zoomedHd=null,j.template=null,ue(ae)};q=!0,document.body.classList.remove("medium-zoom--opened"),j.zoomed.style.transform="",j.zoomedHd&&(j.zoomedHd.style.transform=""),j.template&&(j.template.style.transition="opacity 150ms",j.template.style.opacity=0),j.original.dispatchEvent(Hc("medium-zoom:close",{detail:{zoom:ae}})),j.zoomed.addEventListener("transitionend",fe)})},L=function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},fe=ue.target;return j.original?A():S({target:fe})},I=function(){return Q},M=function(){return O},D=function(){return j.original},O=[],N=[],q=!1,Z=0,Q=r,j={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(t)==="[object Object]"?Q=t:(t||typeof t=="string")&&p(t),Q=Nu({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},Q);var ie=fF(Q.background);document.addEventListener("click",n),document.addEventListener("keyup",u),document.addEventListener("scroll",a),window.addEventListener("resize",A);var ae={open:S,close:A,toggle:L,update:o,clone:f,attach:p,detach:v,on:_,off:y,getOptions:I,getImages:M,getZoomedImage:D};return ae};function mF(e,t){t===void 0&&(t={});var r=t.insertAt;if(!(!e||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",r==="top"&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}var vF=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";mF(vF);const gF=pF,_F=Symbol("mediumZoom");const yF=".theme-default-content > img, .theme-default-content :not(a) > img",xF={},bF=300,wF=xo({enhance({app:e,router:t}){const r=gF(xF);r.refresh=(i=yF)=>{r.detach(),r.attach(i)},e.provide(_F,r),t.afterEach(()=>{setTimeout(()=>r.refresh(),bF)})}});/**
 * NProgress, (c) 2013, 2014 Rico Sta. Cruz - http://ricostacruz.com/nprogress
 * @license MIT
 */const zr={settings:{minimum:.08,easing:"ease",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,barSelector:'[role="bar"]',parent:"body",template:'<div class="bar" role="bar"></div>'},status:null,set:e=>{const t=zr.isStarted();e=b0(e,zr.settings.minimum,1),zr.status=e===1?null:e;const r=zr.render(!t),i=r.querySelector(zr.settings.barSelector),n=zr.settings.speed,a=zr.settings.easing;return r.offsetWidth,SF(u=>{dv(i,{transform:"translate3d("+TE(e)+"%,0,0)",transition:"all "+n+"ms "+a}),e===1?(dv(r,{transition:"none",opacity:"1"}),r.offsetWidth,setTimeout(function(){dv(r,{transition:"all "+n+"ms linear",opacity:"0"}),setTimeout(function(){zr.remove(),u()},n)},n)):setTimeout(()=>u(),n)}),zr},isStarted:()=>typeof zr.status=="number",start:()=>{zr.status||zr.set(0);const e=()=>{setTimeout(()=>{zr.status&&(zr.trickle(),e())},zr.settings.trickleSpeed)};return zr.settings.trickle&&e(),zr},done:e=>!e&&!zr.status?zr:zr.inc(.3+.5*Math.random()).set(1),inc:e=>{let t=zr.status;return t?(typeof e!="number"&&(e=(1-t)*b0(Math.random()*t,.1,.95)),t=b0(t+e,0,.994),zr.set(t)):zr.start()},trickle:()=>zr.inc(Math.random()*zr.settings.trickleRate),render:e=>{if(zr.isRendered())return document.getElementById("nprogress");EE(document.documentElement,"nprogress-busy");const t=document.createElement("div");t.id="nprogress",t.innerHTML=zr.settings.template;const r=t.querySelector(zr.settings.barSelector),i=e?"-100":TE(zr.status||0),n=document.querySelector(zr.settings.parent);return dv(r,{transition:"all 0 linear",transform:"translate3d("+i+"%,0,0)"}),n!==document.body&&EE(n,"nprogress-custom-parent"),n==null||n.appendChild(t),t},remove:()=>{CE(document.documentElement,"nprogress-busy"),CE(document.querySelector(zr.settings.parent),"nprogress-custom-parent");const e=document.getElementById("nprogress");e&&TF(e)},isRendered:()=>!!document.getElementById("nprogress")},b0=(e,t,r)=>e<t?t:e>r?r:e,TE=e=>(-1+e)*100,SF=function(){const e=[];function t(){const r=e.shift();r&&r(t)}return function(r){e.push(r),e.length===1&&t()}}(),dv=function(){const e=["Webkit","O","Moz","ms"],t={};function r(u){return u.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(o,f){return f.toUpperCase()})}function i(u){const o=document.body.style;if(u in o)return u;let f=e.length;const p=u.charAt(0).toUpperCase()+u.slice(1);let v;for(;f--;)if(v=e[f]+p,v in o)return v;return u}function n(u){return u=r(u),t[u]??(t[u]=i(u))}function a(u,o,f){o=n(o),u.style[o]=f}return function(u,o){for(const f in o){const p=o[f];p!==void 0&&Object.prototype.hasOwnProperty.call(o,f)&&a(u,f,p)}}}(),bD=(e,t)=>(typeof e=="string"?e:uw(e)).indexOf(" "+t+" ")>=0,EE=(e,t)=>{const r=uw(e),i=r+t;bD(r,t)||(e.className=i.substring(1))},CE=(e,t)=>{const r=uw(e);if(!bD(e,t))return;const i=r.replace(" "+t+" "," ");e.className=i.substring(1,i.length-1)},uw=e=>(" "+(e.className||"")+" ").replace(/\s+/gi," "),TF=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)};const EF=()=>{Kn(()=>{const e=lc(),t=new Set;t.add(e.currentRoute.value.path),e.beforeEach(r=>{t.has(r.path)||zr.start()}),e.afterEach(r=>{t.add(r.path),zr.done()})})},CF=xo({setup(){EF()}}),AF=JSON.parse('{"navbar":[{"text":"","link":"/"},{"text":"","link":"https://daily.sustech.online/"},{"text":"","link":"/miniapp/"},{"text":"","link":"/about/"},{"text":"","link":"/site-help/"}],"repo":"sustech-cra/sustech-online-ng","repoLabel":"Github","docsRepo":"sustech-cra/sustech-online-ng","docsDir":"docs","editLinkText":"","lastUpdatedText":"","contributorsText":"","editLink":true,"docsBranch":"master","tip":"","warning":"","danger":"","notFound":["",""," 404 ",""],"backToHome":"","openInNewWindow":"","toggleColorMode":"","toggleSidebar":"","sidebarDepth":2,"sidebar":["/","/facility/","/contact/","/calendar/","/service/","/life/","/study/","/organizations/","/media/",{"text":"","link":"/transport/","children":[{"text":"","link":"/transport/bustimer.md","children":[]},{"text":"-","link":"/transport/workday.md","children":[]},{"text":"-","link":"/transport/holiday.md","children":[]},{"text":"","link":"/transport/","children":[]}]},"/surroundings/"],"locales":{"/":{"selectLanguageName":"English"}},"colorMode":"auto","colorModeSwitch":true,"logo":null,"selectLanguageText":"Languages","selectLanguageAriaLabel":"Select language","lastUpdated":true,"contributors":true}'),MF=Kr(AF),IF=()=>MF,wD=Symbol(""),PF=()=>{const e=yi(wD);if(!e)throw new Error("useThemeLocaleData() is called without provider.");return e},DF=(e,t)=>{const{locales:r,...i}=e;return{...i,...r==null?void 0:r[t]}},LF=xo({enhance({app:e}){const t=IF(),r=e._context.provides[iw],i=St(()=>DF(t.value,r.value));e.provide(wD,i),Object.defineProperties(e.config.globalProperties,{$theme:{get(){return t.value}},$themeLocale:{get(){return i.value}}})}}),kF=Er({__name:"Badge",props:{type:{type:String,required:!1,default:"tip"},text:{type:String,required:!1,default:""},vertical:{type:String,required:!1,default:void 0}},setup(e){return(t,r)=>(lt(),Rt("span",{class:gn(["badge",e.type]),style:Hh({verticalAlign:e.vertical})},[ti(t.$slots,"default",{},()=>[kl(Vr(e.text),1)])],6))}}),Ur=(e,t)=>{const r=e.__vccOpts||e;for(const[i,n]of t)r[i]=n;return r},RF=Ur(kF,[["__file","Badge.vue"]]),zF=Er({name:"CodeGroup",slots:Object,setup(e,{slots:t}){const r=Kr(-1),i=Kr([]),n=(o=r.value)=>{o<i.value.length-1?r.value=o+1:r.value=0,i.value[r.value].focus()},a=(o=r.value)=>{o>0?r.value=o-1:r.value=i.value.length-1,i.value[r.value].focus()},u=(o,f)=>{o.key===" "||o.key==="Enter"?(o.preventDefault(),r.value=f):o.key==="ArrowRight"?(o.preventDefault(),n(f)):o.key==="ArrowLeft"&&(o.preventDefault(),a(f))};return()=>{var f;const o=(((f=t.default)==null?void 0:f.call(t))||[]).filter(p=>p.type.name==="CodeGroupItem").map(p=>(p.props===null&&(p.props={}),p));return o.length===0?null:(r.value<0||r.value>o.length-1?(r.value=o.findIndex(p=>p.props.active===""||p.props.active===!0),r.value===-1&&(r.value=0)):o.forEach((p,v)=>{p.props.active=v===r.value}),Sr("div",{class:"code-group"},[Sr("div",{class:"code-group__nav"},Sr("ul",{class:"code-group__ul"},o.map((p,v)=>{const _=v===r.value;return Sr("li",{class:"code-group__li"},Sr("button",{ref:y=>{y&&(i.value[v]=y)},class:{"code-group__nav-tab":!0,"code-group__nav-tab-active":_},ariaPressed:_,ariaExpanded:_,onClick:()=>r.value=v,onKeydown:y=>u(y,v)},p.props.title))}))),o]))}}}),OF=["aria-selected"],BF=Er({name:"CodeGroupItem"}),FF=Er({...BF,props:{title:{type:String,required:!0},active:{type:Boolean,required:!1,default:!1}},setup(e){return(t,r)=>(lt(),Rt("div",{class:gn(["code-group-item",{"code-group-item__active":e.active}]),"aria-selected":e.active},[ti(t.$slots,"default")],10,OF))}}),NF=Ur(FF,[["__file","CodeGroupItem.vue"]]);function SD(e){return eP()?(jz(e),!0):!1}function ap(e){return typeof e=="function"?e():jt(e)}const VF=typeof window<"u",TD=()=>{};function $F(e,t){function r(...i){return new Promise((n,a)=>{Promise.resolve(e(()=>t.apply(this,i),{fn:t,thisArg:this,args:i})).then(n).catch(a)})}return r}const ED=e=>e();function UF(e=ED){const t=Kr(!0);function r(){t.value=!1}function i(){t.value=!0}const n=(...a)=>{t.value&&e(...a)};return{isActive:Dp(t),pause:r,resume:i,eventFilter:n}}function GF(...e){if(e.length!==1)return A6(...e);const t=e[0];return typeof t=="function"?Dp(T6(()=>({get:t,set:TD}))):Kr(t)}function HF(e=!1,t={}){const{truthyValue:r=!0,falsyValue:i=!1}=t,n=Ki(e),a=Kr(e);function u(o){if(arguments.length)return a.value=o,a.value;{const f=ap(r);return a.value=a.value===f?ap(i):f,a.value}}return n?u:[a,u]}var AE=Object.getOwnPropertySymbols,qF=Object.prototype.hasOwnProperty,jF=Object.prototype.propertyIsEnumerable,WF=(e,t)=>{var r={};for(var i in e)qF.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&AE)for(var i of AE(e))t.indexOf(i)<0&&jF.call(e,i)&&(r[i]=e[i]);return r};function ZF(e,t,r={}){const i=r,{eventFilter:n=ED}=i,a=WF(i,["eventFilter"]);return Ln(e,$F(n,t),a)}var XF=Object.defineProperty,YF=Object.defineProperties,KF=Object.getOwnPropertyDescriptors,Og=Object.getOwnPropertySymbols,CD=Object.prototype.hasOwnProperty,AD=Object.prototype.propertyIsEnumerable,ME=(e,t,r)=>t in e?XF(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,JF=(e,t)=>{for(var r in t||(t={}))CD.call(t,r)&&ME(e,r,t[r]);if(Og)for(var r of Og(t))AD.call(t,r)&&ME(e,r,t[r]);return e},QF=(e,t)=>YF(e,KF(t)),e8=(e,t)=>{var r={};for(var i in e)CD.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&Og)for(var i of Og(e))t.indexOf(i)<0&&AD.call(e,i)&&(r[i]=e[i]);return r};function t8(e,t,r={}){const i=r,{eventFilter:n}=i,a=e8(i,["eventFilter"]),{eventFilter:u,pause:o,resume:f,isActive:p}=UF(n);return{stop:ZF(e,t,QF(JF({},a),{eventFilter:u})),pause:o,resume:f,isActive:p}}function r8(e){var t;const r=ap(e);return(t=r==null?void 0:r.$el)!=null?t:r}const Bg=VF?window:void 0;function Ex(...e){let t,r,i,n;if(typeof e[0]=="string"||Array.isArray(e[0])?([r,i,n]=e,t=Bg):[t,r,i,n]=e,!t)return TD;Array.isArray(r)||(r=[r]),Array.isArray(i)||(i=[i]);const a=[],u=()=>{a.forEach(v=>v()),a.length=0},o=(v,_,y,S)=>(v.addEventListener(_,y,S),()=>v.removeEventListener(_,y,S)),f=Ln(()=>[r8(t),ap(n)],([v,_])=>{u(),v&&a.push(...r.flatMap(y=>i.map(S=>o(v,y,S,_))))},{immediate:!0,flush:"post"}),p=()=>{f(),u()};return SD(p),p}function i8(){const e=Kr(!1);return Jb()&&Kn(()=>{e.value=!0}),e}function n8(e){const t=i8();return St(()=>(t.value,!!e()))}function a8(e,t={}){const{window:r=Bg}=t,i=n8(()=>r&&"matchMedia"in r&&typeof r.matchMedia=="function");let n;const a=Kr(!1),u=()=>{n&&("removeEventListener"in n?n.removeEventListener("change",o):n.removeListener(o))},o=()=>{i.value&&(u(),n=r.matchMedia(GF(e).value),a.value=!!(n!=null&&n.matches),n&&("addEventListener"in n?n.addEventListener("change",o):n.addListener(o)))};return dx(o),SD(()=>u()),a}const pv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mv="__vueuse_ssr_handlers__",o8=s8();function s8(){return mv in pv||(pv[mv]=pv[mv]||{}),pv[mv]}function l8(e,t){return o8[e]||t}function u8(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var c8=Object.defineProperty,IE=Object.getOwnPropertySymbols,h8=Object.prototype.hasOwnProperty,f8=Object.prototype.propertyIsEnumerable,PE=(e,t,r)=>t in e?c8(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,DE=(e,t)=>{for(var r in t||(t={}))h8.call(t,r)&&PE(e,r,t[r]);if(IE)for(var r of IE(t))f8.call(t,r)&&PE(e,r,t[r]);return e};const d8={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},LE="vueuse-storage";function p8(e,t,r,i={}){var n;const{flush:a="pre",deep:u=!0,listenToStorageChanges:o=!0,writeDefaults:f=!0,mergeDefaults:p=!1,shallow:v,window:_=Bg,eventFilter:y,onError:S=j=>{console.error(j)}}=i,A=(v?Ld:Kr)(t);if(!r)try{r=l8("getDefaultStorage",()=>{var j;return(j=Bg)==null?void 0:j.localStorage})()}catch(j){S(j)}if(!r)return A;const L=ap(t),I=u8(L),M=(n=i.serializer)!=null?n:d8[I],{pause:D,resume:O}=t8(A,()=>N(A.value),{flush:a,deep:u,eventFilter:y});return _&&o&&(Ex(_,"storage",Q),Ex(_,LE,Z)),Q(),A;function N(j){try{if(j==null)r.removeItem(e);else{const ie=M.write(j),ae=r.getItem(e);ae!==ie&&(r.setItem(e,ie),_&&_.dispatchEvent(new CustomEvent(LE,{detail:{key:e,oldValue:ae,newValue:ie,storageArea:r}})))}}catch(ie){S(ie)}}function q(j){const ie=j?j.newValue:r.getItem(e);if(ie==null)return f&&L!==null&&r.setItem(e,M.write(L)),L;if(!j&&p){const ae=M.read(ie);return typeof p=="function"?p(ae,L):I==="object"&&!Array.isArray(ae)?DE(DE({},L),ae):ae}else return typeof ie!="string"?ie:M.read(ie)}function Z(j){Q(j.detail)}function Q(j){if(!(j&&j.storageArea!==r)){if(j&&j.key==null){A.value=L;return}if(!(j&&j.key!==e)){D();try{A.value=q(j)}catch(ie){S(ie)}finally{j?Rp(O):O()}}}}}function m8(e){return a8("(prefers-color-scheme: dark)",e)}const jn=()=>PF(),MD=Symbol(""),cw=()=>{const e=yi(MD);if(!e)throw new Error("useDarkMode() is called without provider.");return e},v8=()=>{const e=jn(),t=m8(),r=p8("vuepress-color-scheme",e.value.colorMode),i=St({get(){return e.value.colorModeSwitch?r.value==="auto"?t.value:r.value==="dark":e.value.colorMode==="dark"},set(n){n===t.value?r.value="auto":r.value=n?"dark":"light"}});Al(MD,i),g8(i)},g8=e=>{const t=(r=e.value)=>{const i=window==null?void 0:window.document.querySelector("html");i==null||i.classList.toggle("dark",r)};Kn(()=>{Ln(e,t,{immediate:!0})}),Op(()=>t())},ID=(...e)=>{const r=lc().resolve(...e),i=r.matched[r.matched.length-1];if(!(i!=null&&i.redirect))return r;const{redirect:n}=i,a=OB(n)?n(r):n,u=jo(a)?{path:a}:a;return ID({hash:r.hash,query:r.query,params:r.params,...u})},hw=e=>{const t=ID(encodeURI(e));return{text:t.meta.title||e,link:t.name==="404"?e:t.fullPath}};let w0=null,td=null;const _8={wait:()=>w0,pending:()=>{w0=new Promise(e=>td=e)},resolve:()=>{td==null||td(),w0=null,td=null}},PD=()=>_8,DD=Symbol("sidebarItems"),fw=()=>{const e=yi(DD);if(!e)throw new Error("useSidebarItems() is called without provider.");return e},y8=()=>{const e=jn(),t=Cs(),r=St(()=>x8(t.value,e.value));Al(DD,r)},x8=(e,t)=>{const r=e.sidebar??t.sidebar??"auto",i=e.sidebarDepth??t.sidebarDepth??2;return e.home||r===!1?[]:r==="auto"?w8(i):Fp(r)?LD(r,i):rw(r)?S8(r,i):[]},b8=(e,t)=>({text:e.title,link:e.link,children:dw(e.children,t)}),dw=(e,t)=>t>0?e.map(r=>b8(r,t-1)):[],w8=e=>{const t=Ml();return[{text:t.value.title,children:dw(t.value.headers,e)}]},LD=(e,t)=>{const r=Bl(),i=Ml(),n=a=>{var o;let u;if(jo(a)?u=hw(a):u=a,u.children)return{...u,children:u.children.map(f=>n(f))};if(u.link===r.path){const f=((o=i.value.headers[0])==null?void 0:o.level)===1?i.value.headers[0].children:i.value.headers;return{...u,children:dw(f,t)}}return u};return e.map(a=>n(a))},S8=(e,t)=>{const r=Bl(),i=eD(e,r.path),n=e[i]??[];return LD(n,t)},T8="719px",E8={mobile:T8};var op;(function(e){e.MOBILE="mobile"})(op||(op={}));var KI;const C8={[op.MOBILE]:Number.parseInt((KI=E8.mobile)==null?void 0:KI.replace("px",""),10)},kD=(e,t)=>{const r=C8[e];Number.isInteger(r)&&Kn(()=>{t(r),window.addEventListener("resize",()=>t(r),!1),window.addEventListener("orientationchange",()=>t(r),!1)})},A8={},M8={class:"theme-default-content"};function I8(e,t){const r=qn("Content");return lt(),Rt("div",M8,[er(r)])}const P8=Ur(A8,[["render",I8],["__file","HomeContent.vue"]]),D8={key:0,class:"features"},L8=Er({__name:"HomeFeatures",setup(e){const t=Cs(),r=St(()=>Fp(t.value.features)?t.value.features:[]);return(i,n)=>r.value.length?(lt(),Rt("div",D8,[(lt(!0),Rt(Nr,null,vo(r.value,a=>(lt(),Rt("div",{key:a.title,class:"feature"},[rr("h2",null,Vr(a.title),1),rr("p",null,Vr(a.details),1)]))),128))])):di("",!0)}}),k8=Ur(L8,[["__file","HomeFeatures.vue"]]),R8=["innerHTML"],z8=["textContent"],O8=Er({__name:"HomeFooter",setup(e){const t=Cs(),r=St(()=>t.value.footer),i=St(()=>t.value.footerHtml);return(n,a)=>r.value?(lt(),Rt(Nr,{key:0},[i.value?(lt(),Rt("div",{key:0,class:"footer",innerHTML:r.value},null,8,R8)):(lt(),Rt("div",{key:1,class:"footer",textContent:Vr(r.value)},null,8,z8))],64)):di("",!0)}}),B8=Ur(O8,[["__file","HomeFooter.vue"]]),F8=["href","rel","target","aria-label"],N8=Er({inheritAttrs:!1}),V8=Er({...N8,__name:"AutoLink",props:{item:{type:Object,required:!0}},setup(e){const t=e,r=Bl(),i=jB(),{item:n}=Lp(t),a=St(()=>Np(n.value.link)),u=St(()=>NB(n.value.link)||VB(n.value.link)),o=St(()=>{if(!u.value){if(n.value.target)return n.value.target;if(a.value)return"_blank"}}),f=St(()=>o.value==="_blank"),p=St(()=>!a.value&&!u.value&&!f.value),v=St(()=>{if(!u.value){if(n.value.rel)return n.value.rel;if(f.value)return"noopener noreferrer"}}),_=St(()=>n.value.ariaLabel||n.value.text),y=St(()=>{const L=Object.keys(i.value.locales);return L.length?!L.some(I=>I===n.value.link):n.value.link!=="/"}),S=St(()=>y.value?r.path.startsWith(n.value.link):!1),A=St(()=>p.value?n.value.activeMatch?new RegExp(n.value.activeMatch).test(r.path):S.value:!1);return(L,I)=>{const M=qn("RouterLink"),D=qn("AutoLinkExternalIcon");return p.value?(lt(),wi(M,kg({key:0,class:{"router-link-active":A.value},to:jt(n).link,"aria-label":_.value},L.$attrs),{default:qi(()=>[ti(L.$slots,"before"),kl(" "+Vr(jt(n).text)+" ",1),ti(L.$slots,"after")]),_:3},16,["class","to","aria-label"])):(lt(),Rt("a",kg({key:1,class:"external-link",href:jt(n).link,rel:v.value,target:o.value,"aria-label":_.value},L.$attrs),[ti(L.$slots,"before"),kl(" "+Vr(jt(n).text)+" ",1),f.value?(lt(),wi(D,{key:0})):di("",!0),ti(L.$slots,"after")],16,F8))}}}),As=Ur(V8,[["__file","AutoLink.vue"]]),$8={class:"hero"},U8={key:0,id:"main-title"},G8={key:1,class:"description"},H8={key:2,class:"actions"},q8=Er({__name:"HomeHero",setup(e){const t=Cs(),r=nw(),i=cw(),n=St(()=>i.value&&t.value.heroImageDark!==void 0?t.value.heroImageDark:t.value.heroImage),a=St(()=>t.value.heroAlt||o.value||"hero"),u=St(()=>t.value.heroHeight||280),o=St(()=>t.value.heroText===null?null:t.value.heroText||r.value.title||"Hello"),f=St(()=>t.value.tagline===null?null:t.value.tagline||r.value.description||"Welcome to your VuePress site"),p=St(()=>Fp(t.value.actions)?t.value.actions.map(({text:_,link:y,type:S="primary"})=>({text:_,link:y,type:S})):[]),v=()=>{if(!n.value)return null;const _=Sr("img",{src:E_(n.value),alt:a.value,height:u.value});return t.value.heroImageDark===void 0?_:Sr(aw,()=>_)};return(_,y)=>(lt(),Rt("header",$8,[er(v),o.value?(lt(),Rt("h1",U8,Vr(o.value),1)):di("",!0),f.value?(lt(),Rt("p",G8,Vr(f.value),1)):di("",!0),p.value.length?(lt(),Rt("p",H8,[(lt(!0),Rt(Nr,null,vo(p.value,S=>(lt(),wi(As,{key:S.text,class:gn(["action-button",[S.type]]),item:S},null,8,["class","item"]))),128))])):di("",!0)]))}}),j8=Ur(q8,[["__file","HomeHero.vue"]]),W8={class:"home"},Z8=Er({__name:"Home",setup(e){return(t,r)=>(lt(),Rt("main",W8,[er(j8),er(k8),er(P8),er(B8)]))}}),X8=Ur(Z8,[["__file","Home.vue"]]),Y8=Er({__name:"NavbarBrand",setup(e){const t=Vp(),r=nw(),i=jn(),n=cw(),a=St(()=>i.value.home||t.value),u=St(()=>r.value.title),o=St(()=>n.value&&i.value.logoDark!==void 0?i.value.logoDark:i.value.logo),f=()=>{if(!o.value)return null;const p=Sr("img",{class:"logo",src:E_(o.value),alt:u.value});return i.value.logoDark===void 0?p:Sr(aw,()=>p)};return(p,v)=>{const _=qn("RouterLink");return lt(),wi(_,{to:a.value},{default:qi(()=>[er(f),u.value?(lt(),Rt("span",{key:0,class:gn(["site-name",{"can-hide":o.value}])},Vr(u.value),3)):di("",!0)]),_:1},8,["to"])}}}),K8=Ur(Y8,[["__file","NavbarBrand.vue"]]),J8=Er({__name:"DropdownTransition",setup(e){const t=i=>{i.style.height=i.scrollHeight+"px"},r=i=>{i.style.height=""};return(i,n)=>(lt(),wi(Bp,{name:"dropdown",onEnter:t,onAfterEnter:r,onBeforeLeave:t},{default:qi(()=>[ti(i.$slots,"default")]),_:3}))}}),RD=Ur(J8,[["__file","DropdownTransition.vue"]]),Q8=["aria-label"],eN={class:"title"},tN=rr("span",{class:"arrow down"},null,-1),rN=["aria-label"],iN={class:"title"},nN={class:"navbar-dropdown"},aN={class:"navbar-dropdown-subtitle"},oN={key:1},sN={class:"navbar-dropdown-subitem-wrapper"},lN=Er({__name:"NavbarDropdown",props:{item:{type:Object,required:!0}},setup(e){const t=e,{item:r}=Lp(t),i=St(()=>r.value.ariaLabel||r.value.text),n=Kr(!1),a=Bl();Ln(()=>a.path,()=>{n.value=!1});const u=f=>{f.detail===0?n.value=!n.value:n.value=!1},o=(f,p)=>p[p.length-1]===f;return(f,p)=>(lt(),Rt("div",{class:gn(["navbar-dropdown-wrapper",{open:n.value}])},[rr("button",{class:"navbar-dropdown-title",type:"button","aria-label":i.value,onClick:u},[rr("span",eN,Vr(jt(r).text),1),tN],8,Q8),rr("button",{class:"navbar-dropdown-title-mobile",type:"button","aria-label":i.value,onClick:p[0]||(p[0]=v=>n.value=!n.value)},[rr("span",iN,Vr(jt(r).text),1),rr("span",{class:gn(["arrow",n.value?"down":"right"])},null,2)],8,rN),er(RD,null,{default:qi(()=>[Mg(rr("ul",nN,[(lt(!0),Rt(Nr,null,vo(jt(r).children,v=>(lt(),Rt("li",{key:v.text,class:"navbar-dropdown-item"},[v.children?(lt(),Rt(Nr,{key:0},[rr("h4",aN,[v.link?(lt(),wi(As,{key:0,item:v,onFocusout:_=>o(v,jt(r).children)&&v.children.length===0&&(n.value=!1)},null,8,["item","onFocusout"])):(lt(),Rt("span",oN,Vr(v.text),1))]),rr("ul",sN,[(lt(!0),Rt(Nr,null,vo(v.children,_=>(lt(),Rt("li",{key:_.link,class:"navbar-dropdown-subitem"},[er(As,{item:_,onFocusout:y=>o(_,v.children)&&o(v,jt(r).children)&&(n.value=!1)},null,8,["item","onFocusout"])]))),128))])],64)):(lt(),wi(As,{key:1,item:v,onFocusout:_=>o(v,jt(r).children)&&(n.value=!1)},null,8,["item","onFocusout"]))]))),128))],512),[[Rg,n.value]])]),_:1})],2))}}),uN=Ur(lN,[["__file","NavbarDropdown.vue"]]),kE=e=>decodeURI(e).replace(/#.*$/,"").replace(/(index)?\.(md|html)$/,""),cN=(e,t)=>{if(t.hash===e)return!0;const r=kE(t.path),i=kE(e);return r===i},zD=(e,t)=>e.link&&cN(e.link,t)?!0:e.children?e.children.some(r=>zD(r,t)):!1,OD=e=>!Np(e)||/github\.com/.test(e)?"GitHub":/bitbucket\.org/.test(e)?"Bitbucket":/gitlab\.com/.test(e)?"GitLab":/gitee\.com/.test(e)?"Gitee":null,hN={GitHub:":repo/edit/:branch/:path",GitLab:":repo/-/edit/:branch/:path",Gitee:":repo/edit/:branch/:path",Bitbucket:":repo/src/:branch/:path?mode=edit&spa=0&at=:branch&fileviewer=file-view-default"},fN=({docsRepo:e,editLinkPattern:t})=>{if(t)return t;const r=OD(e);return r!==null?hN[r]:null},dN=({docsRepo:e,docsBranch:t,docsDir:r,filePathRelative:i,editLinkPattern:n})=>{if(!i)return null;const a=fN({docsRepo:e,editLinkPattern:n});return a?a.replace(/:repo/,Np(e)?e:`https://github.com/${e}`).replace(/:branch/,t).replace(/:path/,QP(`${JP(r)}/${i}`)):null},pN={key:0,class:"navbar-items"},mN=Er({__name:"NavbarItems",setup(e){const t=()=>{const v=lc(),_=Vp(),y=nw(),S=jn();return St(()=>{const A=Object.keys(y.value.locales);if(A.length<2)return[];const L=v.currentRoute.value.path,I=v.currentRoute.value.fullPath;return[{text:S.value.selectLanguageText??"unknown language",ariaLabel:S.value.selectLanguageAriaLabel??S.value.selectLanguageText??"unknown language",children:A.map(D=>{var j,ie;const O=((j=y.value.locales)==null?void 0:j[D])??{},N=((ie=S.value.locales)==null?void 0:ie[D])??{},q=`${O.lang}`,Z=N.selectLanguageName??q;let Q;if(q===y.value.lang)Q=I;else{const ae=L.replace(_.value,D);v.getRoutes().some(he=>he.path===ae)?Q=I.replace(L,ae):Q=N.home??D}return{text:Z,link:Q}})}]})},r=()=>{const v=jn(),_=St(()=>v.value.repo),y=St(()=>_.value?OD(_.value):null),S=St(()=>_.value&&!Np(_.value)?`https://github.com/${_.value}`:_.value),A=St(()=>S.value?v.value.repoLabel?v.value.repoLabel:y.value===null?"Source":y.value:null);return St(()=>!S.value||!A.value?[]:[{text:A.value,link:S.value}])},i=v=>jo(v)?hw(v):v.children?{...v,children:v.children.map(i)}:v,n=()=>{const v=jn();return St(()=>(v.value.navbar||[]).map(i))},a=Kr(!1),u=n(),o=t(),f=r(),p=St(()=>[...u.value,...o.value,...f.value]);return kD(op.MOBILE,v=>{window.innerWidth<v?a.value=!0:a.value=!1}),(v,_)=>p.value.length?(lt(),Rt("nav",pN,[(lt(!0),Rt(Nr,null,vo(p.value,y=>(lt(),Rt("div",{key:y.text,class:"navbar-item"},[y.children?(lt(),wi(uN,{key:0,item:y,class:gn(a.value?"mobile":"")},null,8,["item","class"])):(lt(),wi(As,{key:1,item:y},null,8,["item"]))]))),128))])):di("",!0)}}),BD=Ur(mN,[["__file","NavbarItems.vue"]]),vN=["title"],gN={class:"icon",focusable:"false",viewBox:"0 0 32 32"},_N=OO('<path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path>',9),yN=[_N],xN={class:"icon",focusable:"false",viewBox:"0 0 32 32"},bN=rr("path",{d:"M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z",fill:"currentColor"},null,-1),wN=[bN],SN=Er({__name:"ToggleColorModeButton",setup(e){const t=jn(),r=cw(),i=()=>{r.value=!r.value};return(n,a)=>(lt(),Rt("button",{class:"toggle-color-mode-button",title:jt(t).toggleColorMode,onClick:i},[Mg((lt(),Rt("svg",gN,yN,512)),[[Rg,!jt(r)]]),Mg((lt(),Rt("svg",xN,wN,512)),[[Rg,jt(r)]])],8,vN))}}),TN=Ur(SN,[["__file","ToggleColorModeButton.vue"]]),EN=["title"],CN=rr("div",{class:"icon","aria-hidden":"true"},[rr("span"),rr("span"),rr("span")],-1),AN=[CN],MN=Er({__name:"ToggleSidebarButton",emits:["toggle"],setup(e){const t=jn();return(r,i)=>(lt(),Rt("div",{class:"toggle-sidebar-button",title:jt(t).toggleSidebar,"aria-expanded":"false",role:"button",tabindex:"0",onClick:i[0]||(i[0]=n=>r.$emit("toggle"))},AN,8,EN))}}),IN=Ur(MN,[["__file","ToggleSidebarButton.vue"]]),PN=Er({__name:"Navbar",emits:["toggle-sidebar"],setup(e){const t=jn(),r=Kr(null),i=Kr(null),n=Kr(0),a=St(()=>n.value?{maxWidth:n.value+"px"}:{});kD(op.MOBILE,o=>{var p;const f=u(r.value,"paddingLeft")+u(r.value,"paddingRight");window.innerWidth<o?n.value=0:n.value=r.value.offsetWidth-f-(((p=i.value)==null?void 0:p.offsetWidth)||0)});function u(o,f){var _,y,S;const p=(S=(y=(_=o==null?void 0:o.ownerDocument)==null?void 0:_.defaultView)==null?void 0:y.getComputedStyle(o,null))==null?void 0:S[f],v=Number.parseInt(p,10);return Number.isNaN(v)?0:v}return(o,f)=>{const p=qn("NavbarSearch");return lt(),Rt("header",{ref_key:"navbar",ref:r,class:"navbar"},[er(IN,{onToggle:f[0]||(f[0]=v=>o.$emit("toggle-sidebar"))}),rr("span",{ref_key:"navbarBrand",ref:i},[er(K8)],512),rr("div",{class:"navbar-items-wrapper",style:Hh(a.value)},[ti(o.$slots,"before"),er(BD,{class:"can-hide"}),ti(o.$slots,"after"),jt(t).colorModeSwitch?(lt(),wi(TN,{key:0})):di("",!0),er(p)],4)],512)}}}),DN=Ur(PN,[["__file","Navbar.vue"]]),LN={class:"page-meta"},kN={key:0,class:"meta-item edit-link"},RN={key:1,class:"meta-item last-updated"},zN={class:"meta-item-label"},ON={class:"meta-item-info"},BN={key:2,class:"meta-item contributors"},FN={class:"meta-item-label"},NN={class:"meta-item-info"},VN=["title"],$N=Er({__name:"PageMeta",setup(e){const t=()=>{const f=jn(),p=Ml(),v=Cs();return St(()=>{if(!(v.value.editLink??f.value.editLink??!0))return null;const{repo:y,docsRepo:S=y,docsBranch:A="main",docsDir:L="",editLinkText:I}=f.value;if(!S)return null;const M=dN({docsRepo:S,docsBranch:A,docsDir:L,filePathRelative:p.value.filePathRelative,editLinkPattern:v.value.editLinkPattern??f.value.editLinkPattern});return M?{text:I??"Edit this page",link:M}:null})},r=()=>{const f=jn(),p=Ml(),v=Cs();return St(()=>{var S,A;return!(v.value.lastUpdated??f.value.lastUpdated??!0)||!((S=p.value.git)!=null&&S.updatedTime)?null:new Date((A=p.value.git)==null?void 0:A.updatedTime).toLocaleString()})},i=()=>{const f=jn(),p=Ml(),v=Cs();return St(()=>{var y;return v.value.contributors??f.value.contributors??!0?((y=p.value.git)==null?void 0:y.contributors)??null:null})},n=jn(),a=t(),u=r(),o=i();return(f,p)=>{const v=qn("ClientOnly");return lt(),Rt("footer",LN,[jt(a)?(lt(),Rt("div",kN,[er(As,{class:"meta-item-label",item:jt(a)},null,8,["item"])])):di("",!0),jt(u)?(lt(),Rt("div",RN,[rr("span",zN,Vr(jt(n).lastUpdatedText)+": ",1),er(v,null,{default:qi(()=>[rr("span",ON,Vr(jt(u)),1)]),_:1})])):di("",!0),jt(o)&&jt(o).length?(lt(),Rt("div",BN,[rr("span",FN,Vr(jt(n).contributorsText)+": ",1),rr("span",NN,[(lt(!0),Rt(Nr,null,vo(jt(o),(_,y)=>(lt(),Rt(Nr,{key:y},[rr("span",{class:"contributor",title:`email: ${_.email}`},Vr(_.name),9,VN),y!==jt(o).length-1?(lt(),Rt(Nr,{key:0},[kl(", ")],64)):di("",!0)],64))),128))])])):di("",!0)])}}}),UN=Ur($N,[["__file","PageMeta.vue"]]),GN={key:0,class:"page-nav"},HN={class:"inner"},qN={key:0,class:"prev"},jN={key:1,class:"next"},WN=Er({__name:"PageNav",setup(e){const t=f=>f===!1?null:jo(f)?hw(f):rw(f)?f:!1,r=(f,p,v)=>{const _=f.findIndex(y=>y.link===p);if(_!==-1){const y=f[_+v];return y!=null&&y.link?y:null}for(const y of f)if(y.children){const S=r(y.children,p,v);if(S)return S}return null},i=Cs(),n=fw(),a=Bl(),u=St(()=>{const f=t(i.value.prev);return f!==!1?f:r(n.value,a.path,-1)}),o=St(()=>{const f=t(i.value.next);return f!==!1?f:r(n.value,a.path,1)});return(f,p)=>u.value||o.value?(lt(),Rt("nav",GN,[rr("p",HN,[u.value?(lt(),Rt("span",qN,[er(As,{item:u.value},null,8,["item"])])):di("",!0),o.value?(lt(),Rt("span",jN,[er(As,{item:o.value},null,8,["item"])])):di("",!0)])])):di("",!0)}}),ZN=Ur(WN,[["__file","PageNav.vue"]]),XN={class:"page"},YN={class:"theme-default-content"},KN=Er({__name:"Page",setup(e){return(t,r)=>{const i=qn("Content");return lt(),Rt("main",XN,[ti(t.$slots,"top"),rr("div",YN,[ti(t.$slots,"content-top"),er(i),ti(t.$slots,"content-bottom")]),er(UN),er(ZN),ti(t.$slots,"bottom")])}}}),JN=Ur(KN,[["__file","Page.vue"]]),QN=["onKeydown"],e7={class:"sidebar-item-children"},t7=Er({__name:"SidebarItem",props:{item:{type:Object,required:!0},depth:{type:Number,required:!1,default:0}},setup(e){const t=e,{item:r,depth:i}=Lp(t),n=Bl(),a=lc(),u=St(()=>zD(r.value,n)),o=St(()=>({"sidebar-item":!0,"sidebar-heading":i.value===0,active:u.value,collapsible:r.value.collapsible})),f=St(()=>r.value.collapsible?u.value:!0),[p,v]=HF(f.value),_=S=>{r.value.collapsible&&(S.preventDefault(),v())},y=a.afterEach(S=>{Rp(()=>{p.value=f.value})});return b_(()=>{y()}),(S,A)=>{var I;const L=qn("SidebarItem",!0);return lt(),Rt("li",null,[jt(r).link?(lt(),wi(As,{key:0,class:gn(o.value),item:jt(r)},null,8,["class","item"])):(lt(),Rt("p",{key:1,tabindex:"0",class:gn(o.value),onClick:_,onKeydown:IB(_,["enter"])},[kl(Vr(jt(r).text)+" ",1),jt(r).collapsible?(lt(),Rt("span",{key:0,class:gn(["arrow",jt(p)?"down":"right"])},null,2)):di("",!0)],42,QN)),(I=jt(r).children)!=null&&I.length?(lt(),wi(RD,{key:2},{default:qi(()=>[Mg(rr("ul",e7,[(lt(!0),Rt(Nr,null,vo(jt(r).children,M=>(lt(),wi(L,{key:`${jt(i)}${M.text}${M.link}`,item:M,depth:jt(i)+1},null,8,["item","depth"]))),128))],512),[[Rg,jt(p)]])]),_:1})):di("",!0)])}}}),r7=Ur(t7,[["__file","SidebarItem.vue"]]),i7={key:0,class:"sidebar-items"},n7=Er({__name:"SidebarItems",setup(e){const t=Bl(),r=fw();return Kn(()=>{Ln(()=>t.hash,i=>{const n=document.querySelector(".sidebar");if(!n)return;const a=document.querySelector(`.sidebar a.sidebar-item[href="${t.path}${i}"]`);if(!a)return;const{top:u,height:o}=n.getBoundingClientRect(),{top:f,height:p}=a.getBoundingClientRect();f<u?a.scrollIntoView(!0):f+p>u+o&&a.scrollIntoView(!1)})}),(i,n)=>jt(r).length?(lt(),Rt("ul",i7,[(lt(!0),Rt(Nr,null,vo(jt(r),a=>(lt(),wi(r7,{key:`${a.text}${a.link}`,item:a},null,8,["item"]))),128))])):di("",!0)}}),a7=Ur(n7,[["__file","SidebarItems.vue"]]),o7={class:"sidebar"},s7=Er({__name:"Sidebar",setup(e){return(t,r)=>(lt(),Rt("aside",o7,[er(BD),ti(t.$slots,"top"),er(a7),ti(t.$slots,"bottom")]))}}),l7=Ur(s7,[["__file","Sidebar.vue"]]),u7=Er({__name:"Layout",setup(e){const t=Ml(),r=Cs(),i=jn(),n=St(()=>r.value.navbar!==!1&&i.value.navbar!==!1),a=fw(),u=Kr(!1),o=I=>{u.value=typeof I=="boolean"?I:!u.value},f={x:0,y:0},p=I=>{f.x=I.changedTouches[0].clientX,f.y=I.changedTouches[0].clientY},v=I=>{const M=I.changedTouches[0].clientX-f.x,D=I.changedTouches[0].clientY-f.y;Math.abs(M)>Math.abs(D)&&Math.abs(M)>40&&(M>0&&f.x<=80?o(!0):o(!1))},_=St(()=>[{"no-navbar":!n.value,"no-sidebar":!a.value.length,"sidebar-open":u.value},r.value.pageClass]);let y;Kn(()=>{y=lc().afterEach(()=>{o(!1)})}),Op(()=>{y()});const S=PD(),A=S.resolve,L=S.pending;return(I,M)=>(lt(),Rt("div",{class:gn(["theme-container",_.value]),onTouchstart:p,onTouchend:v},[ti(I.$slots,"navbar",{},()=>[n.value?(lt(),wi(DN,{key:0,onToggleSidebar:o},{before:qi(()=>[ti(I.$slots,"navbar-before")]),after:qi(()=>[ti(I.$slots,"navbar-after")]),_:3})):di("",!0)]),rr("div",{class:"sidebar-mask",onClick:M[0]||(M[0]=D=>o(!1))}),ti(I.$slots,"sidebar",{},()=>[er(l7,null,{top:qi(()=>[ti(I.$slots,"sidebar-top")]),bottom:qi(()=>[ti(I.$slots,"sidebar-bottom")]),_:3})]),ti(I.$slots,"page",{},()=>[jt(r).home?(lt(),wi(X8,{key:0})):(lt(),wi(Bp,{key:1,name:"fade-slide-y",mode:"out-in",onBeforeEnter:jt(A),onBeforeLeave:jt(L)},{default:qi(()=>[(lt(),wi(JN,{key:jt(t).path},{top:qi(()=>[ti(I.$slots,"page-top")]),"content-top":qi(()=>[ti(I.$slots,"page-content-top")]),"content-bottom":qi(()=>[ti(I.$slots,"page-content-bottom")]),bottom:qi(()=>[ti(I.$slots,"page-bottom")]),_:3}))]),_:3},8,["onBeforeEnter","onBeforeLeave"]))])],34))}}),c7=Ur(u7,[["__file","Layout.vue"]]),h7={class:"theme-container"},f7={class:"page"},d7={class:"theme-default-content"},p7=rr("h1",null,"404",-1),m7=Er({__name:"NotFound",setup(e){const t=Vp(),r=jn(),i=r.value.notFound??["Not Found"],n=()=>i[Math.floor(Math.random()*i.length)],a=r.value.home??t.value,u=r.value.backToHome??"Back to home";return(o,f)=>{const p=qn("RouterLink");return lt(),Rt("div",h7,[rr("main",f7,[rr("div",d7,[p7,rr("blockquote",null,Vr(n()),1),er(p,{to:jt(a)},{default:qi(()=>[kl(Vr(jt(u)),1)]),_:1},8,["to"])])])])}}}),v7=Ur(m7,[["__file","NotFound.vue"]]);const g7=xo({enhance({app:e,router:t}){e.component("Badge",RF),e.component("CodeGroup",zF),e.component("CodeGroupItem",NF),e.component("AutoLinkExternalIcon",()=>{const i=e.component("ExternalLinkIcon");return i?Sr(i):null}),e.component("NavbarSearch",()=>{const i=e.component("Docsearch")||e.component("SearchBox");return i?Sr(i):null});const r=t.options.scrollBehavior;t.options.scrollBehavior=async(...i)=>(await PD().wait(),r(...i))},setup(){v8(),y8()},layouts:{Layout:c7,NotFound:v7}}),_7=e=>{const t=Ex("keydown",r=>{const i=r.key==="k"&&(r.ctrlKey||r.metaKey);!(r.key==="/")&&!i||(r.preventDefault(),e(),t())})},y7=e=>e.button===1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey,x7=()=>{const e=lc();return{hitComponent:({hit:t,children:r})=>({type:"a",ref:void 0,constructor:void 0,key:void 0,props:{href:t.url,onClick:i=>{y7(i)||(i.preventDefault(),e.push(iE(t.url,"/")))},children:r},__v:null}),navigator:{navigate:({itemUrl:t})=>{e.push(iE(t,"/"))}},transformSearchClient:t=>{const r=ow(t.search,500);return{...t,search:async(...i)=>r(...i)}}}},b7=(e=[],t)=>[`lang:${t}`,...Fp(e)?e:[e]],w7=({buttonText:e="Search",buttonAriaLabel:t=e}={})=>`<button type="button" class="DocSearch DocSearch-Button" aria-label="${t}"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">${e}</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button>`,S7=16,FD=()=>{if(document.querySelector(".DocSearch-Modal"))return;const e=new Event("keydown");e.key="k",e.metaKey=!0,window.dispatchEvent(e),setTimeout(FD,S7)},T7=e=>{const t="algolia-preconnect";(window.requestIdleCallback||setTimeout)(()=>{if(document.head.querySelector(`#${t}`))return;const i=document.createElement("link");i.id=t,i.rel="preconnect",i.href=`https://${e}-dsn.algolia.net`,i.crossOrigin="",document.head.appendChild(i)})},E7={appId:"6KECEJUGJH",apiKey:"9a5c8aa7cb2d5d32ebd66790e1a84789",indexName:"sustech-online-keys",locales:{"/":{placeholder:"",translations:{button:{buttonText:"",buttonAriaLabel:""},modal:{searchBox:{resetButtonTitle:"",resetButtonAriaLabel:"",cancelButtonText:"",cancelButtonAriaLabel:""},startScreen:{recentSearchesTitle:"",noRecentSearchesText:"",saveRecentSearchButtonTitle:"",removeRecentSearchButtonTitle:"",favoriteSearchesTitle:"",removeFavoriteSearchButtonTitle:""},errorScreen:{titleText:"",helpText:""},footer:{selectText:"",navigateText:"",closeText:"",searchByText:""},noResultsScreen:{noResultsText:"",suggestedQueryText:"",reportMissingResultsText:"",reportMissingResultsLinkText:""}}}}}};Oe(()=>import("./style-e9220a04.js"),[]),Oe(()=>import("./docsearch-1d421ddb.js"),[]);const C7=Er({name:"Docsearch",props:{containerId:{type:String,required:!1,default:"docsearch-container"},options:{type:Object,required:!1,default:()=>E7}},setup(e){const t=x7(),r=oD(),i=Vp(),n=Kr(!1),a=Kr(!1),u=St(()=>{var p;return{...e.options,...(p=e.options.locales)==null?void 0:p[i.value]}}),o=async()=>{var v;const{default:p}=await Oe(()=>import("./index-997ea542.js"),[]);p({...t,...u.value,container:`#${e.containerId}`,searchParameters:{...u.value.searchParameters,facetFilters:b7((v=u.value.searchParameters)==null?void 0:v.facetFilters,r.value)}}),n.value=!0},f=()=>{a.value||n.value||(a.value=!0,o(),FD(),Ln(i,o))};return _7(f),Kn(()=>T7(u.value.appId)),()=>{var p;return[Sr("div",{id:e.containerId,style:{display:n.value?"block":"none"}}),n.value?null:Sr("div",{onClick:f,innerHTML:w7((p=u.value.translations)==null?void 0:p.button)})]}}}),A7=xo({enhance({app:e}){e.component("Docsearch",C7)}});function M7(e){return{all:e=e||new Map,on:function(t,r){var i=e.get(t);i?i.push(r):e.set(t,[r])},off:function(t,r){var i=e.get(t);i&&(r?i.splice(i.indexOf(r)>>>0,1):e.set(t,[]))},emit:function(t,r){var i=e.get(t);i&&i.slice().map(function(n){n(r)}),(i=e.get("*"))&&i.slice().map(function(n){n(t,r)})}}}const I7=Symbol("pwaEvent"),P7="service-worker.js",D7=xo({setup(){const e=(...r)=>console.log("[@vuepress/plugin-pwa]",...r),t=M7();Al(I7,t),Kn(async()=>{const{register:r}=await Oe(()=>import("./index-e32a7948.js"),[]);r(E_(P7),{ready(i){e("Service worker is active."),t.emit("ready",i)},registered(i){e("Service worker has been registered."),t.emit("registered",i)},cached(i){e("Content has been cached for offline use."),t.emit("cached",i)},updatefound(i){e("New content is downloading."),t.emit("updatefound",i)},updated(i){e("New content is available, please refresh."),t.emit("updated",i)},offline(){e("No internet connection found. App is running in offline mode."),t.emit("offline")},error(i){e("Error during service worker registration:",i),t.emit("error",i)}})})}}),L7=(e,t,r)=>{const i=`#${e.slug}`,n=[t.linkClass];return t.linkActiveClass&&r.hash===i&&n.push(t.linkActiveClass),t.linkChildrenActiveClass&&e.children.some(a=>`#${a.slug}`===r.hash)&&n.push(t.linkChildrenActiveClass),t.linkTag==="RouterLink"?Sr(yD,{to:i,class:n,ariaLabel:e.title},()=>e.title):Sr("a",{href:i,class:n,ariaLabel:e.title},e.title)},ND=(e,t,r)=>e.length===0?[]:[Sr("ul",{class:t.listClass},e.map(i=>Sr("li",{class:t.itemClass},[L7(i,t,r),ND(i.children,t,r)])))],k7=Er({name:"Toc",props:{headers:{type:Array,required:!1,default:null},options:{type:Object,required:!1,default:()=>({})}},setup(e){const{headers:t,options:r}=Lp(e),i=Bl(),n=Ml(),a=St(()=>{var f;const o=t.value||n.value.headers;return((f=o[0])==null?void 0:f.level)===1?o[0].children:o}),u=St(()=>({containerTag:"nav",containerClass:"vuepress-toc",listClass:"vuepress-toc-list",itemClass:"vuepress-toc-item",linkTag:"RouterLink",linkClass:"vuepress-toc-link",linkActiveClass:"active",linkChildrenActiveClass:"active",...r.value}));return()=>{const o=ND(a.value,u.value,i);return u.value.containerTag?Sr(u.value.containerTag,{class:u.value.containerClass},o):o}}}),R7={},z7=xo({enhance({app:e}){e.component("Toc",t=>Sr(k7,{headers:t.headers,options:{...R7,...t.options}}))}});var VD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mw(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function i(){if(this instanceof i){var n=[null];n.push.apply(n,arguments);var a=Function.bind.apply(t,n);return new a}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var n=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,n.get?n:{enumerable:!0,get:function(){return e[i]}})}),r}var vw={exports:{}},$D=function(t,r){return function(){for(var n=new Array(arguments.length),a=0;a<n.length;a++)n[a]=arguments[a];return t.apply(r,n)}},O7=$D,gw=Object.prototype.toString,_w=function(e){return function(t){var r=gw.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null));function uc(e){return e=e.toLowerCase(),function(r){return _w(r)===e}}function yw(e){return Array.isArray(e)}function Fg(e){return typeof e>"u"}function B7(e){return e!==null&&!Fg(e)&&e.constructor!==null&&!Fg(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var UD=uc("ArrayBuffer");function F7(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&UD(e.buffer),t}function N7(e){return typeof e=="string"}function V7(e){return typeof e=="number"}function GD(e){return e!==null&&typeof e=="object"}function og(e){if(_w(e)!=="object")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}var $7=uc("Date"),U7=uc("File"),G7=uc("Blob"),H7=uc("FileList");function xw(e){return gw.call(e)==="[object Function]"}function q7(e){return GD(e)&&xw(e.pipe)}function j7(e){var t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||gw.call(e)===t||xw(e.toString)&&e.toString()===t)}var W7=uc("URLSearchParams");function Z7(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function X7(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function bw(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),yw(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function Cx(){var e={};function t(n,a){og(e[a])&&og(n)?e[a]=Cx(e[a],n):og(n)?e[a]=Cx({},n):yw(n)?e[a]=n.slice():e[a]=n}for(var r=0,i=arguments.length;r<i;r++)bw(arguments[r],t);return e}function Y7(e,t,r){return bw(t,function(n,a){r&&typeof n=="function"?e[a]=O7(n,r):e[a]=n}),e}function K7(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function J7(e,t,r,i){e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)}function Q7(e,t,r){var i,n,a,u={};t=t||{};do{for(i=Object.getOwnPropertyNames(e),n=i.length;n-- >0;)a=i[n],u[a]||(t[a]=e[a],u[a]=!0);e=Object.getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t}function eV(e,t,r){e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;var i=e.indexOf(t,r);return i!==-1&&i===r}function tV(e){if(!e)return null;var t=e.length;if(Fg(t))return null;for(var r=new Array(t);t-- >0;)r[t]=e[t];return r}var rV=function(e){return function(t){return e&&t instanceof e}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),yn={isArray:yw,isArrayBuffer:UD,isBuffer:B7,isFormData:j7,isArrayBufferView:F7,isString:N7,isNumber:V7,isObject:GD,isPlainObject:og,isUndefined:Fg,isDate:$7,isFile:U7,isBlob:G7,isFunction:xw,isStream:q7,isURLSearchParams:W7,isStandardBrowserEnv:X7,forEach:bw,merge:Cx,extend:Y7,trim:Z7,stripBOM:K7,inherits:J7,toFlatObject:Q7,kindOf:_w,kindOfTest:uc,endsWith:eV,toArray:tV,isTypedArray:rV,isFileList:H7},qc=yn;function RE(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var HD=function(t,r,i){if(!r)return t;var n;if(i)n=i(r);else if(qc.isURLSearchParams(r))n=r.toString();else{var a=[];qc.forEach(r,function(f,p){f===null||typeof f>"u"||(qc.isArray(f)?p=p+"[]":f=[f],qc.forEach(f,function(_){qc.isDate(_)?_=_.toISOString():qc.isObject(_)&&(_=JSON.stringify(_)),a.push(RE(p)+"="+RE(_))}))}),n=a.join("&")}if(n){var u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t},iV=yn;function M_(){this.handlers=[]}M_.prototype.use=function(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};M_.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};M_.prototype.forEach=function(t){iV.forEach(this.handlers,function(i){i!==null&&t(i)})};var nV=M_,aV=yn,oV=function(t,r){aV.forEach(t,function(n,a){a!==r&&a.toUpperCase()===r.toUpperCase()&&(t[r]=n,delete t[a])})},qD=yn;function Lh(e,t,r,i,n){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),n&&(this.response=n)}qD.inherits(Lh,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var jD=Lh.prototype,WD={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){WD[e]={value:e}});Object.defineProperties(Lh,WD);Object.defineProperty(jD,"isAxiosError",{value:!0});Lh.from=function(e,t,r,i,n,a){var u=Object.create(jD);return qD.toFlatObject(e,u,function(f){return f!==Error.prototype}),Lh.call(u,e.message,t,r,i,n),u.name=e.name,a&&Object.assign(u,a),u};var qh=Lh,ZD={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ao=yn;function sV(e,t){t=t||new FormData;var r=[];function i(a){return a===null?"":ao.isDate(a)?a.toISOString():ao.isArrayBuffer(a)||ao.isTypedArray(a)?typeof Blob=="function"?new Blob([a]):Buffer.from(a):a}function n(a,u){if(ao.isPlainObject(a)||ao.isArray(a)){if(r.indexOf(a)!==-1)throw Error("Circular reference detected in "+u);r.push(a),ao.forEach(a,function(f,p){if(!ao.isUndefined(f)){var v=u?u+"."+p:p,_;if(f&&!u&&typeof f=="object"){if(ao.endsWith(p,"{}"))f=JSON.stringify(f);else if(ao.endsWith(p,"[]")&&(_=ao.toArray(f))){_.forEach(function(y){!ao.isUndefined(y)&&t.append(v,i(y))});return}}n(f,v)}}),r.pop()}else t.append(u,i(a))}return n(e),t}var XD=sV,S0,zE;function lV(){if(zE)return S0;zE=1;var e=qh;return S0=function(r,i,n){var a=n.config.validateStatus;!n.status||!a||a(n.status)?r(n):i(new e("Request failed with status code "+n.status,[e.ERR_BAD_REQUEST,e.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))},S0}var T0,OE;function uV(){if(OE)return T0;OE=1;var e=yn;return T0=e.isStandardBrowserEnv()?function(){return{write:function(i,n,a,u,o,f){var p=[];p.push(i+"="+encodeURIComponent(n)),e.isNumber(a)&&p.push("expires="+new Date(a).toGMTString()),e.isString(u)&&p.push("path="+u),e.isString(o)&&p.push("domain="+o),f===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(i){var n=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),T0}var cV=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},hV=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},fV=cV,dV=hV,YD=function(t,r){return t&&!fV(r)?dV(t,r):r},E0,BE;function pV(){if(BE)return E0;BE=1;var e=yn,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return E0=function(i){var n={},a,u,o;return i&&e.forEach(i.split(`
`),function(p){if(o=p.indexOf(":"),a=e.trim(p.substr(0,o)).toLowerCase(),u=e.trim(p.substr(o+1)),a){if(n[a]&&t.indexOf(a)>=0)return;a==="set-cookie"?n[a]=(n[a]?n[a]:[]).concat([u]):n[a]=n[a]?n[a]+", "+u:u}}),n},E0}var C0,FE;function mV(){if(FE)return C0;FE=1;var e=yn;return C0=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),n;function a(u){var o=u;return r&&(i.setAttribute("href",o),o=i.href),i.setAttribute("href",o),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return n=a(window.location.href),function(o){var f=e.isString(o)?a(o):o;return f.protocol===n.protocol&&f.host===n.host}}():function(){return function(){return!0}}(),C0}var A0,NE;function I_(){if(NE)return A0;NE=1;var e=qh,t=yn;function r(i){e.call(this,i??"canceled",e.ERR_CANCELED),this.name="CanceledError"}return t.inherits(r,e,{__CANCEL__:!0}),A0=r,A0}var M0,VE;function vV(){return VE||(VE=1,M0=function(t){var r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return r&&r[1]||""}),M0}var I0,$E;function UE(){if($E)return I0;$E=1;var e=yn,t=lV(),r=uV(),i=HD,n=YD,a=pV(),u=mV(),o=ZD,f=qh,p=I_(),v=vV();return I0=function(y){return new Promise(function(A,L){var I=y.data,M=y.headers,D=y.responseType,O;function N(){y.cancelToken&&y.cancelToken.unsubscribe(O),y.signal&&y.signal.removeEventListener("abort",O)}e.isFormData(I)&&e.isStandardBrowserEnv()&&delete M["Content-Type"];var q=new XMLHttpRequest;if(y.auth){var Z=y.auth.username||"",Q=y.auth.password?unescape(encodeURIComponent(y.auth.password)):"";M.Authorization="Basic "+btoa(Z+":"+Q)}var j=n(y.baseURL,y.url);q.open(y.method.toUpperCase(),i(j,y.params,y.paramsSerializer),!0),q.timeout=y.timeout;function ie(){if(q){var ue="getAllResponseHeaders"in q?a(q.getAllResponseHeaders()):null,fe=!D||D==="text"||D==="json"?q.responseText:q.response,ye={data:fe,status:q.status,statusText:q.statusText,headers:ue,config:y,request:q};t(function(we){A(we),N()},function(we){L(we),N()},ye),q=null}}if("onloadend"in q?q.onloadend=ie:q.onreadystatechange=function(){!q||q.readyState!==4||q.status===0&&!(q.responseURL&&q.responseURL.indexOf("file:")===0)||setTimeout(ie)},q.onabort=function(){q&&(L(new f("Request aborted",f.ECONNABORTED,y,q)),q=null)},q.onerror=function(){L(new f("Network Error",f.ERR_NETWORK,y,q,q)),q=null},q.ontimeout=function(){var fe=y.timeout?"timeout of "+y.timeout+"ms exceeded":"timeout exceeded",ye=y.transitional||o;y.timeoutErrorMessage&&(fe=y.timeoutErrorMessage),L(new f(fe,ye.clarifyTimeoutError?f.ETIMEDOUT:f.ECONNABORTED,y,q)),q=null},e.isStandardBrowserEnv()){var ae=(y.withCredentials||u(j))&&y.xsrfCookieName?r.read(y.xsrfCookieName):void 0;ae&&(M[y.xsrfHeaderName]=ae)}"setRequestHeader"in q&&e.forEach(M,function(fe,ye){typeof I>"u"&&ye.toLowerCase()==="content-type"?delete M[ye]:q.setRequestHeader(ye,fe)}),e.isUndefined(y.withCredentials)||(q.withCredentials=!!y.withCredentials),D&&D!=="json"&&(q.responseType=y.responseType),typeof y.onDownloadProgress=="function"&&q.addEventListener("progress",y.onDownloadProgress),typeof y.onUploadProgress=="function"&&q.upload&&q.upload.addEventListener("progress",y.onUploadProgress),(y.cancelToken||y.signal)&&(O=function(ue){q&&(L(!ue||ue&&ue.type?new p:ue),q.abort(),q=null)},y.cancelToken&&y.cancelToken.subscribe(O),y.signal&&(y.signal.aborted?O():y.signal.addEventListener("abort",O))),I||(I=null);var he=v(j);if(he&&["http","https","file"].indexOf(he)===-1){L(new f("Unsupported protocol "+he+":",f.ERR_BAD_REQUEST,y));return}q.send(I)})},I0}var P0,GE;function gV(){return GE||(GE=1,P0=null),P0}var sn=yn,HE=oV,qE=qh,_V=ZD,yV=XD,xV={"Content-Type":"application/x-www-form-urlencoded"};function jE(e,t){!sn.isUndefined(e)&&sn.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function bV(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=UE()),e}function wV(e,t,r){if(sn.isString(e))try{return(t||JSON.parse)(e),sn.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(e)}var P_={transitional:_V,adapter:bV(),transformRequest:[function(t,r){if(HE(r,"Accept"),HE(r,"Content-Type"),sn.isFormData(t)||sn.isArrayBuffer(t)||sn.isBuffer(t)||sn.isStream(t)||sn.isFile(t)||sn.isBlob(t))return t;if(sn.isArrayBufferView(t))return t.buffer;if(sn.isURLSearchParams(t))return jE(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var i=sn.isObject(t),n=r&&r["Content-Type"],a;if((a=sn.isFileList(t))||i&&n==="multipart/form-data"){var u=this.env&&this.env.FormData;return yV(a?{"files[]":t}:t,u&&new u)}else if(i||n==="application/json")return jE(r,"application/json"),wV(t);return t}],transformResponse:[function(t){var r=this.transitional||P_.transitional,i=r&&r.silentJSONParsing,n=r&&r.forcedJSONParsing,a=!i&&this.responseType==="json";if(a||n&&sn.isString(t)&&t.length)try{return JSON.parse(t)}catch(u){if(a)throw u.name==="SyntaxError"?qE.from(u,qE.ERR_BAD_RESPONSE,this,null,this.response):u}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gV()},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};sn.forEach(["delete","get","head"],function(t){P_.headers[t]={}});sn.forEach(["post","put","patch"],function(t){P_.headers[t]=sn.merge(xV)});var ww=P_,SV=yn,TV=ww,EV=function(t,r,i){var n=this||TV;return SV.forEach(i,function(u){t=u.call(n,t,r)}),t},D0,WE;function KD(){return WE||(WE=1,D0=function(t){return!!(t&&t.__CANCEL__)}),D0}var ZE=yn,L0=EV,CV=KD(),AV=ww,MV=I_();function k0(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new MV}var IV=function(t){k0(t),t.headers=t.headers||{},t.data=L0.call(t,t.data,t.headers,t.transformRequest),t.headers=ZE.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),ZE.forEach(["delete","get","head","post","put","patch","common"],function(n){delete t.headers[n]});var r=t.adapter||AV.adapter;return r(t).then(function(n){return k0(t),n.data=L0.call(t,n.data,n.headers,t.transformResponse),n},function(n){return CV(n)||(k0(t),n&&n.response&&(n.response.data=L0.call(t,n.response.data,n.response.headers,t.transformResponse))),Promise.reject(n)})},_a=yn,JD=function(t,r){r=r||{};var i={};function n(v,_){return _a.isPlainObject(v)&&_a.isPlainObject(_)?_a.merge(v,_):_a.isPlainObject(_)?_a.merge({},_):_a.isArray(_)?_.slice():_}function a(v){if(_a.isUndefined(r[v])){if(!_a.isUndefined(t[v]))return n(void 0,t[v])}else return n(t[v],r[v])}function u(v){if(!_a.isUndefined(r[v]))return n(void 0,r[v])}function o(v){if(_a.isUndefined(r[v])){if(!_a.isUndefined(t[v]))return n(void 0,t[v])}else return n(void 0,r[v])}function f(v){if(v in r)return n(t[v],r[v]);if(v in t)return n(void 0,t[v])}var p={url:u,method:u,data:u,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:f};return _a.forEach(Object.keys(t).concat(Object.keys(r)),function(_){var y=p[_]||a,S=y(_);_a.isUndefined(S)&&y!==f||(i[_]=S)}),i},R0,XE;function QD(){return XE||(XE=1,R0={version:"0.27.2"}),R0}var PV=QD().version,xl=qh,Sw={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Sw[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});var YE={};Sw.transitional=function(t,r,i){function n(a,u){return"[Axios v"+PV+"] Transitional option '"+a+"'"+u+(i?". "+i:"")}return function(a,u,o){if(t===!1)throw new xl(n(u," has been removed"+(r?" in "+r:"")),xl.ERR_DEPRECATED);return r&&!YE[u]&&(YE[u]=!0,console.warn(n(u," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,u,o):!0}};function DV(e,t,r){if(typeof e!="object")throw new xl("options must be an object",xl.ERR_BAD_OPTION_VALUE);for(var i=Object.keys(e),n=i.length;n-- >0;){var a=i[n],u=t[a];if(u){var o=e[a],f=o===void 0||u(o,a,e);if(f!==!0)throw new xl("option "+a+" must be "+f,xl.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new xl("Unknown option "+a,xl.ERR_BAD_OPTION)}}var LV={assertOptions:DV,validators:Sw},eL=yn,kV=HD,KE=nV,JE=IV,D_=JD,RV=YD,tL=LV,jc=tL.validators;function kh(e){this.defaults=e,this.interceptors={request:new KE,response:new KE}}kh.prototype.request=function(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=D_(this.defaults,r),r.method?r.method=r.method.toLowerCase():this.defaults.method?r.method=this.defaults.method.toLowerCase():r.method="get";var i=r.transitional;i!==void 0&&tL.assertOptions(i,{silentJSONParsing:jc.transitional(jc.boolean),forcedJSONParsing:jc.transitional(jc.boolean),clarifyTimeoutError:jc.transitional(jc.boolean)},!1);var n=[],a=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(r)===!1||(a=a&&S.synchronous,n.unshift(S.fulfilled,S.rejected))});var u=[];this.interceptors.response.forEach(function(S){u.push(S.fulfilled,S.rejected)});var o;if(!a){var f=[JE,void 0];for(Array.prototype.unshift.apply(f,n),f=f.concat(u),o=Promise.resolve(r);f.length;)o=o.then(f.shift(),f.shift());return o}for(var p=r;n.length;){var v=n.shift(),_=n.shift();try{p=v(p)}catch(y){_(y);break}}try{o=JE(p)}catch(y){return Promise.reject(y)}for(;u.length;)o=o.then(u.shift(),u.shift());return o};kh.prototype.getUri=function(t){t=D_(this.defaults,t);var r=RV(t.baseURL,t.url);return kV(r,t.params,t.paramsSerializer)};eL.forEach(["delete","get","head","options"],function(t){kh.prototype[t]=function(r,i){return this.request(D_(i||{},{method:t,url:r,data:(i||{}).data}))}});eL.forEach(["post","put","patch"],function(t){function r(i){return function(a,u,o){return this.request(D_(o||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:u}))}}kh.prototype[t]=r(),kh.prototype[t+"Form"]=r(!0)});var zV=kh,z0,QE;function OV(){if(QE)return z0;QE=1;var e=I_();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(u){i=u});var n=this;this.promise.then(function(a){if(n._listeners){var u,o=n._listeners.length;for(u=0;u<o;u++)n._listeners[u](a);n._listeners=null}}),this.promise.then=function(a){var u,o=new Promise(function(f){n.subscribe(f),u=f}).then(a);return o.cancel=function(){n.unsubscribe(u)},o},r(function(u){n.reason||(n.reason=new e(u),i(n.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},t.prototype.unsubscribe=function(i){if(this._listeners){var n=this._listeners.indexOf(i);n!==-1&&this._listeners.splice(n,1)}},t.source=function(){var i,n=new t(function(u){i=u});return{token:n,cancel:i}},z0=t,z0}var O0,eC;function BV(){return eC||(eC=1,O0=function(t){return function(i){return t.apply(null,i)}}),O0}var B0,tC;function FV(){if(tC)return B0;tC=1;var e=yn;return B0=function(r){return e.isObject(r)&&r.isAxiosError===!0},B0}var rC=yn,NV=$D,sg=zV,VV=JD,$V=ww;function rL(e){var t=new sg(e),r=NV(sg.prototype.request,t);return rC.extend(r,sg.prototype,t),rC.extend(r,t),r.create=function(n){return rL(VV(e,n))},r}var ua=rL($V);ua.Axios=sg;ua.CanceledError=I_();ua.CancelToken=OV();ua.isCancel=KD();ua.VERSION=QD().version;ua.toFormData=XD;ua.AxiosError=qh;ua.Cancel=ua.CanceledError;ua.all=function(t){return Promise.all(t)};ua.spread=BV();ua.isAxiosError=FV();vw.exports=ua;vw.exports.default=ua;var UV=vw.exports,GV=UV;const ba=pw(GV);function iC(e){let t=Math.abs(e),r=Math.floor(t/3600);t-=r*3600;let i=Math.floor(t/60);return t-=i*60,[r,i,t]}function nC(e){return e<10?"0"+e:e}const HV={props:{secondFromDispatch:{type:Number},stationEstimate:{type:String},startSecond:{type:Number}},computed:{timeToShow:function(){let e=iC(this.secondFromDispatch),t=e[2]>=30;return e[1]>0?[e[0]>0?e[0]+"":"",e[1],"",t?"":""].join(""):t?"":""},startTime:function(){let e=iC(this.startSecond);return["",nC(e[0]),":",nC(e[1])].join("")},isWaiting:function(){return this.secondFromDispatch<=0}}},qV={key:0};function jV(e,t,r,i,n,a){return r.secondFromDispatch?(lt(),Rt("tr",{key:0,class:gn(a.isWaiting?"bus-waiting":"bus-running")},[rr("td",null,Vr(a.startTime),1),rr("td",null,Vr(a.isWaiting?"":""),1),rr("td",null,Vr((a.isWaiting,""+a.timeToShow)),1),r.stationEstimate?(lt(),Rt("td",qV,Vr(r.stationEstimate),1)):di("",!0)],2)):di("",!0)}const WV=Ur(HV,[["render",jV],["__scopeId","data-v-259a8620"],["__file","BusItem.vue"]]);function iL(e,t,r){return e*3600+t*60+r}function ZV(e){let t=[];for(let r of e){let i=r.split(":"),n=iL(Number(i[0].trim()),Number(i[1].trim()),0);t.push(n)}return t.sort((r,i)=>r-i)}const XV={data(){return{secondFromZero:0,second:0,minute:0,hour:0,timeRangeAfterReach:3}},props:{times:{},stations:{},minuteOnRoad:{type:Number,default:20},timeRangeBeforeDispatch:{type:Number,default:60}},components:{BusItem:WV},mounted(){setInterval(()=>{this.tick()},1e3)},methods:{tick:function(){var e=new Date;this.hour=e.getHours(),this.minute=e.getMinutes(),this.second=e.getSeconds(),this.secondFromZero=iL(this.hour,this.minute,this.second)},formatNumber:function(e){return e<10?"0"+e:e},stationEstimate:function(e){if(!this.stationNames)return"null";if(e<=0)return this.stationNames[0];let t=this.stationNames.length;if(e>=this.minuteOnRoad*60)return this.stationNames[t-1];let r=e/60/this.minuteOnRoad,i="";for(let n in this.stationPositions)if(r<this.stationPositions[n]){i=this.stationNames[n];break}return i}},computed:{secondList:function(){return ZV(this.times)},busToShow:function(){if(!this.secondList)return null;let e=[],t=[];for(let r of this.secondList){let i=this.secondFromZero-r;i<0&&i>-this.timeRangeBeforeDispatch*60&&t.push([i,r]),i>0&&i<(this.minuteOnRoad+this.timeRangeAfterReach)*60&&e.push([i,r])}return e.concat(t)},stationNames:function(){let e=[];for(let t of this.stations)e.push(t[0]);return e},stationPositions:function(){let e=[];for(let t of this.stations)e.push(t[1]);return e}}},YV=e=>(AP("data-v-dc817d2c"),e=e(),MP(),e),KV={key:0,class:"bus-timer-tb"},JV={colspan:"2"},QV={colspan:"2",style:{"text-align":"right"}},e$={key:0,colspan:"4"},t$=YV(()=>rr("p",{class:"plus-note"},"* ",-1));function r$(e,t,r,i,n,a){const u=qn("bus-item");return lt(),Rt("div",null,[a.busToShow?(lt(),Rt("table",KV,[rr("thead",null,[rr("tr",null,[rr("th",JV,Vr(r.stations[0][0])+" > "+Vr(r.stations[r.stations.length-1][0]),1),rr("th",QV,Vr(a.formatNumber(n.hour))+":"+Vr(a.formatNumber(n.minute))+":"+Vr(a.formatNumber(n.second)),1)]),(lt(!0),Rt(Nr,null,vo(a.busToShow,(o,f)=>(lt(),wi(u,{secondFromDispatch:o[0],stationEstimate:a.stationEstimate(o[0]),startSecond:o[1],key:f},null,8,["secondFromDispatch","stationEstimate","startSecond"]))),128)),rr("tr",null,[Object.keys(a.busToShow).length==0?(lt(),Rt("td",e$,"  ")):di("",!0)])])])):di("",!0),t$])}const i$=Ur(XV,[["render",r$],["__scopeId","data-v-dc817d2c"],["__file","BusTimer.vue"]]);const n$={data(){return{keySelected:null}},props:{objs:{},initPos:{type:Number,default:0}},mounted(){this.select(Object.keys(this.objs)[this.initPos])},watch:{objs(e){for(let t in this.objs){this.keySelected=t;break}}},computed:{},methods:{select:function(e){this.keySelected=e}}},a$=["onClick"];function o$(e,t,r,i,n,a){return lt(),Rt(Nr,null,[(lt(!0),Rt(Nr,null,vo(r.objs,(u,o,f)=>(lt(),Rt("button",{key:f,onClick:p=>a.select(o),class:gn(o==n.keySelected?"selected":"unselected")},Vr(o),11,a$))),128)),ti(e.$slots,"default",{selected:r.objs[n.keySelected]})],64)}const s$=Ur(n$,[["render",o$],["__file","ObjectSelector.vue"]]),l$={data(){return{data:null}},props:{path:{type:String}},watch:{path(e){if(e)return ba.get(e).then(t=>{this.data=t.data})}}};function u$(e,t,r,i,n,a){return ti(e.$slots,"default",{data:n.data})}const c$=Ur(l$,[["render",u$],["__file","DataRequest.vue"]]);const h$={props:["data"]},f$={class:"cards"};function d$(e,t,r,i,n,a){return lt(),Rt("div",f$,[(lt(!0),Rt(Nr,null,vo(r.data,(u,o)=>(lt(),Rt("div",{key:o,class:"card"},Vr(u),1))),128))])}const p$=Ur(h$,[["render",d$],["__scopeId","data-v-00202de1"],["__file","GridList.vue"]]),m$={name:"BusTable",components:{BusTimer:i$,ObjectSelector:s$,DataRequest:c$,GridList:p$},mounted(){function e(t){var r={};for(let _=0;_<t.days.length;_++)r[t.days[_].date]=t.days[_].isOffDay;var i=new Date,n=new Intl.DateTimeFormat("en",{year:"numeric"}).format(i),a=new Intl.DateTimeFormat("en",{month:"2-digit"}).format(i),u=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(i),o=`${n}-${a}-${u}`,f;if(r[o]==null){console.log("Not in GOV declaration");var p=i.getDay(),v=p==6||p==0;f=v}else console.log("In GOV declaration"),f=r[o];f?(console.log(""),document.getElementById("bustable").getElementsByTagName("button")[1].click()):(console.log(""),document.getElementById("bustable").getElementsByTagName("button")[0].click())}ba.get("/2023.json").then(t=>{e(t.data)})}},v$={id:"bustable"},g$=rr("br",null,null,-1);function _$(e,t,r,i,n,a){const u=qn("bus-timer"),o=qn("grid-list"),f=qn("data-request"),p=qn("object-selector");return lt(),Rt("div",v$,[er(p,{objs:{" Workday":!0," Holiday":!1}},{default:qi(v=>[g$,er(p,{objs:v.selected?{"Line 1    To COE":"/bus_times/one_down.json","Line 1    To Joy Highland":"/bus_times/one_up.json","Line 2    To Research Building":"/bus_times/two_down.json","Line 2    To Joy Highland":"/bus_times/two_up.json"}:{"Line 1     To COE":"/bus_times/one_down_holiday.json","Line 1    To Joy Highland":"/bus_times/one_up_holiday.json"}},{default:qi(_=>[er(f,{path:_.selected},{default:qi(({data:y})=>[y?(lt(),wi(u,$6(kg({key:0},y)),null,16)):di("",!0),y?(lt(),wi(o,{key:1,data:y.times},null,8,["data"])):di("",!0)]),_:2},1032,["path"])]),_:2},1032,["objs"])]),_:1})])}const y$=Ur(m$,[["render",_$],["__file","BusTable.vue"]]);var nL={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(VD,function(){var r,i,n;function a(o,f){if(!r)r=f;else if(!i)i=f;else{var p="var sharedChunk = {}; ("+r+")(sharedChunk); ("+i+")(sharedChunk);",v={};r(v),n=f(v),typeof window<"u"&&(n.workerUrl=window.URL.createObjectURL(new Blob([p],{type:"text/javascript"})))}}a(["exports"],function(o){var f=p;function p(c,s,h,m){this.cx=3*c,this.bx=3*(h-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(m-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=s,this.p2x=h,this.p2y=m}function v(c,s,h,m){const b=new f(c,s,h,m);return function(T){return b.solve(T)}}p.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,s){if(s===void 0&&(s=1e-6),c<0)return 0;if(c>1)return 1;for(var h=c,m=0;m<8;m++){var b=this.sampleCurveX(h)-c;if(Math.abs(b)<s)return h;var T=this.sampleCurveDerivativeX(h);if(Math.abs(T)<1e-6)break;h-=b/T}var C=0,k=1;for(h=c,m=0;m<20&&(b=this.sampleCurveX(h),!(Math.abs(b-c)<s));m++)c>b?C=h:k=h,h=.5*(k-C)+C;return h},solve:function(c,s){return this.sampleCurveY(this.solveCurveX(c,s))}};const _=v(.25,.1,.25,1);function y(c,s,h){return Math.min(h,Math.max(s,c))}function S(c,s,h){const m=h-s,b=((c-s)%m+m)%m+s;return b===s?h:b}function A(c,...s){for(const h of s)for(const m in h)c[m]=h[m];return c}let L=1;function I(c,s){c.forEach(h=>{s[h]&&(s[h]=s[h].bind(s))})}function M(c,s,h){const m={};for(const b in c)m[b]=s.call(h||this,c[b],b,c);return m}function D(c,s,h){const m={};for(const b in c)s.call(h||this,c[b],b,c)&&(m[b]=c[b]);return m}function O(c){return Array.isArray(c)?c.map(O):typeof c=="object"&&c?M(c,O):c}const N={};function q(c){N[c]||(typeof console<"u"&&console.warn(c),N[c]=!0)}function Z(c,s,h){return(h.y-c.y)*(s.x-c.x)>(s.y-c.y)*(h.x-c.x)}function Q(c){let s=0;for(let h,m,b=0,T=c.length,C=T-1;b<T;C=b++)h=c[b],m=c[C],s+=(m.x-h.x)*(h.y+m.y);return s}function j(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ie(c){const s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(h,m,b,T)=>{const C=b||T;return s[m]=!C||C.toLowerCase(),""}),s["max-age"]){const h=parseInt(s["max-age"],10);isNaN(h)?delete s["max-age"]:s["max-age"]=h}return s}let ae,he,ue=null;function fe(c){if(ue==null){const s=c.navigator?c.navigator.userAgent:null;ue=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return ue}function ye(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const He={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(c){const s=requestAnimationFrame(c);return{cancel:()=>cancelAnimationFrame(s)}},getImageData(c,s=0){const h=window.document.createElement("canvas"),m=h.getContext("2d");if(!m)throw new Error("failed to create canvas 2d context");return h.width=c.width,h.height=c.height,m.drawImage(c,0,0,c.width,c.height),m.getImageData(-s,-s,c.width+2*s,c.height+2*s)},resolveURL:c=>(ae||(ae=document.createElement("a")),ae.href=c,ae.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(he==null&&(he=matchMedia("(prefers-reduced-motion: reduce)")),he.matches)}};var we=it;function it(c,s){this.x=c,this.y=s}it.prototype={clone:function(){return new it(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,s){return this.clone()._rotateAround(c,s)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var s=c.x-this.x,h=c.y-this.y;return s*s+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,s){return Math.atan2(this.x*s-this.y*c,this.x*c+this.y*s)},_matMult:function(c){var s=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=s,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var s=Math.cos(c),h=Math.sin(c),m=h*this.x+s*this.y;return this.x=s*this.x-h*this.y,this.y=m,this},_rotateAround:function(c,s){var h=Math.cos(c),m=Math.sin(c),b=s.y+m*(this.x-s.x)+h*(this.y-s.y);return this.x=s.x+h*(this.x-s.x)-m*(this.y-s.y),this.y=b,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},it.convert=function(c){return c instanceof it?c:Array.isArray(c)?new it(c[0],c[1]):c};const et={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Ct="mapbox-tiles";let zt,tr,$t=500,Lr=50;function Ir(){typeof caches>"u"||zt||(zt=caches.open(Ct))}let Cr=1/0;const dr={supported:!1,testSupport:function(c){!Ye&&nt&&(ft?ut(c):Ge=c)}};let Ge,nt,Ye=!1,ft=!1;function ut(c){const s=c.createTexture();c.bindTexture(c.TEXTURE_2D,s);try{if(c.texImage2D(c.TEXTURE_2D,0,c.RGBA,c.RGBA,c.UNSIGNED_BYTE,nt),c.isContextLost())return;dr.supported=!0}catch{}c.deleteTexture(s),Ye=!0}typeof document<"u"&&(nt=document.createElement("img"),nt.onload=function(){Ge&&ut(Ge),Ge=null,ft=!0},nt.onerror=function(){Ye=!0,Ge=null},nt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const se={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(se);class me extends Error{constructor(s,h,m,b){super(`AJAXError: ${h} (${s}): ${m}`),this.status=s,this.statusText=h,this.url=m,this.body=b}}const Ae=j()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function Ve(c,s){const h=new AbortController,m=new Request(c.url,{method:c.method||"GET",body:c.body,credentials:c.credentials,headers:c.headers,referrer:Ae(),signal:h.signal});let b=!1,T=!1;return c.type==="json"&&m.headers.set("Accept","application/json"),((C,k,R)=>{if(T)return;const F=Date.now();fetch(m).then(U=>U.ok?((H,Y,J)=>{(c.type==="arrayBuffer"?H.arrayBuffer():c.type==="json"?H.json():H.text()).then(ee=>{T||(Y&&J&&function(ve,pe,Ie){if(Ir(),!zt)return;const ze={status:pe.status,statusText:pe.statusText,headers:new Headers};pe.headers.forEach((Le,Ze)=>ze.headers.set(Ze,Le));const Me=ie(pe.headers.get("Cache-Control")||"");Me["no-store"]||(Me["max-age"]&&ze.headers.set("Expires",new Date(Ie+1e3*Me["max-age"]).toUTCString()),new Date(ze.headers.get("Expires")).getTime()-Ie<42e4||function(Le,Ze){if(tr===void 0)try{new Response(new ReadableStream),tr=!0}catch{tr=!1}tr?Ze(Le.body):Le.blob().then(Ze)}(pe,Le=>{const Ze=new Response(Le,ze);Ir(),zt&&zt.then(je=>je.put(function(wt){const Mt=wt.indexOf("?");return Mt<0?wt:wt.slice(0,Mt)}(ve.url),Ze)).catch(je=>q(je.message))}))}(m,Y,J),b=!0,s(null,ee,H.headers.get("Cache-Control"),H.headers.get("Expires")))}).catch(ee=>{T||s(new Error(ee.message))})})(U,null,F):U.blob().then(H=>s(new me(U.status,U.statusText,c.url,H)))).catch(U=>{U.code!==20&&s(new Error(U.message))})})(),{cancel:()=>{T=!0,b||h.abort()}}}const We=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){if(j()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s);if(!j()){const m=c.url.substring(0,c.url.indexOf("://"));return(et.REGISTERED_PROTOCOLS[m]||Ve)(c,s)}}if(!(/^file:/.test(h=c.url)||/^file:/.test(Ae())&&!/^\w+:/.test(h))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Ve(c,s);if(j()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",c,s,void 0,!0)}var h;return function(m,b){const T=new XMLHttpRequest;T.open(m.method||"GET",m.url,!0),m.type==="arrayBuffer"&&(T.responseType="arraybuffer");for(const C in m.headers)T.setRequestHeader(C,m.headers[C]);return m.type==="json"&&(T.responseType="text",T.setRequestHeader("Accept","application/json")),T.withCredentials=m.credentials==="include",T.onerror=()=>{b(new Error(T.statusText))},T.onload=()=>{if((T.status>=200&&T.status<300||T.status===0)&&T.response!==null){let C=T.response;if(m.type==="json")try{C=JSON.parse(T.response)}catch(k){return b(k)}b(null,C,T.getResponseHeader("Cache-Control"),T.getResponseHeader("Expires"))}else{const C=new Blob([T.response],{type:T.getResponseHeader("Content-Type")});b(new me(T.status,T.statusText,m.url,C))}},T.send(m.body),{cancel:()=>T.abort()}}(c,s)},Ke=function(c,s){return We(A(c,{type:"arrayBuffer"}),s)};function dt(c){const s=window.document.createElement("a");return s.href=c,s.protocol===window.document.location.protocol&&s.host===window.document.location.host}const qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let at,Qe;at=[],Qe=0;const Bt=function(c,s){if(dr.supported&&(c.headers||(c.headers={}),c.headers.accept="image/webp,*/*"),Qe>=et.MAX_PARALLEL_IMAGE_REQUESTS){const T={requestParameters:c,callback:s,cancelled:!1,cancel(){this.cancelled=!0}};return at.push(T),T}Qe++;let h=!1;const m=()=>{if(!h)for(h=!0,Qe--;at.length&&Qe<et.MAX_PARALLEL_IMAGE_REQUESTS;){const T=at.shift(),{requestParameters:C,callback:k,cancelled:R}=T;R||(T.cancel=Bt(C,k).cancel)}},b=Ke(c,(T,C,k,R)=>{m(),T?s(T):C&&function(F,U){typeof createImageBitmap=="function"?function(H,Y){const J=new Blob([new Uint8Array(H)],{type:"image/png"});createImageBitmap(J).then(ee=>{Y(null,ee)}).catch(ee=>{Y(new Error(`Could not load image because of ${ee.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(F,U):function(H,Y){const J=new Image;J.onload=()=>{Y(null,J),URL.revokeObjectURL(J.src),J.onload=null,window.requestAnimationFrame(()=>{J.src=qe})},J.onerror=()=>Y(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const ee=new Blob([new Uint8Array(H)],{type:"image/png"});J.src=H.byteLength?URL.createObjectURL(ee):qe}(F,U)}(C,(F,U)=>{F!=null?s(F):U!=null&&s(null,U,{cacheControl:k,expires:R})})});return{cancel:()=>{b.cancel(),m()}}};function Lt(c,s,h){h[c]&&h[c].indexOf(s)!==-1||(h[c]=h[c]||[],h[c].push(s))}function Ot(c,s,h){if(h&&h[c]){const m=h[c].indexOf(s);m!==-1&&h[c].splice(m,1)}}class Ht{constructor(s,h={}){A(this,h),this.type=s}}class ir extends Ht{constructor(s,h={}){super("error",A({error:s},h))}}class vr{on(s,h){return this._listeners=this._listeners||{},Lt(s,h,this._listeners),this}off(s,h){return Ot(s,h,this._listeners),Ot(s,h,this._oneTimeListeners),this}once(s,h){return this._oneTimeListeners=this._oneTimeListeners||{},Lt(s,h,this._oneTimeListeners),this}fire(s,h){typeof s=="string"&&(s=new Ht(s,h||{}));const m=s.type;if(this.listens(m)){s.target=this;const b=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(const k of b)k.call(this,s);const T=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(const k of T)Ot(m,k,this._oneTimeListeners),k.call(this,s);const C=this._eventedParent;C&&(A(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(s))}else s instanceof ir&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,h){return this._eventedParent=s,this._eventedParentData=h,this}}var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class tt{constructor(s,h,m,b){this.message=(s?`${s}: `:"")+m,b&&(this.identifier=b),h!=null&&h.__line__&&(this.line=h.__line__)}}function Ii(c){const s=c.value;return s?[new tt(c.key,s,"constants have been deprecated as of v8")]:[]}function Oi(c,...s){for(const h of s)for(const m in h)c[m]=h[m];return c}function hr(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Bi(c){if(Array.isArray(c))return c.map(Bi);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const s={};for(const h in c)s[h]=Bi(c[h]);return s}return hr(c)}class en extends Error{constructor(s,h){super(h),this.message=h,this.key=s}}class Wr{constructor(s,h=[]){this.parent=s,this.bindings={};for(const[m,b]of h)this.bindings[m]=b}concat(s){return new Wr(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const Pi={kind:"null"},st={kind:"number"},nr={kind:"string"},Jt={kind:"boolean"},Wi={kind:"color"},So={kind:"object"},Yt={kind:"value"},Ka={kind:"collator"},Fi={kind:"formatted"},Fs={kind:"padding"},Si={kind:"resolvedImage"};function un(c,s){return{kind:"array",itemType:c,N:s}}function Br(c){if(c.kind==="array"){const s=Br(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}const Ns=[Pi,st,nr,Jt,Wi,Fi,So,un(Yt),Fs,Si];function Ca(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!Ca(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(const h of Ns)if(!Ca(h,s))return null}}return`Expected ${Br(c)} but found ${Br(s)} instead.`}function Ko(c,s){return s.some(h=>h.kind===c.kind)}function Jo(c,s){return s.some(h=>h==="null"?c===null:h==="array"?Array.isArray(c):h==="object"?c&&!Array.isArray(c)&&typeof c=="object":h===typeof c)}var Vs,Qo={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ne(c){return(c=Math.round(c))<0?0:c>255?255:c}function $(c){return ne(c[c.length-1]==="%"?parseFloat(c)/100*255:parseInt(c))}function W(c){return(s=c[c.length-1]==="%"?parseFloat(c)/100:parseFloat(c))<0?0:s>1?1:s;var s}function te(c,s,h){return h<0?h+=1:h>1&&(h-=1),6*h<1?c+(s-c)*h*6:2*h<1?s:3*h<2?c+(s-c)*(2/3-h)*6:c}try{Vs={}.parseCSSColor=function(c){var s,h=c.replace(/ /g,"").toLowerCase();if(h in Qo)return Qo[h].slice();if(h[0]==="#")return h.length===4?(s=parseInt(h.substr(1),16))>=0&&s<=4095?[(3840&s)>>4|(3840&s)>>8,240&s|(240&s)>>4,15&s|(15&s)<<4,1]:null:h.length===7&&(s=parseInt(h.substr(1),16))>=0&&s<=16777215?[(16711680&s)>>16,(65280&s)>>8,255&s,1]:null;var m=h.indexOf("("),b=h.indexOf(")");if(m!==-1&&b+1===h.length){var T=h.substr(0,m),C=h.substr(m+1,b-(m+1)).split(","),k=1;switch(T){case"rgba":if(C.length!==4)return null;k=W(C.pop());case"rgb":return C.length!==3?null:[$(C[0]),$(C[1]),$(C[2]),k];case"hsla":if(C.length!==4)return null;k=W(C.pop());case"hsl":if(C.length!==3)return null;var R=(parseFloat(C[0])%360+360)%360/360,F=W(C[1]),U=W(C[2]),H=U<=.5?U*(F+1):U+F-U*F,Y=2*U-H;return[ne(255*te(Y,H,R+1/3)),ne(255*te(Y,H,R)),ne(255*te(Y,H,R-1/3)),k];default:return null}}return null}}catch{}class re{constructor(s,h,m,b=1){this.r=s,this.g=h,this.b=m,this.a=b}static parse(s){if(!s)return;if(s instanceof re)return s;if(typeof s!="string")return;const h=Vs(s);return h?new re(h[0]/255*h[3],h[1]/255*h[3],h[2]/255*h[3],h[3]):void 0}toString(){const[s,h,m,b]=this.toArray();return`rgba(${Math.round(s)},${Math.round(h)},${Math.round(m)},${b})`}toArray(){const{r:s,g:h,b:m,a:b}=this;return b===0?[0,0,0,0]:[255*s/b,255*h/b,255*m/b,b]}}re.black=new re(0,0,0,1),re.white=new re(1,1,1,1),re.transparent=new re(0,0,0,0),re.red=new re(1,0,0,1);class ge{constructor(s,h,m){this.sensitivity=s?h?"variant":"case":h?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,h){return this.collator.compare(s,h)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Se{constructor(s,h,m,b,T){this.text=s,this.image=h,this.scale=m,this.fontStack=b,this.textColor=T}}class xe{constructor(s){this.sections=s}static fromString(s){return new xe([new Se(s,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof xe?s:xe.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class _e{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof _e)return s;if(typeof s=="number")return new _e([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const h of s)if(typeof h!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new _e(s)}}toString(){return JSON.stringify(this.values)}}class Te{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Te({name:s,available:!1}):null}}function Fe(c,s,h,m){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof h=="number"&&h>=0&&h<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[c,s,h,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[c,s,h,m]:[c,s,h]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Xe(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof re||c instanceof ge||c instanceof xe||c instanceof _e||c instanceof Te)return!0;if(Array.isArray(c)){for(const s of c)if(!Xe(s))return!1;return!0}if(typeof c=="object"){for(const s in c)if(!Xe(c[s]))return!1;return!0}return!1}function Be(c){if(c===null)return Pi;if(typeof c=="string")return nr;if(typeof c=="boolean")return Jt;if(typeof c=="number")return st;if(c instanceof re)return Wi;if(c instanceof ge)return Ka;if(c instanceof xe)return Fi;if(c instanceof _e)return Fs;if(c instanceof Te)return Si;if(Array.isArray(c)){const s=c.length;let h;for(const m of c){const b=Be(m);if(h){if(h===b)continue;h=Yt;break}h=b}return un(h||Yt,s)}return So}function At(c){const s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof re||c instanceof xe||c instanceof _e||c instanceof Te?c.toString():JSON.stringify(c)}class Pt{constructor(s,h){this.type=s,this.value=h}static parse(s,h){if(s.length!==2)return h.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Xe(s[1]))return h.error("invalid value");const m=s[1];let b=Be(m);const T=h.expectedType;return b.kind!=="array"||b.N!==0||!T||T.kind!=="array"||typeof T.N=="number"&&T.N!==0||(b=T),new Pt(b,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class _t{constructor(s){this.name="ExpressionEvaluationError",this.message=s}toJSON(){return this.message}}const Ut={string:nr,number:st,boolean:Jt,object:So};class qt{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");let m,b=1;const T=s[0];if(T==="array"){let k,R;if(s.length>2){const F=s[1];if(typeof F!="string"||!(F in Ut)||F==="object")return h.error('The item type argument of "array" must be one of string, number, boolean',1);k=Ut[F],b++}else k=Yt;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return h.error('The length argument to "array" must be a positive integer literal',2);R=s[2],b++}m=un(k,R)}else{if(!Ut[T])throw new Error(`Types doesn't contain name = ${T}`);m=Ut[T]}const C=[];for(;b<s.length;b++){const k=h.parse(s[b],b,Yt);if(!k)return null;C.push(k)}return new qt(m,C)}evaluate(s){for(let h=0;h<this.args.length;h++){const m=this.args[h].evaluate(s);if(!Ca(this.type,Be(m)))return m;if(h===this.args.length-1)throw new _t(`Expected value to be of type ${Br(this.type)}, but found ${Br(Be(m))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const gr={"to-boolean":Jt,"to-color":Wi,"to-number":st,"to-string":nr};class Xt{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");const m=s[0];if(!gr[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&s.length!==2)return h.error("Expected one argument.");const b=gr[m],T=[];for(let C=1;C<s.length;C++){const k=h.parse(s[C],C,Yt);if(!k)return null;T.push(k)}return new Xt(b,T)}evaluate(s){if(this.type.kind==="boolean")return!!this.args[0].evaluate(s);if(this.type.kind==="color"){let h,m;for(const b of this.args){if(h=b.evaluate(s),m=null,h instanceof re)return h;if(typeof h=="string"){const T=s.parseColor(h);if(T)return T}else if(Array.isArray(h)&&(m=h.length<3||h.length>4?`Invalid rbga value ${JSON.stringify(h)}: expected an array containing either three or four numeric values.`:Fe(h[0],h[1],h[2],h[3]),!m))return new re(h[0]/255,h[1]/255,h[2]/255,h[3])}throw new _t(m||`Could not parse color from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}if(this.type.kind==="padding"){let h;for(const m of this.args){h=m.evaluate(s);const b=_e.parse(h);if(b)return b}throw new _t(`Could not parse padding from value '${typeof h=="string"?h:JSON.stringify(h)}'`)}if(this.type.kind==="number"){let h=null;for(const m of this.args){if(h=m.evaluate(s),h===null)return 0;const b=Number(h);if(!isNaN(b))return b}throw new _t(`Could not convert ${JSON.stringify(h)} to number.`)}return this.type.kind==="formatted"?xe.fromString(At(this.args[0].evaluate(s))):this.type.kind==="resolvedImage"?Te.fromString(At(this.args[0].evaluate(s))):At(this.args[0].evaluate(s))}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const ar=["Unknown","Point","LineString","Polygon"];class _r{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ar[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let h=this._parseColorCache[s];return h||(h=this._parseColorCache[s]=re.parse(s)),h}}class Gr{constructor(s,h,m,b){this.name=s,this.type=h,this._evaluate=m,this.args=b}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,h){const m=s[0],b=Gr.definitions[m];if(!b)return h.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);const T=Array.isArray(b)?b[0]:b.type,C=Array.isArray(b)?[[b[1],b[2]]]:b.overloads,k=C.filter(([F])=>!Array.isArray(F)||F.length===s.length-1);let R=null;for(const[F,U]of k){R=new Gs(h.registry,h.path,null,h.scope);const H=[];let Y=!1;for(let J=1;J<s.length;J++){const ee=s[J],ve=Array.isArray(F)?F[J-1]:F.type,pe=R.parse(ee,1+H.length,ve);if(!pe){Y=!0;break}H.push(pe)}if(!Y)if(Array.isArray(F)&&F.length!==H.length)R.error(`Expected ${F.length} arguments, but found ${H.length} instead.`);else{for(let J=0;J<H.length;J++){const ee=Array.isArray(F)?F[J]:F.type,ve=H[J];R.concat(J+1).checkSubtype(ee,ve.type)}if(R.errors.length===0)return new Gr(m,T,U,H)}}if(k.length===1)h.errors.push(...R.errors);else{const F=(k.length?k:C).map(([H])=>{return Y=H,Array.isArray(Y)?`(${Y.map(Br).join(", ")})`:`(${Br(Y.type)}...)`;var Y}).join(" | "),U=[];for(let H=1;H<s.length;H++){const Y=h.parse(s[H],1+U.length);if(!Y)return null;U.push(Br(Y.type))}h.error(`Expected arguments of type ${F}, but found (${U.join(", ")}) instead.`)}return null}static register(s,h){Gr.definitions=h;for(const m in h)s[m]=Gr}}class Ni{constructor(s,h,m){this.type=Ka,this.locale=m,this.caseSensitive=s,this.diacriticSensitive=h}static parse(s,h){if(s.length!==2)return h.error("Expected one argument.");const m=s[1];if(typeof m!="object"||Array.isArray(m))return h.error("Collator options argument must be an object.");const b=h.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,Jt);if(!b)return null;const T=h.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,Jt);if(!T)return null;let C=null;return m.locale&&(C=h.parse(m.locale,1,nr),!C)?null:new Ni(b,T,C)}evaluate(s){return new ge(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}const ni=8192;function tn(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function $s(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function Fl(c,s){const h=(180+c[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,b=Math.pow(2,s.z);return[Math.round(h*b*ni),Math.round(m*b*ni)]}function Hr(c,s,h){const m=c[0]-s[0],b=c[1]-s[1],T=c[0]-h[0],C=c[1]-h[1];return m*C-T*b==0&&m*T<=0&&b*C<=0}function ef(c,s){let h=!1;for(let C=0,k=s.length;C<k;C++){const R=s[C];for(let F=0,U=R.length;F<U-1;F++){if(Hr(c,R[F],R[F+1]))return!1;(b=R[F])[1]>(m=c)[1]!=(T=R[F+1])[1]>m[1]&&m[0]<(T[0]-b[0])*(m[1]-b[1])/(T[1]-b[1])+b[0]&&(h=!h)}}var m,b,T;return h}function tf(c,s){for(let h=0;h<s.length;h++)if(ef(c,s[h]))return!0;return!1}function Kp(c,s,h,m){const b=m[0]-h[0],T=m[1]-h[1],C=(c[0]-h[0])*T-b*(c[1]-h[1]),k=(s[0]-h[0])*T-b*(s[1]-h[1]);return C>0&&k<0||C<0&&k>0}function Jp(c,s,h){for(const F of h)for(let U=0;U<F.length-1;++U)if((k=[(C=F[U+1])[0]-(T=F[U])[0],C[1]-T[1]])[0]*(R=[(b=s)[0]-(m=c)[0],b[1]-m[1]])[1]-k[1]*R[0]!=0&&Kp(m,b,T,C)&&Kp(T,C,m,b))return!0;var m,b,T,C,k,R;return!1}function rf(c,s){for(let h=0;h<c.length;++h)if(!ef(c[h],s))return!1;for(let h=0;h<c.length-1;++h)if(Jp(c[h],c[h+1],s))return!1;return!0}function ny(c,s){for(let h=0;h<s.length;h++)if(rf(c,s[h]))return!0;return!1}function dc(c,s,h){const m=[];for(let b=0;b<c.length;b++){const T=[];for(let C=0;C<c[b].length;C++){const k=Fl(c[b][C],h);tn(s,k),T.push(k)}m.push(T)}return m}function nf(c,s,h){const m=[];for(let b=0;b<c.length;b++){const T=dc(c[b],s,h);m.push(T)}return m}function Qp(c,s,h,m){if(c[0]<h[0]||c[0]>h[2]){const b=.5*m;let T=c[0]-h[0]>b?-m:h[0]-c[0]>b?m:0;T===0&&(T=c[0]-h[2]>b?-m:h[2]-c[0]>b?m:0),c[0]+=T}tn(s,c)}function em(c,s,h,m){const b=Math.pow(2,m.z)*ni,T=[m.x*ni,m.y*ni],C=[];for(const k of c)for(const R of k){const F=[R.x+T[0],R.y+T[1]];Qp(F,s,h,b),C.push(F)}return C}function tm(c,s,h,m){const b=Math.pow(2,m.z)*ni,T=[m.x*ni,m.y*ni],C=[];for(const R of c){const F=[];for(const U of R){const H=[U.x+T[0],U.y+T[1]];tn(s,H),F.push(H)}C.push(F)}if(s[2]-s[0]<=b/2){(k=s)[0]=k[1]=1/0,k[2]=k[3]=-1/0;for(const R of C)for(const F of R)Qp(F,s,h,b)}var k;return C}class es{constructor(s,h){this.type=Jt,this.geojson=s,this.geometries=h}static parse(s,h){if(s.length!==2)return h.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Xe(s[1])){const m=s[1];if(m.type==="FeatureCollection")for(let b=0;b<m.features.length;++b){const T=m.features[b].geometry.type;if(T==="Polygon"||T==="MultiPolygon")return new es(m,m.features[b].geometry)}else if(m.type==="Feature"){const b=m.geometry.type;if(b==="Polygon"||b==="MultiPolygon")return new es(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new es(m,m)}return h.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(h,m){const b=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],C=h.canonicalID();if(m.type==="Polygon"){const k=dc(m.coordinates,T,C),R=em(h.geometry(),b,T,C);if(!$s(b,T))return!1;for(const F of R)if(!ef(F,k))return!1}if(m.type==="MultiPolygon"){const k=nf(m.coordinates,T,C),R=em(h.geometry(),b,T,C);if(!$s(b,T))return!1;for(const F of R)if(!tf(F,k))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(h,m){const b=[1/0,1/0,-1/0,-1/0],T=[1/0,1/0,-1/0,-1/0],C=h.canonicalID();if(m.type==="Polygon"){const k=dc(m.coordinates,T,C),R=tm(h.geometry(),b,T,C);if(!$s(b,T))return!1;for(const F of R)if(!rf(F,k))return!1}if(m.type==="MultiPolygon"){const k=nf(m.coordinates,T,C),R=tm(h.geometry(),b,T,C);if(!$s(b,T))return!1;for(const F of R)if(!ny(F,k))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Nl(c){if(c instanceof Gr&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof es)return!1;let s=!0;return c.eachChild(h=>{s&&!Nl(h)&&(s=!1)}),s}function Us(c){if(c instanceof Gr&&c.name==="feature-state")return!1;let s=!0;return c.eachChild(h=>{s&&!Us(h)&&(s=!1)}),s}function pc(c,s){if(c instanceof Gr&&s.indexOf(c.name)>=0)return!1;let h=!0;return c.eachChild(m=>{h&&!pc(m,s)&&(h=!1)}),h}class mc{constructor(s,h){this.type=h.type,this.name=s,this.boundExpression=h}static parse(s,h){if(s.length!==2||typeof s[1]!="string")return h.error("'var' expression requires exactly one string literal argument.");const m=s[1];return h.scope.has(m)?new mc(m,h.scope.get(m)):h.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Gs{constructor(s,h=[],m,b=new Wr,T=[]){this.registry=s,this.path=h,this.key=h.map(C=>`[${C}]`).join(""),this.scope=b,this.errors=T,this.expectedType=m}parse(s,h,m,b,T={}){return h?this.concat(h,m,b)._parse(s,T):this._parse(s,T)}_parse(s,h){function m(b,T,C){return C==="assert"?new qt(T,[b]):C==="coerce"?new Xt(T,[b]):b}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const b=s[0];if(typeof b!="string")return this.error(`Expression name must be a string, but found ${typeof b} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const T=this.registry[b];if(T){let C=T.parse(s,this);if(!C)return null;if(this.expectedType){const k=this.expectedType,R=C.type;if(k.kind!=="string"&&k.kind!=="number"&&k.kind!=="boolean"&&k.kind!=="object"&&k.kind!=="array"||R.kind!=="value")if(k.kind!=="color"&&k.kind!=="formatted"&&k.kind!=="resolvedImage"||R.kind!=="value"&&R.kind!=="string")if(k.kind!=="padding"||R.kind!=="value"&&R.kind!=="number"&&R.kind!=="array"){if(this.checkSubtype(k,R))return null}else C=m(C,k,h.typeAnnotation||"coerce");else C=m(C,k,h.typeAnnotation||"coerce");else C=m(C,k,h.typeAnnotation||"assert")}if(!(C instanceof Pt)&&C.type.kind!=="resolvedImage"&&af(C)){const k=new _r;try{C=new Pt(C.type,C.evaluate(k))}catch(R){return this.error(R.message),null}}return C}return this.error(`Unknown expression "${b}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,h,m){const b=typeof s=="number"?this.path.concat(s):this.path,T=m?this.scope.concat(m):this.scope;return new Gs(this.registry,b,h||null,T,this.errors)}error(s,...h){const m=`${this.key}${h.map(b=>`[${b}]`).join("")}`;this.errors.push(new en(m,s))}checkSubtype(s,h){const m=Ca(s,h);return m&&this.error(m),m}}function af(c){if(c instanceof mc)return af(c.boundExpression);if(c instanceof Gr&&c.name==="error"||c instanceof Ni||c instanceof es)return!1;const s=c instanceof Xt||c instanceof qt;let h=!0;return c.eachChild(m=>{h=s?h&&af(m):h&&m instanceof Pt}),!!h&&Nl(c)&&pc(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function vc(c,s){const h=c.length-1;let m,b,T=0,C=h,k=0;for(;T<=C;)if(k=Math.floor((T+C)/2),m=c[k],b=c[k+1],m<=s){if(k===h||s<b)return k;T=k+1}else{if(!(m>s))throw new _t("Input is not a number.");C=k-1}return 0}class Vl{constructor(s,h,m){this.type=s,this.input=h,this.labels=[],this.outputs=[];for(const[b,T]of m)this.labels.push(b),this.outputs.push(T)}static parse(s,h){if(s.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return h.error("Expected an even number of arguments.");const m=h.parse(s[1],1,st);if(!m)return null;const b=[];let T=null;h.expectedType&&h.expectedType.kind!=="value"&&(T=h.expectedType);for(let C=1;C<s.length;C+=2){const k=C===1?-1/0:s[C],R=s[C+1],F=C,U=C+1;if(typeof k!="number")return h.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(b.length&&b[b.length-1][0]>=k)return h.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',F);const H=h.parse(R,U,T);if(!H)return null;T=T||H.type,b.push([k,H])}return new Vl(T,m,b)}evaluate(s){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(s);const b=this.input.evaluate(s);if(b<=h[0])return m[0].evaluate(s);const T=h.length;return b>=h[T-1]?m[T-1].evaluate(s):m[vc(h,b)].evaluate(s)}eachChild(s){s(this.input);for(const h of this.outputs)s(h)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function ai(c,s,h){return c*(1-h)+s*h}var $l=Object.freeze({__proto__:null,number:ai,color:function(c,s,h){return new re(ai(c.r,s.r,h),ai(c.g,s.g,h),ai(c.b,s.b,h),ai(c.a,s.a,h))},array:function(c,s,h){return c.map((m,b)=>ai(m,s[b],h))},padding:function(c,s,h){const m=c.values,b=s.values;return new _e([ai(m[0],b[0],h),ai(m[1],b[1],h),ai(m[2],b[2],h),ai(m[3],b[3],h)])}});const rm=.95047,im=1.08883,of=4/29,gc=6/29,nm=3*gc*gc,ay=Math.PI/180,oy=180/Math.PI;function sf(c){return c>.008856451679035631?Math.pow(c,1/3):c/nm+of}function lf(c){return c>gc?c*c*c:nm*(c-of)}function uf(c){return 255*(c<=.0031308?12.92*c:1.055*Math.pow(c,1/2.4)-.055)}function cf(c){return(c/=255)<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Ar(c){const s=cf(c.r),h=cf(c.g),m=cf(c.b),b=sf((.4124564*s+.3575761*h+.1804375*m)/rm),T=sf((.2126729*s+.7151522*h+.072175*m)/1);return{l:116*T-16,a:500*(b-T),b:200*(T-sf((.0193339*s+.119192*h+.9503041*m)/im)),alpha:c.a}}function am(c){let s=(c.l+16)/116,h=isNaN(c.a)?s:s+c.a/500,m=isNaN(c.b)?s:s-c.b/200;return s=1*lf(s),h=rm*lf(h),m=im*lf(m),new re(uf(3.2404542*h-1.5371385*s-.4985314*m),uf(-.969266*h+1.8760108*s+.041556*m),uf(.0556434*h-.2040259*s+1.0572252*m),c.alpha)}function sy(c,s,h){const m=s-c;return c+h*(m>180||m<-180?m-360*Math.round(m/360):m)}const Ul={forward:Ar,reverse:am,interpolate:function(c,s,h){return{l:ai(c.l,s.l,h),a:ai(c.a,s.a,h),b:ai(c.b,s.b,h),alpha:ai(c.alpha,s.alpha,h)}}},Gl={forward:function(c){const{l:s,a:h,b:m}=Ar(c),b=Math.atan2(m,h)*oy;return{h:b<0?b+360:b,c:Math.sqrt(h*h+m*m),l:s,alpha:c.a}},reverse:function(c){const s=c.h*ay,h=c.c;return am({l:c.l,a:Math.cos(s)*h,b:Math.sin(s)*h,alpha:c.alpha})},interpolate:function(c,s,h){return{h:sy(c.h,s.h,h),c:ai(c.c,s.c,h),l:ai(c.l,s.l,h),alpha:ai(c.alpha,s.alpha,h)}}};var om=Object.freeze({__proto__:null,lab:Ul,hcl:Gl});class Rn{constructor(s,h,m,b,T){this.type=s,this.operator=h,this.interpolation=m,this.input=b,this.labels=[],this.outputs=[];for(const[C,k]of T)this.labels.push(C),this.outputs.push(k)}static interpolationFactor(s,h,m,b){let T=0;if(s.name==="exponential")T=hf(h,s.base,m,b);else if(s.name==="linear")T=hf(h,1,m,b);else if(s.name==="cubic-bezier"){const C=s.controlPoints;T=new f(C[0],C[1],C[2],C[3]).solve(hf(h,1,m,b))}return T}static parse(s,h){let[m,b,T,...C]=s;if(!Array.isArray(b)||b.length===0)return h.error("Expected an interpolation type expression.",1);if(b[0]==="linear")b={name:"linear"};else if(b[0]==="exponential"){const F=b[1];if(typeof F!="number")return h.error("Exponential interpolation requires a numeric base.",1,1);b={name:"exponential",base:F}}else{if(b[0]!=="cubic-bezier")return h.error(`Unknown interpolation type ${String(b[0])}`,1,0);{const F=b.slice(1);if(F.length!==4||F.some(U=>typeof U!="number"||U<0||U>1))return h.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);b={name:"cubic-bezier",controlPoints:F}}}if(s.length-1<4)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return h.error("Expected an even number of arguments.");if(T=h.parse(T,2,st),!T)return null;const k=[];let R=null;m==="interpolate-hcl"||m==="interpolate-lab"?R=Wi:h.expectedType&&h.expectedType.kind!=="value"&&(R=h.expectedType);for(let F=0;F<C.length;F+=2){const U=C[F],H=C[F+1],Y=F+3,J=F+4;if(typeof U!="number")return h.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Y);if(k.length&&k[k.length-1][0]>=U)return h.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Y);const ee=h.parse(H,J,R);if(!ee)return null;R=R||ee.type,k.push([U,ee])}return R.kind==="number"||R.kind==="color"||R.kind==="padding"||R.kind==="array"&&R.itemType.kind==="number"&&typeof R.N=="number"?new Rn(R,m,b,T,k):h.error(`Type ${Br(R)} is not interpolatable.`)}evaluate(s){const h=this.labels,m=this.outputs;if(h.length===1)return m[0].evaluate(s);const b=this.input.evaluate(s);if(b<=h[0])return m[0].evaluate(s);const T=h.length;if(b>=h[T-1])return m[T-1].evaluate(s);const C=vc(h,b),k=Rn.interpolationFactor(this.interpolation,b,h[C],h[C+1]),R=m[C].evaluate(s),F=m[C+1].evaluate(s);return this.operator==="interpolate"?$l[this.type.kind.toLowerCase()](R,F,k):this.operator==="interpolate-hcl"?Gl.reverse(Gl.interpolate(Gl.forward(R),Gl.forward(F),k)):Ul.reverse(Ul.interpolate(Ul.forward(R),Ul.forward(F),k))}eachChild(s){s(this.input);for(const h of this.outputs)s(h)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function hf(c,s,h,m){const b=m-h,T=c-h;return b===0?0:s===1?T/b:(Math.pow(s,T)-1)/(Math.pow(s,b)-1)}class _c{constructor(s,h){this.type=s,this.args=h}static parse(s,h){if(s.length<2)return h.error("Expectected at least one argument.");let m=null;const b=h.expectedType;b&&b.kind!=="value"&&(m=b);const T=[];for(const k of s.slice(1)){const R=h.parse(k,1+T.length,m,void 0,{typeAnnotation:"omit"});if(!R)return null;m=m||R.type,T.push(R)}if(!m)throw new Error("No output type");const C=b&&T.some(k=>Ca(b,k.type));return new _c(C?Yt:m,T)}evaluate(s){let h,m=null,b=0;for(const T of this.args)if(b++,m=T.evaluate(s),m&&m instanceof Te&&!m.available&&(h||(h=m.name),m=null,b===this.args.length&&(m=h)),m!==null)break;return m}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}class yc{constructor(s,h){this.type=h.type,this.bindings=[].concat(s),this.result=h}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const h of this.bindings)s(h[1]);s(this.result)}static parse(s,h){if(s.length<4)return h.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const m=[];for(let T=1;T<s.length-1;T+=2){const C=s[T];if(typeof C!="string")return h.error(`Expected string, but found ${typeof C} instead.`,T);if(/[^a-zA-Z0-9_]/.test(C))return h.error("Variable names must contain only alphanumeric characters or '_'.",T);const k=h.parse(s[T+1],T+1);if(!k)return null;m.push([C,k])}const b=h.parse(s[s.length-1],s.length-1,h.expectedType,m);return b?new yc(m,b):null}outputDefined(){return this.result.outputDefined()}}class ff{constructor(s,h,m){this.type=s,this.index=h,this.input=m}static parse(s,h){if(s.length!==3)return h.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,st),b=h.parse(s[2],2,un(h.expectedType||Yt));return m&&b?new ff(b.type.itemType,m,b):null}evaluate(s){const h=this.index.evaluate(s),m=this.input.evaluate(s);if(h<0)throw new _t(`Array index out of bounds: ${h} < 0.`);if(h>=m.length)throw new _t(`Array index out of bounds: ${h} > ${m.length-1}.`);if(h!==Math.floor(h))throw new _t(`Array index must be an integer, but found ${h} instead.`);return m[h]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class df{constructor(s,h){this.type=Jt,this.needle=s,this.haystack=h}static parse(s,h){if(s.length!==3)return h.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,Yt),b=h.parse(s[2],2,Yt);return m&&b?Ko(m.type,[Jt,nr,st,Pi,Yt])?new df(m,b):h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Br(m.type)} instead`):null}evaluate(s){const h=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!m)return!1;if(!Jo(h,["boolean","string","number","null"]))throw new _t(`Expected first argument to be of type boolean, string, number or null, but found ${Br(Be(h))} instead.`);if(!Jo(m,["string","array"]))throw new _t(`Expected second argument to be of type array or string, but found ${Br(Be(m))} instead.`);return m.indexOf(h)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class xc{constructor(s,h,m){this.type=st,this.needle=s,this.haystack=h,this.fromIndex=m}static parse(s,h){if(s.length<=2||s.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,Yt),b=h.parse(s[2],2,Yt);if(!m||!b)return null;if(!Ko(m.type,[Jt,nr,st,Pi,Yt]))return h.error(`Expected first argument to be of type boolean, string, number or null, but found ${Br(m.type)} instead`);if(s.length===4){const T=h.parse(s[3],3,st);return T?new xc(m,b,T):null}return new xc(m,b)}evaluate(s){const h=this.needle.evaluate(s),m=this.haystack.evaluate(s);if(!Jo(h,["boolean","string","number","null"]))throw new _t(`Expected first argument to be of type boolean, string, number or null, but found ${Br(Be(h))} instead.`);if(!Jo(m,["string","array"]))throw new _t(`Expected second argument to be of type array or string, but found ${Br(Be(m))} instead.`);if(this.fromIndex){const b=this.fromIndex.evaluate(s);return m.indexOf(h,b)}return m.indexOf(h)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class pf{constructor(s,h,m,b,T,C){this.inputType=s,this.type=h,this.input=m,this.cases=b,this.outputs=T,this.otherwise=C}static parse(s,h){if(s.length<5)return h.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return h.error("Expected an even number of arguments.");let m,b;h.expectedType&&h.expectedType.kind!=="value"&&(b=h.expectedType);const T={},C=[];for(let F=2;F<s.length-1;F+=2){let U=s[F];const H=s[F+1];Array.isArray(U)||(U=[U]);const Y=h.concat(F);if(U.length===0)return Y.error("Expected at least one branch label.");for(const ee of U){if(typeof ee!="number"&&typeof ee!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof ee=="number"&&Math.abs(ee)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof ee=="number"&&Math.floor(ee)!==ee)return Y.error("Numeric branch labels must be integer values.");if(m){if(Y.checkSubtype(m,Be(ee)))return null}else m=Be(ee);if(T[String(ee)]!==void 0)return Y.error("Branch labels must be unique.");T[String(ee)]=C.length}const J=h.parse(H,F,b);if(!J)return null;b=b||J.type,C.push(J)}const k=h.parse(s[1],1,Yt);if(!k)return null;const R=h.parse(s[s.length-1],s.length-1,b);return R?k.type.kind!=="value"&&h.concat(1).checkSubtype(m,k.type)?null:new pf(m,b,k,T,C,R):null}evaluate(s){const h=this.input.evaluate(s);return(Be(h)===this.inputType&&this.outputs[this.cases[h]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class mf{constructor(s,h,m){this.type=s,this.branches=h,this.otherwise=m}static parse(s,h){if(s.length<4)return h.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return h.error("Expected an odd number of arguments.");let m;h.expectedType&&h.expectedType.kind!=="value"&&(m=h.expectedType);const b=[];for(let C=1;C<s.length-1;C+=2){const k=h.parse(s[C],C,Jt);if(!k)return null;const R=h.parse(s[C+1],C+1,m);if(!R)return null;b.push([k,R]),m=m||R.type}const T=h.parse(s[s.length-1],s.length-1,m);if(!T)return null;if(!m)throw new Error("Can't infer output type");return new mf(m,b,T)}evaluate(s){for(const[h,m]of this.branches)if(h.evaluate(s))return m.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[h,m]of this.branches)s(h),s(m);s(this.otherwise)}outputDefined(){return this.branches.every(([s,h])=>h.outputDefined())&&this.otherwise.outputDefined()}}class bc{constructor(s,h,m,b){this.type=s,this.input=h,this.beginIndex=m,this.endIndex=b}static parse(s,h){if(s.length<=2||s.length>=5)return h.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const m=h.parse(s[1],1,Yt),b=h.parse(s[2],2,st);if(!m||!b)return null;if(!Ko(m.type,[un(Yt),nr,Yt]))return h.error(`Expected first argument to be of type array or string, but found ${Br(m.type)} instead`);if(s.length===4){const T=h.parse(s[3],3,st);return T?new bc(m.type,m,b,T):null}return new bc(m.type,m,b)}evaluate(s){const h=this.input.evaluate(s),m=this.beginIndex.evaluate(s);if(!Jo(h,["string","array"]))throw new _t(`Expected first argument to be of type array or string, but found ${Br(Be(h))} instead.`);if(this.endIndex){const b=this.endIndex.evaluate(s);return h.slice(m,b)}return h.slice(m)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function sm(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function lm(c,s,h,m){return m.compare(s,h)===0}function Hs(c,s,h){const m=c!=="=="&&c!=="!=";return class aL{constructor(T,C,k){this.type=Jt,this.lhs=T,this.rhs=C,this.collator=k,this.hasUntypedArgument=T.type.kind==="value"||C.type.kind==="value"}static parse(T,C){if(T.length!==3&&T.length!==4)return C.error("Expected two or three arguments.");const k=T[0];let R=C.parse(T[1],1,Yt);if(!R)return null;if(!sm(k,R.type))return C.concat(1).error(`"${k}" comparisons are not supported for type '${Br(R.type)}'.`);let F=C.parse(T[2],2,Yt);if(!F)return null;if(!sm(k,F.type))return C.concat(2).error(`"${k}" comparisons are not supported for type '${Br(F.type)}'.`);if(R.type.kind!==F.type.kind&&R.type.kind!=="value"&&F.type.kind!=="value")return C.error(`Cannot compare types '${Br(R.type)}' and '${Br(F.type)}'.`);m&&(R.type.kind==="value"&&F.type.kind!=="value"?R=new qt(F.type,[R]):R.type.kind!=="value"&&F.type.kind==="value"&&(F=new qt(R.type,[F])));let U=null;if(T.length===4){if(R.type.kind!=="string"&&F.type.kind!=="string"&&R.type.kind!=="value"&&F.type.kind!=="value")return C.error("Cannot use collator to compare non-string types.");if(U=C.parse(T[3],3,Ka),!U)return null}return new aL(R,F,U)}evaluate(T){const C=this.lhs.evaluate(T),k=this.rhs.evaluate(T);if(m&&this.hasUntypedArgument){const R=Be(C),F=Be(k);if(R.kind!==F.kind||R.kind!=="string"&&R.kind!=="number")throw new _t(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${R.kind}, ${F.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){const R=Be(C),F=Be(k);if(R.kind!=="string"||F.kind!=="string")return s(T,C,k)}return this.collator?h(T,C,k,this.collator.evaluate(T)):s(T,C,k)}eachChild(T){T(this.lhs),T(this.rhs),this.collator&&T(this.collator)}outputDefined(){return!0}}}const ly=Hs("==",function(c,s,h){return s===h},lm),uy=Hs("!=",function(c,s,h){return s!==h},function(c,s,h,m){return!lm(0,s,h,m)}),cy=Hs("<",function(c,s,h){return s<h},function(c,s,h,m){return m.compare(s,h)<0}),hy=Hs(">",function(c,s,h){return s>h},function(c,s,h,m){return m.compare(s,h)>0}),fy=Hs("<=",function(c,s,h){return s<=h},function(c,s,h,m){return m.compare(s,h)<=0}),dy=Hs(">=",function(c,s,h){return s>=h},function(c,s,h,m){return m.compare(s,h)>=0});class vf{constructor(s,h,m,b,T){this.type=nr,this.number=s,this.locale=h,this.currency=m,this.minFractionDigits=b,this.maxFractionDigits=T}static parse(s,h){if(s.length!==3)return h.error("Expected two arguments.");const m=h.parse(s[1],1,st);if(!m)return null;const b=s[2];if(typeof b!="object"||Array.isArray(b))return h.error("NumberFormat options argument must be an object.");let T=null;if(b.locale&&(T=h.parse(b.locale,1,nr),!T))return null;let C=null;if(b.currency&&(C=h.parse(b.currency,1,nr),!C))return null;let k=null;if(b["min-fraction-digits"]&&(k=h.parse(b["min-fraction-digits"],1,st),!k))return null;let R=null;return b["max-fraction-digits"]&&(R=h.parse(b["max-fraction-digits"],1,st),!R)?null:new vf(m,T,C,k,R)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class wc{constructor(s){this.type=Fi,this.sections=s}static parse(s,h){if(s.length<2)return h.error("Expected at least one argument.");const m=s[1];if(!Array.isArray(m)&&typeof m=="object")return h.error("First argument must be an image or text section.");const b=[];let T=!1;for(let C=1;C<=s.length-1;++C){const k=s[C];if(T&&typeof k=="object"&&!Array.isArray(k)){T=!1;let R=null;if(k["font-scale"]&&(R=h.parse(k["font-scale"],1,st),!R))return null;let F=null;if(k["text-font"]&&(F=h.parse(k["text-font"],1,un(nr)),!F))return null;let U=null;if(k["text-color"]&&(U=h.parse(k["text-color"],1,Wi),!U))return null;const H=b[b.length-1];H.scale=R,H.font=F,H.textColor=U}else{const R=h.parse(s[C],1,Yt);if(!R)return null;const F=R.type.kind;if(F!=="string"&&F!=="value"&&F!=="null"&&F!=="resolvedImage")return h.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");T=!0,b.push({content:R,scale:null,font:null,textColor:null})}}return new wc(b)}evaluate(s){return new xe(this.sections.map(h=>{const m=h.content.evaluate(s);return Be(m)===Si?new Se("",m,null,null,null):new Se(At(m),null,h.scale?h.scale.evaluate(s):null,h.font?h.font.evaluate(s).join(","):null,h.textColor?h.textColor.evaluate(s):null)}))}eachChild(s){for(const h of this.sections)s(h.content),h.scale&&s(h.scale),h.font&&s(h.font),h.textColor&&s(h.textColor)}outputDefined(){return!1}}class gf{constructor(s){this.type=Si,this.input=s}static parse(s,h){if(s.length!==2)return h.error("Expected two arguments.");const m=h.parse(s[1],1,nr);return m?new gf(m):h.error("No image name provided.")}evaluate(s){const h=this.input.evaluate(s),m=Te.fromString(h);return m&&s.availableImages&&(m.available=s.availableImages.indexOf(h)>-1),m}eachChild(s){s(this.input)}outputDefined(){return!1}}class _f{constructor(s){this.type=st,this.input=s}static parse(s,h){if(s.length!==2)return h.error(`Expected 1 argument, but found ${s.length-1} instead.`);const m=h.parse(s[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?h.error(`Expected argument of type string or array, but found ${Br(m.type)} instead.`):new _f(m):null}evaluate(s){const h=this.input.evaluate(s);if(typeof h=="string"||Array.isArray(h))return h.length;throw new _t(`Expected value to be of type string or array, but found ${Br(Be(h))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const qs={"==":ly,"!=":uy,">":hy,"<":cy,">=":dy,"<=":fy,array:qt,at:ff,boolean:qt,case:mf,coalesce:_c,collator:Ni,format:wc,image:gf,in:df,"index-of":xc,interpolate:Rn,"interpolate-hcl":Rn,"interpolate-lab":Rn,length:_f,let:yc,literal:Pt,match:pf,number:qt,"number-format":vf,object:qt,slice:bc,step:Vl,string:qt,"to-boolean":Xt,"to-color":Xt,"to-number":Xt,"to-string":Xt,var:mc,within:es};function um(c,[s,h,m,b]){s=s.evaluate(c),h=h.evaluate(c),m=m.evaluate(c);const T=b?b.evaluate(c):1,C=Fe(s,h,m,T);if(C)throw new _t(C);return new re(s/255*T,h/255*T,m/255*T,T)}function cm(c,s){return c in s}function Sc(c,s){const h=s[c];return h===void 0?null:h}function ts(c){return{type:c}}function hm(c){return{result:"success",value:c}}function js(c){return{result:"error",value:c}}function Qr(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function fm(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function fr(c){return!!c.expression&&c.expression.interpolated}function Mr(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Zr(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function oi(c){return c}function Hl(c,s){const h=s.type==="color",m=c.stops&&typeof c.stops[0][0]=="object",b=m||!(m||c.property!==void 0),T=c.type||(fr(s)?"exponential":"interval");if(h||s.type==="padding"){const F=h?re.parse:_e.parse;(c=Oi({},c)).stops&&(c.stops=c.stops.map(U=>[U[0],F(U[1])])),c.default=F(c.default?c.default:s.default)}if(c.colorSpace&&c.colorSpace!=="rgb"&&!om[c.colorSpace])throw new Error(`Unknown color space: ${c.colorSpace}`);let C,k,R;if(T==="exponential")C=dm;else if(T==="interval")C=my;else if(T==="categorical"){C=py,k=Object.create(null);for(const F of c.stops)k[F[0]]=F[1];R=typeof c.stops[0][0]}else{if(T!=="identity")throw new Error(`Unknown function type "${T}"`);C=vy}if(m){const F={},U=[];for(let J=0;J<c.stops.length;J++){const ee=c.stops[J],ve=ee[0].zoom;F[ve]===void 0&&(F[ve]={zoom:ve,type:c.type,property:c.property,default:c.default,stops:[]},U.push(ve)),F[ve].stops.push([ee[0].value,ee[1]])}const H=[];for(const J of U)H.push([F[J].zoom,Hl(F[J],s)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:Rn.interpolationFactor.bind(void 0,Y),zoomStops:H.map(J=>J[0]),evaluate:({zoom:J},ee)=>dm({stops:H,base:c.base},s,J).evaluate(J,ee)}}if(b){const F=T==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:Rn.interpolationFactor.bind(void 0,F),zoomStops:c.stops.map(U=>U[0]),evaluate:({zoom:U})=>C(c,s,U,k,R)}}return{kind:"source",evaluate(F,U){const H=U&&U.properties?U.properties[c.property]:void 0;return H===void 0?Ws(c.default,s.default):C(c,s,H,k,R)}}}function Ws(c,s,h){return c!==void 0?c:s!==void 0?s:h!==void 0?h:void 0}function py(c,s,h,m,b){return Ws(typeof h===b?m[h]:void 0,c.default,s.default)}function my(c,s,h){if(Mr(h)!=="number")return Ws(c.default,s.default);const m=c.stops.length;if(m===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[m-1][0])return c.stops[m-1][1];const b=vc(c.stops.map(T=>T[0]),h);return c.stops[b][1]}function dm(c,s,h){const m=c.base!==void 0?c.base:1;if(Mr(h)!=="number")return Ws(c.default,s.default);const b=c.stops.length;if(b===1||h<=c.stops[0][0])return c.stops[0][1];if(h>=c.stops[b-1][0])return c.stops[b-1][1];const T=vc(c.stops.map(U=>U[0]),h),C=function(U,H,Y,J){const ee=J-Y,ve=U-Y;return ee===0?0:H===1?ve/ee:(Math.pow(H,ve)-1)/(Math.pow(H,ee)-1)}(h,m,c.stops[T][0],c.stops[T+1][0]),k=c.stops[T][1],R=c.stops[T+1][1];let F=$l[s.type]||oi;if(c.colorSpace&&c.colorSpace!=="rgb"){const U=om[c.colorSpace];F=(H,Y)=>U.reverse(U.interpolate(U.forward(H),U.forward(Y),C))}return typeof k.evaluate=="function"?{evaluate(...U){const H=k.evaluate.apply(void 0,U),Y=R.evaluate.apply(void 0,U);if(H!==void 0&&Y!==void 0)return F(H,Y,C)}}:F(k,R,C)}function vy(c,s,h){switch(s.type){case"color":h=re.parse(h);break;case"formatted":h=xe.fromString(h.toString());break;case"resolvedImage":h=Te.fromString(h.toString());break;case"padding":h=_e.parse(h);break;default:Mr(h)===s.type||s.type==="enum"&&s.values[h]||(h=void 0)}return Ws(h,c.default,s.default)}Gr.register(qs,{error:[{kind:"error"},[nr],(c,[s])=>{throw new _t(s.evaluate(c))}],typeof:[nr,[Yt],(c,[s])=>Br(Be(s.evaluate(c)))],"to-rgba":[un(st,4),[Wi],(c,[s])=>s.evaluate(c).toArray()],rgb:[Wi,[st,st,st],um],rgba:[Wi,[st,st,st,st],um],has:{type:Jt,overloads:[[[nr],(c,[s])=>cm(s.evaluate(c),c.properties())],[[nr,So],(c,[s,h])=>cm(s.evaluate(c),h.evaluate(c))]]},get:{type:Yt,overloads:[[[nr],(c,[s])=>Sc(s.evaluate(c),c.properties())],[[nr,So],(c,[s,h])=>Sc(s.evaluate(c),h.evaluate(c))]]},"feature-state":[Yt,[nr],(c,[s])=>Sc(s.evaluate(c),c.featureState||{})],properties:[So,[],c=>c.properties()],"geometry-type":[nr,[],c=>c.geometryType()],id:[Yt,[],c=>c.id()],zoom:[st,[],c=>c.globals.zoom],"heatmap-density":[st,[],c=>c.globals.heatmapDensity||0],"line-progress":[st,[],c=>c.globals.lineProgress||0],accumulated:[Yt,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[st,ts(st),(c,s)=>{let h=0;for(const m of s)h+=m.evaluate(c);return h}],"*":[st,ts(st),(c,s)=>{let h=1;for(const m of s)h*=m.evaluate(c);return h}],"-":{type:st,overloads:[[[st,st],(c,[s,h])=>s.evaluate(c)-h.evaluate(c)],[[st],(c,[s])=>-s.evaluate(c)]]},"/":[st,[st,st],(c,[s,h])=>s.evaluate(c)/h.evaluate(c)],"%":[st,[st,st],(c,[s,h])=>s.evaluate(c)%h.evaluate(c)],ln2:[st,[],()=>Math.LN2],pi:[st,[],()=>Math.PI],e:[st,[],()=>Math.E],"^":[st,[st,st],(c,[s,h])=>Math.pow(s.evaluate(c),h.evaluate(c))],sqrt:[st,[st],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[st,[st],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[st,[st],(c,[s])=>Math.log(s.evaluate(c))],log2:[st,[st],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[st,[st],(c,[s])=>Math.sin(s.evaluate(c))],cos:[st,[st],(c,[s])=>Math.cos(s.evaluate(c))],tan:[st,[st],(c,[s])=>Math.tan(s.evaluate(c))],asin:[st,[st],(c,[s])=>Math.asin(s.evaluate(c))],acos:[st,[st],(c,[s])=>Math.acos(s.evaluate(c))],atan:[st,[st],(c,[s])=>Math.atan(s.evaluate(c))],min:[st,ts(st),(c,s)=>Math.min(...s.map(h=>h.evaluate(c)))],max:[st,ts(st),(c,s)=>Math.max(...s.map(h=>h.evaluate(c)))],abs:[st,[st],(c,[s])=>Math.abs(s.evaluate(c))],round:[st,[st],(c,[s])=>{const h=s.evaluate(c);return h<0?-Math.round(-h):Math.round(h)}],floor:[st,[st],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[st,[st],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[Jt,[nr,Yt],(c,[s,h])=>c.properties()[s.value]===h.value],"filter-id-==":[Jt,[Yt],(c,[s])=>c.id()===s.value],"filter-type-==":[Jt,[nr],(c,[s])=>c.geometryType()===s.value],"filter-<":[Jt,[nr,Yt],(c,[s,h])=>{const m=c.properties()[s.value],b=h.value;return typeof m==typeof b&&m<b}],"filter-id-<":[Jt,[Yt],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h<m}],"filter->":[Jt,[nr,Yt],(c,[s,h])=>{const m=c.properties()[s.value],b=h.value;return typeof m==typeof b&&m>b}],"filter-id->":[Jt,[Yt],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h>m}],"filter-<=":[Jt,[nr,Yt],(c,[s,h])=>{const m=c.properties()[s.value],b=h.value;return typeof m==typeof b&&m<=b}],"filter-id-<=":[Jt,[Yt],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h<=m}],"filter->=":[Jt,[nr,Yt],(c,[s,h])=>{const m=c.properties()[s.value],b=h.value;return typeof m==typeof b&&m>=b}],"filter-id->=":[Jt,[Yt],(c,[s])=>{const h=c.id(),m=s.value;return typeof h==typeof m&&h>=m}],"filter-has":[Jt,[Yt],(c,[s])=>s.value in c.properties()],"filter-has-id":[Jt,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Jt,[un(nr)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[Jt,[un(Yt)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[Jt,[nr,un(Yt)],(c,[s,h])=>h.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[Jt,[nr,un(Yt)],(c,[s,h])=>function(m,b,T,C){for(;T<=C;){const k=T+C>>1;if(b[k]===m)return!0;b[k]>m?C=k-1:T=k+1}return!1}(c.properties()[s.value],h.value,0,h.value.length-1)],all:{type:Jt,overloads:[[[Jt,Jt],(c,[s,h])=>s.evaluate(c)&&h.evaluate(c)],[ts(Jt),(c,s)=>{for(const h of s)if(!h.evaluate(c))return!1;return!0}]]},any:{type:Jt,overloads:[[[Jt,Jt],(c,[s,h])=>s.evaluate(c)||h.evaluate(c)],[ts(Jt),(c,s)=>{for(const h of s)if(h.evaluate(c))return!0;return!1}]]},"!":[Jt,[Jt],(c,[s])=>!s.evaluate(c)],"is-supported-script":[Jt,[nr],(c,[s])=>{const h=c.globals&&c.globals.isSupportedScript;return!h||h(s.evaluate(c))}],upcase:[nr,[nr],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[nr,[nr],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[nr,ts(Yt),(c,s)=>s.map(h=>At(h.evaluate(c))).join("")],"resolved-locale":[nr,[Ka],(c,[s])=>s.evaluate(c).resolvedLocale()]});class Tc{constructor(s,h){this.expression=s,this._warningHistory={},this._evaluator=new _r,this._defaultValue=h?function(m){return m.type==="color"&&Zr(m.default)?new re(0,0,0,0):m.type==="color"?re.parse(m.default)||null:m.type==="padding"?_e.parse(m.default)||null:m.default===void 0?null:m.default}(h):null,this._enumValues=h&&h.type==="enum"?h.values:null}evaluateWithoutErrorHandling(s,h,m,b,T,C){return this._evaluator.globals=s,this._evaluator.feature=h,this._evaluator.featureState=m,this._evaluator.canonical=b,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)}evaluate(s,h,m,b,T,C){this._evaluator.globals=s,this._evaluator.feature=h||null,this._evaluator.featureState=m||null,this._evaluator.canonical=b,this._evaluator.availableImages=T||null,this._evaluator.formattedSection=C||null;try{const k=this.expression.evaluate(this._evaluator);if(k==null||typeof k=="number"&&k!=k)return this._defaultValue;if(this._enumValues&&!(k in this._enumValues))throw new _t(`Expected value to be one of ${Object.keys(this._enumValues).map(R=>JSON.stringify(R)).join(", ")}, but found ${JSON.stringify(k)} instead.`);return k}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,typeof console<"u"&&console.warn(k.message)),this._defaultValue}}}function ql(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in qs}function jl(c,s){const h=new Gs(qs,[],s?function(b){const T={color:Wi,string:nr,number:st,enum:nr,boolean:Jt,formatted:Fi,padding:Fs,resolvedImage:Si};return b.type==="array"?un(T[b.value]||Yt,b.length):T[b.type]}(s):void 0),m=h.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?hm(new Tc(m,s)):js(h.errors)}class Wl{constructor(s,h){this.kind=s,this._styleExpression=h,this.isStateDependent=s!=="constant"&&!Us(h.expression)}evaluateWithoutErrorHandling(s,h,m,b,T,C){return this._styleExpression.evaluateWithoutErrorHandling(s,h,m,b,T,C)}evaluate(s,h,m,b,T,C){return this._styleExpression.evaluate(s,h,m,b,T,C)}}class yf{constructor(s,h,m,b){this.kind=s,this.zoomStops=m,this._styleExpression=h,this.isStateDependent=s!=="camera"&&!Us(h.expression),this.interpolationType=b}evaluateWithoutErrorHandling(s,h,m,b,T,C){return this._styleExpression.evaluateWithoutErrorHandling(s,h,m,b,T,C)}evaluate(s,h,m,b,T,C){return this._styleExpression.evaluate(s,h,m,b,T,C)}interpolationFactor(s,h,m){return this.interpolationType?Rn.interpolationFactor(this.interpolationType,s,h,m):0}}function pm(c,s){const h=jl(c,s);if(h.result==="error")return h;const m=h.value.expression,b=Nl(m);if(!b&&!Qr(s))return js([new en("","data expressions not supported")]);const T=pc(m,["zoom"]);if(!T&&!fm(s))return js([new en("","zoom expressions not supported")]);const C=Cc(m);return C||T?C instanceof en?js([C]):C instanceof Rn&&!fr(s)?js([new en("",'"interpolate" expressions cannot be used with this property')]):hm(C?new yf(b?"camera":"composite",h.value,C.labels,C instanceof Rn?C.interpolation:void 0):new Wl(b?"constant":"source",h.value)):js([new en("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ec{constructor(s,h){this._parameters=s,this._specification=h,Oi(this,Hl(this._parameters,this._specification))}static deserialize(s){return new Ec(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function Cc(c){let s=null;if(c instanceof yc)s=Cc(c.result);else if(c instanceof _c){for(const h of c.args)if(s=Cc(h),s)break}else(c instanceof Vl||c instanceof Rn)&&c.input instanceof Gr&&c.input.name==="zoom"&&(s=c);return s instanceof en||c.eachChild(h=>{const m=Cc(h);m instanceof en?s=m:!s&&m?s=new en("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&m&&s!==m&&(s=new en("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function fa(c){const s=c.key,h=c.value,m=c.valueSpec||{},b=c.objectElementValidators||{},T=c.style,C=c.styleSpec;let k=[];const R=Mr(h);if(R!=="object")return[new tt(s,h,`object expected, ${R} found`)];for(const F in h){const U=F.split(".")[0],H=m[U]||m["*"];let Y;if(b[U])Y=b[U];else if(m[U])Y=On;else if(b["*"])Y=b["*"];else{if(!m["*"]){k.push(new tt(s,h[F],`unknown property "${F}"`));continue}Y=On}k=k.concat(Y({key:(s&&`${s}.`)+F,value:h[F],valueSpec:H,style:T,styleSpec:C,object:h,objectKey:F},h))}for(const F in m)b[F]||m[F].required&&m[F].default===void 0&&h[F]===void 0&&k.push(new tt(s,h,`missing required property "${F}"`));return k}function mm(c){const s=c.value,h=c.valueSpec,m=c.style,b=c.styleSpec,T=c.key,C=c.arrayElementValidator||On;if(Mr(s)!=="array")return[new tt(T,s,`array expected, ${Mr(s)} found`)];if(h.length&&s.length!==h.length)return[new tt(T,s,`array length ${h.length} expected, length ${s.length} found`)];if(h["min-length"]&&s.length<h["min-length"])return[new tt(T,s,`array length at least ${h["min-length"]} expected, length ${s.length} found`)];let k={type:h.value,values:h.values};b.$version<7&&(k.function=h.function),Mr(h.value)==="object"&&(k=h.value);let R=[];for(let F=0;F<s.length;F++)R=R.concat(C({array:s,arrayIndex:F,value:s[F],valueSpec:k,style:m,styleSpec:b,key:`${T}[${F}]`}));return R}function xf(c){const s=c.key,h=c.value,m=c.valueSpec;let b=Mr(h);return b==="number"&&h!=h&&(b="NaN"),b!=="number"?[new tt(s,h,`number expected, ${b} found`)]:"minimum"in m&&h<m.minimum?[new tt(s,h,`${h} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&h>m.maximum?[new tt(s,h,`${h} is greater than the maximum value ${m.maximum}`)]:[]}function vm(c){const s=c.valueSpec,h=hr(c.value.type);let m,b,T,C={};const k=h!=="categorical"&&c.value.property===void 0,R=!k,F=Mr(c.value.stops)==="array"&&Mr(c.value.stops[0])==="array"&&Mr(c.value.stops[0][0])==="object",U=fa({key:c.key,value:c.value,valueSpec:c.styleSpec.function,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(J){if(h==="identity")return[new tt(J.key,J.value,'identity function may not have a "stops" property')];let ee=[];const ve=J.value;return ee=ee.concat(mm({key:J.key,value:ve,valueSpec:J.valueSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:H})),Mr(ve)==="array"&&ve.length===0&&ee.push(new tt(J.key,ve,"array must have at least one stop")),ee},default:function(J){return On({key:J.key,value:J.value,valueSpec:s,style:J.style,styleSpec:J.styleSpec})}}});return h==="identity"&&k&&U.push(new tt(c.key,c.value,'missing required property "property"')),h==="identity"||c.value.stops||U.push(new tt(c.key,c.value,'missing required property "stops"')),h==="exponential"&&c.valueSpec.expression&&!fr(c.valueSpec)&&U.push(new tt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(R&&!Qr(c.valueSpec)?U.push(new tt(c.key,c.value,"property functions not supported")):k&&!fm(c.valueSpec)&&U.push(new tt(c.key,c.value,"zoom functions not supported"))),h!=="categorical"&&!F||c.value.property!==void 0||U.push(new tt(c.key,c.value,'"property" property is required')),U;function H(J){let ee=[];const ve=J.value,pe=J.key;if(Mr(ve)!=="array")return[new tt(pe,ve,`array expected, ${Mr(ve)} found`)];if(ve.length!==2)return[new tt(pe,ve,`array length 2 expected, length ${ve.length} found`)];if(F){if(Mr(ve[0])!=="object")return[new tt(pe,ve,`object expected, ${Mr(ve[0])} found`)];if(ve[0].zoom===void 0)return[new tt(pe,ve,"object stop key must have zoom")];if(ve[0].value===void 0)return[new tt(pe,ve,"object stop key must have value")];if(T&&T>hr(ve[0].zoom))return[new tt(pe,ve[0].zoom,"stop zoom values must appear in ascending order")];hr(ve[0].zoom)!==T&&(T=hr(ve[0].zoom),b=void 0,C={}),ee=ee.concat(fa({key:`${pe}[0]`,value:ve[0],valueSpec:{zoom:{}},style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:xf,value:Y}}))}else ee=ee.concat(Y({key:`${pe}[0]`,value:ve[0],valueSpec:{},style:J.style,styleSpec:J.styleSpec},ve));return ql(Bi(ve[1]))?ee.concat([new tt(`${pe}[1]`,ve[1],"expressions are not allowed in function stops.")]):ee.concat(On({key:`${pe}[1]`,value:ve[1],valueSpec:s,style:J.style,styleSpec:J.styleSpec}))}function Y(J,ee){const ve=Mr(J.value),pe=hr(J.value),Ie=J.value!==null?J.value:ee;if(m){if(ve!==m)return[new tt(J.key,Ie,`${ve} stop domain type must match previous stop domain type ${m}`)]}else m=ve;if(ve!=="number"&&ve!=="string"&&ve!=="boolean")return[new tt(J.key,Ie,"stop domain value must be a number, string, or boolean")];if(ve!=="number"&&h!=="categorical"){let ze=`number expected, ${ve} found`;return Qr(s)&&h===void 0&&(ze+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new tt(J.key,Ie,ze)]}return h!=="categorical"||ve!=="number"||isFinite(pe)&&Math.floor(pe)===pe?h!=="categorical"&&ve==="number"&&b!==void 0&&pe<b?[new tt(J.key,Ie,"stop domain values must appear in ascending order")]:(b=pe,h==="categorical"&&pe in C?[new tt(J.key,Ie,"stop domain values must be unique")]:(C[pe]=!0,[])):[new tt(J.key,Ie,`integer expected, found ${pe}`)]}}function rs(c){const s=(c.expressionContext==="property"?pm:jl)(Bi(c.value),c.valueSpec);if(s.result==="error")return s.value.map(m=>new tt(`${c.key}${m.key}`,c.value,m.message));const h=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!h.outputDefined())return[new tt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Us(h))return[new tt(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Us(h))return[new tt(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!pc(h,["zoom","feature-state"]))return[new tt(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Nl(h))return[new tt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Zl(c){const s=c.key,h=c.value,m=c.valueSpec,b=[];return Array.isArray(m.values)?m.values.indexOf(hr(h))===-1&&b.push(new tt(s,h,`expected one of [${m.values.join(", ")}], ${JSON.stringify(h)} found`)):Object.keys(m.values).indexOf(hr(h))===-1&&b.push(new tt(s,h,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(h)} found`)),b}function Zs(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const s of c.slice(1))if(!Zs(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const gy={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ac(c){if(c==null)return{filter:()=>!0,needGeometry:!1};Zs(c)||(c=Xl(c));const s=jl(c,gy);if(s.result==="error")throw new Error(s.value.map(h=>`${h.key}: ${h.message}`).join(", "));return{filter:(h,m,b)=>s.value.evaluate(h,m,{},b),needGeometry:_m(c)}}function gm(c,s){return c<s?-1:c>s?1:0}function _m(c){if(!Array.isArray(c))return!1;if(c[0]==="within")return!0;for(let s=1;s<c.length;s++)if(_m(c[s]))return!0;return!1}function Xl(c){if(!c)return!0;const s=c[0];return c.length<=1?s!=="any":s==="=="?bf(c[1],c[2],"=="):s==="!="?Xs(bf(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?bf(c[1],c[2],s):s==="any"?(h=c.slice(1),["any"].concat(h.map(Xl))):s==="all"?["all"].concat(c.slice(1).map(Xl)):s==="none"?["all"].concat(c.slice(1).map(Xl).map(Xs)):s==="in"?Mc(c[1],c.slice(2)):s==="!in"?Xs(Mc(c[1],c.slice(2))):s==="has"?Yl(c[1]):s==="!has"?Xs(Yl(c[1])):s!=="within"||c;var h}function bf(c,s,h){switch(c){case"$type":return[`filter-type-${h}`,s];case"$id":return[`filter-id-${h}`,s];default:return[`filter-${h}`,c,s]}}function Mc(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(h=>typeof h!=typeof s[0])?["filter-in-large",c,["literal",s.sort(gm)]]:["filter-in-small",c,["literal",s]]}}function Yl(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Xs(c){return["!",c]}function Kl(c){return Zs(Bi(c.value))?rs(Oi({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ym(c)}function ym(c){const s=c.value,h=c.key;if(Mr(s)!=="array")return[new tt(h,s,`array expected, ${Mr(s)} found`)];const m=c.styleSpec;let b,T=[];if(s.length<1)return[new tt(h,s,"filter array must have at least 1 element")];switch(T=T.concat(Zl({key:`${h}[0]`,value:s[0],valueSpec:m.filter_operator,style:c.style,styleSpec:c.styleSpec})),hr(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&hr(s[1])==="$type"&&T.push(new tt(h,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&T.push(new tt(h,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(b=Mr(s[1]),b!=="string"&&T.push(new tt(`${h}[1]`,s[1],`string expected, ${b} found`)));for(let C=2;C<s.length;C++)b=Mr(s[C]),hr(s[1])==="$type"?T=T.concat(Zl({key:`${h}[${C}]`,value:s[C],valueSpec:m.geometry_type,style:c.style,styleSpec:c.styleSpec})):b!=="string"&&b!=="number"&&b!=="boolean"&&T.push(new tt(`${h}[${C}]`,s[C],`string, number, or boolean expected, ${b} found`));break;case"any":case"all":case"none":for(let C=1;C<s.length;C++)T=T.concat(ym({key:`${h}[${C}]`,value:s[C],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":b=Mr(s[1]),s.length!==2?T.push(new tt(h,s,`filter array for "${s[0]}" operator must have 2 elements`)):b!=="string"&&T.push(new tt(`${h}[1]`,s[1],`string expected, ${b} found`));break;case"within":b=Mr(s[1]),s.length!==2?T.push(new tt(h,s,`filter array for "${s[0]}" operator must have 2 elements`)):b!=="object"&&T.push(new tt(`${h}[1]`,s[1],`object expected, ${b} found`))}return T}function Jl(c,s){const h=c.key,m=c.style,b=c.styleSpec,T=c.value,C=c.objectKey,k=b[`${s}_${c.layerType}`];if(!k)return[];const R=C.match(/^(.*)-transition$/);if(s==="paint"&&R&&k[R[1]]&&k[R[1]].transition)return On({key:h,value:T,valueSpec:b.transition,style:m,styleSpec:b});const F=c.valueSpec||k[C];if(!F)return[new tt(h,T,`unknown property "${C}"`)];let U;if(Mr(T)==="string"&&Qr(F)&&!F.tokens&&(U=/^{([^}]+)}$/.exec(T)))return[new tt(h,T,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(U[1])} }\`.`)];const H=[];return c.layerType==="symbol"&&(C==="text-field"&&m&&!m.glyphs&&H.push(new tt(h,T,'use of "text-field" requires a style "glyphs" property')),C==="text-font"&&Zr(Bi(T))&&hr(T.type)==="identity"&&H.push(new tt(h,T,'"text-font" does not support identity functions'))),H.concat(On({key:c.key,value:T,valueSpec:F,style:m,styleSpec:b,expressionContext:"property",propertyType:s,propertyKey:C}))}function xm(c){return Jl(c,"paint")}function bm(c){return Jl(c,"layout")}function wm(c){let s=[];const h=c.value,m=c.key,b=c.style,T=c.styleSpec;h.type||h.ref||s.push(new tt(m,h,'either "type" or "ref" is required'));let C=hr(h.type);const k=hr(h.ref);if(h.id){const R=hr(h.id);for(let F=0;F<c.arrayIndex;F++){const U=b.layers[F];hr(U.id)===R&&s.push(new tt(m,h.id,`duplicate layer id "${h.id}", previously used at line ${U.id.__line__}`))}}if("ref"in h){let R;["type","source","source-layer","filter","layout"].forEach(F=>{F in h&&s.push(new tt(m,h[F],`"${F}" is prohibited for ref layers`))}),b.layers.forEach(F=>{hr(F.id)===k&&(R=F)}),R?R.ref?s.push(new tt(m,h.ref,"ref cannot reference another ref layer")):C=hr(R.type):s.push(new tt(m,h.ref,`ref layer "${k}" not found`))}else if(C!=="background")if(h.source){const R=b.sources&&b.sources[h.source],F=R&&hr(R.type);R?F==="vector"&&C==="raster"?s.push(new tt(m,h.source,`layer "${h.id}" requires a raster source`)):F==="raster"&&C!=="raster"?s.push(new tt(m,h.source,`layer "${h.id}" requires a vector source`)):F!=="vector"||h["source-layer"]?F==="raster-dem"&&C!=="hillshade"?s.push(new tt(m,h.source,"raster-dem source can only be used with layer type 'hillshade'.")):C!=="line"||!h.paint||!h.paint["line-gradient"]||F==="geojson"&&R.lineMetrics||s.push(new tt(m,h,`layer "${h.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new tt(m,h,`layer "${h.id}" must specify a "source-layer"`)):s.push(new tt(m,h.source,`source "${h.source}" not found`))}else s.push(new tt(m,h,'missing required property "source"'));return s=s.concat(fa({key:m,value:h,valueSpec:T.layer,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{"*":()=>[],type:()=>On({key:`${m}.type`,value:h.type,valueSpec:T.layer.type,style:c.style,styleSpec:c.styleSpec,object:h,objectKey:"type"}),filter:Kl,layout:R=>fa({layer:h,key:R.key,value:R.value,style:R.style,styleSpec:R.styleSpec,objectElementValidators:{"*":F=>bm(Oi({layerType:C},F))}}),paint:R=>fa({layer:h,key:R.key,value:R.value,style:R.style,styleSpec:R.styleSpec,objectElementValidators:{"*":F=>xm(Oi({layerType:C},F))}})}})),s}function Ys(c){const s=c.value,h=c.key,m=Mr(s);return m!=="string"?[new tt(h,s,`string expected, ${m} found`)]:[]}const Sm={promoteId:function({key:c,value:s}){if(Mr(s)==="string")return Ys({key:c,value:s});{const h=[];for(const m in s)h.push(...Ys({key:`${c}.${m}`,value:s[m]}));return h}}};function Ql(c){const s=c.value,h=c.key,m=c.styleSpec,b=c.style;if(!s.type)return[new tt(h,s,'"type" is required')];const T=hr(s.type);let C;switch(T){case"vector":case"raster":case"raster-dem":return C=fa({key:h,value:s,valueSpec:m[`source_${T.replace("-","_")}`],style:c.style,styleSpec:m,objectElementValidators:Sm}),C;case"geojson":if(C=fa({key:h,value:s,valueSpec:m.source_geojson,style:b,styleSpec:m,objectElementValidators:Sm}),s.cluster)for(const k in s.clusterProperties){const[R,F]=s.clusterProperties[k],U=typeof R=="string"?[R,["accumulated"],["get",k]]:R;C.push(...rs({key:`${h}.${k}.map`,value:F,expressionContext:"cluster-map"})),C.push(...rs({key:`${h}.${k}.reduce`,value:U,expressionContext:"cluster-reduce"}))}return C;case"video":return fa({key:h,value:s,valueSpec:m.source_video,style:b,styleSpec:m});case"image":return fa({key:h,value:s,valueSpec:m.source_image,style:b,styleSpec:m});case"canvas":return[new tt(h,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Zl({key:`${h}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:b,styleSpec:m})}}function eu(c){const s=c.value,h=c.styleSpec,m=h.light,b=c.style;let T=[];const C=Mr(s);if(s===void 0)return T;if(C!=="object")return T=T.concat([new tt("light",s,`object expected, ${C} found`)]),T;for(const k in s){const R=k.match(/^(.*)-transition$/);T=T.concat(R&&m[R[1]]&&m[R[1]].transition?On({key:k,value:s[k],valueSpec:h.transition,style:b,styleSpec:h}):m[k]?On({key:k,value:s[k],valueSpec:m[k],style:b,styleSpec:h}):[new tt(k,s[k],`unknown property "${k}"`)])}return T}function zn(c){const s=c.value,h=c.styleSpec,m=h.terrain,b=c.style;let T=[];const C=Mr(s);if(s===void 0)return T;if(C!=="object")return T=T.concat([new tt("terrain",s,`object expected, ${C} found`)]),T;for(const k in s)T=T.concat(m[k]?On({key:k,value:s[k],valueSpec:m[k],style:b,styleSpec:h}):[new tt(k,s[k],`unknown property "${k}"`)]);return T}const tu={"*":()=>[],array:mm,boolean:function(c){const s=c.value,h=c.key,m=Mr(s);return m!=="boolean"?[new tt(h,s,`boolean expected, ${m} found`)]:[]},number:xf,color:function(c){const s=c.key,h=c.value,m=Mr(h);return m!=="string"?[new tt(s,h,`color expected, ${m} found`)]:Vs(h)===null?[new tt(s,h,`color expected, "${h}" found`)]:[]},constants:Ii,enum:Zl,filter:Kl,function:vm,layer:wm,object:fa,source:Ql,light:eu,terrain:zn,string:Ys,formatted:function(c){return Ys(c).length===0?[]:rs(c)},resolvedImage:function(c){return Ys(c).length===0?[]:rs(c)},padding:function(c){const s=c.key,h=c.value;if(Mr(h)==="array"){if(h.length<1||h.length>4)return[new tt(s,h,`padding requires 1 to 4 values; ${h.length} values found`)];const m={type:"number"};let b=[];for(let T=0;T<h.length;T++)b=b.concat(On({key:`${s}[${T}]`,value:h[T],valueSpec:m}));return b}return xf({key:s,value:h,valueSpec:{}})}};function On(c){const s=c.value,h=c.valueSpec,m=c.styleSpec;return h.expression&&Zr(hr(s))?vm(c):h.expression&&ql(Bi(s))?rs(c):h.type&&tu[h.type]?tu[h.type](c):fa(Oi({},c,{valueSpec:h.type?m[h.type]:h}))}function _y(c){const s=c.value,h=c.key,m=Ys(c);return m.length||(s.indexOf("{fontstack}")===-1&&m.push(new tt(h,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&m.push(new tt(h,s,'"glyphs" url must include a "{range}" token'))),m}function To(c,s=ke){let h=[];return h=h.concat(On({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,objectElementValidators:{glyphs:_y,"*":()=>[]}})),c.constants&&(h=h.concat(Ii({key:"constants",value:c.constants,style:c,styleSpec:s}))),Tm(h)}function Tm(c){return[].concat(c).sort((s,h)=>s.line-h.line)}function Ja(c){return function(...s){return Tm(c.apply(this,s))}}To.source=Ja(Ql),To.light=Ja(eu),To.terrain=Ja(zn),To.layer=Ja(wm),To.filter=Ja(Kl),To.paintProperty=Ja(xm),To.layoutProperty=Ja(bm);const ru=To,wf=ru.light,yy=ru.paintProperty,xy=ru.layoutProperty;function Ic(c,s){let h=!1;if(s&&s.length)for(const m of s)c.fire(new ir(new Error(m.message))),h=!0;return h}class iu{constructor(s,h,m){const b=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const C=new Int32Array(this.arrayBuffer);s=C[0],this.d=(h=C[1])+2*(m=C[2]);for(let R=0;R<this.d*this.d;R++){const F=C[3+R],U=C[3+R+1];b.push(F===U?null:C.subarray(F,U))}const k=C[3+b.length+1];this.keys=C.subarray(C[3+b.length],k),this.bboxes=C.subarray(k),this.insert=this._insertReadonly}else{this.d=h+2*m;for(let C=0;C<this.d*this.d;C++)b.push([]);this.keys=[],this.bboxes=[]}this.n=h,this.extent=s,this.padding=m,this.scale=h/s,this.uid=0;const T=m/h*s;this.min=-T,this.max=s+T}insert(s,h,m,b,T){this._forEachCell(h,m,b,T,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(h),this.bboxes.push(m),this.bboxes.push(b),this.bboxes.push(T)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,h,m,b,T,C){this.cells[T].push(C)}query(s,h,m,b,T){const C=this.min,k=this.max;if(s<=C&&h<=C&&k<=m&&k<=b&&!T)return Array.prototype.slice.call(this.keys);{const R=[];return this._forEachCell(s,h,m,b,this._queryCell,R,{},T),R}}_queryCell(s,h,m,b,T,C,k,R){const F=this.cells[T];if(F!==null){const U=this.keys,H=this.bboxes;for(let Y=0;Y<F.length;Y++){const J=F[Y];if(k[J]===void 0){const ee=4*J;(R?R(H[ee+0],H[ee+1],H[ee+2],H[ee+3]):s<=H[ee+2]&&h<=H[ee+3]&&m>=H[ee+0]&&b>=H[ee+1])?(k[J]=!0,C.push(U[J])):k[J]=!1}}}}_forEachCell(s,h,m,b,T,C,k,R){const F=this._convertToCellCoord(s),U=this._convertToCellCoord(h),H=this._convertToCellCoord(m),Y=this._convertToCellCoord(b);for(let J=F;J<=H;J++)for(let ee=U;ee<=Y;ee++){const ve=this.d*ee+J;if((!R||R(this._convertFromCellCoord(J),this._convertFromCellCoord(ee),this._convertFromCellCoord(J+1),this._convertFromCellCoord(ee+1)))&&T.call(this,s,h,m,b,ve,C,k,R))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,h=3+this.cells.length+1+1;let m=0;for(let C=0;C<this.cells.length;C++)m+=this.cells[C].length;const b=new Int32Array(h+m+this.keys.length+this.bboxes.length);b[0]=this.extent,b[1]=this.n,b[2]=this.padding;let T=h;for(let C=0;C<s.length;C++){const k=s[C];b[3+C]=T,b.set(k,T),T+=k.length}return b[3+s.length]=T,b.set(this.keys,T),T+=this.keys.length,b[3+s.length+1]=T,b.set(this.bboxes,T),T+=this.bboxes.length,b.buffer}static serialize(s,h){const m=s.toArrayBuffer();return h&&h.push(m),{buffer:m}}static deserialize(s){return new iu(s.buffer)}}const Qa={};function Tt(c,s,h={}){if(Qa[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),Qa[c]={klass:s,omit:h.omit||[],shallow:h.shallow||[]}}Tt("Object",Object),Tt("TransferableGridIndex",iu),Tt("Color",re),Tt("Error",Error),Tt("AJAXError",me),Tt("ResolvedImage",Te),Tt("StylePropertyFunction",Ec),Tt("StyleExpression",Tc,{omit:["_evaluator"]}),Tt("ZoomDependentExpression",yf),Tt("ZoomConstantExpression",Wl),Tt("CompoundExpression",Gr,{omit:["_evaluate"]});for(const c in qs)qs[c]._classRegistryKey||Tt(`Expression_${c}`,qs[c]);function Em(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function is(c,s){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob)return c;if(Em(c)||ye(c))return s&&s.push(c),c;if(ArrayBuffer.isView(c)){const h=c;return s&&s.push(h.buffer),h}if(c instanceof ImageData)return s&&s.push(c.data.buffer),c;if(Array.isArray(c)){const h=[];for(const m of c)h.push(is(m,s));return h}if(typeof c=="object"){const h=c.constructor,m=h._classRegistryKey;if(!m)throw new Error("can't serialize object of unregistered class");if(!Qa[m])throw new Error(`${m} is not registered.`);const b=h.serialize?h.serialize(c,s):{};if(h.serialize){if(s&&b===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const T in c){if(!c.hasOwnProperty(T)||Qa[m].omit.indexOf(T)>=0)continue;const C=c[T];b[T]=Qa[m].shallow.indexOf(T)>=0?C:is(C,s)}c instanceof Error&&(b.message=c.message)}if(b.$name)throw new Error("$name property is reserved for worker serialization logic.");return m!=="Object"&&(b.$name=m),b}throw new Error("can't serialize object of type "+typeof c)}function Eo(c){if(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||Em(c)||ye(c)||ArrayBuffer.isView(c)||c instanceof ImageData)return c;if(Array.isArray(c))return c.map(Eo);if(typeof c=="object"){const s=c.$name||"Object";if(!Qa[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:h}=Qa[s];if(!h)throw new Error(`can't deserialize unregistered class ${s}`);if(h.deserialize)return h.deserialize(c);const m=Object.create(h.prototype);for(const b of Object.keys(c)){if(b==="$name")continue;const T=c[b];m[b]=Qa[s].shallow.indexOf(b)>=0?T:Eo(T)}return m}throw new Error("can't deserialize object of type "+typeof c)}class Sf{constructor(){this.first=!0}update(s,h){const m=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=h):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=h),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=m,!0))}}const mt={"Latin-1 Supplement":c=>c>=128&&c<=255,Arabic:c=>c>=1536&&c<=1791,"Arabic Supplement":c=>c>=1872&&c<=1919,"Arabic Extended-A":c=>c>=2208&&c<=2303,"Hangul Jamo":c=>c>=4352&&c<=4607,"Unified Canadian Aboriginal Syllabics":c=>c>=5120&&c<=5759,Khmer:c=>c>=6016&&c<=6143,"Unified Canadian Aboriginal Syllabics Extended":c=>c>=6320&&c<=6399,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"CJK Radicals Supplement":c=>c>=11904&&c<=12031,"Kangxi Radicals":c=>c>=12032&&c<=12255,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Bopomofo:c=>c>=12544&&c<=12591,"Hangul Compatibility Jamo":c=>c>=12592&&c<=12687,Kanbun:c=>c>=12688&&c<=12703,"Bopomofo Extended":c=>c>=12704&&c<=12735,"CJK Strokes":c=>c>=12736&&c<=12783,"Katakana Phonetic Extensions":c=>c>=12784&&c<=12799,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"CJK Unified Ideographs Extension A":c=>c>=13312&&c<=19903,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Yi Syllables":c=>c>=40960&&c<=42127,"Yi Radicals":c=>c>=42128&&c<=42191,"Hangul Jamo Extended-A":c=>c>=43360&&c<=43391,"Hangul Syllables":c=>c>=44032&&c<=55215,"Hangul Jamo Extended-B":c=>c>=55216&&c<=55295,"Private Use Area":c=>c>=57344&&c<=63743,"CJK Compatibility Ideographs":c=>c>=63744&&c<=64255,"Arabic Presentation Forms-A":c=>c>=64336&&c<=65023,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Arabic Presentation Forms-B":c=>c>=65136&&c<=65279,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Pc(c){for(const s of c)if(Ef(s.charCodeAt(0)))return!0;return!1}function by(c){for(const s of c)if(!Tf(s.charCodeAt(0)))return!1;return!0}function Tf(c){return!(mt.Arabic(c)||mt["Arabic Supplement"](c)||mt["Arabic Extended-A"](c)||mt["Arabic Presentation Forms-A"](c)||mt["Arabic Presentation Forms-B"](c))}function Ef(c){return!(c!==746&&c!==747&&(c<4352||!(mt["Bopomofo Extended"](c)||mt.Bopomofo(c)||mt["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||mt["CJK Compatibility Ideographs"](c)||mt["CJK Compatibility"](c)||mt["CJK Radicals Supplement"](c)||mt["CJK Strokes"](c)||!(!mt["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||mt["CJK Unified Ideographs Extension A"](c)||mt["CJK Unified Ideographs"](c)||mt["Enclosed CJK Letters and Months"](c)||mt["Hangul Compatibility Jamo"](c)||mt["Hangul Jamo Extended-A"](c)||mt["Hangul Jamo Extended-B"](c)||mt["Hangul Jamo"](c)||mt["Hangul Syllables"](c)||mt.Hiragana(c)||mt["Ideographic Description Characters"](c)||mt.Kanbun(c)||mt["Kangxi Radicals"](c)||mt["Katakana Phonetic Extensions"](c)||mt.Katakana(c)&&c!==12540||!(!mt["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!mt["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||mt["Unified Canadian Aboriginal Syllabics"](c)||mt["Unified Canadian Aboriginal Syllabics Extended"](c)||mt["Vertical Forms"](c)||mt["Yijing Hexagram Symbols"](c)||mt["Yi Syllables"](c)||mt["Yi Radicals"](c))))}function Cm(c){return!(Ef(c)||function(s){return!!(mt["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||mt["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||mt["Letterlike Symbols"](s)||mt["Number Forms"](s)||mt["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||mt["Control Pictures"](s)&&s!==9251||mt["Optical Character Recognition"](s)||mt["Enclosed Alphanumerics"](s)||mt["Geometric Shapes"](s)||mt["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||mt["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||mt["CJK Symbols and Punctuation"](s)||mt.Katakana(s)||mt["Private Use Area"](s)||mt["CJK Compatibility Forms"](s)||mt["Small Form Variants"](s)||mt["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(c))}function Am(c){return c>=1424&&c<=2303||mt["Arabic Presentation Forms-A"](c)||mt["Arabic Presentation Forms-B"](c)}function wy(c,s){return!(!s&&Am(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||mt.Khmer(c))}function Mm(c){for(const s of c)if(Am(s.charCodeAt(0)))return!0;return!1}const Cf="deferred",Af="loading",Mf="loaded";let If=null,xn="unavailable",Co=null;const Im=function(c){c&&typeof c=="string"&&c.indexOf("NetworkError")>-1&&(xn="error"),If&&If(c)};function Ks(){Pf.fire(new Ht("pluginStateChange",{pluginStatus:xn,pluginURL:Co}))}const Pf=new vr,nu=function(){return xn},Pm=function(){if(xn!==Cf||!Co)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");xn=Af,Ks(),Co&&Ke({url:Co},c=>{c?Im(c):(xn=Mf,Ks())})},Jn={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>xn===Mf||Jn.applyArabicShaping!=null,isLoading:()=>xn===Af,setState(c){if(!j())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");xn=c.pluginStatus,Co=c.pluginURL},isParsed(){if(!j())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Jn.applyArabicShaping!=null&&Jn.processBidirectionalText!=null&&Jn.processStyledBidirectionalText!=null},getPluginURL(){if(!j())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return Co}};class si{constructor(s,h){this.zoom=s,h?(this.now=h.now,this.fadeDuration=h.fadeDuration,this.zoomHistory=h.zoomHistory,this.transition=h.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Sf,this.transition={})}isSupportedScript(s){return function(h,m){for(const b of h)if(!wy(b.charCodeAt(0),m))return!1;return!0}(s,Jn.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,h=s-Math.floor(s),m=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:h+(1-h)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*h}}}class au{constructor(s,h){this.property=s,this.value=h,this.expression=function(m,b){if(Zr(m))return new Ec(m,b);if(ql(m)){const T=pm(m,b);if(T.result==="error")throw new Error(T.value.map(C=>`${C.key}: ${C.message}`).join(", "));return T.value}{let T=m;return b.type==="color"&&typeof m=="string"?T=re.parse(m):b.type!=="padding"||typeof m!="number"&&!Array.isArray(m)||(T=_e.parse(m)),{kind:"constant",evaluate:()=>T}}}(h===void 0?s.specification.default:h,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(s,h,m){return this.property.possiblyEvaluate(this,s,h,m)}}class Dc{constructor(s){this.property=s,this.value=new au(s,void 0)}transitioned(s,h){return new Lm(this.property,this.value,h,A({},s.transition,this.transition),s.now)}untransitioned(){return new Lm(this.property,this.value,null,{},0)}}class Dm{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return O(this._values[s].value.value)}setValue(s,h){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Dc(this._values[s].property)),this._values[s].value=new au(this._values[s].property,h===null?void 0:O(h))}getTransition(s){return O(this._values[s].transition)}setTransition(s,h){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new Dc(this._values[s].property)),this._values[s].transition=O(h)||void 0}serialize(){const s={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(s[h]=m);const b=this.getTransition(h);b!==void 0&&(s[`${h}-transition`]=b)}return s}transitioned(s,h){const m=new km(this._properties);for(const b of Object.keys(this._values))m._values[b]=this._values[b].transitioned(s,h._values[b]);return m}untransitioned(){const s=new km(this._properties);for(const h of Object.keys(this._values))s._values[h]=this._values[h].untransitioned();return s}}class Lm{constructor(s,h,m,b,T){this.property=s,this.value=h,this.begin=T+b.delay||0,this.end=this.begin+b.duration||0,s.specification.transition&&(b.delay||b.duration)&&(this.prior=m)}possiblyEvaluate(s,h,m){const b=s.now||0,T=this.value.possiblyEvaluate(s,h,m),C=this.prior;if(C){if(b>this.end)return this.prior=null,T;if(this.value.isDataDriven())return this.prior=null,T;if(b<this.begin)return C.possiblyEvaluate(s,h,m);{const k=(b-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(s,h,m),T,function(R){if(R<=0)return 0;if(R>=1)return 1;const F=R*R,U=F*R;return 4*(R<.5?U:3*(R-F)+U-.75)}(k))}}return T}}class km{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,h,m){const b=new ou(this._properties);for(const T of Object.keys(this._values))b._values[T]=this._values[T].possiblyEvaluate(s,h,m);return b}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class Sy{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}getValue(s){return O(this._values[s].value)}setValue(s,h){this._values[s]=new au(this._values[s].property,h===null?void 0:O(h))}serialize(){const s={};for(const h of Object.keys(this._values)){const m=this.getValue(h);m!==void 0&&(s[h]=m)}return s}possiblyEvaluate(s,h,m){const b=new ou(this._properties);for(const T of Object.keys(this._values))b._values[T]=this._values[T].possiblyEvaluate(s,h,m);return b}}class Aa{constructor(s,h,m){this.property=s,this.value=h,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,h,m,b){return this.property.evaluate(this.value,this.parameters,s,h,m,b)}}class ou{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class Dt{constructor(s){this.specification=s}possiblyEvaluate(s,h){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(h)}interpolate(s,h,m){const b=$l[this.specification.type];return b?b(s,h,m):s}}class Gt{constructor(s,h){this.specification=s,this.overrides=h}possiblyEvaluate(s,h,m,b){return new Aa(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(h,null,{},m,b)}:s.expression,h)}interpolate(s,h,m){if(s.value.kind!=="constant"||h.value.kind!=="constant")return s;if(s.value.value===void 0||h.value.value===void 0)return new Aa(this,{kind:"constant",value:void 0},s.parameters);const b=$l[this.specification.type];return b?new Aa(this,{kind:"constant",value:b(s.value.value,h.value.value,m)},s.parameters):s}evaluate(s,h,m,b,T,C){return s.kind==="constant"?s.value:s.evaluate(h,m,b,T,C)}}class Js extends Gt{possiblyEvaluate(s,h,m,b){if(s.value===void 0)return new Aa(this,{kind:"constant",value:void 0},h);if(s.expression.kind==="constant"){const T=s.expression.evaluate(h,null,{},m,b),C=s.property.specification.type==="resolvedImage"&&typeof T!="string"?T.name:T,k=this._calculate(C,C,C,h);return new Aa(this,{kind:"constant",value:k},h)}if(s.expression.kind==="camera"){const T=this._calculate(s.expression.evaluate({zoom:h.zoom-1}),s.expression.evaluate({zoom:h.zoom}),s.expression.evaluate({zoom:h.zoom+1}),h);return new Aa(this,{kind:"constant",value:T},h)}return new Aa(this,s.expression,h)}evaluate(s,h,m,b,T,C){if(s.kind==="source"){const k=s.evaluate(h,m,b,T,C);return this._calculate(k,k,k,h)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(h.zoom)-1},m,b),s.evaluate({zoom:Math.floor(h.zoom)},m,b),s.evaluate({zoom:Math.floor(h.zoom)+1},m,b),h):s.value}_calculate(s,h,m,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:m,to:h}}interpolate(s){return s}}class Df{constructor(s){this.specification=s}possiblyEvaluate(s,h,m,b){if(s.value!==void 0){if(s.expression.kind==="constant"){const T=s.expression.evaluate(h,null,{},m,b);return this._calculate(T,T,T,h)}return this._calculate(s.expression.evaluate(new si(Math.floor(h.zoom-1),h)),s.expression.evaluate(new si(Math.floor(h.zoom),h)),s.expression.evaluate(new si(Math.floor(h.zoom+1),h)),h)}}_calculate(s,h,m,b){return b.zoom>b.zoomHistory.lastIntegerZoom?{from:s,to:h}:{from:m,to:h}}interpolate(s){return s}}class Ao{constructor(s){this.specification=s}possiblyEvaluate(s,h,m,b){return!!s.expression.evaluate(h,null,{},m,b)}interpolate(){return!1}}class Zi{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const h in s){const m=s[h];m.specification.overridable&&this.overridableProperties.push(h);const b=this.defaultPropertyValues[h]=new au(m,void 0),T=this.defaultTransitionablePropertyValues[h]=new Dc(m);this.defaultTransitioningPropertyValues[h]=T.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=b.possiblyEvaluate({})}}}Tt("DataDrivenProperty",Gt),Tt("DataConstantProperty",Dt),Tt("CrossFadedDataDrivenProperty",Js),Tt("CrossFadedProperty",Df),Tt("ColorRampProperty",Ao);const Mo="-transition";class Ma extends vr{constructor(s,h){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter),h.layout&&(this._unevaluatedLayout=new Sy(h.layout)),h.paint)){this._transitionablePaint=new Dm(h.paint);for(const m in s.paint)this.setPaintProperty(m,s.paint[m],{validate:!1});for(const m in s.layout)this.setLayoutProperty(m,s.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ou(h.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}setLayoutProperty(s,h,m={}){h!=null&&this._validate(xy,`layers.${this.id}.layout.${s}`,s,h,m)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,h):this.visibility=h)}getPaintProperty(s){return s.endsWith(Mo)?this._transitionablePaint.getTransition(s.slice(0,-Mo.length)):this._transitionablePaint.getValue(s)}setPaintProperty(s,h,m={}){if(h!=null&&this._validate(yy,`layers.${this.id}.paint.${s}`,s,h,m))return!1;if(s.endsWith(Mo))return this._transitionablePaint.setTransition(s.slice(0,-Mo.length),h||void 0),!1;{const b=this._transitionablePaint._values[s],T=b.property.specification["property-type"]==="cross-faded-data-driven",C=b.value.isDataDriven(),k=b.value;this._transitionablePaint.setValue(s,h),this._handleSpecialPaintPropertyUpdate(s);const R=this._transitionablePaint._values[s].value;return R.isDataDriven()||C||T||this._handleOverridablePaintPropertyUpdate(s,k,R)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,h,m){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,h){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,h)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,h)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),D(s,(h,m)=>!(h===void 0||m==="layout"&&!Object.keys(h).length||m==="paint"&&!Object.keys(h).length))}_validate(s,h,m,b,T={}){return(!T||T.validate!==!1)&&Ic(this,s.call(ru,{key:h,layerType:this.type,objectKey:m,value:b,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const h=this.paint.get(s);if(h instanceof Aa&&Qr(h.property.specification)&&(h.value.kind==="source"||h.value.kind==="composite")&&h.value.isStateDependent)return!0}return!1}}const Rm={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Io{constructor(s,h){this._structArray=s,this._pos1=h*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class vi{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,h){return s._trim(),h&&(s.isTransferred=!0,h.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const h=Object.create(this.prototype);return h.arrayBuffer=s.arrayBuffer,h.length=s.length,h.capacity=s.arrayBuffer.byteLength/h.bytesPerElement,h._refreshViews(),h}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const h=this.uint8;this._refreshViews(),h&&this.uint8.set(h)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ti(c,s=1){let h=0,m=0;return{members:c.map(b=>{const T=Rm[b.type].BYTES_PER_ELEMENT,C=h=Lf(h,Math.max(s,T)),k=b.components||1;return m=Math.max(m,T),h+=T*k,{name:b.name,type:b.type,components:k,offset:C}}),size:Lf(h,Math.max(m,s)),alignment:s}}function Lf(c,s){return Math.ceil(c/s)*s}class ns extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h){const m=this.length;return this.resize(m+1),this.emplace(m,s,h)}emplace(s,h,m){const b=2*s;return this.int16[b+0]=h,this.int16[b+1]=m,s}}ns.prototype.bytesPerElement=4,Tt("StructArrayLayout2i4",ns);class x extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,b){const T=this.length;return this.resize(T+1),this.emplace(T,s,h,m,b)}emplace(s,h,m,b,T){const C=4*s;return this.int16[C+0]=h,this.int16[C+1]=m,this.int16[C+2]=b,this.int16[C+3]=T,s}}x.prototype.bytesPerElement=8,Tt("StructArrayLayout4i8",x);class l extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C){const k=this.length;return this.resize(k+1),this.emplace(k,s,h,m,b,T,C)}emplace(s,h,m,b,T,C,k){const R=6*s;return this.int16[R+0]=h,this.int16[R+1]=m,this.int16[R+2]=b,this.int16[R+3]=T,this.int16[R+4]=C,this.int16[R+5]=k,s}}l.prototype.bytesPerElement=12,Tt("StructArrayLayout2i4i12",l);class d extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C){const k=this.length;return this.resize(k+1),this.emplace(k,s,h,m,b,T,C)}emplace(s,h,m,b,T,C,k){const R=4*s,F=8*s;return this.int16[R+0]=h,this.int16[R+1]=m,this.uint8[F+4]=b,this.uint8[F+5]=T,this.uint8[F+6]=C,this.uint8[F+7]=k,s}}d.prototype.bytesPerElement=8,Tt("StructArrayLayout2i4ub8",d);class g extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h){const m=this.length;return this.resize(m+1),this.emplace(m,s,h)}emplace(s,h,m){const b=2*s;return this.float32[b+0]=h,this.float32[b+1]=m,s}}g.prototype.bytesPerElement=8,Tt("StructArrayLayout2f8",g);class w extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C,k,R,F,U){const H=this.length;return this.resize(H+1),this.emplace(H,s,h,m,b,T,C,k,R,F,U)}emplace(s,h,m,b,T,C,k,R,F,U,H){const Y=10*s;return this.uint16[Y+0]=h,this.uint16[Y+1]=m,this.uint16[Y+2]=b,this.uint16[Y+3]=T,this.uint16[Y+4]=C,this.uint16[Y+5]=k,this.uint16[Y+6]=R,this.uint16[Y+7]=F,this.uint16[Y+8]=U,this.uint16[Y+9]=H,s}}w.prototype.bytesPerElement=20,Tt("StructArrayLayout10ui20",w);class E extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C,k,R,F,U,H,Y){const J=this.length;return this.resize(J+1),this.emplace(J,s,h,m,b,T,C,k,R,F,U,H,Y)}emplace(s,h,m,b,T,C,k,R,F,U,H,Y,J){const ee=12*s;return this.int16[ee+0]=h,this.int16[ee+1]=m,this.int16[ee+2]=b,this.int16[ee+3]=T,this.uint16[ee+4]=C,this.uint16[ee+5]=k,this.uint16[ee+6]=R,this.uint16[ee+7]=F,this.int16[ee+8]=U,this.int16[ee+9]=H,this.int16[ee+10]=Y,this.int16[ee+11]=J,s}}E.prototype.bytesPerElement=24,Tt("StructArrayLayout4i4ui4i24",E);class P extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,s,h,m)}emplace(s,h,m,b){const T=3*s;return this.float32[T+0]=h,this.float32[T+1]=m,this.float32[T+2]=b,s}}P.prototype.bytesPerElement=12,Tt("StructArrayLayout3f12",P);class z extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.uint32[1*s+0]=h,s}}z.prototype.bytesPerElement=4,Tt("StructArrayLayout1ul4",z);class B extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C,k,R,F){const U=this.length;return this.resize(U+1),this.emplace(U,s,h,m,b,T,C,k,R,F)}emplace(s,h,m,b,T,C,k,R,F,U){const H=10*s,Y=5*s;return this.int16[H+0]=h,this.int16[H+1]=m,this.int16[H+2]=b,this.int16[H+3]=T,this.int16[H+4]=C,this.int16[H+5]=k,this.uint32[Y+3]=R,this.uint16[H+8]=F,this.uint16[H+9]=U,s}}B.prototype.bytesPerElement=20,Tt("StructArrayLayout6i1ul2ui20",B);class V extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C){const k=this.length;return this.resize(k+1),this.emplace(k,s,h,m,b,T,C)}emplace(s,h,m,b,T,C,k){const R=6*s;return this.int16[R+0]=h,this.int16[R+1]=m,this.int16[R+2]=b,this.int16[R+3]=T,this.int16[R+4]=C,this.int16[R+5]=k,s}}V.prototype.bytesPerElement=12,Tt("StructArrayLayout2i2i2i12",V);class G extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T){const C=this.length;return this.resize(C+1),this.emplace(C,s,h,m,b,T)}emplace(s,h,m,b,T,C){const k=4*s,R=8*s;return this.float32[k+0]=h,this.float32[k+1]=m,this.float32[k+2]=b,this.int16[R+6]=T,this.int16[R+7]=C,s}}G.prototype.bytesPerElement=16,Tt("StructArrayLayout2f1f2i16",G);class X extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,b){const T=this.length;return this.resize(T+1),this.emplace(T,s,h,m,b)}emplace(s,h,m,b,T){const C=12*s,k=3*s;return this.uint8[C+0]=h,this.uint8[C+1]=m,this.float32[k+1]=b,this.float32[k+2]=T,s}}X.prototype.bytesPerElement=12,Tt("StructArrayLayout2ub2f12",X);class K extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,s,h,m)}emplace(s,h,m,b){const T=3*s;return this.uint16[T+0]=h,this.uint16[T+1]=m,this.uint16[T+2]=b,s}}K.prototype.bytesPerElement=6,Tt("StructArrayLayout3ui6",K);class ce extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C,k,R,F,U,H,Y,J,ee,ve,pe,Ie){const ze=this.length;return this.resize(ze+1),this.emplace(ze,s,h,m,b,T,C,k,R,F,U,H,Y,J,ee,ve,pe,Ie)}emplace(s,h,m,b,T,C,k,R,F,U,H,Y,J,ee,ve,pe,Ie,ze){const Me=24*s,Le=12*s,Ze=48*s;return this.int16[Me+0]=h,this.int16[Me+1]=m,this.uint16[Me+2]=b,this.uint16[Me+3]=T,this.uint32[Le+2]=C,this.uint32[Le+3]=k,this.uint32[Le+4]=R,this.uint16[Me+10]=F,this.uint16[Me+11]=U,this.uint16[Me+12]=H,this.float32[Le+7]=Y,this.float32[Le+8]=J,this.uint8[Ze+36]=ee,this.uint8[Ze+37]=ve,this.uint8[Ze+38]=pe,this.uint32[Le+10]=Ie,this.int16[Me+22]=ze,s}}ce.prototype.bytesPerElement=48,Tt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",ce);class oe extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,b,T,C,k,R,F,U,H,Y,J,ee,ve,pe,Ie,ze,Me,Le,Ze,je,wt,Mt,vt,ht,ot,gt){const pt=this.length;return this.resize(pt+1),this.emplace(pt,s,h,m,b,T,C,k,R,F,U,H,Y,J,ee,ve,pe,Ie,ze,Me,Le,Ze,je,wt,Mt,vt,ht,ot,gt)}emplace(s,h,m,b,T,C,k,R,F,U,H,Y,J,ee,ve,pe,Ie,ze,Me,Le,Ze,je,wt,Mt,vt,ht,ot,gt,pt){const rt=34*s,Vt=17*s;return this.int16[rt+0]=h,this.int16[rt+1]=m,this.int16[rt+2]=b,this.int16[rt+3]=T,this.int16[rt+4]=C,this.int16[rt+5]=k,this.int16[rt+6]=R,this.int16[rt+7]=F,this.uint16[rt+8]=U,this.uint16[rt+9]=H,this.uint16[rt+10]=Y,this.uint16[rt+11]=J,this.uint16[rt+12]=ee,this.uint16[rt+13]=ve,this.uint16[rt+14]=pe,this.uint16[rt+15]=Ie,this.uint16[rt+16]=ze,this.uint16[rt+17]=Me,this.uint16[rt+18]=Le,this.uint16[rt+19]=Ze,this.uint16[rt+20]=je,this.uint16[rt+21]=wt,this.uint16[rt+22]=Mt,this.uint32[Vt+12]=vt,this.float32[Vt+13]=ht,this.float32[Vt+14]=ot,this.float32[Vt+15]=gt,this.float32[Vt+16]=pt,s}}oe.prototype.bytesPerElement=68,Tt("StructArrayLayout8i15ui1ul4f68",oe);class le extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.float32[1*s+0]=h,s}}le.prototype.bytesPerElement=4,Tt("StructArrayLayout1f4",le);class be extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,s,h,m)}emplace(s,h,m,b){const T=3*s;return this.int16[T+0]=h,this.int16[T+1]=m,this.int16[T+2]=b,s}}be.prototype.bytesPerElement=6,Tt("StructArrayLayout3i6",be);class Ce extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h,m){const b=this.length;return this.resize(b+1),this.emplace(b,s,h,m)}emplace(s,h,m,b){const T=4*s;return this.uint32[2*s+0]=h,this.uint16[T+2]=m,this.uint16[T+3]=b,s}}Ce.prototype.bytesPerElement=8,Tt("StructArrayLayout1ul2ui8",Ce);class Pe extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,h){const m=this.length;return this.resize(m+1),this.emplace(m,s,h)}emplace(s,h,m){const b=2*s;return this.uint16[b+0]=h,this.uint16[b+1]=m,s}}Pe.prototype.bytesPerElement=4,Tt("StructArrayLayout2ui4",Pe);class de extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const h=this.length;return this.resize(h+1),this.emplace(h,s)}emplace(s,h){return this.uint16[1*s+0]=h,s}}de.prototype.bytesPerElement=2,Tt("StructArrayLayout1ui2",de);class Re extends vi{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,h,m,b){const T=this.length;return this.resize(T+1),this.emplace(T,s,h,m,b)}emplace(s,h,m,b,T){const C=4*s;return this.float32[C+0]=h,this.float32[C+1]=m,this.float32[C+2]=b,this.float32[C+3]=T,s}}Re.prototype.bytesPerElement=16,Tt("StructArrayLayout4f16",Re);class De extends Io{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new we(this.anchorPointX,this.anchorPointY)}}De.prototype.size=20;class $e extends B{get(s){return new De(this,s)}}Tt("CollisionBoxArray",$e);class Ue extends Io{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ue.prototype.size=48;class Je extends ce{get(s){return new Ue(this,s)}}Tt("PlacedSymbolArray",Je);class Ne extends Io{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ne.prototype.size=68;class yt extends oe{get(s){return new Ne(this,s)}}Tt("SymbolInstanceArray",yt);class ct extends le{getoffsetX(s){return this.float32[1*s+0]}}Tt("GlyphOffsetArray",ct);class bt extends be{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Tt("SymbolLineVertexArray",bt);class Qt extends Io{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Qt.prototype.size=8;class or extends Ce{get(s){return new Qt(this,s)}}Tt("FeatureIndexArray",or);class Nt extends ns{}class kr extends ns{}class Rr extends ns{}class pr extends l{}class yr extends d{}class Fr extends g{}class Vi extends w{}class Ia extends E{}class da extends P{}class Pa extends z{}class Po extends V{}class Qn extends X{}class bn extends K{}class eo extends Pe{}const Lc=Ti([{name:"a_pos",components:2,type:"Int16"}],4),{members:Di}=Lc;class ur{constructor(s=[]){this.segments=s}prepareSegment(s,h,m,b){let T=this.segments[this.segments.length-1];return s>ur.MAX_VERTEX_ARRAY_LENGTH&&q(`Max vertices per segment is ${ur.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}`),(!T||T.vertexLength+s>ur.MAX_VERTEX_ARRAY_LENGTH||T.sortKey!==b)&&(T={vertexOffset:h.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},b!==void 0&&(T.sortKey=b),this.segments.push(T)),T}get(){return this.segments}destroy(){for(const s of this.segments)for(const h in s.vaos)s.vaos[h].destroy()}static simpleSegment(s,h,m,b){return new ur([{vertexOffset:s,primitiveOffset:h,vertexLength:m,primitiveLength:b,vaos:{},sortKey:0}])}}function Pr(c,s){return 256*(c=y(Math.floor(c),0,255))+y(Math.floor(s),0,255)}ur.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Tt("SegmentVector",ur);const $i=Ti([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ui={exports:{}},li={exports:{}};li.exports=function(c,s){var h,m,b,T,C,k,R,F;for(m=c.length-(h=3&c.length),b=s,C=3432918353,k=461845907,F=0;F<m;)R=255&c.charCodeAt(F)|(255&c.charCodeAt(++F))<<8|(255&c.charCodeAt(++F))<<16|(255&c.charCodeAt(++F))<<24,++F,b=27492+(65535&(T=5*(65535&(b=(b^=R=(65535&(R=(R=(65535&R)*C+(((R>>>16)*C&65535)<<16)&4294967295)<<15|R>>>17))*k+(((R>>>16)*k&65535)<<16)&4294967295)<<13|b>>>19))+((5*(b>>>16)&65535)<<16)&4294967295))+((58964+(T>>>16)&65535)<<16);switch(R=0,h){case 3:R^=(255&c.charCodeAt(F+2))<<16;case 2:R^=(255&c.charCodeAt(F+1))<<8;case 1:b^=R=(65535&(R=(R=(65535&(R^=255&c.charCodeAt(F)))*C+(((R>>>16)*C&65535)<<16)&4294967295)<<15|R>>>17))*k+(((R>>>16)*k&65535)<<16)&4294967295}return b^=c.length,b=2246822507*(65535&(b^=b>>>16))+((2246822507*(b>>>16)&65535)<<16)&4294967295,b=3266489909*(65535&(b^=b>>>13))+((3266489909*(b>>>16)&65535)<<16)&4294967295,(b^=b>>>16)>>>0};var ea={exports:{}};ea.exports=function(c,s){for(var h,m=c.length,b=s^m,T=0;m>=4;)h=1540483477*(65535&(h=255&c.charCodeAt(T)|(255&c.charCodeAt(++T))<<8|(255&c.charCodeAt(++T))<<16|(255&c.charCodeAt(++T))<<24))+((1540483477*(h>>>16)&65535)<<16),b=1540483477*(65535&b)+((1540483477*(b>>>16)&65535)<<16)^(h=1540483477*(65535&(h^=h>>>24))+((1540483477*(h>>>16)&65535)<<16)),m-=4,++T;switch(m){case 3:b^=(255&c.charCodeAt(T+2))<<16;case 2:b^=(255&c.charCodeAt(T+1))<<8;case 1:b=1540483477*(65535&(b^=255&c.charCodeAt(T)))+((1540483477*(b>>>16)&65535)<<16)}return b=1540483477*(65535&(b^=b>>>13))+((1540483477*(b>>>16)&65535)<<16),(b^=b>>>15)>>>0};var as=li.exports,kf=ea.exports;Ui.exports=as,Ui.exports.murmur3=as,Ui.exports.murmur2=kf;class Qs{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,h,m,b){this.ids.push(zm(s)),this.positions.push(h,m,b)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const h=zm(s);let m=0,b=this.ids.length-1;for(;m<b;){const C=m+b>>1;this.ids[C]>=h?b=C:m=C+1}const T=[];for(;this.ids[m]===h;)T.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return T}static serialize(s,h){const m=new Float64Array(s.ids),b=new Uint32Array(s.positions);return Rf(m,b,0,m.length-1),h&&h.push(m.buffer,b.buffer),{ids:m,positions:b}}static deserialize(s){const h=new Qs;return h.ids=s.ids,h.positions=s.positions,h.indexed=!0,h}}function zm(c){const s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:Ui.exports(String(c))}function Rf(c,s,h,m){for(;h<m;){const b=c[h+m>>1];let T=h-1,C=m+1;for(;;){do T++;while(c[T]<b);do C--;while(c[C]>b);if(T>=C)break;Do(c,T,C),Do(s,3*T,3*C),Do(s,3*T+1,3*C+1),Do(s,3*T+2,3*C+2)}C-h<m-C?(Rf(c,s,h,C),h=C+1):(Rf(c,s,C+1,m),m=C)}}function Do(c,s,h){const m=c[s];c[s]=c[h],c[h]=m}Tt("FeaturePositionMap",Qs);class os{constructor(s,h){this.gl=s.gl,this.location=h}}class ss extends os{constructor(s,h){super(s,h),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class kc extends os{constructor(s,h){super(s,h),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class K2 extends os{constructor(s,h){super(s,h),this.current=re.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const jR=new Float32Array(16);function Ty(c){return[Pr(255*c.r,255*c.g),Pr(255*c.b,255*c.a)]}class zf{constructor(s,h,m){this.value=s,this.uniformNames=h.map(b=>`u_${b}`),this.type=m}setUniform(s,h,m){s.set(m.constantOr(this.value))}getBinding(s,h,m){return this.type==="color"?new K2(s,h):new ss(s,h)}}class Rc{constructor(s,h){this.uniformNames=h.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,h){this.pixelRatioFrom=h.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=h.tlbr,this.patternTo=s.tlbr}setUniform(s,h,m,b){const T=b==="u_pattern_to"?this.patternTo:b==="u_pattern_from"?this.patternFrom:b==="u_pixel_ratio_to"?this.pixelRatioTo:b==="u_pixel_ratio_from"?this.pixelRatioFrom:null;T&&s.set(T)}getBinding(s,h,m){return m.substr(0,9)==="u_pattern"?new kc(s,h):new ss(s,h)}}class ls{constructor(s,h,m,b){this.expression=s,this.type=m,this.maxValue=0,this.paintVertexAttributes=h.map(T=>({name:`a_${T}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new b}populatePaintArray(s,h,m,b,T){const C=this.paintVertexArray.length,k=this.expression.evaluate(new si(0),h,{},b,[],T);this.paintVertexArray.resize(s),this._setPaintValue(C,s,k)}updatePaintArray(s,h,m,b){const T=this.expression.evaluate({zoom:0},m,b);this._setPaintValue(s,h,T)}_setPaintValue(s,h,m){if(this.type==="color"){const b=Ty(m);for(let T=s;T<h;T++)this.paintVertexArray.emplace(T,b[0],b[1])}else{for(let b=s;b<h;b++)this.paintVertexArray.emplace(b,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class to{constructor(s,h,m,b,T,C){this.expression=s,this.uniformNames=h.map(k=>`u_${k}_t`),this.type=m,this.useIntegerZoom=b,this.zoom=T,this.maxValue=0,this.paintVertexAttributes=h.map(k=>({name:`a_${k}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new C}populatePaintArray(s,h,m,b,T){const C=this.expression.evaluate(new si(this.zoom),h,{},b,[],T),k=this.expression.evaluate(new si(this.zoom+1),h,{},b,[],T),R=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(R,s,C,k)}updatePaintArray(s,h,m,b){const T=this.expression.evaluate({zoom:this.zoom},m,b),C=this.expression.evaluate({zoom:this.zoom+1},m,b);this._setPaintValue(s,h,T,C)}_setPaintValue(s,h,m,b){if(this.type==="color"){const T=Ty(m),C=Ty(b);for(let k=s;k<h;k++)this.paintVertexArray.emplace(k,T[0],T[1],C[0],C[1])}else{for(let T=s;T<h;T++)this.paintVertexArray.emplace(T,m,b);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(b))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,h){const m=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,b=y(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);s.set(b)}getBinding(s,h,m){return new ss(s,h)}}class el{constructor(s,h,m,b,T,C){this.expression=s,this.type=h,this.useIntegerZoom=m,this.zoom=b,this.layerId=C,this.zoomInPaintVertexArray=new T,this.zoomOutPaintVertexArray=new T}populatePaintArray(s,h,m){const b=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(b,s,h.patterns&&h.patterns[this.layerId],m)}updatePaintArray(s,h,m,b,T){this._setPaintValues(s,h,m.patterns&&m.patterns[this.layerId],T)}_setPaintValues(s,h,m,b){if(!b||!m)return;const{min:T,mid:C,max:k}=m,R=b[T],F=b[C],U=b[k];if(R&&F&&U)for(let H=s;H<h;H++)this.zoomInPaintVertexArray.emplace(H,F.tl[0],F.tl[1],F.br[0],F.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],F.pixelRatio,R.pixelRatio),this.zoomOutPaintVertexArray.emplace(H,F.tl[0],F.tl[1],F.br[0],F.br[1],U.tl[0],U.tl[1],U.br[0],U.br[1],F.pixelRatio,U.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,$i.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,$i.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class J2{constructor(s,h,m){this.binders={},this._buffers=[];const b=[];for(const T in s.paint._values){if(!m(T))continue;const C=s.paint.get(T);if(!(C instanceof Aa&&Qr(C.property.specification)))continue;const k=WR(T,s.type),R=C.value,F=C.property.specification.type,U=C.property.useIntegerZoom,H=C.property.specification["property-type"],Y=H==="cross-faded"||H==="cross-faded-data-driven";if(R.kind==="constant")this.binders[T]=Y?new Rc(R.value,k):new zf(R.value,k,F),b.push(`/u_${T}`);else if(R.kind==="source"||Y){const J=Q2(T,F,"source");this.binders[T]=Y?new el(R,F,U,h,J,s.id):new ls(R,k,F,J),b.push(`/a_${T}`)}else{const J=Q2(T,F,"composite");this.binders[T]=new to(R,k,F,U,h,J),b.push(`/z_${T}`)}}this.cacheKey=b.sort().join("")}getMaxValue(s){const h=this.binders[s];return h instanceof ls||h instanceof to?h.maxValue:0}populatePaintArrays(s,h,m,b,T){for(const C in this.binders){const k=this.binders[C];(k instanceof ls||k instanceof to||k instanceof el)&&k.populatePaintArray(s,h,m,b,T)}}setConstantPatternPositions(s,h){for(const m in this.binders){const b=this.binders[m];b instanceof Rc&&b.setConstantPatternPositions(s,h)}}updatePaintArrays(s,h,m,b,T){let C=!1;for(const k in s){const R=h.getPositions(k);for(const F of R){const U=m.feature(F.index);for(const H in this.binders){const Y=this.binders[H];if((Y instanceof ls||Y instanceof to||Y instanceof el)&&Y.expression.isStateDependent===!0){const J=b.paint.get(H);Y.expression=J.value,Y.updatePaintArray(F.start,F.end,U,s[k],T),C=!0}}}}return C}defines(){const s=[];for(const h in this.binders){const m=this.binders[h];(m instanceof zf||m instanceof Rc)&&s.push(...m.uniformNames.map(b=>`#define HAS_UNIFORM_${b}`))}return s}getBinderAttributes(){const s=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof ls||m instanceof to)for(let b=0;b<m.paintVertexAttributes.length;b++)s.push(m.paintVertexAttributes[b].name);else if(m instanceof el)for(let b=0;b<$i.members.length;b++)s.push($i.members[b].name)}return s}getBinderUniforms(){const s=[];for(const h in this.binders){const m=this.binders[h];if(m instanceof zf||m instanceof Rc||m instanceof to)for(const b of m.uniformNames)s.push(b)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,h){const m=[];for(const b in this.binders){const T=this.binders[b];if(T instanceof zf||T instanceof Rc||T instanceof to){for(const C of T.uniformNames)if(h[C]){const k=T.getBinding(s,h[C],C);m.push({name:C,property:b,binding:k})}}}return m}setUniforms(s,h,m,b){for(const{name:T,property:C,binding:k}of h)this.binders[C].setUniform(k,b,m.get(C),T)}updatePaintBuffers(s){this._buffers=[];for(const h in this.binders){const m=this.binders[h];if(s&&m instanceof el){const b=s.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;b&&this._buffers.push(b)}else(m instanceof ls||m instanceof to)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(s){for(const h in this.binders){const m=this.binders[h];(m instanceof ls||m instanceof to||m instanceof el)&&m.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const h=this.binders[s];(h instanceof ls||h instanceof to||h instanceof el)&&h.destroy()}}}class su{constructor(s,h,m=()=>!0){this.programConfigurations={};for(const b of s)this.programConfigurations[b.id]=new J2(b,h,m);this.needsUpload=!1,this._featureMap=new Qs,this._bufferOffset=0}populatePaintArrays(s,h,m,b,T,C){for(const k in this.programConfigurations)this.programConfigurations[k].populatePaintArrays(s,h,b,T,C);h.id!==void 0&&this._featureMap.add(h.id,m,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,h,m,b){for(const T of m)this.needsUpload=this.programConfigurations[T.id].updatePaintArrays(s,this._featureMap,h,T,b)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const h in this.programConfigurations)this.programConfigurations[h].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function WR(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function Q2(c,s,h){const m={color:{source:g,composite:Re},number:{source:le,composite:g}},b=function(T){return{"line-pattern":{source:Vi,composite:Vi},"fill-pattern":{source:Vi,composite:Vi},"fill-extrusion-pattern":{source:Vi,composite:Vi}}[T]}(c);return b&&b[h]||m[s][h]}Tt("ConstantBinder",zf),Tt("CrossFadedConstantBinder",Rc),Tt("SourceExpressionBinder",ls),Tt("CrossFadedCompositeBinder",el),Tt("CompositeExpressionBinder",to),Tt("ProgramConfiguration",J2,{omit:["_buffers"]}),Tt("ProgramConfigurationSet",su);var Li=8192;const Ey=Math.pow(2,14)-1,eS=-Ey-1;function lu(c){const s=Li/c.extent,h=c.loadGeometry();for(let m=0;m<h.length;m++){const b=h[m];for(let T=0;T<b.length;T++){const C=b[T],k=Math.round(C.x*s),R=Math.round(C.y*s);C.x=y(k,eS,Ey),C.y=y(R,eS,Ey),(k<C.x||k>C.x+1||R<C.y||R>C.y+1)&&q("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return h}function uu(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?lu(c):[]}}function Om(c,s,h,m,b){c.emplaceBack(2*s+(m+1)/2,2*h+(b+1)/2)}class Cy{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new kr,this.indexArray=new bn,this.segments=new ur,this.programConfigurations=new su(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){const b=this.layers[0],T=[];let C=null,k=!1;b.type==="circle"&&(C=b.layout.get("circle-sort-key"),k=!C.isConstant());for(const{feature:R,id:F,index:U,sourceLayerIndex:H}of s){const Y=this.layers[0]._featureFilter.needGeometry,J=uu(R,Y);if(!this.layers[0]._featureFilter.filter(new si(this.zoom),J,m))continue;const ee=k?C.evaluate(J,{},m):void 0,ve={id:F,properties:R.properties,type:R.type,sourceLayerIndex:H,index:U,geometry:Y?J.geometry:lu(R),patterns:{},sortKey:ee};T.push(ve)}k&&T.sort((R,F)=>R.sortKey-F.sortKey);for(const R of T){const{geometry:F,index:U,sourceLayerIndex:H}=R,Y=s[U].feature;this.addFeature(R,F,U,m),h.featureIndex.insert(Y,F,U,H,this.index)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Di),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,h,m,b){for(const T of h)for(const C of T){const k=C.x,R=C.y;if(k<0||k>=Li||R<0||R>=Li)continue;const F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),U=F.vertexLength;Om(this.layoutVertexArray,k,R,-1,-1),Om(this.layoutVertexArray,k,R,1,-1),Om(this.layoutVertexArray,k,R,1,1),Om(this.layoutVertexArray,k,R,-1,1),this.indexArray.emplaceBack(U,U+1,U+2),this.indexArray.emplaceBack(U,U+3,U+2),F.vertexLength+=4,F.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,{},b)}}function tS(c,s){for(let h=0;h<c.length;h++)if(zc(s,c[h]))return!0;for(let h=0;h<s.length;h++)if(zc(c,s[h]))return!0;return!!Ay(c,s)}function ZR(c,s,h){return!!zc(c,s)||!!My(s,c,h)}function rS(c,s){if(c.length===1)return nS(s,c[0]);for(let h=0;h<s.length;h++){const m=s[h];for(let b=0;b<m.length;b++)if(zc(c,m[b]))return!0}for(let h=0;h<c.length;h++)if(nS(s,c[h]))return!0;for(let h=0;h<s.length;h++)if(Ay(c,s[h]))return!0;return!1}function XR(c,s,h){if(c.length>1){if(Ay(c,s))return!0;for(let m=0;m<s.length;m++)if(My(s[m],c,h))return!0}for(let m=0;m<c.length;m++)if(My(c[m],s,h))return!0;return!1}function Ay(c,s){if(c.length===0||s.length===0)return!1;for(let h=0;h<c.length-1;h++){const m=c[h],b=c[h+1];for(let T=0;T<s.length-1;T++)if(YR(m,b,s[T],s[T+1]))return!0}return!1}function YR(c,s,h,m){return Z(c,h,m)!==Z(s,h,m)&&Z(c,s,h)!==Z(c,s,m)}function My(c,s,h){const m=h*h;if(s.length===1)return c.distSqr(s[0])<m;for(let b=1;b<s.length;b++)if(iS(c,s[b-1],s[b])<m)return!0;return!1}function iS(c,s,h){const m=s.distSqr(h);if(m===0)return c.distSqr(s);const b=((c.x-s.x)*(h.x-s.x)+(c.y-s.y)*(h.y-s.y))/m;return c.distSqr(b<0?s:b>1?h:h.sub(s)._mult(b)._add(s))}function nS(c,s){let h,m,b,T=!1;for(let C=0;C<c.length;C++){h=c[C];for(let k=0,R=h.length-1;k<h.length;R=k++)m=h[k],b=h[R],m.y>s.y!=b.y>s.y&&s.x<(b.x-m.x)*(s.y-m.y)/(b.y-m.y)+m.x&&(T=!T)}return T}function zc(c,s){let h=!1;for(let m=0,b=c.length-1;m<c.length;b=m++){const T=c[m],C=c[b];T.y>s.y!=C.y>s.y&&s.x<(C.x-T.x)*(s.y-T.y)/(C.y-T.y)+T.x&&(h=!h)}return h}function KR(c,s,h){const m=h[0],b=h[2];if(c.x<m.x&&s.x<m.x||c.x>b.x&&s.x>b.x||c.y<m.y&&s.y<m.y||c.y>b.y&&s.y>b.y)return!1;const T=Z(c,s,h[0]);return T!==Z(c,s,h[1])||T!==Z(c,s,h[2])||T!==Z(c,s,h[3])}function Of(c,s,h){const m=s.paint.get(c).value;return m.kind==="constant"?m.value:h.programConfigurations.get(s.id).getMaxValue(c)}function Bm(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Fm(c,s,h,m,b){if(!s[0]&&!s[1])return c;const T=we.convert(s)._mult(b);h==="viewport"&&T._rotate(-m);const C=[];for(let k=0;k<c.length;k++)C.push(c[k].sub(T));return C}Tt("CircleBucket",Cy,{omit:["layers"]});const JR=new Zi({"circle-sort-key":new Gt(ke.layout_circle["circle-sort-key"])});var QR={paint:new Zi({"circle-radius":new Gt(ke.paint_circle["circle-radius"]),"circle-color":new Gt(ke.paint_circle["circle-color"]),"circle-blur":new Gt(ke.paint_circle["circle-blur"]),"circle-opacity":new Gt(ke.paint_circle["circle-opacity"]),"circle-translate":new Dt(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new Dt(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Dt(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Dt(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Gt(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Gt(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Gt(ke.paint_circle["circle-stroke-opacity"])}),layout:JR},wn=1e-6,Sn=typeof Float32Array<"u"?Float32Array:Array;function aS(){var c=new Sn(9);return Sn!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function Iy(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function oS(c,s,h){var m=s[0],b=s[1],T=s[2],C=s[3],k=s[4],R=s[5],F=s[6],U=s[7],H=s[8],Y=s[9],J=s[10],ee=s[11],ve=s[12],pe=s[13],Ie=s[14],ze=s[15],Me=h[0],Le=h[1],Ze=h[2],je=h[3];return c[0]=Me*m+Le*k+Ze*H+je*ve,c[1]=Me*b+Le*R+Ze*Y+je*pe,c[2]=Me*T+Le*F+Ze*J+je*Ie,c[3]=Me*C+Le*U+Ze*ee+je*ze,c[4]=(Me=h[4])*m+(Le=h[5])*k+(Ze=h[6])*H+(je=h[7])*ve,c[5]=Me*b+Le*R+Ze*Y+je*pe,c[6]=Me*T+Le*F+Ze*J+je*Ie,c[7]=Me*C+Le*U+Ze*ee+je*ze,c[8]=(Me=h[8])*m+(Le=h[9])*k+(Ze=h[10])*H+(je=h[11])*ve,c[9]=Me*b+Le*R+Ze*Y+je*pe,c[10]=Me*T+Le*F+Ze*J+je*Ie,c[11]=Me*C+Le*U+Ze*ee+je*ze,c[12]=(Me=h[12])*m+(Le=h[13])*k+(Ze=h[14])*H+(je=h[15])*ve,c[13]=Me*b+Le*R+Ze*Y+je*pe,c[14]=Me*T+Le*F+Ze*J+je*Ie,c[15]=Me*C+Le*U+Ze*ee+je*ze,c}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var Bf,e4=oS;function sS(){var c=new Sn(3);return Sn!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function lS(c,s,h){var m=new Sn(3);return m[0]=c,m[1]=s,m[2]=h,m}function Nm(c,s,h){var m=s[0],b=s[1],T=s[2],C=s[3];return c[0]=h[0]*m+h[4]*b+h[8]*T+h[12]*C,c[1]=h[1]*m+h[5]*b+h[9]*T+h[13]*C,c[2]=h[2]*m+h[6]*b+h[10]*T+h[14]*C,c[3]=h[3]*m+h[7]*b+h[11]*T+h[15]*C,c}function uS(){var c=new Sn(4);return Sn!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function cS(c,s){const h=Nm([],[c.x,c.y,0,1],s);return new we(h[0]/h[3],h[1]/h[3])}sS(),Bf=new Sn(4),Sn!=Float32Array&&(Bf[0]=0,Bf[1]=0,Bf[2]=0,Bf[3]=0),sS(),lS(1,0,0),lS(0,1,0),uS(),uS(),aS(),function(){var c;c=new Sn(2),Sn!=Float32Array&&(c[0]=0,c[1]=0)}();class hS extends Cy{}Tt("HeatmapBucket",hS,{omit:["layers"]});var t4={paint:new Zi({"heatmap-radius":new Gt(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Gt(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Dt(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ao(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Dt(ke.paint_heatmap["heatmap-opacity"])})};function Py(c,{width:s,height:h},m,b){if(b){if(b instanceof Uint8ClampedArray)b=new Uint8Array(b.buffer);else if(b.length!==s*h*m)throw new RangeError(`mismatched image size. expected: ${b.length} but got: ${s*h*m}`)}else b=new Uint8Array(s*h*m);return c.width=s,c.height=h,c.data=b,c}function fS(c,{width:s,height:h},m){if(s===c.width&&h===c.height)return;const b=Py({},{width:s,height:h},m);Dy(c,b,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,h)},m),c.width=s,c.height=h,c.data=b.data}function Dy(c,s,h,m,b,T){if(b.width===0||b.height===0)return s;if(b.width>c.width||b.height>c.height||h.x>c.width-b.width||h.y>c.height-b.height)throw new RangeError("out of range source coordinates for image copy");if(b.width>s.width||b.height>s.height||m.x>s.width-b.width||m.y>s.height-b.height)throw new RangeError("out of range destination coordinates for image copy");const C=c.data,k=s.data;if(C===k)throw new Error("srcData equals dstData, so image is already copied");for(let R=0;R<b.height;R++){const F=((h.y+R)*c.width+h.x)*T,U=((m.y+R)*s.width+m.x)*T;for(let H=0;H<b.width*T;H++)k[U+H]=C[F+H]}return s}class Ff{constructor(s,h){Py(this,s,1,h)}resize(s){fS(this,s,1)}clone(){return new Ff({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,h,m,b,T){Dy(s,h,m,b,T,1)}}class pa{constructor(s,h){Py(this,s,4,h)}resize(s){fS(this,s,4)}replace(s,h){h?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new pa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,h,m,b,T){Dy(s,h,m,b,T,4)}}function dS(c){const s={},h=c.resolution||256,m=c.clips?c.clips.length:1,b=c.image||new pa({width:h,height:m});if(Math.log(h)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${h}`);const T=(C,k,R)=>{s[c.evaluationKey]=R;const F=c.expression.evaluate(s);b.data[C+k+0]=Math.floor(255*F.r/F.a),b.data[C+k+1]=Math.floor(255*F.g/F.a),b.data[C+k+2]=Math.floor(255*F.b/F.a),b.data[C+k+3]=Math.floor(255*F.a)};if(c.clips)for(let C=0,k=0;C<m;++C,k+=4*h)for(let R=0,F=0;R<h;R++,F+=4){const U=R/(h-1),{start:H,end:Y}=c.clips[C];T(k,F,H*(1-U)+Y*U)}else for(let C=0,k=0;C<h;C++,k+=4)T(0,k,C/(h-1));return b}Tt("AlphaImage",Ff),Tt("RGBAImage",pa);var r4={paint:new Zi({"hillshade-illumination-direction":new Dt(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Dt(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Dt(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Dt(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Dt(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Dt(ke.paint_hillshade["hillshade-accent-color"])})};const i4=Ti([{name:"a_pos",components:2,type:"Int16"}],4),{members:n4}=i4;var Vm={exports:{}};function $m(c,s,h){h=h||2;var m,b,T,C,k,R,F,U=s&&s.length,H=U?s[0]*h:c.length,Y=pS(c,0,H,h,!0),J=[];if(!Y||Y.next===Y.prev)return J;if(U&&(Y=function(ve,pe,Ie,ze){var Me,Le,Ze,je=[];for(Me=0,Le=pe.length;Me<Le;Me++)(Ze=pS(ve,pe[Me]*ze,Me<Le-1?pe[Me+1]*ze:ve.length,ze,!1))===Ze.next&&(Ze.steiner=!0),je.push(f4(Ze));for(je.sort(u4),Me=0;Me<je.length;Me++)Ie=c4(je[Me],Ie);return Ie}(c,s,Y,h)),c.length>80*h){m=T=c[0],b=C=c[1];for(var ee=h;ee<H;ee+=h)(k=c[ee])<m&&(m=k),(R=c[ee+1])<b&&(b=R),k>T&&(T=k),R>C&&(C=R);F=(F=Math.max(T-m,C-b))!==0?32767/F:0}return Nf(Y,J,h,m,b,F,0),J}function pS(c,s,h,m,b){var T,C;if(b===Ry(c,s,h,m)>0)for(T=s;T<h;T+=m)C=gS(T,c[T],c[T+1],C);else for(T=h-m;T>=s;T-=m)C=gS(T,c[T],c[T+1],C);return C&&Um(C,C.next)&&($f(C),C=C.next),C}function cu(c,s){if(!c)return c;s||(s=c);var h,m=c;do if(h=!1,m.steiner||!Um(m,m.next)&&bi(m.prev,m,m.next)!==0)m=m.next;else{if($f(m),(m=s=m.prev)===m.next)break;h=!0}while(h||m!==s);return s}function Nf(c,s,h,m,b,T,C){if(c){!C&&T&&function(U,H,Y,J){var ee=U;do ee.z===0&&(ee.z=Ly(ee.x,ee.y,H,Y,J)),ee.prevZ=ee.prev,ee.nextZ=ee.next,ee=ee.next;while(ee!==U);ee.prevZ.nextZ=null,ee.prevZ=null,function(ve){var pe,Ie,ze,Me,Le,Ze,je,wt,Mt=1;do{for(Ie=ve,ve=null,Le=null,Ze=0;Ie;){for(Ze++,ze=Ie,je=0,pe=0;pe<Mt&&(je++,ze=ze.nextZ);pe++);for(wt=Mt;je>0||wt>0&&ze;)je!==0&&(wt===0||!ze||Ie.z<=ze.z)?(Me=Ie,Ie=Ie.nextZ,je--):(Me=ze,ze=ze.nextZ,wt--),Le?Le.nextZ=Me:ve=Me,Me.prevZ=Le,Le=Me;Ie=ze}Le.nextZ=null,Mt*=2}while(Ze>1)}(ee)}(c,m,b,T);for(var k,R,F=c;c.prev!==c.next;)if(k=c.prev,R=c.next,T?o4(c,m,b,T):a4(c))s.push(k.i/h|0),s.push(c.i/h|0),s.push(R.i/h|0),$f(c),c=R.next,F=R.next;else if((c=R)===F){C?C===1?Nf(c=s4(cu(c),s,h),s,h,m,b,T,2):C===2&&l4(c,s,h,m,b,T):Nf(cu(c),s,h,m,b,T,1);break}}}function a4(c){var s=c.prev,h=c,m=c.next;if(bi(s,h,m)>=0)return!1;for(var b=s.x,T=h.x,C=m.x,k=s.y,R=h.y,F=m.y,U=b<T?b<C?b:C:T<C?T:C,H=k<R?k<F?k:F:R<F?R:F,Y=b>T?b>C?b:C:T>C?T:C,J=k>R?k>F?k:F:R>F?R:F,ee=m.next;ee!==s;){if(ee.x>=U&&ee.x<=Y&&ee.y>=H&&ee.y<=J&&Oc(b,k,T,R,C,F,ee.x,ee.y)&&bi(ee.prev,ee,ee.next)>=0)return!1;ee=ee.next}return!0}function o4(c,s,h,m){var b=c.prev,T=c,C=c.next;if(bi(b,T,C)>=0)return!1;for(var k=b.x,R=T.x,F=C.x,U=b.y,H=T.y,Y=C.y,J=k<R?k<F?k:F:R<F?R:F,ee=U<H?U<Y?U:Y:H<Y?H:Y,ve=k>R?k>F?k:F:R>F?R:F,pe=U>H?U>Y?U:Y:H>Y?H:Y,Ie=Ly(J,ee,s,h,m),ze=Ly(ve,pe,s,h,m),Me=c.prevZ,Le=c.nextZ;Me&&Me.z>=Ie&&Le&&Le.z<=ze;){if(Me.x>=J&&Me.x<=ve&&Me.y>=ee&&Me.y<=pe&&Me!==b&&Me!==C&&Oc(k,U,R,H,F,Y,Me.x,Me.y)&&bi(Me.prev,Me,Me.next)>=0||(Me=Me.prevZ,Le.x>=J&&Le.x<=ve&&Le.y>=ee&&Le.y<=pe&&Le!==b&&Le!==C&&Oc(k,U,R,H,F,Y,Le.x,Le.y)&&bi(Le.prev,Le,Le.next)>=0))return!1;Le=Le.nextZ}for(;Me&&Me.z>=Ie;){if(Me.x>=J&&Me.x<=ve&&Me.y>=ee&&Me.y<=pe&&Me!==b&&Me!==C&&Oc(k,U,R,H,F,Y,Me.x,Me.y)&&bi(Me.prev,Me,Me.next)>=0)return!1;Me=Me.prevZ}for(;Le&&Le.z<=ze;){if(Le.x>=J&&Le.x<=ve&&Le.y>=ee&&Le.y<=pe&&Le!==b&&Le!==C&&Oc(k,U,R,H,F,Y,Le.x,Le.y)&&bi(Le.prev,Le,Le.next)>=0)return!1;Le=Le.nextZ}return!0}function s4(c,s,h){var m=c;do{var b=m.prev,T=m.next.next;!Um(b,T)&&mS(b,m,m.next,T)&&Vf(b,T)&&Vf(T,b)&&(s.push(b.i/h|0),s.push(m.i/h|0),s.push(T.i/h|0),$f(m),$f(m.next),m=c=T),m=m.next}while(m!==c);return cu(m)}function l4(c,s,h,m,b,T){var C=c;do{for(var k=C.next.next;k!==C.prev;){if(C.i!==k.i&&d4(C,k)){var R=vS(C,k);return C=cu(C,C.next),R=cu(R,R.next),Nf(C,s,h,m,b,T,0),void Nf(R,s,h,m,b,T,0)}k=k.next}C=C.next}while(C!==c)}function u4(c,s){return c.x-s.x}function c4(c,s){var h=function(b,T){var C,k=T,R=b.x,F=b.y,U=-1/0;do{if(F<=k.y&&F>=k.next.y&&k.next.y!==k.y){var H=k.x+(F-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(H<=R&&H>U&&(U=H,C=k.x<k.next.x?k:k.next,H===R))return C}k=k.next}while(k!==T);if(!C)return null;var Y,J=C,ee=C.x,ve=C.y,pe=1/0;k=C;do R>=k.x&&k.x>=ee&&R!==k.x&&Oc(F<ve?R:U,F,ee,ve,F<ve?U:R,F,k.x,k.y)&&(Y=Math.abs(F-k.y)/(R-k.x),Vf(k,b)&&(Y<pe||Y===pe&&(k.x>C.x||k.x===C.x&&h4(C,k)))&&(C=k,pe=Y)),k=k.next;while(k!==J);return C}(c,s);if(!h)return s;var m=vS(h,c);return cu(m,m.next),cu(h,h.next)}function h4(c,s){return bi(c.prev,c,s.prev)<0&&bi(s.next,c,c.next)<0}function Ly(c,s,h,m,b){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-h)*b|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-m)*b|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function f4(c){var s=c,h=c;do(s.x<h.x||s.x===h.x&&s.y<h.y)&&(h=s),s=s.next;while(s!==c);return h}function Oc(c,s,h,m,b,T,C,k){return(b-C)*(s-k)>=(c-C)*(T-k)&&(c-C)*(m-k)>=(h-C)*(s-k)&&(h-C)*(T-k)>=(b-C)*(m-k)}function d4(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(h,m){var b=h;do{if(b.i!==h.i&&b.next.i!==h.i&&b.i!==m.i&&b.next.i!==m.i&&mS(b,b.next,h,m))return!0;b=b.next}while(b!==h);return!1}(c,s)&&(Vf(c,s)&&Vf(s,c)&&function(h,m){var b=h,T=!1,C=(h.x+m.x)/2,k=(h.y+m.y)/2;do b.y>k!=b.next.y>k&&b.next.y!==b.y&&C<(b.next.x-b.x)*(k-b.y)/(b.next.y-b.y)+b.x&&(T=!T),b=b.next;while(b!==h);return T}(c,s)&&(bi(c.prev,c,s.prev)||bi(c,s.prev,s))||Um(c,s)&&bi(c.prev,c,c.next)>0&&bi(s.prev,s,s.next)>0)}function bi(c,s,h){return(s.y-c.y)*(h.x-s.x)-(s.x-c.x)*(h.y-s.y)}function Um(c,s){return c.x===s.x&&c.y===s.y}function mS(c,s,h,m){var b=Hm(bi(c,s,h)),T=Hm(bi(c,s,m)),C=Hm(bi(h,m,c)),k=Hm(bi(h,m,s));return b!==T&&C!==k||!(b!==0||!Gm(c,h,s))||!(T!==0||!Gm(c,m,s))||!(C!==0||!Gm(h,c,m))||!(k!==0||!Gm(h,s,m))}function Gm(c,s,h){return s.x<=Math.max(c.x,h.x)&&s.x>=Math.min(c.x,h.x)&&s.y<=Math.max(c.y,h.y)&&s.y>=Math.min(c.y,h.y)}function Hm(c){return c>0?1:c<0?-1:0}function Vf(c,s){return bi(c.prev,c,c.next)<0?bi(c,s,c.next)>=0&&bi(c,c.prev,s)>=0:bi(c,s,c.prev)<0||bi(c,c.next,s)<0}function vS(c,s){var h=new ky(c.i,c.x,c.y),m=new ky(s.i,s.x,s.y),b=c.next,T=s.prev;return c.next=s,s.prev=c,h.next=b,b.prev=h,m.next=h,h.prev=m,T.next=m,m.prev=T,m}function gS(c,s,h,m){var b=new ky(c,s,h);return m?(b.next=m.next,b.prev=m,m.next.prev=b,m.next=b):(b.prev=b,b.next=b),b}function $f(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function ky(c,s,h){this.i=c,this.x=s,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ry(c,s,h,m){for(var b=0,T=s,C=h-m;T<h;T+=m)b+=(c[C]-c[T])*(c[T+1]+c[C+1]),C=T;return b}function p4(c,s,h,m,b){_S(c,s,h||0,m||c.length-1,b||m4)}function _S(c,s,h,m,b){for(;m>h;){if(m-h>600){var T=m-h+1,C=s-h+1,k=Math.log(T),R=.5*Math.exp(2*k/3),F=.5*Math.sqrt(k*R*(T-R)/T)*(C-T/2<0?-1:1);_S(c,s,Math.max(h,Math.floor(s-C*R/T+F)),Math.min(m,Math.floor(s+(T-C)*R/T+F)),b)}var U=c[s],H=h,Y=m;for(Uf(c,h,s),b(c[m],U)>0&&Uf(c,h,m);H<Y;){for(Uf(c,H,Y),H++,Y--;b(c[H],U)<0;)H++;for(;b(c[Y],U)>0;)Y--}b(c[h],U)===0?Uf(c,h,Y):Uf(c,++Y,m),Y<=s&&(h=Y+1),s<=Y&&(m=Y-1)}}function Uf(c,s,h){var m=c[s];c[s]=c[h],c[h]=m}function m4(c,s){return c<s?-1:c>s?1:0}function zy(c,s){const h=c.length;if(h<=1)return[c];const m=[];let b,T;for(let C=0;C<h;C++){const k=Q(c[C]);k!==0&&(c[C].area=Math.abs(k),T===void 0&&(T=k<0),T===k<0?(b&&m.push(b),b=[c[C]]):b.push(c[C]))}if(b&&m.push(b),s>1)for(let C=0;C<m.length;C++)m[C].length<=s||(p4(m[C],s,1,m[C].length-1,v4),m[C]=m[C].slice(0,s));return m}function v4(c,s){return s.area-c.area}function Oy(c,s,h){const m=h.patternDependencies;let b=!1;for(const T of s){const C=T.paint.get(`${c}-pattern`);C.isConstant()||(b=!0);const k=C.constantOr(null);k&&(b=!0,m[k.to]=!0,m[k.from]=!0)}return b}function By(c,s,h,m,b){const T=b.patternDependencies;for(const C of s){const k=C.paint.get(`${c}-pattern`).value;if(k.kind!=="constant"){let R=k.evaluate({zoom:m-1},h,{},b.availableImages),F=k.evaluate({zoom:m},h,{},b.availableImages),U=k.evaluate({zoom:m+1},h,{},b.availableImages);R=R&&R.name?R.name:R,F=F&&F.name?F.name:F,U=U&&U.name?U.name:U,T[R]=!0,T[F]=!0,T[U]=!0,h.patterns[C.id]={min:R,mid:F,max:U}}}return h}Vm.exports=$m,Vm.exports.default=$m,$m.deviation=function(c,s,h,m){var b=s&&s.length,T=Math.abs(Ry(c,0,b?s[0]*h:c.length,h));if(b)for(var C=0,k=s.length;C<k;C++)T-=Math.abs(Ry(c,s[C]*h,C<k-1?s[C+1]*h:c.length,h));var R=0;for(C=0;C<m.length;C+=3){var F=m[C]*h,U=m[C+1]*h,H=m[C+2]*h;R+=Math.abs((c[F]-c[H])*(c[U+1]-c[F+1])-(c[F]-c[U])*(c[H+1]-c[F+1]))}return T===0&&R===0?0:Math.abs((R-T)/T)},$m.flatten=function(c){for(var s=c[0][0].length,h={vertices:[],holes:[],dimensions:s},m=0,b=0;b<c.length;b++){for(var T=0;T<c[b].length;T++)for(var C=0;C<s;C++)h.vertices.push(c[b][T][C]);b>0&&h.holes.push(m+=c[b-1].length)}return h};class Fy{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Rr,this.indexArray=new bn,this.indexArray2=new eo,this.programConfigurations=new su(s.layers,s.zoom),this.segments=new ur,this.segments2=new ur,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){this.hasPattern=Oy("fill",this.layers,h);const b=this.layers[0].layout.get("fill-sort-key"),T=!b.isConstant(),C=[];for(const{feature:k,id:R,index:F,sourceLayerIndex:U}of s){const H=this.layers[0]._featureFilter.needGeometry,Y=uu(k,H);if(!this.layers[0]._featureFilter.filter(new si(this.zoom),Y,m))continue;const J=T?b.evaluate(Y,{},m,h.availableImages):void 0,ee={id:R,properties:k.properties,type:k.type,sourceLayerIndex:U,index:F,geometry:H?Y.geometry:lu(k),patterns:{},sortKey:J};C.push(ee)}T&&C.sort((k,R)=>k.sortKey-R.sortKey);for(const k of C){const{geometry:R,index:F,sourceLayerIndex:U}=k;if(this.hasPattern){const H=By("fill",this.layers,k,this.zoom,h);this.patternFeatures.push(H)}else this.addFeature(k,R,F,m,{});h.featureIndex.insert(s[F].feature,R,F,U,this.index)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}addFeatures(s,h,m){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,n4),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,h,m,b,T){for(const C of zy(h,500)){let k=0;for(const J of C)k+=J.length;const R=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray),F=R.vertexLength,U=[],H=[];for(const J of C){if(J.length===0)continue;J!==C[0]&&H.push(U.length/2);const ee=this.segments2.prepareSegment(J.length,this.layoutVertexArray,this.indexArray2),ve=ee.vertexLength;this.layoutVertexArray.emplaceBack(J[0].x,J[0].y),this.indexArray2.emplaceBack(ve+J.length-1,ve),U.push(J[0].x),U.push(J[0].y);for(let pe=1;pe<J.length;pe++)this.layoutVertexArray.emplaceBack(J[pe].x,J[pe].y),this.indexArray2.emplaceBack(ve+pe-1,ve+pe),U.push(J[pe].x),U.push(J[pe].y);ee.vertexLength+=J.length,ee.primitiveLength+=J.length}const Y=Vm.exports(U,H);for(let J=0;J<Y.length;J+=3)this.indexArray.emplaceBack(F+Y[J],F+Y[J+1],F+Y[J+2]);R.vertexLength+=k,R.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,T,b)}}Tt("FillBucket",Fy,{omit:["layers","patternFeatures"]});const g4=new Zi({"fill-sort-key":new Gt(ke.layout_fill["fill-sort-key"])});var _4={paint:new Zi({"fill-antialias":new Dt(ke.paint_fill["fill-antialias"]),"fill-opacity":new Gt(ke.paint_fill["fill-opacity"]),"fill-color":new Gt(ke.paint_fill["fill-color"]),"fill-outline-color":new Gt(ke.paint_fill["fill-outline-color"]),"fill-translate":new Dt(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new Dt(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new Js(ke.paint_fill["fill-pattern"])}),layout:g4};const y4=Ti([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),x4=Ti([{name:"a_centroid",components:2,type:"Int16"}],4),{members:b4}=y4;var tl={},w4=we,yS=Bc;function Bc(c,s,h,m,b){this.properties={},this.extent=h,this.type=0,this._pbf=c,this._geometry=-1,this._keys=m,this._values=b,c.readFields(S4,this,s)}function S4(c,s,h){c==1?s.id=h.readVarint():c==2?function(m,b){for(var T=m.readVarint()+m.pos;m.pos<T;){var C=b._keys[m.readVarint()],k=b._values[m.readVarint()];b.properties[C]=k}}(h,s):c==3?s.type=h.readVarint():c==4&&(s._geometry=h.pos)}function T4(c){for(var s,h,m=0,b=0,T=c.length,C=T-1;b<T;C=b++)m+=((h=c[C]).x-(s=c[b]).x)*(s.y+h.y);return m}Bc.types=["Unknown","Point","LineString","Polygon"],Bc.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var s,h=c.readVarint()+c.pos,m=1,b=0,T=0,C=0,k=[];c.pos<h;){if(b<=0){var R=c.readVarint();m=7&R,b=R>>3}if(b--,m===1||m===2)T+=c.readSVarint(),C+=c.readSVarint(),m===1&&(s&&k.push(s),s=[]),s.push(new w4(T,C));else{if(m!==7)throw new Error("unknown command "+m);s&&s.push(s[0].clone())}}return s&&k.push(s),k},Bc.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var s=c.readVarint()+c.pos,h=1,m=0,b=0,T=0,C=1/0,k=-1/0,R=1/0,F=-1/0;c.pos<s;){if(m<=0){var U=c.readVarint();h=7&U,m=U>>3}if(m--,h===1||h===2)(b+=c.readSVarint())<C&&(C=b),b>k&&(k=b),(T+=c.readSVarint())<R&&(R=T),T>F&&(F=T);else if(h!==7)throw new Error("unknown command "+h)}return[C,R,k,F]},Bc.prototype.toGeoJSON=function(c,s,h){var m,b,T=this.extent*Math.pow(2,h),C=this.extent*c,k=this.extent*s,R=this.loadGeometry(),F=Bc.types[this.type];function U(J){for(var ee=0;ee<J.length;ee++){var ve=J[ee];J[ee]=[360*(ve.x+C)/T-180,360/Math.PI*Math.atan(Math.exp((180-360*(ve.y+k)/T)*Math.PI/180))-90]}}switch(this.type){case 1:var H=[];for(m=0;m<R.length;m++)H[m]=R[m][0];U(R=H);break;case 2:for(m=0;m<R.length;m++)U(R[m]);break;case 3:for(R=function(J){var ee=J.length;if(ee<=1)return[J];for(var ve,pe,Ie=[],ze=0;ze<ee;ze++){var Me=T4(J[ze]);Me!==0&&(pe===void 0&&(pe=Me<0),pe===Me<0?(ve&&Ie.push(ve),ve=[J[ze]]):ve.push(J[ze]))}return ve&&Ie.push(ve),Ie}(R),m=0;m<R.length;m++)for(b=0;b<R[m].length;b++)U(R[m][b])}R.length===1?R=R[0]:F="Multi"+F;var Y={type:"Feature",geometry:{type:F,coordinates:R},properties:this.properties};return"id"in this&&(Y.id=this.id),Y};var E4=yS,xS=bS;function bS(c,s){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(C4,this,s),this.length=this._features.length}function C4(c,s,h){c===15?s.version=h.readVarint():c===1?s.name=h.readString():c===5?s.extent=h.readVarint():c===2?s._features.push(h.pos):c===3?s._keys.push(h.readString()):c===4&&s._values.push(function(m){for(var b=null,T=m.readVarint()+m.pos;m.pos<T;){var C=m.readVarint()>>3;b=C===1?m.readString():C===2?m.readFloat():C===3?m.readDouble():C===4?m.readVarint64():C===5?m.readVarint():C===6?m.readSVarint():C===7?m.readBoolean():null}return b}(h))}bS.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var s=this._pbf.readVarint()+this._pbf.pos;return new E4(this._pbf,s,this.extent,this._keys,this._values)};var A4=xS;function M4(c,s,h){if(c===3){var m=new A4(h,h.readVarint()+h.pos);m.length&&(s[m.name]=m)}}tl.VectorTile=function(c,s){this.layers=c.readFields(M4,{},s)},tl.VectorTileFeature=yS,tl.VectorTileLayer=xS;const I4=tl.VectorTileFeature.types,Ny=Math.pow(2,13);function Gf(c,s,h,m,b,T,C,k){c.emplaceBack(s,h,2*Math.floor(m*Ny)+C,b*Ny*2,T*Ny*2,Math.round(k))}class Vy{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new pr,this.centroidVertexArray=new Nt,this.indexArray=new bn,this.programConfigurations=new su(s.layers,s.zoom),this.segments=new ur,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){this.features=[],this.hasPattern=Oy("fill-extrusion",this.layers,h);for(const{feature:b,id:T,index:C,sourceLayerIndex:k}of s){const R=this.layers[0]._featureFilter.needGeometry,F=uu(b,R);if(!this.layers[0]._featureFilter.filter(new si(this.zoom),F,m))continue;const U={id:T,sourceLayerIndex:k,index:C,geometry:R?F.geometry:lu(b),properties:b.properties,type:b.type,patterns:{}};this.hasPattern?this.features.push(By("fill-extrusion",this.layers,U,this.zoom,h)):this.addFeature(U,U.geometry,C,m,{}),h.featureIndex.insert(b,U.geometry,C,k,this.index,!0)}}addFeatures(s,h,m){for(const b of this.features){const{geometry:T}=b;this.addFeature(b,T,b.index,h,m)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,b4),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,x4.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,h,m,b,T){const C={x:0,y:0,vertexCount:0};for(const k of zy(h,500)){let R=0;for(const ee of k)R+=ee.length;let F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const ee of k){if(ee.length===0||D4(ee))continue;let ve=0;for(let pe=0;pe<ee.length;pe++){const Ie=ee[pe];if(pe>=1){const ze=ee[pe-1];if(!P4(Ie,ze)){F.vertexLength+4>ur.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const Me=Ie.sub(ze)._perp()._unit(),Le=ze.dist(Ie);ve+Le>32768&&(ve=0),Gf(this.layoutVertexArray,Ie.x,Ie.y,Me.x,Me.y,0,0,ve),Gf(this.layoutVertexArray,Ie.x,Ie.y,Me.x,Me.y,0,1,ve),C.x+=2*Ie.x,C.y+=2*Ie.y,C.vertexCount+=2,ve+=Le,Gf(this.layoutVertexArray,ze.x,ze.y,Me.x,Me.y,0,0,ve),Gf(this.layoutVertexArray,ze.x,ze.y,Me.x,Me.y,0,1,ve),C.x+=2*ze.x,C.y+=2*ze.y,C.vertexCount+=2;const Ze=F.vertexLength;this.indexArray.emplaceBack(Ze,Ze+2,Ze+1),this.indexArray.emplaceBack(Ze+1,Ze+2,Ze+3),F.vertexLength+=4,F.primitiveLength+=2}}}}if(F.vertexLength+R>ur.MAX_VERTEX_ARRAY_LENGTH&&(F=this.segments.prepareSegment(R,this.layoutVertexArray,this.indexArray)),I4[s.type]!=="Polygon")continue;const U=[],H=[],Y=F.vertexLength;for(const ee of k)if(ee.length!==0){ee!==k[0]&&H.push(U.length/2);for(let ve=0;ve<ee.length;ve++){const pe=ee[ve];Gf(this.layoutVertexArray,pe.x,pe.y,0,0,1,1,0),C.x+=pe.x,C.y+=pe.y,C.vertexCount+=1,U.push(pe.x),U.push(pe.y)}}const J=Vm.exports(U,H);for(let ee=0;ee<J.length;ee+=3)this.indexArray.emplaceBack(Y+J[ee],Y+J[ee+2],Y+J[ee+1]);F.primitiveLength+=J.length/3,F.vertexLength+=R}for(let k=0;k<C.vertexCount;k++)this.centroidVertexArray.emplaceBack(Math.floor(C.x/C.vertexCount),Math.floor(C.y/C.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,T,b)}}function P4(c,s){return c.x===s.x&&(c.x<0||c.x>Li)||c.y===s.y&&(c.y<0||c.y>Li)}function D4(c){return c.every(s=>s.x<0)||c.every(s=>s.x>Li)||c.every(s=>s.y<0)||c.every(s=>s.y>Li)}Tt("FillExtrusionBucket",Vy,{omit:["layers","features"]});var L4={paint:new Zi({"fill-extrusion-opacity":new Dt(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Gt(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Dt(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Dt(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Js(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Gt(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Gt(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Dt(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Hf(c,s){return c.x*s.x+c.y*s.y}function wS(c,s){if(c.length===1){let h=0;const m=s[h++];let b;for(;!b||m.equals(b);)if(b=s[h++],!b)return 1/0;for(;h<s.length;h++){const T=s[h],C=c[0],k=b.sub(m),R=T.sub(m),F=C.sub(m),U=Hf(k,k),H=Hf(k,R),Y=Hf(R,R),J=Hf(F,k),ee=Hf(F,R),ve=U*Y-H*H,pe=(Y*J-H*ee)/ve,Ie=(U*ee-H*J)/ve,ze=m.z*(1-pe-Ie)+b.z*pe+T.z*Ie;if(isFinite(ze))return ze}return 1/0}{let h=1/0;for(const m of s)h=Math.min(h,m.z);return h}}const k4=Ti([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:R4}=k4,z4=Ti([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:O4}=z4,B4=tl.VectorTileFeature.types,F4=Math.cos(Math.PI/180*37.5),SS=Math.pow(2,14)/.5;class $y{constructor(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(h=>h.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(h=>{this.gradients[h.id]={}}),this.layoutVertexArray=new yr,this.layoutVertexArray2=new Fr,this.indexArray=new bn,this.programConfigurations=new su(s.layers,s.zoom),this.segments=new ur,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(h=>h.isStateDependent()).map(h=>h.id)}populate(s,h,m){this.hasPattern=Oy("line",this.layers,h);const b=this.layers[0].layout.get("line-sort-key"),T=!b.isConstant(),C=[];for(const{feature:k,id:R,index:F,sourceLayerIndex:U}of s){const H=this.layers[0]._featureFilter.needGeometry,Y=uu(k,H);if(!this.layers[0]._featureFilter.filter(new si(this.zoom),Y,m))continue;const J=T?b.evaluate(Y,{},m):void 0,ee={id:R,properties:k.properties,type:k.type,sourceLayerIndex:U,index:F,geometry:H?Y.geometry:lu(k),patterns:{},sortKey:J};C.push(ee)}T&&C.sort((k,R)=>k.sortKey-R.sortKey);for(const k of C){const{geometry:R,index:F,sourceLayerIndex:U}=k;if(this.hasPattern){const H=By("line",this.layers,k,this.zoom,h);this.patternFeatures.push(H)}else this.addFeature(k,R,F,m,{});h.featureIndex.insert(s[F].feature,R,F,U,this.index)}}update(s,h,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,h,this.stateDependentLayers,m)}addFeatures(s,h,m){for(const b of this.patternFeatures)this.addFeature(b,b.geometry,b.index,h,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,O4)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,R4),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,h,m,b,T){const C=this.layers[0].layout,k=C.get("line-join").evaluate(s,{}),R=C.get("line-cap"),F=C.get("line-miter-limit"),U=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const H of h)this.addLine(H,s,k,R,F,U);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,m,T,b)}addLine(s,h,m,b,T,C){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ie=0;Ie<s.length-1;Ie++)this.totalDistance+=s[Ie].dist(s[Ie+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=B4[h.type]==="Polygon";let R=s.length;for(;R>=2&&s[R-1].equals(s[R-2]);)R--;let F=0;for(;F<R-1&&s[F].equals(s[F+1]);)F++;if(R<(k?3:2))return;m==="bevel"&&(T=1.05);const U=this.overscaling<=16?122880/(512*this.overscaling):0,H=this.segments.prepareSegment(10*R,this.layoutVertexArray,this.indexArray);let Y,J,ee,ve,pe;this.e1=this.e2=-1,k&&(Y=s[R-2],pe=s[F].sub(Y)._unit()._perp());for(let Ie=F;Ie<R;Ie++){if(ee=Ie===R-1?k?s[F+1]:void 0:s[Ie+1],ee&&s[Ie].equals(ee))continue;pe&&(ve=pe),Y&&(J=Y),Y=s[Ie],pe=ee?ee.sub(Y)._unit()._perp():ve,ve=ve||pe;let ze=ve.add(pe);ze.x===0&&ze.y===0||ze._unit();const Me=ve.x*pe.x+ve.y*pe.y,Le=ze.x*pe.x+ze.y*pe.y,Ze=Le!==0?1/Le:1/0,je=2*Math.sqrt(2-2*Le),wt=Le<F4&&J&&ee,Mt=ve.x*pe.y-ve.y*pe.x>0;if(wt&&Ie>F){const ot=Y.dist(J);if(ot>2*U){const gt=Y.sub(Y.sub(J)._mult(U/ot)._round());this.updateDistance(J,gt),this.addCurrentVertex(gt,ve,0,0,H),J=gt}}const vt=J&&ee;let ht=vt?m:k?"butt":b;if(vt&&ht==="round"&&(Ze<C?ht="miter":Ze<=2&&(ht="fakeround")),ht==="miter"&&Ze>T&&(ht="bevel"),ht==="bevel"&&(Ze>2&&(ht="flipbevel"),Ze<T&&(ht="miter")),J&&this.updateDistance(J,Y),ht==="miter")ze._mult(Ze),this.addCurrentVertex(Y,ze,0,0,H);else if(ht==="flipbevel"){if(Ze>100)ze=pe.mult(-1);else{const ot=Ze*ve.add(pe).mag()/ve.sub(pe).mag();ze._perp()._mult(ot*(Mt?-1:1))}this.addCurrentVertex(Y,ze,0,0,H),this.addCurrentVertex(Y,ze.mult(-1),0,0,H)}else if(ht==="bevel"||ht==="fakeround"){const ot=-Math.sqrt(Ze*Ze-1),gt=Mt?ot:0,pt=Mt?0:ot;if(J&&this.addCurrentVertex(Y,ve,gt,pt,H),ht==="fakeround"){const rt=Math.round(180*je/Math.PI/20);for(let Vt=1;Vt<rt;Vt++){let kt=Vt/rt;if(kt!==.5){const ei=kt-.5;kt+=kt*ei*(kt-1)*((1.0904+Me*(Me*(3.55645-1.43519*Me)-3.2452))*ei*ei+(.848013+Me*(.215638*Me-1.06021)))}const sr=pe.sub(ve)._mult(kt)._add(ve)._unit()._mult(Mt?-1:1);this.addHalfVertex(Y,sr.x,sr.y,!1,Mt,0,H)}}ee&&this.addCurrentVertex(Y,pe,-gt,-pt,H)}else if(ht==="butt")this.addCurrentVertex(Y,ze,0,0,H);else if(ht==="square"){const ot=J?1:-1;this.addCurrentVertex(Y,ze,ot,ot,H)}else ht==="round"&&(J&&(this.addCurrentVertex(Y,ve,0,0,H),this.addCurrentVertex(Y,ve,1,1,H,!0)),ee&&(this.addCurrentVertex(Y,pe,-1,-1,H,!0),this.addCurrentVertex(Y,pe,0,0,H)));if(wt&&Ie<R-1){const ot=Y.dist(ee);if(ot>2*U){const gt=Y.add(ee.sub(Y)._mult(U/ot)._round());this.updateDistance(Y,gt),this.addCurrentVertex(gt,pe,0,0,H),Y=gt}}}}addCurrentVertex(s,h,m,b,T,C=!1){const k=h.y*b-h.x,R=-h.y-h.x*b;this.addHalfVertex(s,h.x+h.y*m,h.y-h.x*m,C,!1,m,T),this.addHalfVertex(s,k,R,C,!0,-b,T),this.distance>SS/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(s,h,m,b,T,C))}addHalfVertex({x:s,y:h},m,b,T,C,k,R){const F=.5*(this.lineClips?this.scaledDistance*(SS-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(T?1:0),(h<<1)+(C?1:0),Math.round(63*m)+128,Math.round(63*b)+128,1+(k===0?0:k<0?-1:1)|(63&F)<<2,F>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const U=R.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,U),R.primitiveLength++),C?this.e2=U:this.e1=U}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,h){this.distance+=s.dist(h),this.updateScaledDistance()}}Tt("LineBucket",$y,{omit:["layers","patternFeatures"]});const N4=new Zi({"line-cap":new Dt(ke.layout_line["line-cap"]),"line-join":new Gt(ke.layout_line["line-join"]),"line-miter-limit":new Dt(ke.layout_line["line-miter-limit"]),"line-round-limit":new Dt(ke.layout_line["line-round-limit"]),"line-sort-key":new Gt(ke.layout_line["line-sort-key"])});var TS={paint:new Zi({"line-opacity":new Gt(ke.paint_line["line-opacity"]),"line-color":new Gt(ke.paint_line["line-color"]),"line-translate":new Dt(ke.paint_line["line-translate"]),"line-translate-anchor":new Dt(ke.paint_line["line-translate-anchor"]),"line-width":new Gt(ke.paint_line["line-width"]),"line-gap-width":new Gt(ke.paint_line["line-gap-width"]),"line-offset":new Gt(ke.paint_line["line-offset"]),"line-blur":new Gt(ke.paint_line["line-blur"]),"line-dasharray":new Df(ke.paint_line["line-dasharray"]),"line-pattern":new Js(ke.paint_line["line-pattern"]),"line-gradient":new Ao(ke.paint_line["line-gradient"])}),layout:N4};const ES=new class extends Gt{possiblyEvaluate(c,s){return s=new si(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(c,s)}evaluate(c,s,h,m){return s=A({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(c,s,h,m)}}(TS.paint.properties["line-width"].specification);function CS(c,s){return s>0?s+2*c:c}ES.useIntegerZoom=!0;const V4=Ti([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),$4=Ti([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ti([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const U4=Ti([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Ti([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const AS=Ti([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),G4=Ti([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function H4(c,s,h){return c.sections.forEach(m=>{m.text=function(b,T,C){const k=T.layout.get("text-transform").evaluate(C,{});return k==="uppercase"?b=b.toLocaleUpperCase():k==="lowercase"&&(b=b.toLocaleLowerCase()),Jn.applyArabicShaping&&(b=Jn.applyArabicShaping(b)),b}(m.text,s,h)}),c}Ti([{name:"triangle",components:3,type:"Uint16"}]),Ti([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ti([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Ti([{type:"Float32",name:"offsetX"}]),Ti([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const qf={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Xi=24,Uy=qr,MS=function(c,s,h,m,b){var T,C,k=8*b-m-1,R=(1<<k)-1,F=R>>1,U=-7,H=h?b-1:0,Y=h?-1:1,J=c[s+H];for(H+=Y,T=J&(1<<-U)-1,J>>=-U,U+=k;U>0;T=256*T+c[s+H],H+=Y,U-=8);for(C=T&(1<<-U)-1,T>>=-U,U+=m;U>0;C=256*C+c[s+H],H+=Y,U-=8);if(T===0)T=1-F;else{if(T===R)return C?NaN:1/0*(J?-1:1);C+=Math.pow(2,m),T-=F}return(J?-1:1)*C*Math.pow(2,T-m)},IS=function(c,s,h,m,b,T){var C,k,R,F=8*T-b-1,U=(1<<F)-1,H=U>>1,Y=b===23?Math.pow(2,-24)-Math.pow(2,-77):0,J=m?0:T-1,ee=m?1:-1,ve=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(k=isNaN(s)?1:0,C=U):(C=Math.floor(Math.log(s)/Math.LN2),s*(R=Math.pow(2,-C))<1&&(C--,R*=2),(s+=C+H>=1?Y/R:Y*Math.pow(2,1-H))*R>=2&&(C++,R/=2),C+H>=U?(k=0,C=U):C+H>=1?(k=(s*R-1)*Math.pow(2,b),C+=H):(k=s*Math.pow(2,H-1)*Math.pow(2,b),C=0));b>=8;c[h+J]=255&k,J+=ee,k/=256,b-=8);for(C=C<<b|k,F+=b;F>0;c[h+J]=255&C,J+=ee,C/=256,F-=8);c[h+J-ee]|=128*ve};function qr(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}qr.Varint=0,qr.Fixed64=1,qr.Bytes=2,qr.Fixed32=5;var rl,Gy=4294967296,PS=1/Gy,DS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function us(c){return c.type===qr.Bytes?c.readVarint()+c.pos:c.pos+1}function Fc(c,s,h){return h?4294967296*s+(c>>>0):4294967296*(s>>>0)+(c>>>0)}function LS(c,s,h){var m=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));h.realloc(m);for(var b=h.pos-1;b>=c;b--)h.buf[b+m]=h.buf[b]}function q4(c,s){for(var h=0;h<c.length;h++)s.writeVarint(c[h])}function j4(c,s){for(var h=0;h<c.length;h++)s.writeSVarint(c[h])}function W4(c,s){for(var h=0;h<c.length;h++)s.writeFloat(c[h])}function Z4(c,s){for(var h=0;h<c.length;h++)s.writeDouble(c[h])}function X4(c,s){for(var h=0;h<c.length;h++)s.writeBoolean(c[h])}function Y4(c,s){for(var h=0;h<c.length;h++)s.writeFixed32(c[h])}function K4(c,s){for(var h=0;h<c.length;h++)s.writeSFixed32(c[h])}function J4(c,s){for(var h=0;h<c.length;h++)s.writeFixed64(c[h])}function Q4(c,s){for(var h=0;h<c.length;h++)s.writeSFixed64(c[h])}function qm(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+16777216*c[s+3]}function Nc(c,s,h){c[h]=s,c[h+1]=s>>>8,c[h+2]=s>>>16,c[h+3]=s>>>24}function kS(c,s){return(c[s]|c[s+1]<<8|c[s+2]<<16)+(c[s+3]<<24)}function ez(c,s,h){c===1&&h.readMessage(tz,s)}function tz(c,s,h){if(c===3){const{id:m,bitmap:b,width:T,height:C,left:k,top:R,advance:F}=h.readMessage(rz,{});s.push({id:m,bitmap:new Ff({width:T+6,height:C+6},b),metrics:{width:T,height:C,left:k,top:R,advance:F}})}}function rz(c,s,h){c===1?s.id=h.readVarint():c===2?s.bitmap=h.readBytes():c===3?s.width=h.readVarint():c===4?s.height=h.readVarint():c===5?s.left=h.readSVarint():c===6?s.top=h.readSVarint():c===7&&(s.advance=h.readVarint())}function RS(c){let s=0,h=0;for(const C of c)s+=C.w*C.h,h=Math.max(h,C.w);c.sort((C,k)=>k.h-C.h);const m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),h),h:1/0}];let b=0,T=0;for(const C of c)for(let k=m.length-1;k>=0;k--){const R=m[k];if(!(C.w>R.w||C.h>R.h)){if(C.x=R.x,C.y=R.y,T=Math.max(T,C.y+C.h),b=Math.max(b,C.x+C.w),C.w===R.w&&C.h===R.h){const F=m.pop();k<m.length&&(m[k]=F)}else C.h===R.h?(R.x+=C.w,R.w-=C.w):C.w===R.w?(R.y+=C.h,R.h-=C.h):(m.push({x:R.x+C.w,y:R.y,w:R.w-C.w,h:C.h}),R.y+=C.h,R.h-=C.h);break}}return{w:b,h:T,fill:s/(b*T)||0}}qr.prototype={destroy:function(){this.buf=null},readFields:function(c,s,h){for(h=h||this.length;this.pos<h;){var m=this.readVarint(),b=m>>3,T=this.pos;this.type=7&m,c(b,s,this),this.pos===T&&this.skip(m)}return s},readMessage:function(c,s){return this.readFields(c,s,this.readVarint()+this.pos)},readFixed32:function(){var c=qm(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=kS(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=qm(this.buf,this.pos)+qm(this.buf,this.pos+4)*Gy;return this.pos+=8,c},readSFixed64:function(){var c=qm(this.buf,this.pos)+kS(this.buf,this.pos+4)*Gy;return this.pos+=8,c},readFloat:function(){var c=MS(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=MS(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var s,h,m=this.buf;return s=127&(h=m[this.pos++]),h<128?s:(s|=(127&(h=m[this.pos++]))<<7,h<128?s:(s|=(127&(h=m[this.pos++]))<<14,h<128?s:(s|=(127&(h=m[this.pos++]))<<21,h<128?s:function(b,T,C){var k,R,F=C.buf;if(k=(112&(R=F[C.pos++]))>>4,R<128||(k|=(127&(R=F[C.pos++]))<<3,R<128)||(k|=(127&(R=F[C.pos++]))<<10,R<128)||(k|=(127&(R=F[C.pos++]))<<17,R<128)||(k|=(127&(R=F[C.pos++]))<<24,R<128)||(k|=(1&(R=F[C.pos++]))<<31,R<128))return Fc(b,k,T);throw new Error("Expected varint not more than 10 bytes")}(s|=(15&(h=m[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,s=this.pos;return this.pos=c,c-s>=12&&DS?function(h,m,b){return DS.decode(h.subarray(m,b))}(this.buf,s,c):function(h,m,b){for(var T="",C=m;C<b;){var k,R,F,U=h[C],H=null,Y=U>239?4:U>223?3:U>191?2:1;if(C+Y>b)break;Y===1?U<128&&(H=U):Y===2?(192&(k=h[C+1]))==128&&(H=(31&U)<<6|63&k)<=127&&(H=null):Y===3?(R=h[C+2],(192&(k=h[C+1]))==128&&(192&R)==128&&((H=(15&U)<<12|(63&k)<<6|63&R)<=2047||H>=55296&&H<=57343)&&(H=null)):Y===4&&(R=h[C+2],F=h[C+3],(192&(k=h[C+1]))==128&&(192&R)==128&&(192&F)==128&&((H=(15&U)<<18|(63&k)<<12|(63&R)<<6|63&F)<=65535||H>=1114112)&&(H=null)),H===null?(H=65533,Y=1):H>65535&&(H-=65536,T+=String.fromCharCode(H>>>10&1023|55296),H=56320|1023&H),T+=String.fromCharCode(H),C+=Y}return T}(this.buf,s,c)},readBytes:function(){var c=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,c);return this.pos=c,s},readPackedVarint:function(c,s){if(this.type!==qr.Bytes)return c.push(this.readVarint(s));var h=us(this);for(c=c||[];this.pos<h;)c.push(this.readVarint(s));return c},readPackedSVarint:function(c){if(this.type!==qr.Bytes)return c.push(this.readSVarint());var s=us(this);for(c=c||[];this.pos<s;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==qr.Bytes)return c.push(this.readBoolean());var s=us(this);for(c=c||[];this.pos<s;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==qr.Bytes)return c.push(this.readFloat());var s=us(this);for(c=c||[];this.pos<s;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==qr.Bytes)return c.push(this.readDouble());var s=us(this);for(c=c||[];this.pos<s;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==qr.Bytes)return c.push(this.readFixed32());var s=us(this);for(c=c||[];this.pos<s;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==qr.Bytes)return c.push(this.readSFixed32());var s=us(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==qr.Bytes)return c.push(this.readFixed64());var s=us(this);for(c=c||[];this.pos<s;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==qr.Bytes)return c.push(this.readSFixed64());var s=us(this);for(c=c||[];this.pos<s;)c.push(this.readSFixed64());return c},skip:function(c){var s=7&c;if(s===qr.Varint)for(;this.buf[this.pos++]>127;);else if(s===qr.Bytes)this.pos=this.readVarint()+this.pos;else if(s===qr.Fixed32)this.pos+=4;else{if(s!==qr.Fixed64)throw new Error("Unimplemented type: "+s);this.pos+=8}},writeTag:function(c,s){this.writeVarint(c<<3|s)},realloc:function(c){for(var s=this.length||16;s<this.pos+c;)s*=2;if(s!==this.length){var h=new Uint8Array(s);h.set(this.buf),this.buf=h,this.length=s}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),Nc(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),Nc(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),Nc(this.buf,-1&c,this.pos),Nc(this.buf,Math.floor(c*PS),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),Nc(this.buf,-1&c,this.pos),Nc(this.buf,Math.floor(c*PS),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(s,h){var m,b;if(s>=0?(m=s%4294967296|0,b=s/4294967296|0):(b=~(-s/4294967296),4294967295^(m=~(-s%4294967296))?m=m+1|0:(m=0,b=b+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(T,C,k){k.buf[k.pos++]=127&T|128,T>>>=7,k.buf[k.pos++]=127&T|128,T>>>=7,k.buf[k.pos++]=127&T|128,T>>>=7,k.buf[k.pos++]=127&T|128,k.buf[k.pos]=127&(T>>>=7)}(m,0,h),function(T,C){var k=(7&T)<<4;C.buf[C.pos++]|=k|((T>>>=3)?128:0),T&&(C.buf[C.pos++]=127&T|((T>>>=7)?128:0),T&&(C.buf[C.pos++]=127&T|((T>>>=7)?128:0),T&&(C.buf[C.pos++]=127&T|((T>>>=7)?128:0),T&&(C.buf[C.pos++]=127&T|((T>>>=7)?128:0),T&&(C.buf[C.pos++]=127&T)))))}(b,h)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var s=this.pos;this.pos=function(m,b,T){for(var C,k,R=0;R<b.length;R++){if((C=b.charCodeAt(R))>55295&&C<57344){if(!k){C>56319||R+1===b.length?(m[T++]=239,m[T++]=191,m[T++]=189):k=C;continue}if(C<56320){m[T++]=239,m[T++]=191,m[T++]=189,k=C;continue}C=k-55296<<10|C-56320|65536,k=null}else k&&(m[T++]=239,m[T++]=191,m[T++]=189,k=null);C<128?m[T++]=C:(C<2048?m[T++]=C>>6|192:(C<65536?m[T++]=C>>12|224:(m[T++]=C>>18|240,m[T++]=C>>12&63|128),m[T++]=C>>6&63|128),m[T++]=63&C|128)}return T}(this.buf,c,this.pos);var h=this.pos-s;h>=128&&LS(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeFloat:function(c){this.realloc(4),IS(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),IS(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var s=c.length;this.writeVarint(s),this.realloc(s);for(var h=0;h<s;h++)this.buf[this.pos++]=c[h]},writeRawMessage:function(c,s){this.pos++;var h=this.pos;c(s,this);var m=this.pos-h;m>=128&&LS(h,m,this),this.pos=h-1,this.writeVarint(m),this.pos+=m},writeMessage:function(c,s,h){this.writeTag(c,qr.Bytes),this.writeRawMessage(s,h)},writePackedVarint:function(c,s){s.length&&this.writeMessage(c,q4,s)},writePackedSVarint:function(c,s){s.length&&this.writeMessage(c,j4,s)},writePackedBoolean:function(c,s){s.length&&this.writeMessage(c,X4,s)},writePackedFloat:function(c,s){s.length&&this.writeMessage(c,W4,s)},writePackedDouble:function(c,s){s.length&&this.writeMessage(c,Z4,s)},writePackedFixed32:function(c,s){s.length&&this.writeMessage(c,Y4,s)},writePackedSFixed32:function(c,s){s.length&&this.writeMessage(c,K4,s)},writePackedFixed64:function(c,s){s.length&&this.writeMessage(c,J4,s)},writePackedSFixed64:function(c,s){s.length&&this.writeMessage(c,Q4,s)},writeBytesField:function(c,s){this.writeTag(c,qr.Bytes),this.writeBytes(s)},writeFixed32Field:function(c,s){this.writeTag(c,qr.Fixed32),this.writeFixed32(s)},writeSFixed32Field:function(c,s){this.writeTag(c,qr.Fixed32),this.writeSFixed32(s)},writeFixed64Field:function(c,s){this.writeTag(c,qr.Fixed64),this.writeFixed64(s)},writeSFixed64Field:function(c,s){this.writeTag(c,qr.Fixed64),this.writeSFixed64(s)},writeVarintField:function(c,s){this.writeTag(c,qr.Varint),this.writeVarint(s)},writeSVarintField:function(c,s){this.writeTag(c,qr.Varint),this.writeSVarint(s)},writeStringField:function(c,s){this.writeTag(c,qr.Bytes),this.writeString(s)},writeFloatField:function(c,s){this.writeTag(c,qr.Fixed32),this.writeFloat(s)},writeDoubleField:function(c,s){this.writeTag(c,qr.Fixed64),this.writeDouble(s)},writeBooleanField:function(c,s){this.writeVarintField(c,!!s)}};class Hy{constructor(s,{pixelRatio:h,version:m,stretchX:b,stretchY:T,content:C}){this.paddedRect=s,this.pixelRatio=h,this.stretchX=b,this.stretchY=T,this.content=C,this.version=m}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class zS{constructor(s,h){const m={},b={};this.haveRenderCallbacks=[];const T=[];this.addImages(s,m,T),this.addImages(h,b,T);const{w:C,h:k}=RS(T),R=new pa({width:C||1,height:k||1});for(const F in s){const U=s[F],H=m[F].paddedRect;pa.copy(U.data,R,{x:0,y:0},{x:H.x+1,y:H.y+1},U.data)}for(const F in h){const U=h[F],H=b[F].paddedRect,Y=H.x+1,J=H.y+1,ee=U.data.width,ve=U.data.height;pa.copy(U.data,R,{x:0,y:0},{x:Y,y:J},U.data),pa.copy(U.data,R,{x:0,y:ve-1},{x:Y,y:J-1},{width:ee,height:1}),pa.copy(U.data,R,{x:0,y:0},{x:Y,y:J+ve},{width:ee,height:1}),pa.copy(U.data,R,{x:ee-1,y:0},{x:Y-1,y:J},{width:1,height:ve}),pa.copy(U.data,R,{x:0,y:0},{x:Y+ee,y:J},{width:1,height:ve})}this.image=R,this.iconPositions=m,this.patternPositions=b}addImages(s,h,m){for(const b in s){const T=s[b],C={x:0,y:0,w:T.data.width+2,h:T.data.height+2};m.push(C),h[b]=new Hy(C,T),T.hasRenderCallback&&this.haveRenderCallbacks.push(b)}}patchUpdatedImages(s,h){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const m in s.updatedImages)this.patchUpdatedImage(this.iconPositions[m],s.getImage(m),h),this.patchUpdatedImage(this.patternPositions[m],s.getImage(m),h)}patchUpdatedImage(s,h,m){if(!s||!h||s.version===h.version)return;s.version=h.version;const[b,T]=s.tl;m.update(h.data,void 0,{x:b,y:T})}}Tt("ImagePosition",Hy),Tt("ImageAtlas",zS),o.WritingMode=void 0,(rl=o.WritingMode||(o.WritingMode={}))[rl.none=0]="none",rl[rl.horizontal=1]="horizontal",rl[rl.vertical=2]="vertical",rl[rl.horizontalOnly=3]="horizontalOnly";const jm=-17;class jf{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(s,h){const m=new jf;return m.scale=s||1,m.fontStack=h,m}static forImage(s){const h=new jf;return h.imageName=s,h}}class Vc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,h){const m=new Vc;for(let b=0;b<s.sections.length;b++){const T=s.sections[b];T.image?m.addImageSection(T):m.addTextSection(T,h)}return m}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let h="";for(let m=0;m<s.length;m++){const b=s.charCodeAt(m+1)||null,T=s.charCodeAt(m-1)||null;h+=b&&Cm(b)&&!qf[s[m+1]]||T&&Cm(T)&&!qf[s[m-1]]||!qf[s[m]]?s[m]:qf[s[m]]}return h}(this.text)}trim(){let s=0;for(let m=0;m<this.text.length&&Zm[this.text.charCodeAt(m)];m++)s++;let h=this.text.length;for(let m=this.text.length-1;m>=0&&m>=s&&Zm[this.text.charCodeAt(m)];m--)h--;this.text=this.text.substring(s,h),this.sectionIndex=this.sectionIndex.slice(s,h)}substring(s,h){const m=new Vc;return m.text=this.text.substring(s,h),m.sectionIndex=this.sectionIndex.slice(s,h),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,h)=>Math.max(s,this.sections[h].scale),0)}addTextSection(s,h){this.text+=s.text,this.sections.push(jf.forText(s.scale,s.fontStack||h));const m=this.sections.length-1;for(let b=0;b<s.text.length;++b)this.sectionIndex.push(m)}addImageSection(s){const h=s.image?s.image.name:"";if(h.length===0)return void q("Can't add FormattedSection with an empty image.");const m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(jf.forImage(h)),this.sectionIndex.push(this.sections.length-1)):q("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Wm(c,s,h,m,b,T,C,k,R,F,U,H,Y,J,ee,ve){const pe=Vc.fromFeature(c,b);let Ie;H===o.WritingMode.vertical&&pe.verticalizePunctuation();const{processBidirectionalText:ze,processStyledBidirectionalText:Me}=Jn;if(ze&&pe.sections.length===1){Ie=[];const je=ze(pe.toString(),qy(pe,F,T,s,m,J,ee));for(const wt of je){const Mt=new Vc;Mt.text=wt,Mt.sections=pe.sections;for(let vt=0;vt<wt.length;vt++)Mt.sectionIndex.push(0);Ie.push(Mt)}}else if(Me){Ie=[];const je=Me(pe.text,pe.sectionIndex,qy(pe,F,T,s,m,J,ee));for(const wt of je){const Mt=new Vc;Mt.text=wt[0],Mt.sectionIndex=wt[1],Mt.sections=pe.sections,Ie.push(Mt)}}else Ie=function(je,wt){const Mt=[],vt=je.text;let ht=0;for(const ot of wt)Mt.push(je.substring(ht,ot)),ht=ot;return ht<vt.length&&Mt.push(je.substring(ht,vt.length)),Mt}(pe,qy(pe,F,T,s,m,J,ee));const Le=[],Ze={positionedLines:Le,text:pe.toString(),top:U[1],bottom:U[1],left:U[0],right:U[0],writingMode:H,iconsInText:!1,verticalizable:!1};return function(je,wt,Mt,vt,ht,ot,gt,pt,rt,Vt,kt,sr){let ei=0,ui=jm,ki=0,va=0;const rn=pt==="right"?1:pt==="left"?0:.5;let Ei=0;for(const Ci of ht){Ci.trim();const an=Ci.getMaxScale(),hn=(an-1)*Xi,Tn={positionedGlyphs:[],lineOffset:0};je.positionedLines[Ei]=Tn;const Fn=Tn.positionedGlyphs;let Nn=0;if(!Ci.length()){ui+=ot,++Ei;continue}for(let Hi=0;Hi<Ci.length();Hi++){const cr=Ci.getSection(Hi),ta=Ci.getSectionIndex(Hi),on=Ci.getCharCode(Hi);let fn=0,Da=null,ro=null,io=null,hs=Xi;const La=!(rt===o.WritingMode.horizontal||!kt&&!Ef(on)||kt&&(Zm[on]||(Gi=on,mt.Arabic(Gi)||mt["Arabic Supplement"](Gi)||mt["Arabic Extended-A"](Gi)||mt["Arabic Presentation Forms-A"](Gi)||mt["Arabic Presentation Forms-B"](Gi))));if(cr.imageName){const ga=vt[cr.imageName];if(!ga)continue;io=cr.imageName,je.iconsInText=je.iconsInText||!0,ro=ga.paddedRect;const Vn=ga.displaySize;cr.scale=cr.scale*Xi/sr,Da={width:Vn[0],height:Vn[1],left:1,top:-3,advance:La?Vn[1]:Vn[0]},fn=hn+(Xi-Vn[1]*cr.scale),hs=Da.advance;const fs=La?Vn[0]*cr.scale-Xi*an:Vn[1]*cr.scale-Xi*an;fs>0&&fs>Nn&&(Nn=fs)}else{const ga=Mt[cr.fontStack],Vn=ga&&ga[on];if(Vn&&Vn.rect)ro=Vn.rect,Da=Vn.metrics;else{const fs=wt[cr.fontStack],Xf=fs&&fs[on];if(!Xf)continue;Da=Xf.metrics}fn=(an-cr.scale)*Xi}La?(je.verticalizable=!0,Fn.push({glyph:on,imageName:io,x:ei,y:ui+fn,vertical:La,scale:cr.scale,fontStack:cr.fontStack,sectionIndex:ta,metrics:Da,rect:ro}),ei+=hs*cr.scale+Vt):(Fn.push({glyph:on,imageName:io,x:ei,y:ui+fn,vertical:La,scale:cr.scale,fontStack:cr.fontStack,sectionIndex:ta,metrics:Da,rect:ro}),ei+=Da.advance*cr.scale+Vt)}Fn.length!==0&&(ki=Math.max(ei-Vt,ki),az(Fn,0,Fn.length-1,rn,Nn)),ei=0;const hi=ot*an+Nn;Tn.lineOffset=Math.max(Nn,hn),ui+=hi,va=Math.max(hi,va),++Ei}var Gi;const nn=ui-jm,{horizontalAlign:cn,verticalAlign:Bn}=jy(gt);(function(Ci,an,hn,Tn,Fn,Nn,hi,Hi,cr){const ta=(an-hn)*Fn;let on=0;on=Nn!==hi?-Hi*Tn-jm:(-Tn*cr+.5)*hi;for(const fn of Ci)for(const Da of fn.positionedGlyphs)Da.x+=ta,Da.y+=on})(je.positionedLines,rn,cn,Bn,ki,va,ot,nn,ht.length),je.top+=-Bn*nn,je.bottom=je.top+nn,je.left+=-cn*ki,je.right=je.left+ki}(Ze,s,h,m,Ie,C,k,R,H,F,Y,ve),!function(je){for(const wt of je)if(wt.positionedGlyphs.length!==0)return!1;return!0}(Le)&&Ze}const Zm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},iz={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function OS(c,s,h,m,b,T){if(s.imageName){const C=m[s.imageName];return C?C.displaySize[0]*s.scale*Xi/T+b:0}{const C=h[s.fontStack],k=C&&C[c];return k?k.metrics.advance*s.scale+b:0}}function BS(c,s,h,m){const b=Math.pow(c-s,2);return m?c<s?b/2:2*b:b+Math.abs(h)*h}function nz(c,s,h){let m=0;return c===10&&(m-=1e4),h&&(m+=150),c!==40&&c!==65288||(m+=50),s!==41&&s!==65289||(m+=50),m}function FS(c,s,h,m,b,T){let C=null,k=BS(s,h,b,T);for(const R of m){const F=BS(s-R.x,h,b,T)+R.badness;F<=k&&(C=R,k=F)}return{index:c,x:s,priorBreak:C,badness:k}}function NS(c){return c?NS(c.priorBreak).concat(c.index):[]}function qy(c,s,h,m,b,T,C){if(T!=="point")return[];if(!c)return[];const k=[],R=function(Y,J,ee,ve,pe,Ie){let ze=0;for(let Me=0;Me<Y.length();Me++){const Le=Y.getSection(Me);ze+=OS(Y.getCharCode(Me),Le,ve,pe,J,Ie)}return ze/Math.max(1,Math.ceil(ze/ee))}(c,s,h,m,b,C),F=c.text.indexOf("")>=0;let U=0;for(let Y=0;Y<c.length();Y++){const J=c.getSection(Y),ee=c.getCharCode(Y);if(Zm[ee]||(U+=OS(ee,J,m,b,s,C)),Y<c.length()-1){const ve=!((H=ee)<11904||!(mt["Bopomofo Extended"](H)||mt.Bopomofo(H)||mt["CJK Compatibility Forms"](H)||mt["CJK Compatibility Ideographs"](H)||mt["CJK Compatibility"](H)||mt["CJK Radicals Supplement"](H)||mt["CJK Strokes"](H)||mt["CJK Symbols and Punctuation"](H)||mt["CJK Unified Ideographs Extension A"](H)||mt["CJK Unified Ideographs"](H)||mt["Enclosed CJK Letters and Months"](H)||mt["Halfwidth and Fullwidth Forms"](H)||mt.Hiragana(H)||mt["Ideographic Description Characters"](H)||mt["Kangxi Radicals"](H)||mt["Katakana Phonetic Extensions"](H)||mt.Katakana(H)||mt["Vertical Forms"](H)||mt["Yi Radicals"](H)||mt["Yi Syllables"](H)));(iz[ee]||ve||J.imageName)&&k.push(FS(Y+1,U,R,k,nz(ee,c.getCharCode(Y+1),ve&&F),!1))}}var H;return NS(FS(c.length(),U,R,k,0,!0))}function jy(c){let s=.5,h=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":h=1;break;case"top":case"top-right":case"top-left":h=0}return{horizontalAlign:s,verticalAlign:h}}function az(c,s,h,m,b){if(!m&&!b)return;const T=c[h],C=(c[h].x+T.metrics.advance*T.scale)*m;for(let k=s;k<=h;k++)c[k].x-=C,c[k].y+=b}function oz(c,s,h){const{horizontalAlign:m,verticalAlign:b}=jy(h),T=s[0]-c.displaySize[0]*m,C=s[1]-c.displaySize[1]*b;return{image:c,top:C,bottom:C+c.displaySize[1],left:T,right:T+c.displaySize[0]}}function VS(c,s,h,m,b,T){const C=c.image;let k;if(C.content){const pe=C.content,Ie=C.pixelRatio||1;k=[pe[0]/Ie,pe[1]/Ie,C.displaySize[0]-pe[2]/Ie,C.displaySize[1]-pe[3]/Ie]}const R=s.left*T,F=s.right*T;let U,H,Y,J;h==="width"||h==="both"?(J=b[0]+R-m[3],H=b[0]+F+m[1]):(J=b[0]+(R+F-C.displaySize[0])/2,H=J+C.displaySize[0]);const ee=s.top*T,ve=s.bottom*T;return h==="height"||h==="both"?(U=b[1]+ee-m[0],Y=b[1]+ve+m[2]):(U=b[1]+(ee+ve-C.displaySize[1])/2,Y=U+C.displaySize[1]),{image:C,top:U,right:H,bottom:Y,left:J,collisionPadding:k}}const cs=128;function $S(c,s){const{expression:h}=s;if(h.kind==="constant")return{kind:"constant",layoutSize:h.evaluate(new si(c+1))};if(h.kind==="source")return{kind:"source"};{const{zoomStops:m,interpolationType:b}=h;let T=0;for(;T<m.length&&m[T]<=c;)T++;T=Math.max(0,T-1);let C=T;for(;C<m.length&&m[C]<c+1;)C++;C=Math.min(m.length-1,C);const k=m[T],R=m[C];return h.kind==="composite"?{kind:"composite",minZoom:k,maxZoom:R,interpolationType:b}:{kind:"camera",minZoom:k,maxZoom:R,minSize:h.evaluate(new si(k)),maxSize:h.evaluate(new si(R)),interpolationType:b}}}class il extends we{constructor(s,h,m,b){super(s,h),this.angle=m,b!==void 0&&(this.segment=b)}clone(){return new il(this.x,this.y,this.angle,this.segment)}}function US(c,s,h,m,b){if(s.segment===void 0)return!0;let T=s,C=s.segment+1,k=0;for(;k>-h/2;){if(C--,C<0)return!1;k-=c[C].dist(T),T=c[C]}k+=c[C].dist(c[C+1]),C++;const R=[];let F=0;for(;k<h/2;){const U=c[C],H=c[C+1];if(!H)return!1;let Y=c[C-1].angleTo(U)-U.angleTo(H);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),R.push({distance:k,angleDelta:Y}),F+=Y;k-R[0].distance>m;)F-=R.shift().angleDelta;if(F>b)return!1;C++,k+=U.dist(H)}return!0}function GS(c){let s=0;for(let h=0;h<c.length-1;h++)s+=c[h].dist(c[h+1]);return s}function HS(c,s,h){return c?.6*s*h:0}function qS(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function sz(c,s,h,m,b,T){const C=HS(h,b,T),k=qS(h,m)*T;let R=0;const F=GS(c)/2;for(let U=0;U<c.length-1;U++){const H=c[U],Y=c[U+1],J=H.dist(Y);if(R+J>F){const ee=(F-R)/J,ve=ai(H.x,Y.x,ee),pe=ai(H.y,Y.y,ee),Ie=new il(ve,pe,Y.angleTo(H),U);return Ie._round(),!C||US(c,Ie,k,C,s)?Ie:void 0}R+=J}}function lz(c,s,h,m,b,T,C,k,R){const F=HS(m,T,C),U=qS(m,b),H=U*C,Y=c[0].x===0||c[0].x===R||c[0].y===0||c[0].y===R;return s-H<s/4&&(s=H+s/4),jS(c,Y?s/2*k%s:(U/2+2*T)*C*k%s,s,F,h,H,Y,!1,R)}function jS(c,s,h,m,b,T,C,k,R){const F=T/2,U=GS(c);let H=0,Y=s-h,J=[];for(let ee=0;ee<c.length-1;ee++){const ve=c[ee],pe=c[ee+1],Ie=ve.dist(pe),ze=pe.angleTo(ve);for(;Y+h<H+Ie;){Y+=h;const Me=(Y-H)/Ie,Le=ai(ve.x,pe.x,Me),Ze=ai(ve.y,pe.y,Me);if(Le>=0&&Le<R&&Ze>=0&&Ze<R&&Y-F>=0&&Y+F<=U){const je=new il(Le,Ze,ze,ee);je._round(),m&&!US(c,je,T,m,b)||J.push(je)}}H+=Ie}return k||J.length||C||(J=jS(c,H/2,h,m,b,T,C,!0,R)),J}function WS(c,s,h,m,b){const T=[];for(let C=0;C<c.length;C++){const k=c[C];let R;for(let F=0;F<k.length-1;F++){let U=k[F],H=k[F+1];U.x<s&&H.x<s||(U.x<s?U=new we(s,U.y+(s-U.x)/(H.x-U.x)*(H.y-U.y))._round():H.x<s&&(H=new we(s,U.y+(s-U.x)/(H.x-U.x)*(H.y-U.y))._round()),U.y<h&&H.y<h||(U.y<h?U=new we(U.x+(h-U.y)/(H.y-U.y)*(H.x-U.x),h)._round():H.y<h&&(H=new we(U.x+(h-U.y)/(H.y-U.y)*(H.x-U.x),h)._round()),U.x>=m&&H.x>=m||(U.x>=m?U=new we(m,U.y+(m-U.x)/(H.x-U.x)*(H.y-U.y))._round():H.x>=m&&(H=new we(m,U.y+(m-U.x)/(H.x-U.x)*(H.y-U.y))._round()),U.y>=b&&H.y>=b||(U.y>=b?U=new we(U.x+(b-U.y)/(H.y-U.y)*(H.x-U.x),b)._round():H.y>=b&&(H=new we(U.x+(b-U.y)/(H.y-U.y)*(H.x-U.x),b)._round()),R&&U.equals(R[R.length-1])||(R=[U],T.push(R)),R.push(H)))))}}return T}function ZS(c,s,h,m){const b=[],T=c.image,C=T.pixelRatio,k=T.paddedRect.w-2,R=T.paddedRect.h-2,F=c.right-c.left,U=c.bottom-c.top,H=T.stretchX||[[0,k]],Y=T.stretchY||[[0,R]],J=(ot,gt)=>ot+gt[1]-gt[0],ee=H.reduce(J,0),ve=Y.reduce(J,0),pe=k-ee,Ie=R-ve;let ze=0,Me=ee,Le=0,Ze=ve,je=0,wt=pe,Mt=0,vt=Ie;if(T.content&&m){const ot=T.content;ze=Xm(H,0,ot[0]),Le=Xm(Y,0,ot[1]),Me=Xm(H,ot[0],ot[2]),Ze=Xm(Y,ot[1],ot[3]),je=ot[0]-ze,Mt=ot[1]-Le,wt=ot[2]-ot[0]-Me,vt=ot[3]-ot[1]-Ze}const ht=(ot,gt,pt,rt)=>{const Vt=Ym(ot.stretch-ze,Me,F,c.left),kt=Km(ot.fixed-je,wt,ot.stretch,ee),sr=Ym(gt.stretch-Le,Ze,U,c.top),ei=Km(gt.fixed-Mt,vt,gt.stretch,ve),ui=Ym(pt.stretch-ze,Me,F,c.left),ki=Km(pt.fixed-je,wt,pt.stretch,ee),va=Ym(rt.stretch-Le,Ze,U,c.top),rn=Km(rt.fixed-Mt,vt,rt.stretch,ve),Ei=new we(Vt,sr),Gi=new we(ui,sr),nn=new we(ui,va),cn=new we(Vt,va),Bn=new we(kt/C,ei/C),Ci=new we(ki/C,rn/C),an=s*Math.PI/180;if(an){const Fn=Math.sin(an),Nn=Math.cos(an),hi=[Nn,-Fn,Fn,Nn];Ei._matMult(hi),Gi._matMult(hi),cn._matMult(hi),nn._matMult(hi)}const hn=ot.stretch+ot.fixed,Tn=gt.stretch+gt.fixed;return{tl:Ei,tr:Gi,bl:cn,br:nn,tex:{x:T.paddedRect.x+1+hn,y:T.paddedRect.y+1+Tn,w:pt.stretch+pt.fixed-hn,h:rt.stretch+rt.fixed-Tn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Bn,pixelOffsetBR:Ci,minFontScaleX:wt/C/F,minFontScaleY:vt/C/U,isSDF:h}};if(m&&(T.stretchX||T.stretchY)){const ot=XS(H,pe,ee),gt=XS(Y,Ie,ve);for(let pt=0;pt<ot.length-1;pt++){const rt=ot[pt],Vt=ot[pt+1];for(let kt=0;kt<gt.length-1;kt++)b.push(ht(rt,gt[kt],Vt,gt[kt+1]))}}else b.push(ht({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:k+1},{fixed:0,stretch:R+1}));return b}function Xm(c,s,h){let m=0;for(const b of c)m+=Math.max(s,Math.min(h,b[1]))-Math.max(s,Math.min(h,b[0]));return m}function XS(c,s,h){const m=[{fixed:-1,stretch:0}];for(const[b,T]of c){const C=m[m.length-1];m.push({fixed:b-C.stretch,stretch:C.stretch}),m.push({fixed:b-C.stretch,stretch:C.stretch+(T-b)})}return m.push({fixed:s+1,stretch:h}),m}function Ym(c,s,h,m){return c/s*h+m}function Km(c,s,h,m){return c-s*h/m}Tt("Anchor",il);class Jm{constructor(s,h,m,b,T,C,k,R,F,U){if(this.boxStartIndex=s.length,F){let H=C.top,Y=C.bottom;const J=C.collisionPadding;J&&(H-=J[1],Y+=J[3]);let ee=Y-H;ee>0&&(ee=Math.max(10,ee),this.circleDiameter=ee)}else{let H=C.top*k-R[0],Y=C.bottom*k+R[2],J=C.left*k-R[3],ee=C.right*k+R[1];const ve=C.collisionPadding;if(ve&&(J-=ve[0]*k,H-=ve[1]*k,ee+=ve[2]*k,Y+=ve[3]*k),U){const pe=new we(J,H),Ie=new we(ee,H),ze=new we(J,Y),Me=new we(ee,Y),Le=U*Math.PI/180;pe._rotate(Le),Ie._rotate(Le),ze._rotate(Le),Me._rotate(Le),J=Math.min(pe.x,Ie.x,ze.x,Me.x),ee=Math.max(pe.x,Ie.x,ze.x,Me.x),H=Math.min(pe.y,Ie.y,ze.y,Me.y),Y=Math.max(pe.y,Ie.y,ze.y,Me.y)}s.emplaceBack(h.x,h.y,J,H,ee,Y,m,b,T)}this.boxEndIndex=s.length}}class uz{constructor(s=[],h=cz){if(this.data=s,this.length=this.data.length,this.compare=h,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(s){this.data.push(s),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const s=this.data[0],h=this.data.pop();return this.length--,this.length>0&&(this.data[0]=h,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:h,compare:m}=this,b=h[s];for(;s>0;){const T=s-1>>1,C=h[T];if(m(b,C)>=0)break;h[s]=C,s=T}h[s]=b}_down(s){const{data:h,compare:m}=this,b=this.length>>1,T=h[s];for(;s<b;){let C=1+(s<<1),k=h[C];const R=C+1;if(R<this.length&&m(h[R],k)<0&&(C=R,k=h[R]),m(k,T)>=0)break;h[s]=k,s=C}h[s]=T}}function cz(c,s){return c<s?-1:c>s?1:0}function hz(c,s=1,h=!1){let m=1/0,b=1/0,T=-1/0,C=-1/0;const k=c[0];for(let J=0;J<k.length;J++){const ee=k[J];(!J||ee.x<m)&&(m=ee.x),(!J||ee.y<b)&&(b=ee.y),(!J||ee.x>T)&&(T=ee.x),(!J||ee.y>C)&&(C=ee.y)}const R=Math.min(T-m,C-b);let F=R/2;const U=new uz([],fz);if(R===0)return new we(m,b);for(let J=m;J<T;J+=R)for(let ee=b;ee<C;ee+=R)U.push(new $c(J+F,ee+F,F,c));let H=function(J){let ee=0,ve=0,pe=0;const Ie=J[0];for(let ze=0,Me=Ie.length,Le=Me-1;ze<Me;Le=ze++){const Ze=Ie[ze],je=Ie[Le],wt=Ze.x*je.y-je.x*Ze.y;ve+=(Ze.x+je.x)*wt,pe+=(Ze.y+je.y)*wt,ee+=3*wt}return new $c(ve/ee,pe/ee,0,J)}(c),Y=U.length;for(;U.length;){const J=U.pop();(J.d>H.d||!H.d)&&(H=J,h&&console.log("found best %d after %d probes",Math.round(1e4*J.d)/1e4,Y)),J.max-H.d<=s||(F=J.h/2,U.push(new $c(J.p.x-F,J.p.y-F,F,c)),U.push(new $c(J.p.x+F,J.p.y-F,F,c)),U.push(new $c(J.p.x-F,J.p.y+F,F,c)),U.push(new $c(J.p.x+F,J.p.y+F,F,c)),Y+=4)}return h&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${H.d}`)),H.p}function fz(c,s){return s.max-c.max}function $c(c,s,h,m){this.p=new we(c,s),this.h=h,this.d=function(b,T){let C=!1,k=1/0;for(let R=0;R<T.length;R++){const F=T[R];for(let U=0,H=F.length,Y=H-1;U<H;Y=U++){const J=F[U],ee=F[Y];J.y>b.y!=ee.y>b.y&&b.x<(ee.x-J.x)*(b.y-J.y)/(ee.y-J.y)+J.x&&(C=!C),k=Math.min(k,iS(b,J,ee))}}return(C?1:-1)*Math.sqrt(k)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}const Wy=Number.POSITIVE_INFINITY;function YS(c,s){return s[1]!==Wy?function(h,m,b){let T=0,C=0;switch(m=Math.abs(m),b=Math.abs(b),h){case"top-right":case"top-left":case"top":C=b-7;break;case"bottom-right":case"bottom-left":case"bottom":C=7-b}switch(h){case"top-right":case"bottom-right":case"right":T=-m;break;case"top-left":case"bottom-left":case"left":T=m}return[T,C]}(c,s[0],s[1]):function(h,m){let b=0,T=0;m<0&&(m=0);const C=m/Math.sqrt(2);switch(h){case"top-right":case"top-left":T=C-7;break;case"bottom-right":case"bottom-left":T=7-C;break;case"bottom":T=7-m;break;case"top":T=m-7}switch(h){case"top-right":case"bottom-right":b=-C;break;case"top-left":case"bottom-left":b=C;break;case"left":b=m;break;case"right":b=-m}return[b,T]}(c,s[0])}function Zy(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function dz(c,s,h,m,b,T,C,k,R,F,U){let H=T.textMaxSize.evaluate(s,{});H===void 0&&(H=C);const Y=c.layers[0].layout,J=Y.get("icon-offset").evaluate(s,{},U),ee=JS(h.horizontal),ve=C/24,pe=c.tilePixelRatio*ve,Ie=c.tilePixelRatio*H/24,ze=c.tilePixelRatio*k,Me=c.tilePixelRatio*Y.get("symbol-spacing"),Le=Y.get("text-padding")*c.tilePixelRatio,Ze=function(rt,Vt,kt,sr=1){const ei=rt.get("icon-padding").evaluate(Vt,{},kt),ui=ei&&ei.values;return[ui[0]*sr,ui[1]*sr,ui[2]*sr,ui[3]*sr]}(Y,s,U,c.tilePixelRatio),je=Y.get("text-max-angle")/180*Math.PI,wt=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",Mt=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",vt=Y.get("symbol-placement"),ht=Me/2,ot=Y.get("icon-text-fit");let gt;m&&ot!=="none"&&(c.allowVerticalPlacement&&h.vertical&&(gt=VS(m,h.vertical,ot,Y.get("icon-text-fit-padding"),J,ve)),ee&&(m=VS(m,ee,ot,Y.get("icon-text-fit-padding"),J,ve)));const pt=(rt,Vt)=>{Vt.x<0||Vt.x>=Li||Vt.y<0||Vt.y>=Li||function(kt,sr,ei,ui,ki,va,rn,Ei,Gi,nn,cn,Bn,Ci,an,hn,Tn,Fn,Nn,hi,Hi,cr,ta,on,fn,Da){const ro=kt.addToLineVertexArray(sr,ei);let io,hs,La,ga,Vn=0,fs=0,Xf=0,pT=0,n0=-1,a0=-1;const ds={};let mT=Ui.exports(""),o0=0,s0=0;if(Ei._unevaluatedLayout.getValue("text-radial-offset")===void 0?[o0,s0]=Ei.layout.get("text-offset").evaluate(cr,{},fn).map($n=>$n*Xi):(o0=Ei.layout.get("text-radial-offset").evaluate(cr,{},fn)*Xi,s0=Wy),kt.allowVerticalPlacement&&ui.vertical){const $n=Ei.layout.get("text-rotate").evaluate(cr,{},fn)+90;La=new Jm(Gi,sr,nn,cn,Bn,ui.vertical,Ci,an,hn,$n),rn&&(ga=new Jm(Gi,sr,nn,cn,Bn,rn,Fn,Nn,hn,$n))}if(ki){const $n=Ei.layout.get("icon-rotate").evaluate(cr,{}),Lo=Ei.layout.get("icon-text-fit")!=="none",Yf=ZS(ki,$n,on,Lo),Kf=rn?ZS(rn,$n,on,Lo):void 0;hs=new Jm(Gi,sr,nn,cn,Bn,ki,Fn,Nn,!1,$n),Vn=4*Yf.length;const _T=kt.iconSizeData;let fu=null;_T.kind==="source"?(fu=[cs*Ei.layout.get("icon-size").evaluate(cr,{})],fu[0]>nl&&q(`${kt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):_T.kind==="composite"&&(fu=[cs*ta.compositeIconSizes[0].evaluate(cr,{},fn),cs*ta.compositeIconSizes[1].evaluate(cr,{},fn)],(fu[0]>nl||fu[1]>nl)&&q(`${kt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),kt.addSymbols(kt.icon,Yf,fu,Hi,hi,cr,o.WritingMode.none,sr,ro.lineStartIndex,ro.lineLength,-1,fn),n0=kt.icon.placedSymbolArray.length-1,Kf&&(fs=4*Kf.length,kt.addSymbols(kt.icon,Kf,fu,Hi,hi,cr,o.WritingMode.vertical,sr,ro.lineStartIndex,ro.lineLength,-1,fn),a0=kt.icon.placedSymbolArray.length-1)}const vT=Object.keys(ui.horizontal);for(const $n of vT){const Lo=ui.horizontal[$n];if(!io){mT=Ui.exports(Lo.text);const Kf=Ei.layout.get("text-rotate").evaluate(cr,{},fn);io=new Jm(Gi,sr,nn,cn,Bn,Lo,Ci,an,hn,Kf)}const Yf=Lo.positionedLines.length===1;if(Xf+=KS(kt,sr,Lo,va,Ei,hn,cr,Tn,ro,ui.vertical?o.WritingMode.horizontal:o.WritingMode.horizontalOnly,Yf?vT:[$n],ds,n0,ta,fn),Yf)break}ui.vertical&&(pT+=KS(kt,sr,ui.vertical,va,Ei,hn,cr,Tn,ro,o.WritingMode.vertical,["vertical"],ds,a0,ta,fn));const Cz=io?io.boxStartIndex:kt.collisionBoxArray.length,Az=io?io.boxEndIndex:kt.collisionBoxArray.length,Mz=La?La.boxStartIndex:kt.collisionBoxArray.length,Iz=La?La.boxEndIndex:kt.collisionBoxArray.length,Pz=hs?hs.boxStartIndex:kt.collisionBoxArray.length,Dz=hs?hs.boxEndIndex:kt.collisionBoxArray.length,Lz=ga?ga.boxStartIndex:kt.collisionBoxArray.length,kz=ga?ga.boxEndIndex:kt.collisionBoxArray.length;let no=-1;const iv=($n,Lo)=>$n&&$n.circleDiameter?Math.max($n.circleDiameter,Lo):Lo;no=iv(io,no),no=iv(La,no),no=iv(hs,no),no=iv(ga,no);const gT=no>-1?1:0;gT&&(no*=Da/Xi),kt.glyphOffsetArray.length>=Uc.MAX_GLYPHS&&q("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),cr.sortKey!==void 0&&kt.addToSortKeyRanges(kt.symbolInstances.length,cr.sortKey),kt.symbolInstances.emplaceBack(sr.x,sr.y,ds.right>=0?ds.right:-1,ds.center>=0?ds.center:-1,ds.left>=0?ds.left:-1,ds.vertical||-1,n0,a0,mT,Cz,Az,Mz,Iz,Pz,Dz,Lz,kz,nn,Xf,pT,Vn,fs,gT,0,Ci,o0,s0,no)}(c,Vt,rt,h,m,b,gt,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,pe,[Le,Le,Le,Le],wt,R,ze,Ze,Mt,J,s,T,F,U,C)};if(vt==="line")for(const rt of WS(s.geometry,0,0,Li,Li)){const Vt=lz(rt,Me,je,h.vertical||ee,m,24,Ie,c.overscaling,Li);for(const kt of Vt){const sr=ee;sr&&pz(c,sr.text,ht,kt)||pt(rt,kt)}}else if(vt==="line-center"){for(const rt of s.geometry)if(rt.length>1){const Vt=sz(rt,je,h.vertical||ee,m,24,Ie);Vt&&pt(rt,Vt)}}else if(s.type==="Polygon")for(const rt of zy(s.geometry,0)){const Vt=hz(rt,16);pt(rt[0],new il(Vt.x,Vt.y,0))}else if(s.type==="LineString")for(const rt of s.geometry)pt(rt,new il(rt[0].x,rt[0].y,0));else if(s.type==="Point")for(const rt of s.geometry)for(const Vt of rt)pt([Vt],new il(Vt.x,Vt.y,0))}const nl=32640;function KS(c,s,h,m,b,T,C,k,R,F,U,H,Y,J,ee){const ve=function(ze,Me,Le,Ze,je,wt,Mt,vt){const ht=Ze.layout.get("text-rotate").evaluate(wt,{})*Math.PI/180,ot=[];for(const gt of Me.positionedLines)for(const pt of gt.positionedGlyphs){if(!pt.rect)continue;const rt=pt.rect||{};let Vt=4,kt=!0,sr=1,ei=0;const ui=(je||vt)&&pt.vertical,ki=pt.metrics.advance*pt.scale/2;if(vt&&Me.verticalizable){const hi=(pt.scale-1)*Xi,Hi=(Xi-pt.metrics.width*pt.scale)/2;ei=gt.lineOffset/2-(pt.imageName?-Hi:hi)}if(pt.imageName){const hi=Mt[pt.imageName];kt=hi.sdf,sr=hi.pixelRatio,Vt=1/sr}const va=je?[pt.x+ki,pt.y]:[0,0];let rn=je?[0,0]:[pt.x+ki+Le[0],pt.y+Le[1]-ei],Ei=[0,0];ui&&(Ei=rn,rn=[0,0]);const Gi=(pt.metrics.left-Vt)*pt.scale-ki+rn[0],nn=(-pt.metrics.top-Vt)*pt.scale+rn[1],cn=Gi+rt.w*pt.scale/sr,Bn=nn+rt.h*pt.scale/sr,Ci=new we(Gi,nn),an=new we(cn,nn),hn=new we(Gi,Bn),Tn=new we(cn,Bn);if(ui){const hi=new we(-ki,ki-jm),Hi=-Math.PI/2,cr=12-ki,ta=new we(22-cr,-(pt.imageName?cr:0)),on=new we(...Ei);Ci._rotateAround(Hi,hi)._add(ta)._add(on),an._rotateAround(Hi,hi)._add(ta)._add(on),hn._rotateAround(Hi,hi)._add(ta)._add(on),Tn._rotateAround(Hi,hi)._add(ta)._add(on)}if(ht){const hi=Math.sin(ht),Hi=Math.cos(ht),cr=[Hi,-hi,hi,Hi];Ci._matMult(cr),an._matMult(cr),hn._matMult(cr),Tn._matMult(cr)}const Fn=new we(0,0),Nn=new we(0,0);ot.push({tl:Ci,tr:an,bl:hn,br:Tn,tex:rt,writingMode:Me.writingMode,glyphOffset:va,sectionIndex:pt.sectionIndex,isSDF:kt,pixelOffsetTL:Fn,pixelOffsetBR:Nn,minFontScaleX:0,minFontScaleY:0})}return ot}(0,h,k,b,T,C,m,c.allowVerticalPlacement),pe=c.textSizeData;let Ie=null;pe.kind==="source"?(Ie=[cs*b.layout.get("text-size").evaluate(C,{})],Ie[0]>nl&&q(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):pe.kind==="composite"&&(Ie=[cs*J.compositeTextSizes[0].evaluate(C,{},ee),cs*J.compositeTextSizes[1].evaluate(C,{},ee)],(Ie[0]>nl||Ie[1]>nl)&&q(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,ve,Ie,k,T,C,F,s,R.lineStartIndex,R.lineLength,Y,ee);for(const ze of U)H[ze]=c.text.placedSymbolArray.length-1;return 4*ve.length}function JS(c){for(const s in c)return c[s];return null}function pz(c,s,h,m){const b=c.compareText;if(s in b){const T=b[s];for(let C=T.length-1;C>=0;C--)if(m.dist(T[C])<h)return!0}else b[s]=[];return b[s].push(m),!1}const mz=tl.VectorTileFeature.types,vz=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Qm(c,s,h,m,b,T,C,k,R,F,U,H,Y){const J=k?Math.min(nl,Math.round(k[0])):0,ee=k?Math.min(nl,Math.round(k[1])):0;c.emplaceBack(s,h,Math.round(32*m),Math.round(32*b),T,C,(J<<1)+(R?1:0),ee,16*F,16*U,256*H,256*Y)}function Xy(c,s,h){c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h),c.emplaceBack(s.x,s.y,h)}function gz(c){for(const s of c.sections)if(Mm(s.text))return!0;return!1}class Yy{constructor(s){this.layoutVertexArray=new Ia,this.indexArray=new bn,this.programConfigurations=s,this.segments=new ur,this.dynamicLayoutVertexArray=new da,this.opacityVertexArray=new Pa,this.placedSymbolArray=new Je}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,h,m,b){this.isEmpty()||(m&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,V4.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,h),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,$4.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,vz,!0),this.opacityVertexBuffer.itemSize=1),(m||b)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Tt("SymbolBuffers",Yy);class Ky{constructor(s,h,m){this.layoutVertexArray=new s,this.layoutAttributes=h,this.indexArray=new m,this.segments=new ur,this.collisionVertexArray=new Qn}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,U4.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Tt("CollisionBuffers",Ky);class Uc{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(C=>C.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Iy([]),this.placementViewportMatrix=Iy([]);const h=this.layers[0]._unevaluatedLayout._values;this.textSizeData=$S(this.zoom,h["text-size"]),this.iconSizeData=$S(this.zoom,h["icon-size"]);const m=this.layers[0].layout,b=m.get("symbol-sort-key"),T=m.get("symbol-z-order");this.canOverlap=Qy(m,"text-overlap","text-allow-overlap")!=="never"||Qy(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=T!=="viewport-y"&&!b.isConstant(),this.sortFeaturesByY=(T==="viewport-y"||T==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(C=>o.WritingMode[C])),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.sourceID=s.sourceID}createArrays(){this.text=new Yy(new su(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new Yy(new su(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new ct,this.lineVertexArray=new bt,this.symbolInstances=new yt}calculateGlyphDependencies(s,h,m,b,T){for(let C=0;C<s.length;C++)if(h[s.charCodeAt(C)]=!0,(m||b)&&T){const k=qf[s.charAt(C)];k&&(h[k.charCodeAt(0)]=!0)}}populate(s,h,m){const b=this.layers[0],T=b.layout,C=T.get("text-font"),k=T.get("text-field"),R=T.get("icon-image"),F=(k.value.kind!=="constant"||k.value.value instanceof xe&&!k.value.value.isEmpty()||k.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),U=R.value.kind!=="constant"||!!R.value.value||Object.keys(R.parameters).length>0,H=T.get("symbol-sort-key");if(this.features=[],!F&&!U)return;const Y=h.iconDependencies,J=h.glyphDependencies,ee=h.availableImages,ve=new si(this.zoom);for(const{feature:pe,id:Ie,index:ze,sourceLayerIndex:Me}of s){const Le=b._featureFilter.needGeometry,Ze=uu(pe,Le);if(!b._featureFilter.filter(ve,Ze,m))continue;let je,wt;if(Le||(Ze.geometry=lu(pe)),F){const vt=b.getValueAndResolveTokens("text-field",Ze,m,ee),ht=xe.factory(vt);gz(ht)&&(this.hasRTLText=!0),(!this.hasRTLText||nu()==="unavailable"||this.hasRTLText&&Jn.isParsed())&&(je=H4(ht,b,Ze))}if(U){const vt=b.getValueAndResolveTokens("icon-image",Ze,m,ee);wt=vt instanceof Te?vt:Te.fromString(vt)}if(!je&&!wt)continue;const Mt=this.sortFeaturesByKey?H.evaluate(Ze,{},m):void 0;if(this.features.push({id:Ie,text:je,icon:wt,index:ze,sourceLayerIndex:Me,geometry:Ze.geometry,properties:pe.properties,type:mz[pe.type],sortKey:Mt}),wt&&(Y[wt.name]=!0),je){const vt=C.evaluate(Ze,{},m).join(","),ht=T.get("text-rotation-alignment")!=="viewport"&&T.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.WritingMode.vertical)>=0;for(const ot of je.sections)if(ot.image)Y[ot.image.name]=!0;else{const gt=Pc(je.toString()),pt=ot.fontStack||vt,rt=J[pt]=J[pt]||{};this.calculateGlyphDependencies(ot.text,rt,ht,this.allowVerticalPlacement,gt)}}}T.get("symbol-placement")==="line"&&(this.features=function(pe){const Ie={},ze={},Me=[];let Le=0;function Ze(vt){Me.push(pe[vt]),Le++}function je(vt,ht,ot){const gt=ze[vt];return delete ze[vt],ze[ht]=gt,Me[gt].geometry[0].pop(),Me[gt].geometry[0]=Me[gt].geometry[0].concat(ot[0]),gt}function wt(vt,ht,ot){const gt=Ie[ht];return delete Ie[ht],Ie[vt]=gt,Me[gt].geometry[0].shift(),Me[gt].geometry[0]=ot[0].concat(Me[gt].geometry[0]),gt}function Mt(vt,ht,ot){const gt=ot?ht[0][ht[0].length-1]:ht[0][0];return`${vt}:${gt.x}:${gt.y}`}for(let vt=0;vt<pe.length;vt++){const ht=pe[vt],ot=ht.geometry,gt=ht.text?ht.text.toString():null;if(!gt){Ze(vt);continue}const pt=Mt(gt,ot),rt=Mt(gt,ot,!0);if(pt in ze&&rt in Ie&&ze[pt]!==Ie[rt]){const Vt=wt(pt,rt,ot),kt=je(pt,rt,Me[Vt].geometry);delete Ie[pt],delete ze[rt],ze[Mt(gt,Me[kt].geometry,!0)]=kt,Me[Vt].geometry=null}else pt in ze?je(pt,rt,ot):rt in Ie?wt(pt,rt,ot):(Ze(vt),Ie[pt]=Le-1,ze[rt]=Le-1)}return Me.filter(vt=>vt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((pe,Ie)=>pe.sortKey-Ie.sortKey)}update(s,h,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,h,this.layers,m),this.icon.programConfigurations.updatePaintArrays(s,h,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,h){const m=this.lineVertexArray.length;if(s.segment!==void 0){let b=s.dist(h[s.segment+1]),T=s.dist(h[s.segment]);const C={};for(let k=s.segment+1;k<h.length;k++)C[k]={x:h[k].x,y:h[k].y,tileUnitDistanceFromAnchor:b},k<h.length-1&&(b+=h[k+1].dist(h[k]));for(let k=s.segment||0;k>=0;k--)C[k]={x:h[k].x,y:h[k].y,tileUnitDistanceFromAnchor:T},k>0&&(T+=h[k-1].dist(h[k]));for(let k=0;k<h.length;k++){const R=C[k];this.lineVertexArray.emplaceBack(R.x,R.y,R.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(s,h,m,b,T,C,k,R,F,U,H,Y){const J=s.indexArray,ee=s.layoutVertexArray,ve=s.segments.prepareSegment(4*h.length,ee,J,this.canOverlap?C.sortKey:void 0),pe=this.glyphOffsetArray.length,Ie=ve.vertexLength,ze=this.allowVerticalPlacement&&k===o.WritingMode.vertical?Math.PI/2:0,Me=C.text&&C.text.sections;for(let Le=0;Le<h.length;Le++){const{tl:Ze,tr:je,bl:wt,br:Mt,tex:vt,pixelOffsetTL:ht,pixelOffsetBR:ot,minFontScaleX:gt,minFontScaleY:pt,glyphOffset:rt,isSDF:Vt,sectionIndex:kt}=h[Le],sr=ve.vertexLength,ei=rt[1];Qm(ee,R.x,R.y,Ze.x,ei+Ze.y,vt.x,vt.y,m,Vt,ht.x,ht.y,gt,pt),Qm(ee,R.x,R.y,je.x,ei+je.y,vt.x+vt.w,vt.y,m,Vt,ot.x,ht.y,gt,pt),Qm(ee,R.x,R.y,wt.x,ei+wt.y,vt.x,vt.y+vt.h,m,Vt,ht.x,ot.y,gt,pt),Qm(ee,R.x,R.y,Mt.x,ei+Mt.y,vt.x+vt.w,vt.y+vt.h,m,Vt,ot.x,ot.y,gt,pt),Xy(s.dynamicLayoutVertexArray,R,ze),J.emplaceBack(sr,sr+1,sr+2),J.emplaceBack(sr+1,sr+2,sr+3),ve.vertexLength+=4,ve.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(rt[0]),Le!==h.length-1&&kt===h[Le+1].sectionIndex||s.programConfigurations.populatePaintArrays(ee.length,C,C.index,{},Y,Me&&Me[kt])}s.placedSymbolArray.emplaceBack(R.x,R.y,pe,this.glyphOffsetArray.length-pe,Ie,F,U,R.segment,m?m[0]:0,m?m[1]:0,b[0],b[1],k,0,!1,0,H)}_addCollisionDebugVertex(s,h,m,b,T,C){return h.emplaceBack(0,0),s.emplaceBack(m.x,m.y,b,T,Math.round(C.x),Math.round(C.y))}addCollisionDebugVertices(s,h,m,b,T,C,k){const R=T.segments.prepareSegment(4,T.layoutVertexArray,T.indexArray),F=R.vertexLength,U=T.layoutVertexArray,H=T.collisionVertexArray,Y=k.anchorX,J=k.anchorY;this._addCollisionDebugVertex(U,H,C,Y,J,new we(s,h)),this._addCollisionDebugVertex(U,H,C,Y,J,new we(m,h)),this._addCollisionDebugVertex(U,H,C,Y,J,new we(m,b)),this._addCollisionDebugVertex(U,H,C,Y,J,new we(s,b)),R.vertexLength+=4;const ee=T.indexArray;ee.emplaceBack(F,F+1),ee.emplaceBack(F+1,F+2),ee.emplaceBack(F+2,F+3),ee.emplaceBack(F+3,F),R.primitiveLength+=4}addDebugCollisionBoxes(s,h,m,b){for(let T=s;T<h;T++){const C=this.collisionBoxArray.get(T);this.addCollisionDebugVertices(C.x1,C.y1,C.x2,C.y2,b?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Ky(Po,AS.members,eo),this.iconCollisionBox=new Ky(Po,AS.members,eo);for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.addDebugCollisionBoxes(h.textBoxStartIndex,h.textBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h,!0),this.addDebugCollisionBoxes(h.iconBoxStartIndex,h.iconBoxEndIndex,h,!1),this.addDebugCollisionBoxes(h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex,h,!1)}}_deserializeCollisionBoxesForSymbol(s,h,m,b,T,C,k,R,F){const U={};for(let H=h;H<m;H++){const Y=s.get(H);U.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},U.textFeatureIndex=Y.featureIndex;break}for(let H=b;H<T;H++){const Y=s.get(H);U.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},U.verticalTextFeatureIndex=Y.featureIndex;break}for(let H=C;H<k;H++){const Y=s.get(H);U.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},U.iconFeatureIndex=Y.featureIndex;break}for(let H=R;H<F;H++){const Y=s.get(H);U.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},U.verticalIconFeatureIndex=Y.featureIndex;break}return U}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let h=0;h<this.symbolInstances.length;h++){const m=this.symbolInstances.get(h);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,h){const m=s.placedSymbolArray.get(h),b=m.vertexStartIndex+4*m.numGlyphs;for(let T=m.vertexStartIndex;T<b;T+=4)s.indexArray.emplaceBack(T,T+1,T+2),s.indexArray.emplaceBack(T+1,T+2,T+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const h=Math.sin(s),m=Math.cos(s),b=[],T=[],C=[];for(let k=0;k<this.symbolInstances.length;++k){C.push(k);const R=this.symbolInstances.get(k);b.push(0|Math.round(h*R.anchorX+m*R.anchorY)),T.push(R.featureIndex)}return C.sort((k,R)=>b[k]-b[R]||T[R]-T[k]),C}addToSortKeyRanges(s,h){const m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===h?m.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:h,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const h of this.symbolInstanceIndexes){const m=this.symbolInstances.get(h);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((b,T,C)=>{b>=0&&C.indexOf(b)===T&&this.addIndicesForPlacedSymbol(this.text,b)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Tt("SymbolBucket",Uc,{omit:["layers","collisionBoxArray","features","compareText"]}),Uc.MAX_GLYPHS=65535,Uc.addDynamicAttributes=Xy;const _z=new Zi({"symbol-placement":new Dt(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new Dt(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Dt(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Gt(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Dt(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Dt(ke.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Dt(ke.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Dt(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new Dt(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Dt(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new Gt(ke.layout_symbol["icon-size"]),"icon-text-fit":new Dt(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Dt(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new Gt(ke.layout_symbol["icon-image"]),"icon-rotate":new Gt(ke.layout_symbol["icon-rotate"]),"icon-padding":new Gt(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new Dt(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new Gt(ke.layout_symbol["icon-offset"]),"icon-anchor":new Gt(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Dt(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Dt(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Dt(ke.layout_symbol["text-rotation-alignment"]),"text-field":new Gt(ke.layout_symbol["text-field"]),"text-font":new Gt(ke.layout_symbol["text-font"]),"text-size":new Gt(ke.layout_symbol["text-size"]),"text-max-width":new Gt(ke.layout_symbol["text-max-width"]),"text-line-height":new Dt(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new Gt(ke.layout_symbol["text-letter-spacing"]),"text-justify":new Gt(ke.layout_symbol["text-justify"]),"text-radial-offset":new Gt(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Dt(ke.layout_symbol["text-variable-anchor"]),"text-anchor":new Gt(ke.layout_symbol["text-anchor"]),"text-max-angle":new Dt(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new Dt(ke.layout_symbol["text-writing-mode"]),"text-rotate":new Gt(ke.layout_symbol["text-rotate"]),"text-padding":new Dt(ke.layout_symbol["text-padding"]),"text-keep-upright":new Dt(ke.layout_symbol["text-keep-upright"]),"text-transform":new Gt(ke.layout_symbol["text-transform"]),"text-offset":new Gt(ke.layout_symbol["text-offset"]),"text-allow-overlap":new Dt(ke.layout_symbol["text-allow-overlap"]),"text-overlap":new Dt(ke.layout_symbol["text-overlap"]),"text-ignore-placement":new Dt(ke.layout_symbol["text-ignore-placement"]),"text-optional":new Dt(ke.layout_symbol["text-optional"])});var Jy={paint:new Zi({"icon-opacity":new Gt(ke.paint_symbol["icon-opacity"]),"icon-color":new Gt(ke.paint_symbol["icon-color"]),"icon-halo-color":new Gt(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new Gt(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Gt(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new Dt(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new Dt(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new Gt(ke.paint_symbol["text-opacity"]),"text-color":new Gt(ke.paint_symbol["text-color"],{runtimeType:Wi,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Gt(ke.paint_symbol["text-halo-color"]),"text-halo-width":new Gt(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new Gt(ke.paint_symbol["text-halo-blur"]),"text-translate":new Dt(ke.paint_symbol["text-translate"]),"text-translate-anchor":new Dt(ke.paint_symbol["text-translate-anchor"])}),layout:_z};class QS{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:Pi,this.defaultValue=s}evaluate(s){if(s.formattedSection){const h=this.defaultValue.property.overrides;if(h&&h.hasOverride(s.formattedSection))return h.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Tt("FormatSectionOverride",QS,{omit:["defaultValue"]});class ev extends Ma{constructor(s){super(s,Jy)}recalculate(s,h){if(super.recalculate(s,h),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const m=this.layout.get("text-writing-mode");if(m){const b=[];for(const T of m)b.indexOf(T)<0&&b.push(T);this.layout._values["text-writing-mode"]=b}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,h,m,b){const T=this.layout.get(s).evaluate(h,{},m,b),C=this._unevaluatedLayout._values[s];return C.isDataDriven()||ql(C.value)||!T?T:function(k,R){return R.replace(/{([^{}]+)}/g,(F,U)=>U in k?String(k[U]):"")}(h.properties,T)}createBucket(s){return new Uc(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of Jy.paint.overridableProperties){if(!ev.hasPaintOverride(this.layout,s))continue;const h=this.paint.get(s),m=new QS(h),b=new Tc(m,h.property.specification);let T=null;T=h.value.kind==="constant"||h.value.kind==="source"?new Wl("source",b):new yf("composite",b,h.value.zoomStops),this.paint._values[s]=new Aa(h.property,T,h.parameters)}}_handleOverridablePaintPropertyUpdate(s,h,m){return!(!this.layout||h.isDataDriven()||m.isDataDriven())&&ev.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,h){const m=s.get("text-field"),b=Jy.paint.properties[h];let T=!1;const C=k=>{for(const R of k)if(b.overrides&&b.overrides.hasOverride(R))return void(T=!0)};if(m.value.kind==="constant"&&m.value.value instanceof xe)C(m.value.value.sections);else if(m.value.kind==="source"){const k=F=>{T||(F instanceof Pt&&Be(F.value)===Fi?C(F.value.sections):F instanceof wc?C(F.sections):F.eachChild(k))},R=m.value;R._styleExpression&&k(R._styleExpression.expression)}return T}}function Qy(c,s,h){let m="never";const b=c.get(s);return b?m=b:c.get(h)&&(m="always"),m}var yz={paint:new Zi({"background-color":new Dt(ke.paint_background["background-color"]),"background-pattern":new Df(ke.paint_background["background-pattern"]),"background-opacity":new Dt(ke.paint_background["background-opacity"])})},xz={paint:new Zi({"raster-opacity":new Dt(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new Dt(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Dt(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Dt(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new Dt(ke.paint_raster["raster-saturation"]),"raster-contrast":new Dt(ke.paint_raster["raster-contrast"]),"raster-resampling":new Dt(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new Dt(ke.paint_raster["raster-fade-duration"])})};class bz extends Ma{constructor(s){super(s,{}),this.onAdd=h=>{this.implementation.onAdd&&this.implementation.onAdd(h,h.painter.context.gl)},this.onRemove=h=>{this.implementation.onRemove&&this.implementation.onRemove(h,h.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const wz={circle:class extends Ma{constructor(c){super(c,QR)}createBucket(c){return new Cy(c)}queryRadius(c){const s=c;return Of("circle-radius",this,s)+Of("circle-stroke-width",this,s)+Bm(this.paint.get("circle-translate"))}queryIntersectsFeature(c,s,h,m,b,T,C,k){const R=Fm(c,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),T.angle,C),F=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),U=this.paint.get("circle-pitch-alignment")==="map",H=U?R:function(J,ee){return J.map(ve=>cS(ve,ee))}(R,k),Y=U?F*C:F;for(const J of m)for(const ee of J){const ve=U?ee:cS(ee,k);let pe=Y;const Ie=Nm([],[ee.x,ee.y,0,1],k);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?pe*=Ie[3]/T.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(pe*=T.cameraToCenterDistance/Ie[3]),ZR(H,ve,pe))return!0}return!1}},heatmap:class extends Ma{constructor(c){super(c,t4),this._updateColorRamp()}createBucket(c){return new hS(c)}_handleSpecialPaintPropertyUpdate(c){c==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=dS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Ma{constructor(c){super(c,r4)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Ma{constructor(c){super(c,_4)}recalculate(c,s){super.recalculate(c,s);const h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(c){return new Fy(c)}queryRadius(){return Bm(this.paint.get("fill-translate"))}queryIntersectsFeature(c,s,h,m,b,T,C){return rS(Fm(c,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),T.angle,C),m)}isTileClipped(){return!0}},"fill-extrusion":class extends Ma{constructor(c){super(c,L4)}createBucket(c){return new Vy(c)}queryRadius(){return Bm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(c,s,h,m,b,T,C,k){const R=Fm(c,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),T.angle,C),F=this.paint.get("fill-extrusion-height").evaluate(s,h),U=this.paint.get("fill-extrusion-base").evaluate(s,h),H=function(J,ee,ve,pe){const Ie=[];for(const ze of J){const Me=[ze.x,ze.y,0,1];Nm(Me,Me,ee),Ie.push(new we(Me[0]/Me[3],Me[1]/Me[3]))}return Ie}(R,k),Y=function(J,ee,ve,pe){const Ie=[],ze=[],Me=pe[8]*ee,Le=pe[9]*ee,Ze=pe[10]*ee,je=pe[11]*ee,wt=pe[8]*ve,Mt=pe[9]*ve,vt=pe[10]*ve,ht=pe[11]*ve;for(const ot of J){const gt=[],pt=[];for(const rt of ot){const Vt=rt.x,kt=rt.y,sr=pe[0]*Vt+pe[4]*kt+pe[12],ei=pe[1]*Vt+pe[5]*kt+pe[13],ui=pe[2]*Vt+pe[6]*kt+pe[14],ki=pe[3]*Vt+pe[7]*kt+pe[15],va=ui+Ze,rn=ki+je,Ei=sr+wt,Gi=ei+Mt,nn=ui+vt,cn=ki+ht,Bn=new we((sr+Me)/rn,(ei+Le)/rn);Bn.z=va/rn,gt.push(Bn);const Ci=new we(Ei/cn,Gi/cn);Ci.z=nn/cn,pt.push(Ci)}Ie.push(gt),ze.push(pt)}return[Ie,ze]}(m,U,F,k);return function(J,ee,ve){let pe=1/0;rS(ve,ee)&&(pe=wS(ve,ee[0]));for(let Ie=0;Ie<ee.length;Ie++){const ze=ee[Ie],Me=J[Ie];for(let Le=0;Le<ze.length-1;Le++){const Ze=ze[Le],je=[Ze,ze[Le+1],Me[Le+1],Me[Le],Ze];tS(ve,je)&&(pe=Math.min(pe,wS(ve,je)))}}return pe!==1/0&&pe}(Y[0],Y[1],H)}},line:class extends Ma{constructor(c){super(c,TS),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(c){c==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof Vl,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(c,s){super.recalculate(c,s),this.paint._values["line-floorwidth"]=ES.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,c)}createBucket(c){return new $y(c)}queryRadius(c){const s=c,h=CS(Of("line-width",this,s),Of("line-gap-width",this,s)),m=Of("line-offset",this,s);return h/2+Math.abs(m)+Bm(this.paint.get("line-translate"))}queryIntersectsFeature(c,s,h,m,b,T,C){const k=Fm(c,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),T.angle,C),R=C/2*CS(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),F=this.paint.get("line-offset").evaluate(s,h);return F&&(m=function(U,H){const Y=[];for(let J=0;J<U.length;J++){const ee=U[J],ve=[];for(let pe=0;pe<ee.length;pe++){const Ie=ee[pe-1],ze=ee[pe],Me=ee[pe+1],Le=pe===0?new we(0,0):ze.sub(Ie)._unit()._perp(),Ze=pe===ee.length-1?new we(0,0):Me.sub(ze)._unit()._perp(),je=Le._add(Ze)._unit(),wt=je.x*Ze.x+je.y*Ze.y;wt!==0&&je._mult(1/wt),ve.push(je._mult(H)._add(ze))}Y.push(ve)}return Y}(m,F*C)),function(U,H,Y){for(let J=0;J<H.length;J++){const ee=H[J];if(U.length>=3){for(let ve=0;ve<ee.length;ve++)if(zc(U,ee[ve]))return!0}if(XR(U,ee,Y))return!0}return!1}(k,m,R)}isTileClipped(){return!0}},symbol:ev,background:class extends Ma{constructor(c){super(c,yz)}},raster:class extends Ma{constructor(c){super(c,xz)}}};class Sz{constructor(s){this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const eT=63710088e-1;class gi{constructor(s,h){if(isNaN(s)||isNaN(h))throw new Error(`Invalid LngLat object: (${s}, ${h})`);if(this.lng=+s,this.lat=+h,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new gi(S(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const h=Math.PI/180,m=this.lat*h,b=s.lat*h,T=Math.sin(m)*Math.sin(b)+Math.cos(m)*Math.cos(b)*Math.cos((s.lng-this.lng)*h);return eT*Math.acos(Math.min(T,1))}toBounds(s=0){const h=360*s/40075017,m=h/Math.cos(Math.PI/180*this.lat);return new hu(new gi(this.lng-m,this.lat-h),new gi(this.lng+m,this.lat+h))}static convert(s){if(s instanceof gi)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new gi(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new gi(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class hu{constructor(s,h){s&&(h?this.setSouthWest(s).setNorthEast(h):s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1]))}setNorthEast(s){return this._ne=s instanceof gi?new gi(s.lng,s.lat):gi.convert(s),this}setSouthWest(s){return this._sw=s instanceof gi?new gi(s.lng,s.lat):gi.convert(s),this}extend(s){const h=this._sw,m=this._ne;let b,T;if(s instanceof gi)b=s,T=s;else{if(!(s instanceof hu))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(hu.convert(s)):this.extend(gi.convert(s)):this;if(b=s._sw,T=s._ne,!b||!T)return this}return h||m?(h.lng=Math.min(b.lng,h.lng),h.lat=Math.min(b.lat,h.lat),m.lng=Math.max(T.lng,m.lng),m.lat=Math.max(T.lat,m.lat)):(this._sw=new gi(b.lng,b.lat),this._ne=new gi(T.lng,T.lat)),this}getCenter(){return new gi((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new gi(this.getWest(),this.getNorth())}getSouthEast(){return new gi(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){const{lng:h,lat:m}=gi.convert(s);let b=this._sw.lng<=h&&h<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=h&&h>=this._ne.lng),this._sw.lat<=m&&m<=this._ne.lat&&b}static convert(s){return s instanceof hu?s:s&&new hu(s)}}const tT=2*Math.PI*eT;function rT(c){return tT*Math.cos(c*Math.PI/180)}function iT(c){return(180+c)/360}function nT(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function aT(c,s){return c/rT(s)}function e0(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class tv{constructor(s,h,m=0){this.x=+s,this.y=+h,this.z=+m}static fromLngLat(s,h=0){const m=gi.convert(s);return new tv(iT(m.lng),nT(m.lat),aT(h,m.lat))}toLngLat(){return new gi(360*this.x-180,e0(this.y))}toAltitude(){return this.z*rT(e0(this.y))}meterInMercatorCoordinateUnits(){return 1/tT*(s=e0(this.y),1/Math.cos(s*Math.PI/180));var s}}function oT(c,s,h){var m=2*Math.PI*6378137/256/Math.pow(2,h);return[c*m-2*Math.PI*6378137/2,s*m-2*Math.PI*6378137/2]}class t0{constructor(s,h,m){if(s<0||s>25||m<0||m>=Math.pow(2,s)||h<0||h>=Math.pow(2,s))throw new Error(`x=${h}, y=${m}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=h,this.y=m,this.key=Wf(0,s,s,h,m)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,h,m){const b=(C=this.y,k=this.z,R=oT(256*(T=this.x),256*(C=Math.pow(2,k)-C-1),k),F=oT(256*(T+1),256*(C+1),k),R[0]+","+R[1]+","+F[0]+","+F[1]);var T,C,k,R,F;const U=function(H,Y,J){let ee,ve="";for(let pe=H;pe>0;pe--)ee=1<<pe-1,ve+=(Y&ee?1:0)+(J&ee?2:0);return ve}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,h>1?"@2x":"").replace(/{quadkey}/g,U).replace(/{bbox-epsg-3857}/g,b)}isChildOf(s){const h=this.z-s.z;return h>0&&s.x===this.x>>h&&s.y===this.y>>h}getTilePoint(s){const h=Math.pow(2,this.z);return new we((s.x*h-this.x)*Li,(s.y*h-this.y)*Li)}toString(){return`${this.z}/${this.x}/${this.y}`}}class sT{constructor(s,h){this.wrap=s,this.canonical=h,this.key=Wf(s,h.z,h.z,h.x,h.y)}}class ma{constructor(s,h,m,b,T){if(s<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${m}`);this.overscaledZ=s,this.wrap=h,this.canonical=new t0(m,+b,+T),this.key=Wf(h,s,m,b,T)}clone(){return new ma(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-s;return s>this.canonical.z?new ma(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ma(s,this.wrap,s,this.canonical.x>>h,this.canonical.y>>h)}calculateScaledKey(s,h){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const m=this.canonical.z-s;return s>this.canonical.z?Wf(this.wrap*+h,s,this.canonical.z,this.canonical.x,this.canonical.y):Wf(this.wrap*+h,s,s,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const h=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>h&&s.canonical.y===this.canonical.y>>h}children(s){if(this.overscaledZ>=s)return[new ma(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const h=this.canonical.z+1,m=2*this.canonical.x,b=2*this.canonical.y;return[new ma(h,this.wrap,h,m,b),new ma(h,this.wrap,h,m+1,b),new ma(h,this.wrap,h,m,b+1),new ma(h,this.wrap,h,m+1,b+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new ma(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new ma(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new sT(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new tv(s.x-this.wrap,s.y))}}function Wf(c,s,h,m,b){(c*=2)<0&&(c=-1*c-1);const T=1<<h;return(T*T*c+T*b+m).toString(36)+h.toString(36)+s.toString(36)}Tt("CanonicalTileID",t0),Tt("OverscaledTileID",ma,{omit:["posMatrix"]});class lT{constructor(s,h,m){if(this.uid=s,h.height!==h.width)throw new RangeError("DEM tiles must be square");if(m&&m!=="mapbox"&&m!=="terrarium")return void q(`"${m}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=h.height;const b=this.dim=h.height-2;this.data=new Uint32Array(h.data.buffer),this.encoding=m||"mapbox";for(let T=0;T<b;T++)this.data[this._idx(-1,T)]=this.data[this._idx(0,T)],this.data[this._idx(b,T)]=this.data[this._idx(b-1,T)],this.data[this._idx(T,-1)]=this.data[this._idx(T,0)],this.data[this._idx(T,b)]=this.data[this._idx(T,b-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(b,-1)]=this.data[this._idx(b-1,0)],this.data[this._idx(-1,b)]=this.data[this._idx(0,b-1)],this.data[this._idx(b,b)]=this.data[this._idx(b-1,b-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let T=0;T<b;T++)for(let C=0;C<b;C++){const k=this.get(T,C);k>this.max&&(this.max=k),k<this.min&&(this.min=k)}}get(s,h){const m=new Uint8Array(this.data.buffer),b=4*this._idx(s,h);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(m[b],m[b+1],m[b+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(s,h){if(s<-1||s>=this.dim+1||h<-1||h>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(h+1)*this.stride+(s+1)}_unpackMapbox(s,h,m){return(256*s*256+256*h+m)/10-1e4}_unpackTerrarium(s,h,m){return 256*s+h+m/256-32768}getPixels(){return new pa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,h,m){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let b=h*this.dim,T=h*this.dim+this.dim,C=m*this.dim,k=m*this.dim+this.dim;switch(h){case-1:b=T-1;break;case 1:T=b+1}switch(m){case-1:C=k-1;break;case 1:k=C+1}const R=-h*this.dim,F=-m*this.dim;for(let U=C;U<k;U++)for(let H=b;H<T;H++)this.data[this._idx(H,U)]=s.data[this._idx(H+R,U+F)]}}Tt("DEMData",lT);class uT{constructor(s){this._stringToNumber={},this._numberToString=[];for(let h=0;h<s.length;h++){const m=s[h];this._stringToNumber[m]=h,this._numberToString[h]=m}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class cT{constructor(s,h,m,b,T){this.type="Feature",this._vectorTileFeature=s,s._z=h,s._x=m,s._y=b,this.properties=s.properties,this.id=T}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const h in this)h!=="_geometry"&&h!=="_vectorTileFeature"&&(s[h]=this[h]);return s}}class hT{constructor(s,h){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new iu(Li,16,0),this.grid3D=new iu(Li,16,0),this.featureIndexArray=new or,this.promoteId=h}insert(s,h,m,b,T,C){const k=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,b,T);const R=C?this.grid3D:this.grid;for(let F=0;F<h.length;F++){const U=h[F],H=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<U.length;Y++){const J=U[Y];H[0]=Math.min(H[0],J.x),H[1]=Math.min(H[1],J.y),H[2]=Math.max(H[2],J.x),H[3]=Math.max(H[3],J.y)}H[0]<Li&&H[1]<Li&&H[2]>=0&&H[3]>=0&&R.insert(k,H[0],H[1],H[2],H[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new tl.VectorTile(new Uy(this.rawTileData)).layers,this.sourceLayerCoder=new uT(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,h,m,b){this.loadVTLayers();const T=s.params||{},C=Li/s.tileSize/s.scale,k=Ac(T.filter),R=s.queryGeometry,F=s.queryPadding*C,U=dT(R),H=this.grid.query(U.minX-F,U.minY-F,U.maxX+F,U.maxY+F),Y=dT(s.cameraQueryGeometry),J=this.grid3D.query(Y.minX-F,Y.minY-F,Y.maxX+F,Y.maxY+F,(pe,Ie,ze,Me)=>function(Le,Ze,je,wt,Mt){for(const ht of Le)if(Ze<=ht.x&&je<=ht.y&&wt>=ht.x&&Mt>=ht.y)return!0;const vt=[new we(Ze,je),new we(Ze,Mt),new we(wt,Mt),new we(wt,je)];if(Le.length>2){for(const ht of vt)if(zc(Le,ht))return!0}for(let ht=0;ht<Le.length-1;ht++)if(KR(Le[ht],Le[ht+1],vt))return!0;return!1}(s.cameraQueryGeometry,pe-F,Ie-F,ze+F,Me+F));for(const pe of J)H.push(pe);H.sort(Tz);const ee={};let ve;for(let pe=0;pe<H.length;pe++){const Ie=H[pe];if(Ie===ve)continue;ve=Ie;const ze=this.featureIndexArray.get(Ie);let Me=null;this.loadMatchingFeature(ee,ze.bucketIndex,ze.sourceLayerIndex,ze.featureIndex,k,T.layers,T.availableImages,h,m,b,(Le,Ze,je)=>(Me||(Me=lu(Le)),Ze.queryIntersectsFeature(R,Le,je,Me,this.z,s.transform,C,s.pixelPosMatrix)))}return ee}loadMatchingFeature(s,h,m,b,T,C,k,R,F,U,H){const Y=this.bucketLayerIDs[h];if(C&&!function(pe,Ie){for(let ze=0;ze<pe.length;ze++)if(Ie.indexOf(pe[ze])>=0)return!0;return!1}(C,Y))return;const J=this.sourceLayerCoder.decode(m),ee=this.vtLayers[J].feature(b);if(T.needGeometry){const pe=uu(ee,!0);if(!T.filter(new si(this.tileID.overscaledZ),pe,this.tileID.canonical))return}else if(!T.filter(new si(this.tileID.overscaledZ),ee))return;const ve=this.getId(ee,J);for(let pe=0;pe<Y.length;pe++){const Ie=Y[pe];if(C&&C.indexOf(Ie)<0)continue;const ze=R[Ie];if(!ze)continue;let Me={};ve&&U&&(Me=U.getState(ze.sourceLayer||"_geojsonTileLayer",ve));const Le=A({},F[Ie]);Le.paint=fT(Le.paint,ze.paint,ee,Me,k),Le.layout=fT(Le.layout,ze.layout,ee,Me,k);const Ze=!H||H(ee,ze,Me);if(!Ze)continue;const je=new cT(ee,this.z,this.x,this.y,ve);je.layer=Le;let wt=s[Ie];wt===void 0&&(wt=s[Ie]=[]),wt.push({featureIndex:b,feature:je,intersectionZ:Ze})}}lookupSymbolFeatures(s,h,m,b,T,C,k,R){const F={};this.loadVTLayers();const U=Ac(T);for(const H of s)this.loadMatchingFeature(F,m,b,H,U,C,k,R,h);return F}hasLayer(s){for(const h of this.bucketLayerIDs)for(const m of h)if(s===m)return!0;return!1}getId(s,h){let m=s.id;return this.promoteId&&(m=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[h]],typeof m=="boolean"&&(m=Number(m))),m}}function fT(c,s,h,m,b){return M(c,(T,C)=>{const k=s instanceof ou?s.get(C):null;return k&&k.evaluate?k.evaluate(h,m,b):k})}function dT(c){let s=1/0,h=1/0,m=-1/0,b=-1/0;for(const T of c)s=Math.min(s,T.x),h=Math.min(h,T.y),m=Math.max(m,T.x),b=Math.max(b,T.y);return{minX:s,minY:h,maxX:m,maxY:b}}function Tz(c,s){return s-c}var r0;Tt("FeatureIndex",hT,{omit:["rawTileData","sourceLayerCoder"]}),o.PerformanceMarkers=void 0,(r0=o.PerformanceMarkers||(o.PerformanceMarkers={})).create="create",r0.load="load",r0.fullLoad="fullLoad";let rv=null,Zf=[];const i0=1e3/30,Ez={mark(c){performance.mark(c)},frame(c){const s=c;rv!=null&&Zf.push(s-rv),rv=s},clearMetrics(){rv=null,Zf=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const c in o.PerformanceMarkers)performance.clearMarks(o.PerformanceMarkers[c])},getPerformanceMetrics(){performance.measure("loadTime",o.PerformanceMarkers.create,o.PerformanceMarkers.load),performance.measure("fullLoadTime",o.PerformanceMarkers.create,o.PerformanceMarkers.fullLoad);const c=performance.getEntriesByName("loadTime")[0].duration,s=performance.getEntriesByName("fullLoadTime")[0].duration,h=Zf.length,m=1/(Zf.reduce((T,C)=>T+C,0)/h/1e3),b=Zf.filter(T=>T>i0).reduce((T,C)=>T+(C-i0)/i0,0);return{loadTime:c,fullLoadTime:s,fps:m,percentDroppedFrames:b/(h+b)*100}}};o.AJAXError=me,o.ARRAY_TYPE=Sn,o.Actor=class{constructor(c,s,h){this.target=c,this.parent=s,this.mapId=h,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},I(["receive","process"],this),this.invoker=new Sz(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=j()?c:window}send(c,s,h,m,b=!1){const T=Math.round(1e18*Math.random()).toString(36).substring(0,10);h&&(this.callbacks[T]=h);const C=fe(this.globalScope)?void 0:[];return this.target.postMessage({id:T,type:c,hasCallback:!!h,targetMapId:m,mustQueue:b,sourceMapId:this.mapId,data:is(s,C)},C),{cancel:()=>{h&&delete this.callbacks[T],this.target.postMessage({id:T,type:"<cancel>",targetMapId:m,sourceMapId:this.mapId})}}}receive(c){const s=c.data,h=s.id;if(h&&(!s.targetMapId||this.mapId===s.targetMapId))if(s.type==="<cancel>"){delete this.tasks[h];const m=this.cancelCallbacks[h];delete this.cancelCallbacks[h],m&&m()}else j()||s.mustQueue?(this.tasks[h]=s,this.taskQueue.push(h),this.invoker.trigger()):this.processTask(h,s)}process(){if(!this.taskQueue.length)return;const c=this.taskQueue.shift(),s=this.tasks[c];delete this.tasks[c],this.taskQueue.length&&this.invoker.trigger(),s&&this.processTask(c,s)}processTask(c,s){if(s.type==="<response>"){const h=this.callbacks[c];delete this.callbacks[c],h&&(s.error?h(Eo(s.error)):h(null,Eo(s.data)))}else{let h=!1;const m=fe(this.globalScope)?void 0:[],b=s.hasCallback?(k,R)=>{h=!0,delete this.cancelCallbacks[c],this.target.postMessage({id:c,type:"<response>",sourceMapId:this.mapId,error:k?is(k):null,data:is(R,m)},m)}:k=>{h=!0};let T=null;const C=Eo(s.data);if(this.parent[s.type])T=this.parent[s.type](s.sourceMapId,C,b);else if(this.parent.getWorkerSource){const k=s.type.split(".");T=this.parent.getWorkerSource(s.sourceMapId,k[0],C.source)[k[1]](C,b)}else b(new Error(`Could not find function ${s.type}`));!h&&T&&T.cancel&&(this.cancelCallbacks[c]=T.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.AlphaImage=Ff,o.CanonicalTileID=t0,o.CollisionBoxArray=$e,o.CollisionCircleLayoutArray=class extends G{},o.Color=re,o.DEMData=lT,o.DataConstantProperty=Dt,o.DictionaryCoder=uT,o.EXTENT=Li,o.ErrorEvent=ir,o.EvaluationParameters=si,o.Event=Ht,o.Evented=vr,o.FeatureIndex=hT,o.FillBucket=Fy,o.FillExtrusionBucket=Vy,o.GeoJSONFeature=cT,o.ImageAtlas=zS,o.ImagePosition=Hy,o.LineBucket=$y,o.LineStripIndexArray=class extends de{},o.LngLat=gi,o.LngLatBounds=hu,o.MercatorCoordinate=tv,o.ONE_EM=Xi,o.OverscaledTileID=ma,o.PerformanceUtils=Ez,o.PosArray=Nt,o.Properties=Zi,o.QuadTriangleArray=class extends K{},o.RGBAImage=pa,o.RasterBoundsArray=class extends x{},o.RequestPerformance=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},o.ResourceType=se,o.SegmentVector=ur,o.SymbolBucket=Uc,o.Transitionable=Dm,o.TriangleIndexArray=bn,o.Uniform1f=ss,o.Uniform1i=class extends os{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},o.Uniform2f=class extends os{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},o.Uniform3f=class extends os{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},o.Uniform4f=kc,o.UniformColor=K2,o.UniformMatrix4f=class extends os{constructor(c,s){super(c,s),this.current=jR}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},o.UnwrappedTileID=sT,o.ValidationError=tt,o.ZoomHistory=Sf,o.add=function(c,s,h){return c[0]=s[0]+h[0],c[1]=s[1]+h[1],c[2]=s[2]+h[2],c},o.addDynamicAttributes=Xy,o.asyncAll=function(c,s,h){if(!c.length)return h(null,[]);let m=c.length;const b=new Array(c.length);let T=null;c.forEach((C,k)=>{s(C,(R,F)=>{R&&(T=R),b[k]=F,--m==0&&h(T,b)})})},o.bezier=v,o.bindAll=I,o.cacheEntryPossiblyAdded=function(c){Cr++,Cr>Lr&&(c.getActor().send("enforceCacheSizeLimit",$t),Cr=0)},o.clamp=y,o.clearTileCache=function(c){const s=caches.delete(Ct);c&&s.catch(c).then(()=>c())},o.clipLine=WS,o.clone=function(c){var s=new Sn(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},o.clone$1=O,o.clone$2=function(c){var s=new Sn(3);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s},o.collisionCircleLayout=G4,o.config=et,o.copy=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},o.create=function(){var c=new Sn(16);return Sn!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},o.create$1=aS,o.createExpression=jl,o.createFilter=Ac,o.createLayout=Ti,o.createStyleLayer=function(c){return c.type==="custom"?new bz(c):new wz[c.type](c)},o.cross=function(c,s,h){var m=s[0],b=s[1],T=s[2],C=h[0],k=h[1],R=h[2];return c[0]=b*R-T*k,c[1]=T*C-m*R,c[2]=m*k-b*C,c},o.dot=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]},o.dot$1=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]*s[3]},o.ease=_,o.emitValidationErrors=Ic,o.enforceCacheSizeLimit=function(c){Ir(),zt&&zt.then(s=>{s.keys().then(h=>{for(let m=0;m<h.length-c;m++)s.delete(h[m])})})},o.equals=function(c,s){var h=c[0],m=c[1],b=c[2],T=c[3],C=c[4],k=c[5],R=c[6],F=c[7],U=c[8],H=c[9],Y=c[10],J=c[11],ee=c[12],ve=c[13],pe=c[14],Ie=c[15],ze=s[0],Me=s[1],Le=s[2],Ze=s[3],je=s[4],wt=s[5],Mt=s[6],vt=s[7],ht=s[8],ot=s[9],gt=s[10],pt=s[11],rt=s[12],Vt=s[13],kt=s[14],sr=s[15];return Math.abs(h-ze)<=wn*Math.max(1,Math.abs(h),Math.abs(ze))&&Math.abs(m-Me)<=wn*Math.max(1,Math.abs(m),Math.abs(Me))&&Math.abs(b-Le)<=wn*Math.max(1,Math.abs(b),Math.abs(Le))&&Math.abs(T-Ze)<=wn*Math.max(1,Math.abs(T),Math.abs(Ze))&&Math.abs(C-je)<=wn*Math.max(1,Math.abs(C),Math.abs(je))&&Math.abs(k-wt)<=wn*Math.max(1,Math.abs(k),Math.abs(wt))&&Math.abs(R-Mt)<=wn*Math.max(1,Math.abs(R),Math.abs(Mt))&&Math.abs(F-vt)<=wn*Math.max(1,Math.abs(F),Math.abs(vt))&&Math.abs(U-ht)<=wn*Math.max(1,Math.abs(U),Math.abs(ht))&&Math.abs(H-ot)<=wn*Math.max(1,Math.abs(H),Math.abs(ot))&&Math.abs(Y-gt)<=wn*Math.max(1,Math.abs(Y),Math.abs(gt))&&Math.abs(J-pt)<=wn*Math.max(1,Math.abs(J),Math.abs(pt))&&Math.abs(ee-rt)<=wn*Math.max(1,Math.abs(ee),Math.abs(rt))&&Math.abs(ve-Vt)<=wn*Math.max(1,Math.abs(ve),Math.abs(Vt))&&Math.abs(pe-kt)<=wn*Math.max(1,Math.abs(pe),Math.abs(kt))&&Math.abs(Ie-sr)<=wn*Math.max(1,Math.abs(Ie),Math.abs(sr))},o.evaluateSizeForFeature=function(c,{uSize:s,uSizeT:h},{lowerSize:m,upperSize:b}){return c.kind==="source"?m/cs:c.kind==="composite"?ai(m/cs,b/cs,h):s},o.evaluateSizeForZoom=function(c,s){let h=0,m=0;if(c.kind==="constant")m=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:b,minZoom:T,maxZoom:C}=c,k=b?y(Rn.interpolationFactor(b,s,T,C),0,1):0;c.kind==="camera"?m=ai(c.minSize,c.maxSize,k):h=k}return{uSizeT:h,uSize:m}},o.evaluateVariableOffset=YS,o.evented=Pf,o.exported=He,o.exported$1=dr,o.extend=A,o.filterObject=D,o.fromRotation=function(c,s){var h=Math.sin(s),m=Math.cos(s);return c[0]=m,c[1]=h,c[2]=0,c[3]=-h,c[4]=m,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},o.fromScaling=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},o.getAnchorAlignment=jy,o.getAnchorJustification=Zy,o.getArrayBuffer=Ke,o.getImage=Bt,o.getJSON=function(c,s){return We(A(c,{type:"json"}),s)},o.getOverlapMode=Qy,o.getRTLTextPluginStatus=nu,o.getReferrer=Ae,o.getVideo=function(c,s){const h=window.document.createElement("video");h.muted=!0,h.onloadstart=function(){s(null,h)};for(let m=0;m<c.length;m++){const b=window.document.createElement("source");dt(c[m])||(h.crossOrigin="Anonymous"),b.src=c[m],h.appendChild(b)}return{cancel:()=>{}}},o.identity=Iy,o.invert=function(c,s){var h=s[0],m=s[1],b=s[2],T=s[3],C=s[4],k=s[5],R=s[6],F=s[7],U=s[8],H=s[9],Y=s[10],J=s[11],ee=s[12],ve=s[13],pe=s[14],Ie=s[15],ze=h*k-m*C,Me=h*R-b*C,Le=h*F-T*C,Ze=m*R-b*k,je=m*F-T*k,wt=b*F-T*R,Mt=U*ve-H*ee,vt=U*pe-Y*ee,ht=U*Ie-J*ee,ot=H*pe-Y*ve,gt=H*Ie-J*ve,pt=Y*Ie-J*pe,rt=ze*pt-Me*gt+Le*ot+Ze*ht-je*vt+wt*Mt;return rt?(c[0]=(k*pt-R*gt+F*ot)*(rt=1/rt),c[1]=(b*gt-m*pt-T*ot)*rt,c[2]=(ve*wt-pe*je+Ie*Ze)*rt,c[3]=(Y*je-H*wt-J*Ze)*rt,c[4]=(R*ht-C*pt-F*vt)*rt,c[5]=(h*pt-b*ht+T*vt)*rt,c[6]=(pe*Le-ee*wt-Ie*Me)*rt,c[7]=(U*wt-Y*Le+J*Me)*rt,c[8]=(C*gt-k*ht+F*Mt)*rt,c[9]=(m*ht-h*gt-T*Mt)*rt,c[10]=(ee*je-ve*Le+Ie*ze)*rt,c[11]=(H*Le-U*je-J*ze)*rt,c[12]=(k*vt-C*ot-R*Mt)*rt,c[13]=(h*ot-m*vt+b*Mt)*rt,c[14]=(ve*Me-ee*Ze-pe*ze)*rt,c[15]=(U*Ze-H*Me+Y*ze)*rt,c):null},o.isImageBitmap=ye,o.isSafari=fe,o.isWorker=j,o.keysDifference=function(c,s){const h=[];for(const m in c)m in s||h.push(m);return h},o.lazyLoadRTLTextPlugin=function(){Jn.isLoading()||Jn.isLoaded()||nu()!=="deferred"||Pm()},o.makeRequest=We,o.mapObject=M,o.mercatorXfromLng=iT,o.mercatorYfromLat=nT,o.mercatorZfromAltitude=aT,o.mul=e4,o.mul$1=function(c,s,h){return c[0]=s[0]*h[0],c[1]=s[1]*h[1],c[2]=s[2]*h[2],c[3]=s[3]*h[3],c},o.multiply=oS,o.nextPowerOfTwo=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},o.normalize=function(c,s){var h=s[0],m=s[1],b=s[2],T=h*h+m*m+b*b;return T>0&&(T=1/Math.sqrt(T)),c[0]=s[0]*T,c[1]=s[1]*T,c[2]=s[2]*T,c},o.number=ai,o.ortho=function(c,s,h,m,b,T,C){var k=1/(s-h),R=1/(m-b),F=1/(T-C);return c[0]=-2*k,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*R,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*F,c[11]=0,c[12]=(s+h)*k,c[13]=(b+m)*R,c[14]=(C+T)*F,c[15]=1,c},o.parseCacheControl=ie,o.parseGlyphPbf=function(c){return new Uy(c).readFields(ez,[])},o.pbf=Uy,o.performSymbolLayout=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Li/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const s=c.bucket.layers[0].layout,h=c.bucket.layers[0]._unevaluatedLayout._values,m={layoutIconSize:h["icon-size"].possiblyEvaluate(new si(c.bucket.zoom+1),c.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new si(c.bucket.zoom+1),c.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new si(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:R,maxZoom:F}=c.bucket.textSizeData;m.compositeTextSizes=[h["text-size"].possiblyEvaluate(new si(R),c.canonical),h["text-size"].possiblyEvaluate(new si(F),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:R,maxZoom:F}=c.bucket.iconSizeData;m.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new si(R),c.canonical),h["icon-size"].possiblyEvaluate(new si(F),c.canonical)]}const b=s.get("text-line-height")*Xi,T=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",C=s.get("text-keep-upright"),k=s.get("text-size");for(const R of c.bucket.features){const F=s.get("text-font").evaluate(R,{},c.canonical).join(","),U=k.evaluate(R,{},c.canonical),H=m.layoutTextSize.evaluate(R,{},c.canonical),Y=m.layoutIconSize.evaluate(R,{},c.canonical),J={horizontal:{},vertical:void 0},ee=R.text;let ve,pe=[0,0];if(ee){const Me=ee.toString(),Le=s.get("text-letter-spacing").evaluate(R,{},c.canonical)*Xi,Ze=by(Me)?Le:0,je=s.get("text-anchor").evaluate(R,{},c.canonical),wt=s.get("text-variable-anchor");if(!wt){const gt=s.get("text-radial-offset").evaluate(R,{},c.canonical);pe=gt?YS(je,[gt*Xi,Wy]):s.get("text-offset").evaluate(R,{},c.canonical).map(pt=>pt*Xi)}let Mt=T?"center":s.get("text-justify").evaluate(R,{},c.canonical);const vt=s.get("symbol-placement"),ht=vt==="point"?s.get("text-max-width").evaluate(R,{},c.canonical)*Xi:0,ot=()=>{c.bucket.allowVerticalPlacement&&Pc(Me)&&(J.vertical=Wm(ee,c.glyphMap,c.glyphPositions,c.imagePositions,F,ht,b,je,"left",Ze,pe,o.WritingMode.vertical,!0,vt,H,U))};if(!T&&wt){const gt=Mt==="auto"?wt.map(rt=>Zy(rt)):[Mt];let pt=!1;for(let rt=0;rt<gt.length;rt++){const Vt=gt[rt];if(!J.horizontal[Vt])if(pt)J.horizontal[Vt]=J.horizontal[0];else{const kt=Wm(ee,c.glyphMap,c.glyphPositions,c.imagePositions,F,ht,b,"center",Vt,Ze,pe,o.WritingMode.horizontal,!1,vt,H,U);kt&&(J.horizontal[Vt]=kt,pt=kt.positionedLines.length===1)}}ot()}else{Mt==="auto"&&(Mt=Zy(je));const gt=Wm(ee,c.glyphMap,c.glyphPositions,c.imagePositions,F,ht,b,je,Mt,Ze,pe,o.WritingMode.horizontal,!1,vt,H,U);gt&&(J.horizontal[Mt]=gt),ot(),Pc(Me)&&T&&C&&(J.vertical=Wm(ee,c.glyphMap,c.glyphPositions,c.imagePositions,F,ht,b,je,Mt,Ze,pe,o.WritingMode.vertical,!1,vt,H,U))}}let Ie=!1;if(R.icon&&R.icon.name){const Me=c.imageMap[R.icon.name];Me&&(ve=oz(c.imagePositions[R.icon.name],s.get("icon-offset").evaluate(R,{},c.canonical),s.get("icon-anchor").evaluate(R,{},c.canonical)),Ie=!!Me.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=Ie:c.bucket.sdfIcons!==Ie&&q("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Me.pixelRatio!==c.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const ze=JS(J.horizontal)||J.vertical;c.bucket.iconsInText=!!ze&&ze.iconsInText,(ze||ve)&&dz(c.bucket,R,J,ve,c.imageMap,m,H,Y,pe,Ie,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},o.perspective=function(c,s,h,m,b){var T,C=1/Math.tan(s/2);return c[0]=C/h,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=C,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,b!=null&&b!==1/0?(c[10]=(b+m)*(T=1/(m-b)),c[14]=2*b*m*T):(c[10]=-1,c[14]=-2*m),c},o.pick=function(c,s){const h={};for(let m=0;m<s.length;m++){const b=s[m];b in c&&(h[b]=c[b])}return h},o.plugin=Jn,o.pointGeometry=we,o.polygonIntersectsPolygon=tS,o.potpack=RS,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.register=Tt,o.registerForPluginStateChange=function(c){return c({pluginStatus:xn,pluginURL:Co}),Pf.on("pluginStateChange",c),c},o.renderColorRamp=dS,o.rotateX=function(c,s,h){var m=Math.sin(h),b=Math.cos(h),T=s[4],C=s[5],k=s[6],R=s[7],F=s[8],U=s[9],H=s[10],Y=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=T*b+F*m,c[5]=C*b+U*m,c[6]=k*b+H*m,c[7]=R*b+Y*m,c[8]=F*b-T*m,c[9]=U*b-C*m,c[10]=H*b-k*m,c[11]=Y*b-R*m,c},o.rotateZ=function(c,s,h){var m=Math.sin(h),b=Math.cos(h),T=s[0],C=s[1],k=s[2],R=s[3],F=s[4],U=s[5],H=s[6],Y=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=T*b+F*m,c[1]=C*b+U*m,c[2]=k*b+H*m,c[3]=R*b+Y*m,c[4]=F*b-T*m,c[5]=U*b-C*m,c[6]=H*b-k*m,c[7]=Y*b-R*m,c},o.scale=function(c,s,h){var m=h[0],b=h[1],T=h[2];return c[0]=s[0]*m,c[1]=s[1]*m,c[2]=s[2]*m,c[3]=s[3]*m,c[4]=s[4]*b,c[5]=s[5]*b,c[6]=s[6]*b,c[7]=s[7]*b,c[8]=s[8]*T,c[9]=s[9]*T,c[10]=s[10]*T,c[11]=s[11]*T,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},o.scale$1=function(c,s,h){return c[0]=s[0]*h,c[1]=s[1]*h,c[2]=s[2]*h,c},o.setCacheLimits=function(c,s){$t=c,Lr=s},o.setRTLTextPlugin=function(c,s,h=!1){if(xn===Cf||xn===Af||xn===Mf)throw new Error("setRTLTextPlugin cannot be called multiple times.");Co=He.resolveURL(c),xn=Cf,If=s,Ks(),h||Pm()},o.spec=ke,o.sphericalToCartesian=function([c,s,h]){return s+=90,s*=Math.PI/180,h*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(h),y:c*Math.sin(s)*Math.sin(h),z:c*Math.cos(h)}},o.sqrLen=function(c){var s=c[0],h=c[1];return s*s+h*h},o.sub=function(c,s,h){return c[0]=s[0]-h[0],c[1]=s[1]-h[1],c[2]=s[2]-h[2],c},o.toEvaluationFeature=uu,o.transformMat3=function(c,s,h){var m=s[0],b=s[1],T=s[2];return c[0]=m*h[0]+b*h[3]+T*h[6],c[1]=m*h[1]+b*h[4]+T*h[7],c[2]=m*h[2]+b*h[5]+T*h[8],c},o.transformMat4=Nm,o.transformMat4$1=function(c,s,h){var m=s[0],b=s[1];return c[0]=h[0]*m+h[4]*b+h[12],c[1]=h[1]*m+h[5]*b+h[13],c},o.translate=function(c,s,h){var m,b,T,C,k,R,F,U,H,Y,J,ee,ve=h[0],pe=h[1],Ie=h[2];return s===c?(c[12]=s[0]*ve+s[4]*pe+s[8]*Ie+s[12],c[13]=s[1]*ve+s[5]*pe+s[9]*Ie+s[13],c[14]=s[2]*ve+s[6]*pe+s[10]*Ie+s[14],c[15]=s[3]*ve+s[7]*pe+s[11]*Ie+s[15]):(b=s[1],T=s[2],C=s[3],k=s[4],R=s[5],F=s[6],U=s[7],H=s[8],Y=s[9],J=s[10],ee=s[11],c[0]=m=s[0],c[1]=b,c[2]=T,c[3]=C,c[4]=k,c[5]=R,c[6]=F,c[7]=U,c[8]=H,c[9]=Y,c[10]=J,c[11]=ee,c[12]=m*ve+k*pe+H*Ie+s[12],c[13]=b*ve+R*pe+Y*Ie+s[13],c[14]=T*ve+F*pe+J*Ie+s[14],c[15]=C*ve+U*pe+ee*Ie+s[15]),c},o.triggerPluginCompletionEvent=Im,o.unicodeBlockLookup=mt,o.uniqueId=function(){return L++},o.validateCustomStyleLayer=function(c){const s=[],h=c.id;return h===void 0&&s.push({message:`layers.${h}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${h}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${h}: property "renderingMode" must be either "2d" or "3d"`}),s},o.validateLight=wf,o.validateStyle=ru,o.vectorTile=tl,o.warnOnce=q,o.wrap=S}),a(["./shared"],function(o){function f(ne){const $=typeof ne;if($==="number"||$==="boolean"||$==="string"||ne==null)return JSON.stringify(ne);if(Array.isArray(ne)){let re="[";for(const ge of ne)re+=`${f(ge)},`;return`${re}]`}const W=Object.keys(ne).sort();let te="{";for(let re=0;re<W.length;re++)te+=`${JSON.stringify(W[re])}:${f(ne[W[re]])},`;return`${te}}`}function p(ne){let $="";for(const W of o.refProperties)$+=`/${f(ne[W])}`;return $}class v{constructor($){this.keyCache={},$&&this.replace($)}replace($){this._layerConfigs={},this._layers={},this.update($,[])}update($,W){for(const re of $){this._layerConfigs[re.id]=re;const ge=this._layers[re.id]=o.createStyleLayer(re);ge._featureFilter=o.createFilter(ge.filter),this.keyCache[re.id]&&delete this.keyCache[re.id]}for(const re of W)delete this.keyCache[re],delete this._layerConfigs[re],delete this._layers[re];this.familiesBySource={};const te=function(re,ge){const Se={};for(let _e=0;_e<re.length;_e++){const Te=ge&&ge[re[_e].id]||p(re[_e]);ge&&(ge[re[_e].id]=Te);let Fe=Se[Te];Fe||(Fe=Se[Te]=[]),Fe.push(re[_e])}const xe=[];for(const _e in Se)xe.push(Se[_e]);return xe}(Object.values(this._layerConfigs),this.keyCache);for(const re of te){const ge=re.map(Xe=>this._layers[Xe.id]),Se=ge[0];if(Se.visibility==="none")continue;const xe=Se.source||"";let _e=this.familiesBySource[xe];_e||(_e=this.familiesBySource[xe]={});const Te=Se.sourceLayer||"_geojsonTileLayer";let Fe=_e[Te];Fe||(Fe=_e[Te]=[]),Fe.push(ge)}}}class _{constructor($){const W={},te=[];for(const xe in $){const _e=$[xe],Te=W[xe]={};for(const Fe in _e){const Xe=_e[+Fe];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;const Be={x:0,y:0,w:Xe.bitmap.width+2,h:Xe.bitmap.height+2};te.push(Be),Te[Fe]={rect:Be,metrics:Xe.metrics}}}const{w:re,h:ge}=o.potpack(te),Se=new o.AlphaImage({width:re||1,height:ge||1});for(const xe in $){const _e=$[xe];for(const Te in _e){const Fe=_e[+Te];if(!Fe||Fe.bitmap.width===0||Fe.bitmap.height===0)continue;const Xe=W[xe][Te].rect;o.AlphaImage.copy(Fe.bitmap,Se,{x:0,y:0},{x:Xe.x+1,y:Xe.y+1},Fe.bitmap)}}this.image=Se,this.positions=W}}o.register("GlyphAtlas",_);class y{constructor($){this.tileID=new o.OverscaledTileID($.tileID.overscaledZ,$.tileID.wrap,$.tileID.canonical.z,$.tileID.canonical.x,$.tileID.canonical.y),this.uid=$.uid,this.zoom=$.zoom,this.pixelRatio=$.pixelRatio,this.tileSize=$.tileSize,this.source=$.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=$.showCollisionBoxes,this.collectResourceTiming=!!$.collectResourceTiming,this.returnDependencies=!!$.returnDependencies,this.promoteId=$.promoteId}parse($,W,te,re,ge){this.status="parsing",this.data=$,this.collisionBoxArray=new o.CollisionBoxArray;const Se=new o.DictionaryCoder(Object.keys($.layers).sort()),xe=new o.FeatureIndex(this.tileID,this.promoteId);xe.bucketLayerIDs=[];const _e={},Te={featureIndex:xe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:te},Fe=W.familiesBySource[this.source];for(const Xt in Fe){const ar=$.layers[Xt];if(!ar)continue;ar.version===1&&o.warnOnce(`Vector tile source "${this.source}" layer "${Xt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const _r=Se.encode(Xt),Gr=[];for(let Ni=0;Ni<ar.length;Ni++){const ni=ar.feature(Ni),tn=xe.getId(ni,Xt);Gr.push({feature:ni,id:tn,index:Ni,sourceLayerIndex:_r})}for(const Ni of Fe[Xt]){const ni=Ni[0];ni.source!==this.source&&o.warnOnce(`layer.source = ${ni.source} does not equal this.source = ${this.source}`),ni.minzoom&&this.zoom<Math.floor(ni.minzoom)||ni.maxzoom&&this.zoom>=ni.maxzoom||ni.visibility!=="none"&&(S(Ni,this.zoom,te),(_e[ni.id]=ni.createBucket({index:xe.bucketLayerIDs.length,layers:Ni,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_r,sourceID:this.source})).populate(Gr,Te,this.tileID.canonical),xe.bucketLayerIDs.push(Ni.map(tn=>tn.id)))}}let Xe,Be,At,Pt;const _t=o.mapObject(Te.glyphDependencies,Xt=>Object.keys(Xt).map(Number));Object.keys(_t).length?re.send("getGlyphs",{uid:this.uid,stacks:_t},(Xt,ar)=>{Xe||(Xe=Xt,Be=ar,gr.call(this))}):Be={};const Ut=Object.keys(Te.iconDependencies);Ut.length?re.send("getImages",{icons:Ut,source:this.source,tileID:this.tileID,type:"icons"},(Xt,ar)=>{Xe||(Xe=Xt,At=ar,gr.call(this))}):At={};const qt=Object.keys(Te.patternDependencies);function gr(){if(Xe)return ge(Xe);if(Be&&At&&Pt){const Xt=new _(Be),ar=new o.ImageAtlas(At,Pt);for(const _r in _e){const Gr=_e[_r];Gr instanceof o.SymbolBucket?(S(Gr.layers,this.zoom,te),o.performSymbolLayout({bucket:Gr,glyphMap:Be,glyphPositions:Xt.positions,imageMap:At,imagePositions:ar.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Gr.hasPattern&&(Gr instanceof o.LineBucket||Gr instanceof o.FillBucket||Gr instanceof o.FillExtrusionBucket)&&(S(Gr.layers,this.zoom,te),Gr.addFeatures(Te,this.tileID.canonical,ar.patternPositions))}this.status="done",ge(null,{buckets:Object.values(_e).filter(_r=>!_r.isEmpty()),featureIndex:xe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Xt.image,imageAtlas:ar,glyphMap:this.returnDependencies?Be:null,iconMap:this.returnDependencies?At:null,glyphPositions:this.returnDependencies?Xt.positions:null})}}qt.length?re.send("getImages",{icons:qt,source:this.source,tileID:this.tileID,type:"patterns"},(Xt,ar)=>{Xe||(Xe=Xt,Pt=ar,gr.call(this))}):Pt={},gr.call(this)}}function S(ne,$,W){const te=new o.EvaluationParameters($);for(const re of ne)re.recalculate(te,W)}function A(ne,$){const W=o.getArrayBuffer(ne.request,(te,re,ge,Se)=>{te?$(te):re&&$(null,{vectorTile:new o.vectorTile.VectorTile(new o.pbf(re)),rawData:re,cacheControl:ge,expires:Se})});return()=>{W.cancel(),$()}}class L{constructor($,W,te,re){this.actor=$,this.layerIndex=W,this.availableImages=te,this.loadVectorData=re||A,this.loading={},this.loaded={}}loadTile($,W){const te=$.uid;this.loading||(this.loading={});const re=!!($&&$.request&&$.request.collectResourceTiming)&&new o.RequestPerformance($.request),ge=this.loading[te]=new y($);ge.abort=this.loadVectorData($,(Se,xe)=>{if(delete this.loading[te],Se||!xe)return ge.status="done",this.loaded[te]=ge,W(Se);const _e=xe.rawData,Te={};xe.expires&&(Te.expires=xe.expires),xe.cacheControl&&(Te.cacheControl=xe.cacheControl);const Fe={};if(re){const Xe=re.finish();Xe&&(Fe.resourceTiming=JSON.parse(JSON.stringify(Xe)))}ge.vectorTile=xe.vectorTile,ge.parse(xe.vectorTile,this.layerIndex,this.availableImages,this.actor,(Xe,Be)=>{if(Xe||!Be)return W(Xe);W(null,o.extend({rawTileData:_e.slice(0)},Be,Te,Fe))}),this.loaded=this.loaded||{},this.loaded[te]=ge})}reloadTile($,W){const te=this.loaded,re=$.uid,ge=this;if(te&&te[re]){const Se=te[re];Se.showCollisionBoxes=$.showCollisionBoxes;const xe=(_e,Te)=>{const Fe=Se.reloadCallback;Fe&&(delete Se.reloadCallback,Se.parse(Se.vectorTile,ge.layerIndex,this.availableImages,ge.actor,Fe)),W(_e,Te)};Se.status==="parsing"?Se.reloadCallback=xe:Se.status==="done"&&(Se.vectorTile?Se.parse(Se.vectorTile,this.layerIndex,this.availableImages,this.actor,xe):xe())}}abortTile($,W){const te=this.loading,re=$.uid;te&&te[re]&&te[re].abort&&(te[re].abort(),delete te[re]),W()}removeTile($,W){const te=this.loaded,re=$.uid;te&&te[re]&&delete te[re],W()}}class I{constructor(){this.loaded={}}loadTile($,W){const{uid:te,encoding:re,rawImageData:ge}=$,Se=o.isImageBitmap(ge)?this.getImageData(ge):ge,xe=new o.DEMData(te,Se,re);this.loaded=this.loaded||{},this.loaded[te]=xe,W(null,xe)}getImageData($){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas($.width,$.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=$.width,this.offscreenCanvas.height=$.height,this.offscreenCanvasContext.drawImage($,0,0,$.width,$.height);const W=this.offscreenCanvasContext.getImageData(-1,-1,$.width+2,$.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new o.RGBAImage({width:W.width,height:W.height},W.data)}removeTile($){const W=this.loaded,te=$.uid;W&&W[te]&&delete W[te]}}var M=function ne($,W){var te,re=$&&$.type;if(re==="FeatureCollection")for(te=0;te<$.features.length;te++)ne($.features[te],W);else if(re==="GeometryCollection")for(te=0;te<$.geometries.length;te++)ne($.geometries[te],W);else if(re==="Feature")ne($.geometry,W);else if(re==="Polygon")D($.coordinates,W);else if(re==="MultiPolygon")for(te=0;te<$.coordinates.length;te++)D($.coordinates[te],W);return $};function D(ne,$){if(ne.length!==0){O(ne[0],$);for(var W=1;W<ne.length;W++)O(ne[W],!$)}}function O(ne,$){for(var W=0,te=0,re=0,ge=ne.length,Se=ge-1;re<ge;Se=re++){var xe=(ne[re][0]-ne[Se][0])*(ne[Se][1]+ne[re][1]),_e=W+xe;te+=Math.abs(W)>=Math.abs(xe)?W-_e+xe:xe-_e+W,W=_e}W+te>=0!=!!$&&ne.reverse()}const N=o.vectorTile.VectorTileFeature.prototype.toGeoJSON;class q{constructor($){this._feature=$,this.extent=o.EXTENT,this.type=$.type,this.properties=$.tags,"id"in $&&!isNaN($.id)&&(this.id=parseInt($.id,10))}loadGeometry(){if(this._feature.type===1){const $=[];for(const W of this._feature.geometry)$.push([new o.pointGeometry(W[0],W[1])]);return $}{const $=[];for(const W of this._feature.geometry){const te=[];for(const re of W)te.push(new o.pointGeometry(re[0],re[1]));$.push(te)}return $}}toGeoJSON($,W,te){return N.call(this,$,W,te)}}class Z{constructor($){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=$.length,this._features=$}feature($){return new q(this._features[$])}}var Q={exports:{}},j=o.pointGeometry,ie=o.vectorTile.VectorTileFeature,ae=he;function he(ne,$){this.options=$||{},this.features=ne,this.length=ne.length}function ue(ne,$){this.id=typeof ne.id=="number"?ne.id:void 0,this.type=ne.type,this.rawGeometry=ne.type===1?[ne.geometry]:ne.geometry,this.properties=ne.tags,this.extent=$||4096}he.prototype.feature=function(ne){return new ue(this.features[ne],this.options.extent)},ue.prototype.loadGeometry=function(){var ne=this.rawGeometry;this.geometry=[];for(var $=0;$<ne.length;$++){for(var W=ne[$],te=[],re=0;re<W.length;re++)te.push(new j(W[re][0],W[re][1]));this.geometry.push(te)}return this.geometry},ue.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ne=this.geometry,$=1/0,W=-1/0,te=1/0,re=-1/0,ge=0;ge<ne.length;ge++)for(var Se=ne[ge],xe=0;xe<Se.length;xe++){var _e=Se[xe];$=Math.min($,_e.x),W=Math.max(W,_e.x),te=Math.min(te,_e.y),re=Math.max(re,_e.y)}return[$,te,W,re]},ue.prototype.toGeoJSON=ie.prototype.toGeoJSON;var fe=o.pbf,ye=ae;function He(ne){var $=new fe;return function(W,te){for(var re in W.layers)te.writeMessage(3,we,W.layers[re])}(ne,$),$.finish()}function we(ne,$){var W;$.writeVarintField(15,ne.version||1),$.writeStringField(1,ne.name||""),$.writeVarintField(5,ne.extent||4096);var te={keys:[],values:[],keycache:{},valuecache:{}};for(W=0;W<ne.length;W++)te.feature=ne.feature(W),$.writeMessage(2,it,te);var re=te.keys;for(W=0;W<re.length;W++)$.writeStringField(3,re[W]);var ge=te.values;for(W=0;W<ge.length;W++)$.writeMessage(4,$t,ge[W])}function it(ne,$){var W=ne.feature;W.id!==void 0&&$.writeVarintField(1,W.id),$.writeMessage(2,et,ne),$.writeVarintField(3,W.type),$.writeMessage(4,tr,W)}function et(ne,$){var W=ne.feature,te=ne.keys,re=ne.values,ge=ne.keycache,Se=ne.valuecache;for(var xe in W.properties){var _e=W.properties[xe],Te=ge[xe];if(_e!==null){Te===void 0&&(te.push(xe),ge[xe]=Te=te.length-1),$.writeVarint(Te);var Fe=typeof _e;Fe!=="string"&&Fe!=="boolean"&&Fe!=="number"&&(_e=JSON.stringify(_e));var Xe=Fe+":"+_e,Be=Se[Xe];Be===void 0&&(re.push(_e),Se[Xe]=Be=re.length-1),$.writeVarint(Be)}}}function Ct(ne,$){return($<<3)+(7&ne)}function zt(ne){return ne<<1^ne>>31}function tr(ne,$){for(var W=ne.loadGeometry(),te=ne.type,re=0,ge=0,Se=W.length,xe=0;xe<Se;xe++){var _e=W[xe],Te=1;te===1&&(Te=_e.length),$.writeVarint(Ct(1,Te));for(var Fe=te===3?_e.length-1:_e.length,Xe=0;Xe<Fe;Xe++){Xe===1&&te!==1&&$.writeVarint(Ct(2,Fe-1));var Be=_e[Xe].x-re,At=_e[Xe].y-ge;$.writeVarint(zt(Be)),$.writeVarint(zt(At)),re+=Be,ge+=At}te===3&&$.writeVarint(Ct(7,1))}}function $t(ne,$){var W=typeof ne;W==="string"?$.writeStringField(1,ne):W==="boolean"?$.writeBooleanField(7,ne):W==="number"&&(ne%1!=0?$.writeDoubleField(3,ne):ne<0?$.writeSVarintField(6,ne):$.writeVarintField(5,ne))}function Lr(ne,$,W,te,re,ge){if(re-te<=W)return;const Se=te+re>>1;Ir(ne,$,Se,te,re,ge%2),Lr(ne,$,W,te,Se-1,ge+1),Lr(ne,$,W,Se+1,re,ge+1)}function Ir(ne,$,W,te,re,ge){for(;re>te;){if(re-te>600){const Te=re-te+1,Fe=W-te+1,Xe=Math.log(Te),Be=.5*Math.exp(2*Xe/3),At=.5*Math.sqrt(Xe*Be*(Te-Be)/Te)*(Fe-Te/2<0?-1:1);Ir(ne,$,W,Math.max(te,Math.floor(W-Fe*Be/Te+At)),Math.min(re,Math.floor(W+(Te-Fe)*Be/Te+At)),ge)}const Se=$[2*W+ge];let xe=te,_e=re;for(Cr(ne,$,te,W),$[2*re+ge]>Se&&Cr(ne,$,te,re);xe<_e;){for(Cr(ne,$,xe,_e),xe++,_e--;$[2*xe+ge]<Se;)xe++;for(;$[2*_e+ge]>Se;)_e--}$[2*te+ge]===Se?Cr(ne,$,te,_e):(_e++,Cr(ne,$,_e,re)),_e<=W&&(te=_e+1),W<=_e&&(re=_e-1)}}function Cr(ne,$,W,te){dr(ne,W,te),dr($,2*W,2*te),dr($,2*W+1,2*te+1)}function dr(ne,$,W){const te=ne[$];ne[$]=ne[W],ne[W]=te}function Ge(ne,$,W,te){const re=ne-W,ge=$-te;return re*re+ge*ge}Q.exports=He,Q.exports.fromVectorTileJs=He,Q.exports.fromGeojsonVt=function(ne,$){$=$||{};var W={};for(var te in ne)W[te]=new ye(ne[te].features,$),W[te].name=te,W[te].version=$.version,W[te].extent=$.extent;return He({layers:W})},Q.exports.GeoJSONWrapper=ye;const nt=ne=>ne[0],Ye=ne=>ne[1];class ft{constructor($,W=nt,te=Ye,re=64,ge=Float64Array){this.nodeSize=re,this.points=$;const Se=$.length<65536?Uint16Array:Uint32Array,xe=this.ids=new Se($.length),_e=this.coords=new ge(2*$.length);for(let Te=0;Te<$.length;Te++)xe[Te]=Te,_e[2*Te]=W($[Te]),_e[2*Te+1]=te($[Te]);Lr(xe,_e,re,0,xe.length-1,0)}range($,W,te,re){return function(ge,Se,xe,_e,Te,Fe,Xe){const Be=[0,ge.length-1,0],At=[];let Pt,_t;for(;Be.length;){const Ut=Be.pop(),qt=Be.pop(),gr=Be.pop();if(qt-gr<=Xe){for(let _r=gr;_r<=qt;_r++)Pt=Se[2*_r],_t=Se[2*_r+1],Pt>=xe&&Pt<=Te&&_t>=_e&&_t<=Fe&&At.push(ge[_r]);continue}const Xt=Math.floor((gr+qt)/2);Pt=Se[2*Xt],_t=Se[2*Xt+1],Pt>=xe&&Pt<=Te&&_t>=_e&&_t<=Fe&&At.push(ge[Xt]);const ar=(Ut+1)%2;(Ut===0?xe<=Pt:_e<=_t)&&(Be.push(gr),Be.push(Xt-1),Be.push(ar)),(Ut===0?Te>=Pt:Fe>=_t)&&(Be.push(Xt+1),Be.push(qt),Be.push(ar))}return At}(this.ids,this.coords,$,W,te,re,this.nodeSize)}within($,W,te){return function(re,ge,Se,xe,_e,Te){const Fe=[0,re.length-1,0],Xe=[],Be=_e*_e;for(;Fe.length;){const At=Fe.pop(),Pt=Fe.pop(),_t=Fe.pop();if(Pt-_t<=Te){for(let ar=_t;ar<=Pt;ar++)Ge(ge[2*ar],ge[2*ar+1],Se,xe)<=Be&&Xe.push(re[ar]);continue}const Ut=Math.floor((_t+Pt)/2),qt=ge[2*Ut],gr=ge[2*Ut+1];Ge(qt,gr,Se,xe)<=Be&&Xe.push(re[Ut]);const Xt=(At+1)%2;(At===0?Se-_e<=qt:xe-_e<=gr)&&(Fe.push(_t),Fe.push(Ut-1),Fe.push(Xt)),(At===0?Se+_e>=qt:xe+_e>=gr)&&(Fe.push(Ut+1),Fe.push(Pt),Fe.push(Xt))}return Xe}(this.ids,this.coords,$,W,te,this.nodeSize)}}const ut={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ne=>ne},se=Math.fround||(me=new Float32Array(1),ne=>(me[0]=+ne,me[0]));var me;class Ae{constructor($){this.options=Bt(Object.create(ut),$),this.trees=new Array(this.options.maxZoom+1)}load($){const{log:W,minZoom:te,maxZoom:re,nodeSize:ge}=this.options;W&&console.time("total time");const Se=`prepare ${$.length} points`;W&&console.time(Se),this.points=$;let xe=[];for(let _e=0;_e<$.length;_e++)$[_e].geometry&&xe.push(We($[_e],_e));this.trees[re+1]=new ft(xe,Lt,Ot,ge,Float32Array),W&&console.timeEnd(Se);for(let _e=re;_e>=te;_e--){const Te=+Date.now();xe=this._cluster(xe,_e),this.trees[_e]=new ft(xe,Lt,Ot,ge,Float32Array),W&&console.log("z%d: %d clusters in %dms",_e,xe.length,+Date.now()-Te)}return W&&console.timeEnd("total time"),this}getClusters($,W){let te=(($[0]+180)%360+360)%360-180;const re=Math.max(-90,Math.min(90,$[1]));let ge=$[2]===180?180:(($[2]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,$[3]));if($[2]-$[0]>=360)te=-180,ge=180;else if(te>ge){const Fe=this.getClusters([te,re,180,Se],W),Xe=this.getClusters([-180,re,ge,Se],W);return Fe.concat(Xe)}const xe=this.trees[this._limitZoom(W)],_e=xe.range(qe(te),at(Se),qe(ge),at(re)),Te=[];for(const Fe of _e){const Xe=xe.points[Fe];Te.push(Xe.numPoints?Ke(Xe):this.points[Xe.index])}return Te}getChildren($){const W=this._getOriginId($),te=this._getOriginZoom($),re="No cluster with the specified id.",ge=this.trees[te];if(!ge)throw new Error(re);const Se=ge.points[W];if(!Se)throw new Error(re);const xe=this.options.radius/(this.options.extent*Math.pow(2,te-1)),_e=ge.within(Se.x,Se.y,xe),Te=[];for(const Fe of _e){const Xe=ge.points[Fe];Xe.parentId===$&&Te.push(Xe.numPoints?Ke(Xe):this.points[Xe.index])}if(Te.length===0)throw new Error(re);return Te}getLeaves($,W,te){const re=[];return this._appendLeaves(re,$,W=W||10,te=te||0,0),re}getTile($,W,te){const re=this.trees[this._limitZoom($)],ge=Math.pow(2,$),{extent:Se,radius:xe}=this.options,_e=xe/Se,Te=(te-_e)/ge,Fe=(te+1+_e)/ge,Xe={features:[]};return this._addTileFeatures(re.range((W-_e)/ge,Te,(W+1+_e)/ge,Fe),re.points,W,te,ge,Xe),W===0&&this._addTileFeatures(re.range(1-_e/ge,Te,1,Fe),re.points,ge,te,ge,Xe),W===ge-1&&this._addTileFeatures(re.range(0,Te,_e/ge,Fe),re.points,-1,te,ge,Xe),Xe.features.length?Xe:null}getClusterExpansionZoom($){let W=this._getOriginZoom($)-1;for(;W<=this.options.maxZoom;){const te=this.getChildren($);if(W++,te.length!==1)break;$=te[0].properties.cluster_id}return W}_appendLeaves($,W,te,re,ge){const Se=this.getChildren(W);for(const xe of Se){const _e=xe.properties;if(_e&&_e.cluster?ge+_e.point_count<=re?ge+=_e.point_count:ge=this._appendLeaves($,_e.cluster_id,te,re,ge):ge<re?ge++:$.push(xe),$.length===te)break}return ge}_addTileFeatures($,W,te,re,ge,Se){for(const xe of $){const _e=W[xe],Te=_e.numPoints;let Fe,Xe,Be;if(Te)Fe=dt(_e),Xe=_e.x,Be=_e.y;else{const _t=this.points[_e.index];Fe=_t.properties,Xe=qe(_t.geometry.coordinates[0]),Be=at(_t.geometry.coordinates[1])}const At={type:1,geometry:[[Math.round(this.options.extent*(Xe*ge-te)),Math.round(this.options.extent*(Be*ge-re))]],tags:Fe};let Pt;Te?Pt=_e.id:this.options.generateId?Pt=_e.index:this.points[_e.index].id&&(Pt=this.points[_e.index].id),Pt!==void 0&&(At.id=Pt),Se.features.push(At)}}_limitZoom($){return Math.max(this.options.minZoom,Math.min(Math.floor(+$),this.options.maxZoom+1))}_cluster($,W){const te=[],{radius:re,extent:ge,reduce:Se,minPoints:xe}=this.options,_e=re/(ge*Math.pow(2,W));for(let Te=0;Te<$.length;Te++){const Fe=$[Te];if(Fe.zoom<=W)continue;Fe.zoom=W;const Xe=this.trees[W+1],Be=Xe.within(Fe.x,Fe.y,_e),At=Fe.numPoints||1;let Pt=At;for(const _t of Be){const Ut=Xe.points[_t];Ut.zoom>W&&(Pt+=Ut.numPoints||1)}if(Pt>At&&Pt>=xe){let _t=Fe.x*At,Ut=Fe.y*At,qt=Se&&At>1?this._map(Fe,!0):null;const gr=(Te<<5)+(W+1)+this.points.length;for(const Xt of Be){const ar=Xe.points[Xt];if(ar.zoom<=W)continue;ar.zoom=W;const _r=ar.numPoints||1;_t+=ar.x*_r,Ut+=ar.y*_r,ar.parentId=gr,Se&&(qt||(qt=this._map(Fe,!0)),Se(qt,this._map(ar)))}Fe.parentId=gr,te.push(Ve(_t/Pt,Ut/Pt,gr,Pt,qt))}else if(te.push(Fe),Pt>1)for(const _t of Be){const Ut=Xe.points[_t];Ut.zoom<=W||(Ut.zoom=W,te.push(Ut))}}return te}_getOriginId($){return $-this.points.length>>5}_getOriginZoom($){return($-this.points.length)%32}_map($,W){if($.numPoints)return W?Bt({},$.properties):$.properties;const te=this.points[$.index].properties,re=this.options.map(te);return W&&re===te?Bt({},re):re}}function Ve(ne,$,W,te,re){return{x:se(ne),y:se($),zoom:1/0,id:W,parentId:-1,numPoints:te,properties:re}}function We(ne,$){const[W,te]=ne.geometry.coordinates;return{x:se(qe(W)),y:se(at(te)),zoom:1/0,index:$,parentId:-1}}function Ke(ne){return{type:"Feature",id:ne.id,properties:dt(ne),geometry:{type:"Point",coordinates:[($=ne.x,360*($-.5)),Qe(ne.y)]}};var $}function dt(ne){const $=ne.numPoints,W=$>=1e4?`${Math.round($/1e3)}k`:$>=1e3?Math.round($/100)/10+"k":$;return Bt(Bt({},ne.properties),{cluster:!0,cluster_id:ne.id,point_count:$,point_count_abbreviated:W})}function qe(ne){return ne/360+.5}function at(ne){const $=Math.sin(ne*Math.PI/180),W=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return W<0?0:W>1?1:W}function Qe(ne){const $=(180-360*ne)*Math.PI/180;return 360*Math.atan(Math.exp($))/Math.PI-90}function Bt(ne,$){for(const W in $)ne[W]=$[W];return ne}function Lt(ne){return ne.x}function Ot(ne){return ne.y}function Ht(ne,$,W,te){for(var re,ge=te,Se=W-$>>1,xe=W-$,_e=ne[$],Te=ne[$+1],Fe=ne[W],Xe=ne[W+1],Be=$+3;Be<W;Be+=3){var At=ir(ne[Be],ne[Be+1],_e,Te,Fe,Xe);if(At>ge)re=Be,ge=At;else if(At===ge){var Pt=Math.abs(Be-Se);Pt<xe&&(re=Be,xe=Pt)}}ge>te&&(re-$>3&&Ht(ne,$,re,te),ne[re+2]=ge,W-re>3&&Ht(ne,re,W,te))}function ir(ne,$,W,te,re,ge){var Se=re-W,xe=ge-te;if(Se!==0||xe!==0){var _e=((ne-W)*Se+($-te)*xe)/(Se*Se+xe*xe);_e>1?(W=re,te=ge):_e>0&&(W+=Se*_e,te+=xe*_e)}return(Se=ne-W)*Se+(xe=$-te)*xe}function vr(ne,$,W,te){var re={id:ne===void 0?null:ne,type:$,geometry:W,tags:te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ge){var Se=ge.geometry,xe=ge.type;if(xe==="Point"||xe==="MultiPoint"||xe==="LineString")ke(ge,Se);else if(xe==="Polygon"||xe==="MultiLineString")for(var _e=0;_e<Se.length;_e++)ke(ge,Se[_e]);else if(xe==="MultiPolygon")for(_e=0;_e<Se.length;_e++)for(var Te=0;Te<Se[_e].length;Te++)ke(ge,Se[_e][Te])}(re),re}function ke(ne,$){for(var W=0;W<$.length;W+=3)ne.minX=Math.min(ne.minX,$[W]),ne.minY=Math.min(ne.minY,$[W+1]),ne.maxX=Math.max(ne.maxX,$[W]),ne.maxY=Math.max(ne.maxY,$[W+1])}function tt(ne,$,W,te){if($.geometry){var re=$.geometry.coordinates,ge=$.geometry.type,Se=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2),xe=[],_e=$.id;if(W.promoteId?_e=$.properties[W.promoteId]:W.generateId&&(_e=te||0),ge==="Point")Ii(re,xe);else if(ge==="MultiPoint")for(var Te=0;Te<re.length;Te++)Ii(re[Te],xe);else if(ge==="LineString")Oi(re,xe,Se,!1);else if(ge==="MultiLineString"){if(W.lineMetrics){for(Te=0;Te<re.length;Te++)Oi(re[Te],xe=[],Se,!1),ne.push(vr(_e,"LineString",xe,$.properties));return}hr(re,xe,Se,!1)}else if(ge==="Polygon")hr(re,xe,Se,!0);else{if(ge!=="MultiPolygon"){if(ge==="GeometryCollection"){for(Te=0;Te<$.geometry.geometries.length;Te++)tt(ne,{id:_e,geometry:$.geometry.geometries[Te],properties:$.properties},W,te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(Te=0;Te<re.length;Te++){var Fe=[];hr(re[Te],Fe,Se,!0),xe.push(Fe)}}ne.push(vr(_e,ge,xe,$.properties))}}function Ii(ne,$){$.push(Bi(ne[0])),$.push(en(ne[1])),$.push(0)}function Oi(ne,$,W,te){for(var re,ge,Se=0,xe=0;xe<ne.length;xe++){var _e=Bi(ne[xe][0]),Te=en(ne[xe][1]);$.push(_e),$.push(Te),$.push(0),xe>0&&(Se+=te?(re*Te-_e*ge)/2:Math.sqrt(Math.pow(_e-re,2)+Math.pow(Te-ge,2))),re=_e,ge=Te}var Fe=$.length-3;$[2]=1,Ht($,0,Fe,W),$[Fe+2]=1,$.size=Math.abs(Se),$.start=0,$.end=$.size}function hr(ne,$,W,te){for(var re=0;re<ne.length;re++){var ge=[];Oi(ne[re],ge,W,te),$.push(ge)}}function Bi(ne){return ne/360+.5}function en(ne){var $=Math.sin(ne*Math.PI/180),W=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return W<0?0:W>1?1:W}function Wr(ne,$,W,te,re,ge,Se,xe){if(te/=$,ge>=(W/=$)&&Se<te)return ne;if(Se<W||ge>=te)return null;for(var _e=[],Te=0;Te<ne.length;Te++){var Fe=ne[Te],Xe=Fe.geometry,Be=Fe.type,At=re===0?Fe.minX:Fe.minY,Pt=re===0?Fe.maxX:Fe.maxY;if(At>=W&&Pt<te)_e.push(Fe);else if(!(Pt<W||At>=te)){var _t=[];if(Be==="Point"||Be==="MultiPoint")Pi(Xe,_t,W,te,re);else if(Be==="LineString")st(Xe,_t,W,te,re,!1,xe.lineMetrics);else if(Be==="MultiLineString")Jt(Xe,_t,W,te,re,!1);else if(Be==="Polygon")Jt(Xe,_t,W,te,re,!0);else if(Be==="MultiPolygon")for(var Ut=0;Ut<Xe.length;Ut++){var qt=[];Jt(Xe[Ut],qt,W,te,re,!0),qt.length&&_t.push(qt)}if(_t.length){if(xe.lineMetrics&&Be==="LineString"){for(Ut=0;Ut<_t.length;Ut++)_e.push(vr(Fe.id,Be,_t[Ut],Fe.tags));continue}Be!=="LineString"&&Be!=="MultiLineString"||(_t.length===1?(Be="LineString",_t=_t[0]):Be="MultiLineString"),Be!=="Point"&&Be!=="MultiPoint"||(Be=_t.length===3?"Point":"MultiPoint"),_e.push(vr(Fe.id,Be,_t,Fe.tags))}}}return _e.length?_e:null}function Pi(ne,$,W,te,re){for(var ge=0;ge<ne.length;ge+=3){var Se=ne[ge+re];Se>=W&&Se<=te&&($.push(ne[ge]),$.push(ne[ge+1]),$.push(ne[ge+2]))}}function st(ne,$,W,te,re,ge,Se){for(var xe,_e,Te=nr(ne),Fe=re===0?So:Yt,Xe=ne.start,Be=0;Be<ne.length-3;Be+=3){var At=ne[Be],Pt=ne[Be+1],_t=ne[Be+2],Ut=ne[Be+3],qt=ne[Be+4],gr=re===0?At:Pt,Xt=re===0?Ut:qt,ar=!1;Se&&(xe=Math.sqrt(Math.pow(At-Ut,2)+Math.pow(Pt-qt,2))),gr<W?Xt>W&&(_e=Fe(Te,At,Pt,Ut,qt,W),Se&&(Te.start=Xe+xe*_e)):gr>te?Xt<te&&(_e=Fe(Te,At,Pt,Ut,qt,te),Se&&(Te.start=Xe+xe*_e)):Wi(Te,At,Pt,_t),Xt<W&&gr>=W&&(_e=Fe(Te,At,Pt,Ut,qt,W),ar=!0),Xt>te&&gr<=te&&(_e=Fe(Te,At,Pt,Ut,qt,te),ar=!0),!ge&&ar&&(Se&&(Te.end=Xe+xe*_e),$.push(Te),Te=nr(ne)),Se&&(Xe+=xe)}var _r=ne.length-3;At=ne[_r],Pt=ne[_r+1],_t=ne[_r+2],(gr=re===0?At:Pt)>=W&&gr<=te&&Wi(Te,At,Pt,_t),_r=Te.length-3,ge&&_r>=3&&(Te[_r]!==Te[0]||Te[_r+1]!==Te[1])&&Wi(Te,Te[0],Te[1],Te[2]),Te.length&&$.push(Te)}function nr(ne){var $=[];return $.size=ne.size,$.start=ne.start,$.end=ne.end,$}function Jt(ne,$,W,te,re,ge){for(var Se=0;Se<ne.length;Se++)st(ne[Se],$,W,te,re,ge,!1)}function Wi(ne,$,W,te){ne.push($),ne.push(W),ne.push(te)}function So(ne,$,W,te,re,ge){var Se=(ge-$)/(te-$);return ne.push(ge),ne.push(W+(re-W)*Se),ne.push(1),Se}function Yt(ne,$,W,te,re,ge){var Se=(ge-W)/(re-W);return ne.push($+(te-$)*Se),ne.push(ge),ne.push(1),Se}function Ka(ne,$){for(var W=[],te=0;te<ne.length;te++){var re,ge=ne[te],Se=ge.type;if(Se==="Point"||Se==="MultiPoint"||Se==="LineString")re=Fi(ge.geometry,$);else if(Se==="MultiLineString"||Se==="Polygon"){re=[];for(var xe=0;xe<ge.geometry.length;xe++)re.push(Fi(ge.geometry[xe],$))}else if(Se==="MultiPolygon")for(re=[],xe=0;xe<ge.geometry.length;xe++){for(var _e=[],Te=0;Te<ge.geometry[xe].length;Te++)_e.push(Fi(ge.geometry[xe][Te],$));re.push(_e)}W.push(vr(ge.id,Se,re,ge.tags))}return W}function Fi(ne,$){var W=[];W.size=ne.size,ne.start!==void 0&&(W.start=ne.start,W.end=ne.end);for(var te=0;te<ne.length;te+=3)W.push(ne[te]+$,ne[te+1],ne[te+2]);return W}function Fs(ne,$){if(ne.transformed)return ne;var W,te,re,ge=1<<ne.z,Se=ne.x,xe=ne.y;for(W=0;W<ne.features.length;W++){var _e=ne.features[W],Te=_e.geometry,Fe=_e.type;if(_e.geometry=[],Fe===1)for(te=0;te<Te.length;te+=2)_e.geometry.push(Si(Te[te],Te[te+1],$,ge,Se,xe));else for(te=0;te<Te.length;te++){var Xe=[];for(re=0;re<Te[te].length;re+=2)Xe.push(Si(Te[te][re],Te[te][re+1],$,ge,Se,xe));_e.geometry.push(Xe)}}return ne.transformed=!0,ne}function Si(ne,$,W,te,re,ge){return[Math.round(W*(ne*te-re)),Math.round(W*($*te-ge))]}function un(ne,$,W,te,re){for(var ge=$===re.maxZoom?0:re.tolerance/((1<<$)*re.extent),Se={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:W,y:te,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},xe=0;xe<ne.length;xe++){Se.numFeatures++,Br(Se,ne[xe],ge,re);var _e=ne[xe].minX,Te=ne[xe].minY,Fe=ne[xe].maxX,Xe=ne[xe].maxY;_e<Se.minX&&(Se.minX=_e),Te<Se.minY&&(Se.minY=Te),Fe>Se.maxX&&(Se.maxX=Fe),Xe>Se.maxY&&(Se.maxY=Xe)}return Se}function Br(ne,$,W,te){var re=$.geometry,ge=$.type,Se=[];if(ge==="Point"||ge==="MultiPoint")for(var xe=0;xe<re.length;xe+=3)Se.push(re[xe]),Se.push(re[xe+1]),ne.numPoints++,ne.numSimplified++;else if(ge==="LineString")Ns(Se,re,ne,W,!1,!1);else if(ge==="MultiLineString"||ge==="Polygon")for(xe=0;xe<re.length;xe++)Ns(Se,re[xe],ne,W,ge==="Polygon",xe===0);else if(ge==="MultiPolygon")for(var _e=0;_e<re.length;_e++){var Te=re[_e];for(xe=0;xe<Te.length;xe++)Ns(Se,Te[xe],ne,W,!0,xe===0)}if(Se.length){var Fe=$.tags||null;if(ge==="LineString"&&te.lineMetrics){for(var Xe in Fe={},$.tags)Fe[Xe]=$.tags[Xe];Fe.mapbox_clip_start=re.start/re.size,Fe.mapbox_clip_end=re.end/re.size}var Be={geometry:Se,type:ge==="Polygon"||ge==="MultiPolygon"?3:ge==="LineString"||ge==="MultiLineString"?2:1,tags:Fe};$.id!==null&&(Be.id=$.id),ne.features.push(Be)}}function Ns(ne,$,W,te,re,ge){var Se=te*te;if(te>0&&$.size<(re?Se:te))W.numPoints+=$.length/3;else{for(var xe=[],_e=0;_e<$.length;_e+=3)(te===0||$[_e+2]>Se)&&(W.numSimplified++,xe.push($[_e]),xe.push($[_e+1])),W.numPoints++;re&&function(Te,Fe){for(var Xe=0,Be=0,At=Te.length,Pt=At-2;Be<At;Pt=Be,Be+=2)Xe+=(Te[Be]-Te[Pt])*(Te[Be+1]+Te[Pt+1]);if(Xe>0===Fe)for(Be=0,At=Te.length;Be<At/2;Be+=2){var _t=Te[Be],Ut=Te[Be+1];Te[Be]=Te[At-2-Be],Te[Be+1]=Te[At-1-Be],Te[At-2-Be]=_t,Te[At-1-Be]=Ut}}(xe,ge),ne.push(xe)}}function Ca(ne,$){var W=($=this.options=function(re,ge){for(var Se in ge)re[Se]=ge[Se];return re}(Object.create(this.options),$)).debug;if(W&&console.time("preprocess data"),$.maxZoom<0||$.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if($.promoteId&&$.generateId)throw new Error("promoteId and generateId cannot be used together.");var te=function(re,ge){var Se=[];if(re.type==="FeatureCollection")for(var xe=0;xe<re.features.length;xe++)tt(Se,re.features[xe],ge,xe);else tt(Se,re.type==="Feature"?re:{geometry:re},ge);return Se}(ne,$);this.tiles={},this.tileCoords=[],W&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",$.indexMaxZoom,$.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),te=function(re,ge){var Se=ge.buffer/ge.extent,xe=re,_e=Wr(re,1,-1-Se,Se,0,-1,2,ge),Te=Wr(re,1,1-Se,2+Se,0,-1,2,ge);return(_e||Te)&&(xe=Wr(re,1,-Se,1+Se,0,-1,2,ge)||[],_e&&(xe=Ka(_e,1).concat(xe)),Te&&(xe=xe.concat(Ka(Te,-1)))),xe}(te,$),te.length&&this.splitTile(te,0,0,0),W&&(te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ko(ne,$,W){return 32*((1<<ne)*W+$)+ne}function Jo(ne,$){const W=ne.tileID.canonical;if(!this._geoJSONIndex)return $(null,null);const te=this._geoJSONIndex.getTile(W.z,W.x,W.y);if(!te)return $(null,null);const re=new Z(te.features);let ge=Q.exports(re);ge.byteOffset===0&&ge.byteLength===ge.buffer.byteLength||(ge=new Uint8Array(ge)),$(null,{vectorTile:re,rawData:ge.buffer})}Ca.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Ca.prototype.splitTile=function(ne,$,W,te,re,ge,Se){for(var xe=[ne,$,W,te],_e=this.options,Te=_e.debug;xe.length;){te=xe.pop(),W=xe.pop(),$=xe.pop(),ne=xe.pop();var Fe=1<<$,Xe=Ko($,W,te),Be=this.tiles[Xe];if(!Be&&(Te>1&&console.time("creation"),Be=this.tiles[Xe]=un(ne,$,W,te,_e),this.tileCoords.push({z:$,x:W,y:te}),Te)){Te>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",$,W,te,Be.numFeatures,Be.numPoints,Be.numSimplified),console.timeEnd("creation"));var At="z"+$;this.stats[At]=(this.stats[At]||0)+1,this.total++}if(Be.source=ne,re){if($===_e.maxZoom||$===re)continue;var Pt=1<<re-$;if(W!==Math.floor(ge/Pt)||te!==Math.floor(Se/Pt))continue}else if($===_e.indexMaxZoom||Be.numPoints<=_e.indexMaxPoints)continue;if(Be.source=null,ne.length!==0){Te>1&&console.time("clipping");var _t,Ut,qt,gr,Xt,ar,_r=.5*_e.buffer/_e.extent,Gr=.5-_r,Ni=.5+_r,ni=1+_r;_t=Ut=qt=gr=null,Xt=Wr(ne,Fe,W-_r,W+Ni,0,Be.minX,Be.maxX,_e),ar=Wr(ne,Fe,W+Gr,W+ni,0,Be.minX,Be.maxX,_e),ne=null,Xt&&(_t=Wr(Xt,Fe,te-_r,te+Ni,1,Be.minY,Be.maxY,_e),Ut=Wr(Xt,Fe,te+Gr,te+ni,1,Be.minY,Be.maxY,_e),Xt=null),ar&&(qt=Wr(ar,Fe,te-_r,te+Ni,1,Be.minY,Be.maxY,_e),gr=Wr(ar,Fe,te+Gr,te+ni,1,Be.minY,Be.maxY,_e),ar=null),Te>1&&console.timeEnd("clipping"),xe.push(_t||[],$+1,2*W,2*te),xe.push(Ut||[],$+1,2*W,2*te+1),xe.push(qt||[],$+1,2*W+1,2*te),xe.push(gr||[],$+1,2*W+1,2*te+1)}}},Ca.prototype.getTile=function(ne,$,W){var te=this.options,re=te.extent,ge=te.debug;if(ne<0||ne>24)return null;var Se=1<<ne,xe=Ko(ne,$=($%Se+Se)%Se,W);if(this.tiles[xe])return Fs(this.tiles[xe],re);ge>1&&console.log("drilling down to z%d-%d-%d",ne,$,W);for(var _e,Te=ne,Fe=$,Xe=W;!_e&&Te>0;)Te--,Fe=Math.floor(Fe/2),Xe=Math.floor(Xe/2),_e=this.tiles[Ko(Te,Fe,Xe)];return _e&&_e.source?(ge>1&&console.log("found parent tile z%d-%d-%d",Te,Fe,Xe),ge>1&&console.time("drilling down"),this.splitTile(_e.source,Te,Fe,Xe,ne,$,W),ge>1&&console.timeEnd("drilling down"),this.tiles[xe]?Fs(this.tiles[xe],re):null):null};class Vs extends L{constructor($,W,te,re){super($,W,te,Jo),re&&(this.loadGeoJSON=re)}loadData($,W){var te;(te=this._pendingRequest)===null||te===void 0||te.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const re=!!($&&$.request&&$.request.collectResourceTiming)&&new o.RequestPerformance($.request);this._pendingCallback=W,this._pendingRequest=this.loadGeoJSON($,(ge,Se)=>{if(delete this._pendingCallback,delete this._pendingRequest,ge||!Se)return W(ge);if(typeof Se!="object")return W(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`));{M(Se,!0);try{if($.filter){const _e=o.createExpression($.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(_e.result==="error")throw new Error(_e.value.map(Fe=>`${Fe.key}: ${Fe.message}`).join(", "));Se={type:"FeatureCollection",features:Se.features.filter(Fe=>_e.value.evaluate({zoom:0},Fe))}}this._geoJSONIndex=$.cluster?new Ae(function({superclusterOptions:_e,clusterProperties:Te}){if(!Te||!_e)return _e;const Fe={},Xe={},Be={accumulated:null,zoom:0},At={properties:null},Pt=Object.keys(Te);for(const _t of Pt){const[Ut,qt]=Te[_t],gr=o.createExpression(qt),Xt=o.createExpression(typeof Ut=="string"?[Ut,["accumulated"],["get",_t]]:Ut);Fe[_t]=gr.value,Xe[_t]=Xt.value}return _e.map=_t=>{At.properties=_t;const Ut={};for(const qt of Pt)Ut[qt]=Fe[qt].evaluate(Be,At);return Ut},_e.reduce=(_t,Ut)=>{At.properties=Ut;for(const qt of Pt)Be.accumulated=_t[qt],_t[qt]=Xe[qt].evaluate(Be,At)},_e}($)).load(Se.features):function(_e,Te){return new Ca(_e,Te)}(Se,$.geojsonVtOptions)}catch(_e){return W(_e)}this.loaded={};const xe={};if(re){const _e=re.finish();_e&&(xe.resourceTiming={},xe.resourceTiming[$.source]=JSON.parse(JSON.stringify(_e)))}W(null,xe)}})}reloadTile($,W){const te=this.loaded;return te&&te[$.uid]?super.reloadTile($,W):this.loadTile($,W)}loadGeoJSON($,W){if($.request)return o.getJSON($.request,W);if(typeof $.data=="string")try{W(null,JSON.parse($.data))}catch{W(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`))}else W(new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource($,W){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),W()}getClusterExpansionZoom($,W){try{W(null,this._geoJSONIndex.getClusterExpansionZoom($.clusterId))}catch(te){W(te)}}getClusterChildren($,W){try{W(null,this._geoJSONIndex.getChildren($.clusterId))}catch(te){W(te)}}getClusterLeaves($,W){try{W(null,this._geoJSONIndex.getLeaves($.clusterId,$.limit,$.offset))}catch(te){W(te)}}}class Qo{constructor($){this.self=$,this.actor=new o.Actor($,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:L,geojson:Vs},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(W,te)=>{if(this.workerSourceTypes[W])throw new Error(`Worker source with name "${W}" already registered.`);this.workerSourceTypes[W]=te},this.self.registerRTLTextPlugin=W=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=W.applyArabicShaping,o.plugin.processBidirectionalText=W.processBidirectionalText,o.plugin.processStyledBidirectionalText=W.processStyledBidirectionalText}}setReferrer($,W){this.referrer=W}setImages($,W,te){this.availableImages[$]=W;for(const re in this.workerSources[$]){const ge=this.workerSources[$][re];for(const Se in ge)ge[Se].availableImages=W}te()}setLayers($,W,te){this.getLayerIndex($).replace(W),te()}updateLayers($,W,te){this.getLayerIndex($).update(W.layers,W.removedIds),te()}loadTile($,W,te){this.getWorkerSource($,W.type,W.source).loadTile(W,te)}loadDEMTile($,W,te){this.getDEMWorkerSource($,W.source).loadTile(W,te)}reloadTile($,W,te){this.getWorkerSource($,W.type,W.source).reloadTile(W,te)}abortTile($,W,te){this.getWorkerSource($,W.type,W.source).abortTile(W,te)}removeTile($,W,te){this.getWorkerSource($,W.type,W.source).removeTile(W,te)}removeDEMTile($,W){this.getDEMWorkerSource($,W.source).removeTile(W)}removeSource($,W,te){if(!this.workerSources[$]||!this.workerSources[$][W.type]||!this.workerSources[$][W.type][W.source])return;const re=this.workerSources[$][W.type][W.source];delete this.workerSources[$][W.type][W.source],re.removeSource!==void 0?re.removeSource(W,te):te()}loadWorkerSource($,W,te){try{this.self.importScripts(W.url),te()}catch(re){te(re.toString())}}syncRTLPluginState($,W,te){try{o.plugin.setState(W);const re=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&re!=null){this.self.importScripts(re);const ge=o.plugin.isParsed();te(ge?void 0:new Error(`RTL Text Plugin failed to import scripts from ${re}`),ge)}}catch(re){te(re.toString())}}getAvailableImages($){let W=this.availableImages[$];return W||(W=[]),W}getLayerIndex($){let W=this.layerIndexes[$];return W||(W=this.layerIndexes[$]=new v),W}getWorkerSource($,W,te){if(this.workerSources[$]||(this.workerSources[$]={}),this.workerSources[$][W]||(this.workerSources[$][W]={}),!this.workerSources[$][W][te]){const re={send:(ge,Se,xe)=>{this.actor.send(ge,Se,xe,$)}};this.workerSources[$][W][te]=new this.workerSourceTypes[W](re,this.getLayerIndex($),this.getAvailableImages($))}return this.workerSources[$][W][te]}getDEMWorkerSource($,W){return this.demWorkerSources[$]||(this.demWorkerSources[$]={}),this.demWorkerSources[$][W]||(this.demWorkerSources[$][W]=new I),this.demWorkerSources[$][W]}enforceCacheSizeLimit($,W){o.enforceCacheSizeLimit(W)}}return o.isWorker()&&(self.worker=new Qo(self)),Qo}),a(["./shared"],function(o){var f=p;function p(x){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var g,w,E=new Blob([""],{type:"text/javascript"}),P=URL.createObjectURL(E);try{w=new Worker(P),g=!0}catch{g=!1}return w&&w.terminate(),URL.revokeObjectURL(P),g}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var g=document.createElement("canvas");g.width=g.height=1;var w=g.getContext("2d");if(!w)return!1;var E=w.getImageData(0,0,1,1);return E&&E.width===g.width}()?(v[d=l&&l.failIfMajorPerformanceCaveat]===void 0&&(v[d]=function(g){var w,E=function(P){var z=document.createElement("canvas"),B=Object.create(p.webGLContextAttributes);return B.failIfMajorPerformanceCaveat=P,z.getContext("webgl",B)||z.getContext("experimental-webgl",B)}(g);if(!E)return!1;try{w=E.createShader(E.VERTEX_SHADER)}catch{return!1}return!(!w||E.isContextLost())&&(E.shaderSource(w,"void main() {}"),E.compileShader(w),E.getShaderParameter(w,E.COMPILE_STATUS)===!0)}(d)),v[d]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var d}(x)}var v={};function _(x,l){if(Array.isArray(x)){if(!Array.isArray(l)||x.length!==l.length)return!1;for(let d=0;d<x.length;d++)if(!_(x[d],l[d]))return!1;return!0}if(typeof x=="object"&&x!==null&&l!==null){if(typeof l!="object"||Object.keys(x).length!==Object.keys(l).length)return!1;for(const d in x)if(!_(x[d],l[d]))return!1;return!0}return x===l}p.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class y{static testProp(l){if(!y.docStyle)return l[0];for(let d=0;d<l.length;d++)if(l[d]in y.docStyle)return l[d];return l[0]}static create(l,d,g){const w=window.document.createElement(l);return d!==void 0&&(w.className=d),g&&g.appendChild(w),w}static createNS(l,d){return window.document.createElementNS(l,d)}static disableDrag(){y.docStyle&&y.selectProp&&(y.userSelect=y.docStyle[y.selectProp],y.docStyle[y.selectProp]="none")}static enableDrag(){y.docStyle&&y.selectProp&&(y.docStyle[y.selectProp]=y.userSelect)}static setTransform(l,d){l.style[y.transformProp]=d}static addEventListener(l,d,g,w={}){l.addEventListener(d,g,"passive"in w?w:w.capture)}static removeEventListener(l,d,g,w={}){l.removeEventListener(d,g,"passive"in w?w:w.capture)}static suppressClickInternal(l){l.preventDefault(),l.stopPropagation(),window.removeEventListener("click",y.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",y.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",y.suppressClickInternal,!0)},0)}static mousePos(l,d){const g=l.getBoundingClientRect();return new o.pointGeometry(d.clientX-g.left-l.clientLeft,d.clientY-g.top-l.clientTop)}static touchPos(l,d){const g=l.getBoundingClientRect(),w=[];for(let E=0;E<d.length;E++)w.push(new o.pointGeometry(d[E].clientX-g.left-l.clientLeft,d[E].clientY-g.top-l.clientTop));return w}static mouseButton(l){return l.button}static remove(l){l.parentNode&&l.parentNode.removeChild(l)}}y.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,y.selectProp=y.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),y.transformProp=y.testProp(["transform","WebkitTransform"]);class S{constructor(l){this._transformRequestFn=l}transformRequest(l,d){return this._transformRequestFn&&this._transformRequestFn(l,d)||{url:l}}normalizeSpriteURL(l,d,g){const w=function(E){const P=E.match(A);if(!P)throw new Error(`Unable to parse URL "${E}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(l);return w.path+=`${d}${g}`,function(E){const P=E.params.length?`?${E.params.join("&")}`:"";return`${E.protocol}://${E.authority}${E.path}${P}`}(w)}setTransformRequest(l){this._transformRequestFn=l}}const A=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class L{constructor(l,d,g,w){this.context=l,this.format=g,this.texture=l.gl.createTexture(),this.update(d,w)}update(l,d,g){const{width:w,height:E}=l,P=!(this.size&&this.size[0]===w&&this.size[1]===E||g),{context:z}=this,{gl:B}=z;if(this.useMipmap=!!(d&&d.useMipmap),B.bindTexture(B.TEXTURE_2D,this.texture),z.pixelStoreUnpackFlipY.set(!1),z.pixelStoreUnpack.set(1),z.pixelStoreUnpackPremultiplyAlpha.set(this.format===B.RGBA&&(!d||d.premultiply!==!1)),P)this.size=[w,E],l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||o.isImageBitmap(l)?B.texImage2D(B.TEXTURE_2D,0,this.format,this.format,B.UNSIGNED_BYTE,l):B.texImage2D(B.TEXTURE_2D,0,this.format,w,E,0,this.format,B.UNSIGNED_BYTE,l.data);else{const{x:V,y:G}=g||{x:0,y:0};l instanceof HTMLImageElement||l instanceof HTMLCanvasElement||l instanceof HTMLVideoElement||l instanceof ImageData||o.isImageBitmap(l)?B.texSubImage2D(B.TEXTURE_2D,0,V,G,B.RGBA,B.UNSIGNED_BYTE,l):B.texSubImage2D(B.TEXTURE_2D,0,V,G,w,E,B.RGBA,B.UNSIGNED_BYTE,l.data)}this.useMipmap&&this.isSizePowerOfTwo()&&B.generateMipmap(B.TEXTURE_2D)}bind(l,d,g){const{context:w}=this,{gl:E}=w;E.bindTexture(E.TEXTURE_2D,this.texture),g!==E.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(g=E.LINEAR),l!==this.filter&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,l),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,g||l),this.filter=l),d!==this.wrap&&(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,d),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:l}=this.context;l.deleteTexture(this.texture),this.texture=null}}function I(x){const{userImage:l}=x;return!!(l&&l.render&&l.render())&&(x.data.replace(new Uint8Array(l.data.buffer)),!0)}class M extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:d,callback:g}of this.requestors)this._notify(d,g);this.requestors=[]}}getImage(l){return this.images[l]}addImage(l,d){if(this.images[l])throw new Error(`Image id ${l} already exist, use updateImage instead`);this._validate(l,d)&&(this.images[l]=d)}_validate(l,d){let g=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),g=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),g=!1),this._validateContent(d.content,d)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),g=!1),g}_validateStretch(l,d){if(!l)return!0;let g=0;for(const w of l){if(w[0]<g||w[1]<w[0]||d<w[1])return!1;g=w[1]}return!0}_validateContent(l,d){return!(l&&(l.length!==4||l[0]<0||d.data.width<l[0]||l[1]<0||d.data.height<l[1]||l[2]<0||d.data.width<l[2]||l[3]<0||d.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,d){const g=this.images[l];if(g.data.width!==d.data.width||g.data.height!==d.data.height)throw new Error(`size mismatch between old image (${g.data.width}x${g.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=g.version+1,this.images[l]=d,this.updatedImages[l]=!0}removeImage(l){const d=this.images[l];delete this.images[l],delete this.patterns[l],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,d){let g=!0;if(!this.isLoaded())for(const w of l)this.images[w]||(g=!1);this.isLoaded()||g?this._notify(l,d):this.requestors.push({ids:l,callback:d})}_notify(l,d){const g={};for(const w of l){this.images[w]||this.fire(new o.Event("styleimagemissing",{id:w}));const E=this.images[w];E?g[w]={data:E.data.clone(),pixelRatio:E.pixelRatio,sdf:E.sdf,version:E.version,stretchX:E.stretchX,stretchY:E.stretchY,content:E.content,hasRenderCallback:!!(E.userImage&&E.userImage.render)}:o.warnOnce(`Image "${w}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}d(null,g)}getPixelSize(){const{width:l,height:d}=this.atlasImage;return{width:l,height:d}}getPattern(l){const d=this.patterns[l],g=this.getImage(l);if(!g)return null;if(d&&d.position.version===g.version)return d.position;if(d)d.position.version=g.version;else{const w={w:g.data.width+2,h:g.data.height+2,x:0,y:0},E=new o.ImagePosition(w,g);this.patterns[l]={bin:w,position:E}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const d=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new L(l,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const E in this.patterns)l.push(this.patterns[E].bin);const{w:d,h:g}=o.potpack(l),w=this.atlasImage;w.resize({width:d||1,height:g||1});for(const E in this.patterns){const{bin:P}=this.patterns[E],z=P.x+1,B=P.y+1,V=this.images[E].data,G=V.width,X=V.height;o.RGBAImage.copy(V,w,{x:0,y:0},{x:z,y:B},{width:G,height:X}),o.RGBAImage.copy(V,w,{x:0,y:X-1},{x:z,y:B-1},{width:G,height:1}),o.RGBAImage.copy(V,w,{x:0,y:0},{x:z,y:B+X},{width:G,height:1}),o.RGBAImage.copy(V,w,{x:G-1,y:0},{x:z-1,y:B},{width:1,height:X}),o.RGBAImage.copy(V,w,{x:0,y:0},{x:z+G,y:B},{width:1,height:X})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const d of l){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;const g=this.images[d];g||o.warnOnce(`Image with ID: "${d}" was not found`),I(g)&&this.updateImage(d,g)}}}const D=1e20;function O(x,l,d,g,w,E,P,z,B){for(let V=l;V<l+g;V++)N(x,d*E+V,E,w,P,z,B);for(let V=d;V<d+w;V++)N(x,V*E+l,1,g,P,z,B)}function N(x,l,d,g,w,E,P){E[0]=0,P[0]=-D,P[1]=D,w[0]=x[l];for(let z=1,B=0,V=0;z<g;z++){w[z]=x[l+z*d];const G=z*z;do{const X=E[B];V=(w[z]-w[X]+G-X*X)/(z-X)/2}while(V<=P[B]&&--B>-1);B++,E[B]=z,P[B]=V,P[B+1]=D}for(let z=0,B=0;z<g;z++){for(;P[B+1]<z;)B++;const V=E[B],G=z-V;x[l+z*d]=w[V]+G*G}}class q{constructor(l,d){this.requestManager=l,this.localIdeographFontFamily=d,this.entries={}}setURL(l){this.url=l}getGlyphs(l,d){const g=[];for(const w in l)for(const E of l[w])g.push({stack:w,id:E});o.asyncAll(g,({stack:w,id:E},P)=>{let z=this.entries[w];z||(z=this.entries[w]={glyphs:{},requests:{},ranges:{}});let B=z.glyphs[E];if(B!==void 0)return void P(null,{stack:w,id:E,glyph:B});if(B=this._tinySDF(z,w,E),B)return z.glyphs[E]=B,void P(null,{stack:w,id:E,glyph:B});const V=Math.floor(E/256);if(256*V>65535)return void P(new Error("glyphs > 65535 not supported"));if(z.ranges[V])return void P(null,{stack:w,id:E,glyph:B});let G=z.requests[V];G||(G=z.requests[V]=[],q.loadGlyphRange(w,V,this.url,this.requestManager,(X,K)=>{if(K){for(const ce in K)this._doesCharSupportLocalGlyph(+ce)||(z.glyphs[+ce]=K[+ce]);z.ranges[V]=!0}for(const ce of G)ce(X,K);delete z.requests[V]})),G.push((X,K)=>{X?P(X):K&&P(null,{stack:w,id:E,glyph:K[E]||null})})},(w,E)=>{if(w)d(w);else if(E){const P={};for(const{stack:z,id:B,glyph:V}of E)(P[z]||(P[z]={}))[B]=V&&{id:V.id,bitmap:V.bitmap.clone(),metrics:V.metrics};d(null,P)}})}_doesCharSupportLocalGlyph(l){return!!this.localIdeographFontFamily&&(o.unicodeBlockLookup["CJK Unified Ideographs"](l)||o.unicodeBlockLookup["Hangul Syllables"](l)||o.unicodeBlockLookup.Hiragana(l)||o.unicodeBlockLookup.Katakana(l))}_tinySDF(l,d,g){const w=this.localIdeographFontFamily;if(!w||!this._doesCharSupportLocalGlyph(g))return;let E=l.tinySDF;if(!E){let z="400";/bold/i.test(d)?z="900":/medium/i.test(d)?z="500":/light/i.test(d)&&(z="200"),E=l.tinySDF=new q.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:w,fontWeight:z})}const P=E.draw(String.fromCharCode(g));return{id:g,bitmap:new o.AlphaImage({width:P.width||30,height:P.height||30},P.data),metrics:{width:P.glyphWidth||24,height:P.glyphHeight||24,left:P.glyphLeft||0,top:P.glyphTop-27||-8,advance:P.glyphAdvance||24}}}}q.loadGlyphRange=function(x,l,d,g,w){const E=256*l,P=E+255,z=g.transformRequest(d.replace("{fontstack}",x).replace("{range}",`${E}-${P}`),o.ResourceType.Glyphs);o.getArrayBuffer(z,(B,V)=>{if(B)w(B);else if(V){const G={};for(const X of o.parseGlyphPbf(V))G[X.id]=X;w(null,G)}})},q.TinySDF=class{constructor({fontSize:x=24,buffer:l=3,radius:d=8,cutoff:g=.25,fontFamily:w="sans-serif",fontWeight:E="normal",fontStyle:P="normal"}={}){this.buffer=l,this.cutoff=g,this.radius=d;const z=this.size=x+4*l,B=this._createCanvas(z),V=this.ctx=B.getContext("2d",{willReadFrequently:!0});V.font=`${P} ${E} ${x}px ${w}`,V.textBaseline="alphabetic",V.textAlign="left",V.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(x){const l=document.createElement("canvas");return l.width=l.height=x,l}draw(x){const{width:l,actualBoundingBoxAscent:d,actualBoundingBoxDescent:g,actualBoundingBoxLeft:w,actualBoundingBoxRight:E}=this.ctx.measureText(x),P=Math.ceil(d),z=Math.min(this.size-this.buffer,Math.ceil(E-w)),B=Math.min(this.size-this.buffer,P+Math.ceil(g)),V=z+2*this.buffer,G=B+2*this.buffer,X=Math.max(V*G,0),K=new Uint8ClampedArray(X),ce={data:K,width:V,height:G,glyphWidth:z,glyphHeight:B,glyphTop:P,glyphLeft:0,glyphAdvance:l};if(z===0||B===0)return ce;const{ctx:oe,buffer:le,gridInner:be,gridOuter:Ce}=this;oe.clearRect(le,le,z,B),oe.fillText(x,le,le+P);const Pe=oe.getImageData(le,le,z,B);Ce.fill(D,0,X),be.fill(0,0,X);for(let de=0;de<B;de++)for(let Re=0;Re<z;Re++){const De=Pe.data[4*(de*z+Re)+3]/255;if(De===0)continue;const $e=(de+le)*V+Re+le;if(De===1)Ce[$e]=0,be[$e]=D;else{const Ue=.5-De;Ce[$e]=Ue>0?Ue*Ue:0,be[$e]=Ue<0?Ue*Ue:0}}O(Ce,0,0,V,G,V,this.f,this.v,this.z),O(be,le,le,z,B,V,this.f,this.v,this.z);for(let de=0;de<X;de++){const Re=Math.sqrt(Ce[de])-Math.sqrt(be[de]);K[de]=Math.round(255-255*(Re/this.radius+this.cutoff))}return ce}};const Z=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(x,l){return o.sphericalToCartesian(x.expression.evaluate(l))}interpolate(x,l,d){return{x:o.number(x.x,l.x,d),y:o.number(x.y,l.y,d),z:o.number(x.z,l.z,d)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)}),Q="-transition";class j extends o.Evented{constructor(l){super(),this._transitionable=new o.Transitionable(Z),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,d={}){if(!this._validate(o.validateLight,l,d))for(const g in l){const w=l[g];g.endsWith(Q)?this._transitionable.setTransition(g.slice(0,-Q.length),w):this._transitionable.setValue(g,w)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,g){return(!g||g.validate!==!1)&&o.emitValidationErrors(this,l.call(o.validateStyle,o.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class ie{constructor(l,d){this.width=l,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(l,d){const g=l.join(",")+String(d);return this.dashEntry[g]||(this.dashEntry[g]=this.addDash(l,d)),this.dashEntry[g]}getDashRanges(l,d,g){const w=[];let E=l.length%2==1?-l[l.length-1]*g:0,P=l[0]*g,z=!0;w.push({left:E,right:P,isDash:z,zeroLength:l[0]===0});let B=l[0];for(let V=1;V<l.length;V++){z=!z;const G=l[V];E=B*g,B+=G,P=B*g,w.push({left:E,right:P,isDash:z,zeroLength:G===0})}return w}addRoundDash(l,d,g){const w=d/2;for(let E=-g;E<=g;E++){const P=this.width*(this.nextRow+g+E);let z=0,B=l[z];for(let V=0;V<this.width;V++){V/B.right>1&&(B=l[++z]);const G=Math.abs(V-B.left),X=Math.abs(V-B.right),K=Math.min(G,X);let ce;const oe=E/g*(w+1);if(B.isDash){const le=w-Math.abs(oe);ce=Math.sqrt(K*K+le*le)}else ce=w-Math.sqrt(K*K+oe*oe);this.data[P+V]=Math.max(0,Math.min(255,ce+128))}}}addRegularDash(l){for(let z=l.length-1;z>=0;--z){const B=l[z],V=l[z+1];B.zeroLength?l.splice(z,1):V&&V.isDash===B.isDash&&(V.left=B.left,l.splice(z,1))}const d=l[0],g=l[l.length-1];d.isDash===g.isDash&&(d.left=g.left-this.width,g.right=d.right+this.width);const w=this.width*this.nextRow;let E=0,P=l[E];for(let z=0;z<this.width;z++){z/P.right>1&&(P=l[++E]);const B=Math.abs(z-P.left),V=Math.abs(z-P.right),G=Math.min(B,V);this.data[w+z]=Math.max(0,Math.min(255,(P.isDash?G:-G)+128))}}addDash(l,d){const g=d?7:0,w=2*g+1;if(this.nextRow+w>this.height)return o.warnOnce("LineAtlas out of space"),null;let E=0;for(let z=0;z<l.length;z++)E+=l[z];if(E!==0){const z=this.width/E,B=this.getDashRanges(l,this.width,z);d?this.addRoundDash(B,z,g):this.addRegularDash(B)}const P={y:(this.nextRow+g+.5)/this.height,height:2*g/this.height,width:E};return this.nextRow+=w,this.dirty=!0,P}bind(l){const d=l.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}class ae{constructor(l,d){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const g=this.workerPool.acquire(this.id);for(let w=0;w<g.length;w++){const E=new ae.Actor(g[w],d,this.id);E.name=`Worker ${w}`,this.actors.push(E)}if(!this.actors.length)throw new Error("No actors found")}broadcast(l,d,g){o.asyncAll(this.actors,(w,E)=>{w.send(l,d,E)},g=g||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function he(x,l,d){const g=function(w,E){if(w)return d(w);if(E){const P=o.pick(o.extend(E,x),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);E.vector_layers&&(P.vectorLayers=E.vector_layers,P.vectorLayerIds=P.vectorLayers.map(z=>z.id)),d(null,P)}};return x.url?o.getJSON(l.transformRequest(x.url,o.ResourceType.Source),g):o.exported.frame(()=>g(null,x))}ae.Actor=o.Actor;class ue{constructor(l,d,g){this.bounds=o.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=d||0,this.maxzoom=g||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const d=Math.pow(2,l.z),g=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*d),w=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*d),E=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*d),P=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*d);return l.x>=g&&l.x<E&&l.y>=w&&l.y<P}}class fe extends o.Evented{constructor(l,d,g,w){if(super(),this.id=l,this.dispatcher=g,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(d,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(w)}load(){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=he(this._options,this.map._requestManager,(l,d)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),l?this.fire(new o.ErrorEvent(l)):d&&(o.extend(this,d),d.bounds&&(this.tileBounds=new ue(d.bounds,this.minzoom,this.maxzoom)),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}setSourceProperty(l){this._tileJSONRequest&&this._tileJSONRequest.cancel(),l(),this.load()}setTiles(l){return this.setSourceProperty(()=>{this._options.tiles=l}),this}setUrl(l){return this.setSourceProperty(()=>{this.url=l,this._options.url=l}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return o.extend({},this._options)}loadTile(l,d){const g=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),w={request:this.map._requestManager.transformRequest(g,o.ResourceType.Tile),uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function E(P,z){return delete l.request,l.aborted?d(null):P&&P.status!==404?d(P):(z&&z.resourceTiming&&(l.resourceTiming=z.resourceTiming),this.map._refreshExpiredTiles&&z&&l.setExpiryData(z),l.loadVectorData(z,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}w.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired"?l.state==="loading"?l.reloadCallback=d:l.request=l.actor.send("reloadTile",w,E.bind(this)):(l.actor=this.dispatcher.getActor(),l.request=l.actor.send("loadTile",w,E.bind(this)))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id},void 0)}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class ye extends o.Evented{constructor(l,d,g,w){super(),this.id=l,this.dispatcher=g,this.setEventedParent(w),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},d),o.extend(this,o.pick(d,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=he(this._options,this.map._requestManager,(l,d)=>{this._tileJSONRequest=null,this._loaded=!0,l?this.fire(new o.ErrorEvent(l)):d&&(o.extend(this,d),d.bounds&&(this.tileBounds=new ue(d.bounds,this.minzoom,this.maxzoom)),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return o.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,d){const g=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);l.request=o.getImage(this.map._requestManager.transformRequest(g,o.ResourceType.Tile),(w,E,P)=>{if(delete l.request,l.aborted)l.state="unloaded",d(null);else if(w)l.state="errored",d(w);else if(E){this.map._refreshExpiredTiles&&l.setExpiryData(P);const z=this.map.painter.context,B=z.gl;l.texture=this.map.painter.getTileTexture(E.width),l.texture?l.texture.update(E,{useMipmap:!0}):(l.texture=new L(z,E,B.RGBA,{useMipmap:!0}),l.texture.bind(B.LINEAR,B.CLAMP_TO_EDGE,B.LINEAR_MIPMAP_NEAREST),z.extTextureFilterAnisotropic&&B.texParameterf(B.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax)),l.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),d(null)}})}abortTile(l,d){l.request&&(l.request.cancel(),delete l.request),d()}unloadTile(l,d){l.texture&&this.map.painter.saveTileTexture(l.texture),d()}hasTransition(){return!1}}let He;class we extends ye{constructor(l,d,g,w){super(l,d,g,w),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(l,d){const g=l.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function w(E,P){E&&(l.state="errored",d(E)),P&&(l.dem=P,l.needsHillshadePrepare=!0,l.needsTerrainPrepare=!0,l.state="loaded",d(null))}l.request=o.getImage(this.map._requestManager.transformRequest(g,o.ResourceType.Tile),function(E,P){if(delete l.request,l.aborted)l.state="unloaded",d(null);else if(E)l.state="errored",d(E);else if(P){this.map._refreshExpiredTiles&&l.setExpiryData(P),delete P.cacheControl,delete P.expires;const z=o.isImageBitmap(P)&&(He==null&&(He=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),He)?P:o.exported.getImageData(P,1),B={uid:l.uid,coord:l.tileID,source:this.id,rawImageData:z,encoding:this.encoding};l.actor&&l.state!=="expired"||(l.actor=this.dispatcher.getActor(),l.actor.send("loadDEMTile",B,w.bind(this)))}}.bind(this)),l.neighboringTiles=this._getNeighboringTiles(l.tileID)}_getNeighboringTiles(l){const d=l.canonical,g=Math.pow(2,d.z),w=(d.x-1+g)%g,E=d.x===0?l.wrap-1:l.wrap,P=(d.x+1+g)%g,z=d.x+1===g?l.wrap+1:l.wrap,B={};return B[new o.OverscaledTileID(l.overscaledZ,E,d.z,w,d.y).key]={backfilled:!1},B[new o.OverscaledTileID(l.overscaledZ,z,d.z,P,d.y).key]={backfilled:!1},d.y>0&&(B[new o.OverscaledTileID(l.overscaledZ,E,d.z,w,d.y-1).key]={backfilled:!1},B[new o.OverscaledTileID(l.overscaledZ,l.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},B[new o.OverscaledTileID(l.overscaledZ,z,d.z,P,d.y-1).key]={backfilled:!1}),d.y+1<g&&(B[new o.OverscaledTileID(l.overscaledZ,E,d.z,w,d.y+1).key]={backfilled:!1},B[new o.OverscaledTileID(l.overscaledZ,l.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},B[new o.OverscaledTileID(l.overscaledZ,z,d.z,P,d.y+1).key]={backfilled:!1}),B}unloadTile(l){l.demTexture&&this.map.painter.saveTileTexture(l.demTexture),l.fbo&&(l.fbo.destroy(),delete l.fbo),l.dem&&delete l.dem,delete l.neighboringTiles,l.state="unloaded",l.actor&&l.actor.send("removeDEMTile",{uid:l.uid,source:this.id})}}class it extends o.Evented{constructor(l,d,g,w){super(),this.id=l,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=g.getActor(),this.setEventedParent(w),this._data=d.data,this._options=o.extend({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;const E=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*E,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*E,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:o.EXTENT,radius:(d.clusterRadius||50)*E,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(l){this.map=l,this.load()}setData(l){return this._data=l,this._updateWorkerData("content"),this}getClusterExpansionZoom(l,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:l,source:this.id},d),this}getClusterChildren(l,d){return this.actor.send("geojson.getClusterChildren",{clusterId:l,source:this.id},d),this}getClusterLeaves(l,d,g,w){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:l,limit:d,offset:g},w),this}_updateWorkerData(l){const d=o.extend({},this.workerOptions),g=this._data;typeof g=="string"?(d.request=this.map._requestManager.transformRequest(o.exported.resolveURL(g),o.ResourceType.Source),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(g),this._pendingLoads++,this.fire(new o.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,d,(w,E)=>{if(this._pendingLoads--,this._removed||E&&E.abandoned)return void this.fire(new o.Event("dataabort",{dataType:"source",sourceDataType:l}));let P=null;if(E&&E.resourceTiming&&E.resourceTiming[this.id]&&(P=E.resourceTiming[this.id].slice(0)),w)return void this.fire(new o.ErrorEvent(w));const z={dataType:"source",sourceDataType:l};this._collectResourceTiming&&P&&P.length>0&&o.extend(z,{resourceTiming:P}),this.fire(new o.Event("data",z))})}loaded(){return this._pendingLoads===0}loadTile(l,d){const g=l.actor?"reloadTile":"loadTile";l.actor=this.actor;const w={type:this.type,uid:l.uid,tileID:l.tileID,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};l.request=this.actor.send(g,w,(E,P)=>(delete l.request,l.unloadVectorData(),l.aborted?d(null):E?d(E):(l.loadVectorData(P,this.map.painter,g==="reloadTile"),d(null))))}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.aborted=!0}unloadTile(l){l.unloadVectorData(),this.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var et=o.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ct extends o.Evented{constructor(l,d,g,w){super(),this.id=l,this.dispatcher=g,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(w),this.options=d}load(l,d){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(g,w)=>{this._loaded=!0,g?this.fire(new o.ErrorEvent(g)):w&&(this.image=w,l&&(this.coordinates=l),d&&d(),this._finishLoading())})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this.options.url=l.url,this.load(l.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}setCoordinates(l){this.coordinates=l;const d=l.map(o.MercatorCoordinate.fromLngLat);this.tileID=function(w){let E=1/0,P=1/0,z=-1/0,B=-1/0;for(const K of w)E=Math.min(E,K.x),P=Math.min(P,K.y),z=Math.max(z,K.x),B=Math.max(B,K.y);const V=Math.max(z-E,B-P),G=Math.max(0,Math.floor(-Math.log(V)/Math.LN2)),X=Math.pow(2,G);return new o.CanonicalTileID(G,Math.floor((E+z)/2*X),Math.floor((P+B)/2*X))}(d),this.minzoom=this.maxzoom=this.tileID.z;const g=d.map(w=>this.tileID.getTilePoint(w)._round());return this._boundsArray=new o.RasterBoundsArray,this._boundsArray.emplaceBack(g[0].x,g[0].y,0,0),this._boundsArray.emplaceBack(g[1].x,g[1].y,o.EXTENT,0),this._boundsArray.emplaceBack(g[3].x,g[3].y,0,o.EXTENT),this._boundsArray.emplaceBack(g[2].x,g[2].y,o.EXTENT,o.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,d=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,et.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new L(l,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));for(const g in this.tiles){const w=this.tiles[g];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}loadTile(l,d){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},d(null)):(l.state="errored",d(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class zt extends Ct{constructor(l,d,g,w){super(l,d,g,w),this.roundZoom=!0,this.type="video",this.options=d}load(){this._loaded=!1;const l=this.options;this.urls=[];for(const d of l.urls)this.urls.push(this.map._requestManager.transformRequest(d,o.ResourceType.Source).url);o.getVideo(this.urls,(d,g)=>{this._loaded=!0,d?this.fire(new o.ErrorEvent(d)):g&&(this.video=g,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(l){if(this.video){const d=this.video.seekable;l<d.start(0)||l>d.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=l}}getVideo(){return this.video}onAdd(l){this.map||(this.map=l,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const l=this.map.painter.context,d=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,et.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new L(l,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));for(const g in this.tiles){const w=this.tiles[g];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class tr extends Ct{constructor(l,d,g,w){super(l,d,g,w),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(E=>!Array.isArray(E)||E.length!==2||E.some(P=>typeof P!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${l}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${l}`,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${l}`,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${l}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${l}`,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(l){this.map=l,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let l=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,l=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,l=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const d=this.map.painter.context,g=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,et.members)),this.boundsSegments||(this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(l||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new L(d,this.canvas,g.RGBA,{premultiply:!0});for(const w in this.tiles){const E=this.tiles[w];E.state!=="loaded"&&(E.state="loaded",E.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const l of[this.canvas.width,this.canvas.height])if(isNaN(l)||l<=0)return!0;return!1}}const $t={vector:fe,raster:ye,"raster-dem":we,geojson:it,video:zt,image:Ct,canvas:tr};function Lr(x,l){const d=o.create();return o.translate(d,d,[1,1,0]),o.scale(d,d,[.5*x.width,.5*x.height,1]),o.multiply(d,d,x.calculatePosMatrix(l.toUnwrapped()))}function Ir(x,l,d,g,w,E){const P=function(X,K,ce){if(X)for(const oe of X){const le=K[oe];if(le&&le.source===ce&&le.type==="fill-extrusion")return!0}else for(const oe in K){const le=K[oe];if(le.source===ce&&le.type==="fill-extrusion")return!0}return!1}(w&&w.layers,l,x.id),z=E.maxPitchScaleFactor(),B=x.tilesIn(g,z,P);B.sort(Cr);const V=[];for(const X of B)V.push({wrappedTileID:X.tileID.wrapped().key,queryResults:X.tile.queryRenderedFeatures(l,d,x._state,X.queryGeometry,X.cameraQueryGeometry,X.scale,w,E,z,Lr(x.transform,X.tileID))});const G=function(X){const K={},ce={};for(const oe of X){const le=oe.queryResults,be=oe.wrappedTileID,Ce=ce[be]=ce[be]||{};for(const Pe in le){const de=le[Pe],Re=Ce[Pe]=Ce[Pe]||{},De=K[Pe]=K[Pe]||[];for(const $e of de)Re[$e.featureIndex]||(Re[$e.featureIndex]=!0,De.push($e))}}return K}(V);for(const X in G)G[X].forEach(K=>{const ce=K.feature,oe=x.getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=oe});return G}function Cr(x,l){const d=x.tileID,g=l.tileID;return d.overscaledZ-g.overscaledZ||d.canonical.y-g.canonical.y||d.wrap-g.wrap||d.canonical.x-g.canonical.x}class dr{constructor(l,d){this.tileID=l,this.uid=o.uniqueId(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(l){const d=l+this.timeAdded;d<o.exported.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(l){this.demTexture&&l.saveTileTexture(this.demTexture),this.textures.forEach(d=>l.saveTileTexture(d)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(l,d,g){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=function(w,E){const P={};if(!E)return P;for(const z of w){const B=z.layerIds.map(V=>E.getLayer(V)).filter(Boolean);if(B.length!==0){z.layers=B,z.stateDependentLayerIds&&(z.stateDependentLayers=z.stateDependentLayerIds.map(V=>B.filter(G=>G.id===V)[0]));for(const V of B)P[V.id]=z}}return P}(l.buckets,d.style),this.hasSymbolBuckets=!1;for(const w in this.buckets){const E=this.buckets[w];if(E instanceof o.SymbolBucket){if(this.hasSymbolBuckets=!0,!g)break;E.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const w in this.buckets){const E=this.buckets[w];if(E instanceof o.SymbolBucket&&E.hasRTLText){this.hasRTLText=!0,o.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const w in this.buckets){const E=this.buckets[w];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(w).queryRadius(E))}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage)}else this.collisionBoxArray=new o.CollisionBoxArray}unloadVectorData(){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(l){return this.buckets[l.id]}upload(l){for(const g in this.buckets){const w=this.buckets[g];w.uploadPending()&&w.upload(l)}const d=l.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new L(l,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new L(l,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(l){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture)}queryRenderedFeatures(l,d,g,w,E,P,z,B,V,G){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:w,cameraQueryGeometry:E,scale:P,tileSize:this.tileSize,pixelPosMatrix:G,transform:B,params:z,queryPadding:this.queryPadding*V},l,d,g):{}}querySourceFeatures(l,d){const g=this.latestFeatureIndex;if(!g||!g.rawTileData)return;const w=g.loadVTLayers(),E=d?d.sourceLayer:"",P=w._geojsonTileLayer||w[E];if(!P)return;const z=o.createFilter(d&&d.filter),{z:B,x:V,y:G}=this.tileID.canonical,X={z:B,x:V,y:G};for(let K=0;K<P.length;K++){const ce=P.feature(K);if(z.needGeometry){const be=o.toEvaluationFeature(ce,!0);if(!z.filter(new o.EvaluationParameters(this.tileID.overscaledZ),be,this.tileID.canonical))continue}else if(!z.filter(new o.EvaluationParameters(this.tileID.overscaledZ),ce))continue;const oe=g.getId(ce,E),le=new o.GeoJSONFeature(ce,B,V,G,oe);le.tile=X,l.push(le)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const d=this.expirationTime;if(l.cacheControl){const g=o.parseCacheControl(l.cacheControl);g["max-age"]&&(this.expirationTime=Date.now()+1e3*g["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const g=Date.now();let w=!1;if(this.expirationTime>g)w=!1;else if(d)if(this.expirationTime<d)w=!0;else{const E=this.expirationTime-d;E?this.expirationTime=g+Math.max(E,3e4):w=!0}else w=!0;w?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(l,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(l).length===0)return;const g=this.latestFeatureIndex.loadVTLayers();for(const w in this.buckets){if(!d.style.hasLayer(w))continue;const E=this.buckets[w],P=E.layers[0].sourceLayer||"_geojsonTileLayer",z=g[P],B=l[P];if(!z||!B||Object.keys(B).length===0)continue;E.update(B,z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const V=d&&d.style&&d.style.getLayer(w);V&&(this.queryPadding=Math.max(this.queryPadding,V.queryRadius(E)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<o.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=o.exported.now()+l}setDependencies(l,d){const g={};for(const w of d)g[w]=!0;this.dependencies[l]=g}hasDependency(l,d){for(const g of l){const w=this.dependencies[g];if(w){for(const E of d)if(w[E])return!0}}return!1}}class Ge{constructor(l,d){this.max=l,this.onRemove=d,this.reset()}reset(){for(const l in this.data)for(const d of this.data[l])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(l,d,g){const w=l.wrapped().key;this.data[w]===void 0&&(this.data[w]=[]);const E={value:d,timeout:void 0};if(g!==void 0&&(E.timeout=setTimeout(()=>{this.remove(l,E)},g)),this.data[w].push(E),this.order.push(w),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const d=this.data[l].shift();return d.timeout&&clearTimeout(d.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),d.value}getByKey(l){const d=this.data[l];return d?d[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,d){if(!this.has(l))return this;const g=l.wrapped().key,w=d===void 0?0:this.data[g].indexOf(d),E=this.data[g][w];return this.data[g].splice(w,1),E.timeout&&clearTimeout(E.timeout),this.data[g].length===0&&delete this.data[g],this.onRemove(E.value),this.order.splice(this.order.indexOf(g),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(l){const d=[];for(const g in this.data)for(const w of this.data[g])l(w.value)||d.push(w);for(const g of d)this.remove(g.value.tileID,g)}}class nt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,d,g){const w=String(d);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][w]=this.stateChanges[l][w]||{},o.extend(this.stateChanges[l][w],g),this.deletedStates[l]===null){this.deletedStates[l]={};for(const E in this.state[l])E!==w&&(this.deletedStates[l][E]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][w]===null){this.deletedStates[l][w]={};for(const E in this.state[l][w])g[E]||(this.deletedStates[l][w][E]=null)}else for(const E in g)this.deletedStates[l]&&this.deletedStates[l][w]&&this.deletedStates[l][w][E]===null&&delete this.deletedStates[l][w][E]}removeFeatureState(l,d,g){if(this.deletedStates[l]===null)return;const w=String(d);if(this.deletedStates[l]=this.deletedStates[l]||{},g&&d!==void 0)this.deletedStates[l][w]!==null&&(this.deletedStates[l][w]=this.deletedStates[l][w]||{},this.deletedStates[l][w][g]=null);else if(d!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][w])for(g in this.deletedStates[l][w]={},this.stateChanges[l][w])this.deletedStates[l][w][g]=null;else this.deletedStates[l][w]=null;else this.deletedStates[l]=null}getState(l,d){const g=String(d),w=o.extend({},(this.state[l]||{})[g],(this.stateChanges[l]||{})[g]);if(this.deletedStates[l]===null)return{};if(this.deletedStates[l]){const E=this.deletedStates[l][d];if(E===null)return{};for(const P in E)delete w[P]}return w}initializeTileState(l,d){l.setFeatureState(this.state,d)}coalesceChanges(l,d){const g={};for(const w in this.stateChanges){this.state[w]=this.state[w]||{};const E={};for(const P in this.stateChanges[w])this.state[w][P]||(this.state[w][P]={}),o.extend(this.state[w][P],this.stateChanges[w][P]),E[P]=this.state[w][P];g[w]=E}for(const w in this.deletedStates){this.state[w]=this.state[w]||{};const E={};if(this.deletedStates[w]===null)for(const P in this.state[w])E[P]={},this.state[w][P]={};else for(const P in this.deletedStates[w]){if(this.deletedStates[w][P]===null)this.state[w][P]={};else for(const z of Object.keys(this.deletedStates[w][P]))delete this.state[w][P][z];E[P]=this.state[w][P]}g[w]=g[w]||{},o.extend(g[w],E)}if(this.stateChanges={},this.deletedStates={},Object.keys(g).length!==0)for(const w in l)l[w].setFeatureState(g,d)}}class Ye extends o.Evented{constructor(l,d,g){super(),this.id=l,this.dispatcher=g,this.on("data",w=>{w.dataType==="source"&&w.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&w.dataType==="source"&&w.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(w,E,P,z){const B=new $t[E.type](w,E,P,z);if(B.id!==w)throw new Error(`Expected Source id to be ${w} instead of ${B.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],B),B}(l,d,g,this),this._tiles={},this._cache=new Ge(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new nt}onAdd(l){this.map=l,this._maxTileCacheSize=l?l._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(l)}onRemove(l){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(l)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles){const d=this._tiles[l];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(l,d){return this._source.loadTile(l,d)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l,()=>{})}_abortTile(l){this._source.abortTile&&this._source.abortTile(l,()=>{}),this._source.fire(new o.Event("dataabort",{tile:l,coord:l.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const g=this._tiles[d];g.upload(l),g.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(l=>l.tileID).sort(ft).map(l=>l.key)}getRenderableIds(l){const d=[];for(const g in this._tiles)this._isIdRenderable(g,l)&&d.push(this._tiles[g]);return l?d.sort((g,w)=>{const E=g.tileID,P=w.tileID,z=new o.pointGeometry(E.canonical.x,E.canonical.y)._rotate(this.transform.angle),B=new o.pointGeometry(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return E.overscaledZ-P.overscaledZ||B.y-z.y||B.x-z.x}).map(g=>g.tileID.key):d.map(g=>g.tileID).sort(ft).map(g=>g.key)}hasRenderableParent(l){const d=this.findLoadedParent(l,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(l,d){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(d||!this._tiles[l].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(l,d){const g=this._tiles[l];g&&(g.state!=="loading"&&(g.state=d),this._loadTile(g,this._tileLoaded.bind(this,g,l,d)))}_tileLoaded(l,d,g,w){if(w)return l.state="errored",void(w.status!==404?this._source.fire(new o.ErrorEvent(w,{tile:l})):this.update(this.transform,this.terrain));l.timeAdded=o.exported.now(),g==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(d,l),this.getSource().type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),l.aborted||this._source.fire(new o.Event("data",{dataType:"source",tile:l,coord:l.tileID}))}_backfillDEM(l){const d=this.getRenderableIds();for(let w=0;w<d.length;w++){const E=d[w];if(l.neighboringTiles&&l.neighboringTiles[E]){const P=this.getTileByID(E);g(l,P),g(P,l)}}function g(w,E){w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let P=E.tileID.canonical.x-w.tileID.canonical.x;const z=E.tileID.canonical.y-w.tileID.canonical.y,B=Math.pow(2,w.tileID.canonical.z),V=E.tileID.key;P===0&&z===0||Math.abs(z)>1||(Math.abs(P)>1&&(Math.abs(P+B)===1?P+=B:Math.abs(P-B)===1&&(P-=B)),E.dem&&w.dem&&(w.dem.backfillBorder(E.dem,P,z),w.neighboringTiles&&w.neighboringTiles[V]&&(w.neighboringTiles[V].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,d,g,w){for(const E in this._tiles){let P=this._tiles[E];if(w[E]||!P.hasData()||P.tileID.overscaledZ<=d||P.tileID.overscaledZ>g)continue;let z=P.tileID;for(;P&&P.tileID.overscaledZ>d+1;){const V=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[V.key],P&&P.hasData()&&(z=V)}let B=z;for(;B.overscaledZ>d;)if(B=B.scaledTo(B.overscaledZ-1),l[B.key]){w[z.key]=z;break}}}findLoadedParent(l,d){if(l.key in this._loadedParentTiles){const g=this._loadedParentTiles[l.key];return g&&g.tileID.overscaledZ>=d?g:null}for(let g=l.overscaledZ-1;g>=d;g--){const w=l.scaledTo(g),E=this._getLoadedTile(w);if(E)return E}}_getLoadedTile(l){const d=this._tiles[l.key];return d&&d.hasData()?d:this._cache.getByKey(l.wrapped().key)}updateCacheSize(l){const d=Math.ceil(l.width/this._source.tileSize)+1,g=Math.ceil(l.height/this._source.tileSize)+1,w=Math.floor(d*g*5),E=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,w):w;this._cache.setMaxSize(E)}handleWrapJump(l){const d=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,d){const g={};for(const w in this._tiles){const E=this._tiles[w];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+d),g[E.tileID.key]=E}this._tiles=g;for(const w in this._timers)clearTimeout(this._timers[w]),delete this._timers[w];for(const w in this._tiles)this._setTileReloadTimer(w,this._tiles[w])}}update(l,d){if(this.transform=l,this.terrain=d,!this._sourceLoaded||this._paused)return;let g;this.updateCacheSize(l),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?g=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new o.OverscaledTileID(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(g=l.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(g=g.filter(V=>this._source.hasTile(V)))):g=[];const w=l.coveringZoomLevel(this._source),E=Math.max(w-Ye.maxOverzooming,this._source.minzoom),P=Math.max(w+Ye.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const V={};for(const G of g)if(G.canonical.z>this._source.minzoom){const X=G.scaledTo(G.canonical.z-1);V[X.key]=X;const K=G.scaledTo(Math.max(this._source.minzoom,Math.min(G.canonical.z,5)));V[K.key]=K}g=g.concat(Object.values(V))}const z=this._updateRetainedTiles(g,w);if(ut(this._source.type)){const V={},G={},X=Object.keys(z);for(const K of X){const ce=z[K],oe=this._tiles[K];if(!oe||oe.fadeEndTime&&oe.fadeEndTime<=o.exported.now())continue;const le=this.findLoadedParent(ce,E);le&&(this._addTile(le.tileID),V[le.tileID.key]=le.tileID),G[K]=ce}this._retainLoadedChildren(G,w,P,z);for(const K in V)z[K]||(this._coveredTiles[K]=!0,z[K]=V[K]);if(d){const K={},ce={};for(const oe of g)this._tiles[oe.key].hasData()?K[oe.key]=oe:ce[oe.key]=oe;for(const oe in ce){const le=ce[oe].children(this._source.maxzoom);this._tiles[le[0].key]&&this._tiles[le[1].key]&&this._tiles[le[2].key]&&this._tiles[le[3].key]&&(K[le[0].key]=z[le[0].key]=le[0],K[le[1].key]=z[le[1].key]=le[1],K[le[2].key]=z[le[2].key]=le[2],K[le[3].key]=z[le[3].key]=le[3],delete ce[oe])}for(const oe in ce){const le=this.findLoadedParent(ce[oe],this._source.minzoom);if(le){K[le.tileID.key]=z[le.tileID.key]=le.tileID;for(const be in K)K[be].isChildOf(le.tileID)&&delete K[be]}}for(const oe in this._tiles)K[oe]||(this._coveredTiles[oe]=!0)}}for(const V in z)this._tiles[V].clearFadeHold();const B=o.keysDifference(this._tiles,z);for(const V of B){const G=this._tiles[V];G.hasSymbolBuckets&&!G.holdingForFade()?G.setHoldDuration(this.map._fadeDuration):G.hasSymbolBuckets&&!G.symbolFadeFinished()||this._removeTile(V)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(l)}_updateRetainedTiles(l,d){const g={},w={},E=Math.max(d-Ye.maxOverzooming,this._source.minzoom),P=Math.max(d+Ye.maxUnderzooming,this._source.minzoom),z={};for(const B of l){const V=this._addTile(B);g[B.key]=B,V.hasData()||d<this._source.maxzoom&&(z[B.key]=B)}this._retainLoadedChildren(z,d,P,g);for(const B of l){let V=this._tiles[B.key];if(V.hasData())continue;if(d+1>this._source.maxzoom){const X=B.children(this._source.maxzoom)[0],K=this.getTile(X);if(K&&K.hasData()){g[X.key]=X;continue}}else{const X=B.children(this._source.maxzoom);if(g[X[0].key]&&g[X[1].key]&&g[X[2].key]&&g[X[3].key])continue}let G=V.wasRequested();for(let X=B.overscaledZ-1;X>=E;--X){const K=B.scaledTo(X);if(w[K.key]||(w[K.key]=!0,V=this.getTile(K),!V&&G&&(V=this._addTile(K)),V&&(g[K.key]=K,G=V.wasRequested(),V.hasData())))break}}return g}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const d=[];let g,w=this._tiles[l].tileID;for(;w.overscaledZ>0;){if(w.key in this._loadedParentTiles){g=this._loadedParentTiles[w.key];break}d.push(w.key);const E=w.scaledTo(w.overscaledZ-1);if(g=this._getLoadedTile(E),g)break;w=E}for(const E of d)this._loadedParentTiles[E]=g}}_addTile(l){let d=this._tiles[l.key];if(d)return d;d=this._cache.getAndRemove(l),d&&(this._setTileReloadTimer(l.key,d),d.tileID=l,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,d)));const g=d;return d||(d=new dr(l,this._source.tileSize*l.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,l.key,d.state))),d.uses++,this._tiles[l.key]=d,g||this._source.fire(new o.Event("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(l,d){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const g=d.getExpiryTimeout();g&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},g))}_removeTile(l){const d=this._tiles[l];d&&(d.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(l);this._cache.reset()}tilesIn(l,d,g){const w=[],E=this.transform;if(!E)return w;const P=g?E.getCameraQueryGeometry(l):l,z=l.map(oe=>E.pointCoordinate(oe,this.terrain)),B=P.map(oe=>E.pointCoordinate(oe,this.terrain)),V=this.getIds();let G=1/0,X=1/0,K=-1/0,ce=-1/0;for(const oe of B)G=Math.min(G,oe.x),X=Math.min(X,oe.y),K=Math.max(K,oe.x),ce=Math.max(ce,oe.y);for(let oe=0;oe<V.length;oe++){const le=this._tiles[V[oe]];if(le.holdingForFade())continue;const be=le.tileID,Ce=Math.pow(2,E.zoom-le.tileID.overscaledZ),Pe=d*le.queryPadding*o.EXTENT/le.tileSize/Ce,de=[be.getTilePoint(new o.MercatorCoordinate(G,X)),be.getTilePoint(new o.MercatorCoordinate(K,ce))];if(de[0].x-Pe<o.EXTENT&&de[0].y-Pe<o.EXTENT&&de[1].x+Pe>=0&&de[1].y+Pe>=0){const Re=z.map($e=>be.getTilePoint($e)),De=B.map($e=>be.getTilePoint($e));w.push({tile:le,tileID:be,queryGeometry:Re,cameraQueryGeometry:De,scale:Ce})}}return w}getVisibleCoordinates(l){const d=this.getRenderableIds(l).map(g=>this._tiles[g].tileID);for(const g of d)g.posMatrix=this.transform.calculatePosMatrix(g.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(ut(this._source.type))for(const l in this._tiles){const d=this._tiles[l];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=o.exported.now())return!0}return!1}setFeatureState(l,d,g){this._state.updateState(l=l||"_geojsonTileLayer",d,g)}removeFeatureState(l,d,g){this._state.removeFeatureState(l=l||"_geojsonTileLayer",d,g)}getFeatureState(l,d){return this._state.getState(l=l||"_geojsonTileLayer",d)}setDependencies(l,d,g){const w=this._tiles[l];w&&w.setDependencies(d,g)}reloadTilesForDependencies(l,d){for(const g in this._tiles)this._tiles[g].hasDependency(l,d)&&this._reloadTile(g,"reloading");this._cache.filter(g=>!g.hasDependency(l,d))}}function ft(x,l){const d=Math.abs(2*x.wrap)-+(x.wrap<0),g=Math.abs(2*l.wrap)-+(l.wrap<0);return x.overscaledZ-l.overscaledZ||g-d||l.canonical.y-x.canonical.y||l.canonical.x-x.canonical.x}function ut(x){return x==="raster"||x==="image"||x==="video"}Ye.maxOverzooming=10,Ye.maxUnderzooming=3;const se="mapboxgl_preloaded_worker_pool";class me{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<me.workerCount;)this.workers.push(new Worker(ns.workerUrl));return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[se]}numActive(){return Object.keys(this.active).length}}const Ae=Math.floor(o.exported.hardwareConcurrency/2);let Ve;function We(){return Ve||(Ve=new me),Ve}function Ke(x,l){const d={};for(const g in x)g!=="ref"&&(d[g]=x[g]);return o.refProperties.forEach(g=>{g in l&&(d[g]=l[g])}),d}function dt(x){x=x.slice();const l=Object.create(null);for(let d=0;d<x.length;d++)l[x[d].id]=x[d];for(let d=0;d<x.length;d++)"ref"in x[d]&&(x[d]=Ke(x[d],l[x[d].ref]));return x}me.workerCount=Math.max(Math.min(Ae,6),1);const qe={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function at(x,l,d){d.push({command:qe.addSource,args:[x,l[x]]})}function Qe(x,l,d){l.push({command:qe.removeSource,args:[x]}),d[x]=!0}function Bt(x,l,d,g){Qe(x,d,g),at(x,l,d)}function Lt(x,l,d){let g;for(g in x[d])if(Object.prototype.hasOwnProperty.call(x[d],g)&&g!=="data"&&!_(x[d][g],l[d][g]))return!1;for(g in l[d])if(Object.prototype.hasOwnProperty.call(l[d],g)&&g!=="data"&&!_(x[d][g],l[d][g]))return!1;return!0}function Ot(x,l,d,g,w,E){let P;for(P in l=l||{},x=x||{})Object.prototype.hasOwnProperty.call(x,P)&&(_(x[P],l[P])||d.push({command:E,args:[g,P,l[P],w]}));for(P in l)Object.prototype.hasOwnProperty.call(l,P)&&!Object.prototype.hasOwnProperty.call(x,P)&&(_(x[P],l[P])||d.push({command:E,args:[g,P,l[P],w]}))}function Ht(x){return x.id}function ir(x,l){return x[l.id]=l,x}class vr{constructor(l,d){this.reset(l,d)}reset(l,d){this.points=l||[],this._distances=[0];for(let g=1;g<this.points.length;g++)this._distances[g]=this._distances[g-1]+this.points[g].dist(this.points[g-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=o.clamp(l,0,1);let d=1,g=this._distances[d];const w=l*this.paddedLength+this.padding;for(;g<w&&d<this._distances.length;)g=this._distances[++d];const E=d-1,P=this._distances[E],z=g-P,B=z>0?(w-P)/z:0;return this.points[E].mult(1-B).add(this.points[d].mult(B))}}function ke(x,l){let d=!0;return x==="always"||x!=="never"&&l!=="never"||(d=!1),d}class tt{constructor(l,d,g){const w=this.boxCells=[],E=this.circleCells=[];this.xCellCount=Math.ceil(l/g),this.yCellCount=Math.ceil(d/g);for(let P=0;P<this.xCellCount*this.yCellCount;P++)w.push([]),E.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=d,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,d,g,w,E){this._forEachCell(d,g,w,E,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(w),this.bboxes.push(E)}insertCircle(l,d,g,w){this._forEachCell(d-w,g-w,d+w,g+w,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(d),this.circles.push(g),this.circles.push(w)}_insertBoxCell(l,d,g,w,E,P){this.boxCells[E].push(P)}_insertCircleCell(l,d,g,w,E,P){this.circleCells[E].push(P)}_query(l,d,g,w,E,P,z){if(g<0||l>this.width||w<0||d>this.height)return[];const B=[];if(l<=0&&d<=0&&this.width<=g&&this.height<=w){if(E)return[{key:null,x1:l,y1:d,x2:g,y2:w}];for(let V=0;V<this.boxKeys.length;V++)B.push({key:this.boxKeys[V],x1:this.bboxes[4*V],y1:this.bboxes[4*V+1],x2:this.bboxes[4*V+2],y2:this.bboxes[4*V+3]});for(let V=0;V<this.circleKeys.length;V++){const G=this.circles[3*V],X=this.circles[3*V+1],K=this.circles[3*V+2];B.push({key:this.circleKeys[V],x1:G-K,y1:X-K,x2:G+K,y2:X+K})}}else this._forEachCell(l,d,g,w,this._queryCell,B,{hitTest:E,overlapMode:P,seenUids:{box:{},circle:{}}},z);return B}query(l,d,g,w){return this._query(l,d,g,w,!1,null)}hitTest(l,d,g,w,E,P){return this._query(l,d,g,w,!0,E,P).length>0}hitTestCircle(l,d,g,w,E){const P=l-g,z=l+g,B=d-g,V=d+g;if(z<0||P>this.width||V<0||B>this.height)return!1;const G=[];return this._forEachCell(P,B,z,V,this._queryCellCircle,G,{hitTest:!0,overlapMode:w,circle:{x:l,y:d,radius:g},seenUids:{box:{},circle:{}}},E),G.length>0}_queryCell(l,d,g,w,E,P,z,B){const{seenUids:V,hitTest:G,overlapMode:X}=z,K=this.boxCells[E];if(K!==null){const oe=this.bboxes;for(const le of K)if(!V.box[le]){V.box[le]=!0;const be=4*le,Ce=this.boxKeys[le];if(l<=oe[be+2]&&d<=oe[be+3]&&g>=oe[be+0]&&w>=oe[be+1]&&(!B||B(Ce))&&(!G||!ke(X,Ce.overlapMode))&&(P.push({key:Ce,x1:oe[be],y1:oe[be+1],x2:oe[be+2],y2:oe[be+3]}),G))return!0}}const ce=this.circleCells[E];if(ce!==null){const oe=this.circles;for(const le of ce)if(!V.circle[le]){V.circle[le]=!0;const be=3*le,Ce=this.circleKeys[le];if(this._circleAndRectCollide(oe[be],oe[be+1],oe[be+2],l,d,g,w)&&(!B||B(Ce))&&(!G||!ke(X,Ce.overlapMode))){const Pe=oe[be],de=oe[be+1],Re=oe[be+2];if(P.push({key:Ce,x1:Pe-Re,y1:de-Re,x2:Pe+Re,y2:de+Re}),G)return!0}}}return!1}_queryCellCircle(l,d,g,w,E,P,z,B){const{circle:V,seenUids:G,overlapMode:X}=z,K=this.boxCells[E];if(K!==null){const oe=this.bboxes;for(const le of K)if(!G.box[le]){G.box[le]=!0;const be=4*le,Ce=this.boxKeys[le];if(this._circleAndRectCollide(V.x,V.y,V.radius,oe[be+0],oe[be+1],oe[be+2],oe[be+3])&&(!B||B(Ce))&&!ke(X,Ce.overlapMode))return P.push(!0),!0}}const ce=this.circleCells[E];if(ce!==null){const oe=this.circles;for(const le of ce)if(!G.circle[le]){G.circle[le]=!0;const be=3*le,Ce=this.circleKeys[le];if(this._circlesCollide(oe[be],oe[be+1],oe[be+2],V.x,V.y,V.radius)&&(!B||B(Ce))&&!ke(X,Ce.overlapMode))return P.push(!0),!0}}}_forEachCell(l,d,g,w,E,P,z,B){const V=this._convertToXCellCoord(l),G=this._convertToYCellCoord(d),X=this._convertToXCellCoord(g),K=this._convertToYCellCoord(w);for(let ce=V;ce<=X;ce++)for(let oe=G;oe<=K;oe++)if(E.call(this,l,d,g,w,this.xCellCount*oe+ce,P,z,B))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,d,g,w,E,P){const z=w-l,B=E-d,V=g+P;return V*V>z*z+B*B}_circleAndRectCollide(l,d,g,w,E,P,z){const B=(P-w)/2,V=Math.abs(l-(w+B));if(V>B+g)return!1;const G=(z-E)/2,X=Math.abs(d-(E+G));if(X>G+g)return!1;if(V<=B||X<=G)return!0;const K=V-B,ce=X-G;return K*K+ce*ce<=g*g}}function Ii(x,l,d,g,w){const E=o.create();return l?(o.scale(E,E,[1/w,1/w,1]),d||o.rotateZ(E,E,g.angle)):o.multiply(E,g.labelPlaneMatrix,x),E}function Oi(x,l,d,g,w){if(l){const E=o.clone(x);return o.scale(E,E,[w,w,1]),d||o.rotateZ(E,E,-g.angle),E}return g.glCoordMatrix}function hr(x,l,d){let g;d?(g=[x.x,x.y,d(x.x,x.y),1],o.transformMat4(g,g,l)):(g=[x.x,x.y,0,1],Ka(g,g,l));const w=g[3];return{point:new o.pointGeometry(g[0]/w,g[1]/w),signedDistanceFromCamera:w}}function Bi(x,l){return .5+x/l*.5}function en(x,l){const d=x[0]/x[3],g=x[1]/x[3];return d>=-l[0]&&d<=l[0]&&g>=-l[1]&&g<=l[1]}function Wr(x,l,d,g,w,E,P,z,B,V){const G=g?x.textSizeData:x.iconSizeData,X=o.evaluateSizeForZoom(G,d.transform.zoom),K=[256/d.width*2+1,256/d.height*2+1],ce=g?x.text.dynamicLayoutVertexArray:x.icon.dynamicLayoutVertexArray;ce.clear();const oe=x.lineVertexArray,le=g?x.text.placedSymbolArray:x.icon.placedSymbolArray,be=d.transform.width/d.transform.height;let Ce=!1;for(let Pe=0;Pe<le.length;Pe++){const de=le.get(Pe);if(de.hidden||de.writingMode===o.WritingMode.vertical&&!Ce){Yt(de.numGlyphs,ce);continue}let Re;if(Ce=!1,V?(Re=[de.anchorX,de.anchorY,V(de.anchorX,de.anchorY),1],o.transformMat4(Re,Re,l)):(Re=[de.anchorX,de.anchorY,0,1],Ka(Re,Re,l)),!en(Re,K)){Yt(de.numGlyphs,ce);continue}const De=Bi(d.transform.cameraToCenterDistance,Re[3]),$e=o.evaluateSizeForFeature(G,X,de),Ue=P?$e/De:$e*De,Je=new o.pointGeometry(de.anchorX,de.anchorY),Ne=hr(Je,w,V).point,yt={},ct=nr(de,Ue,!1,z,l,w,E,x.glyphOffsetArray,oe,ce,Ne,Je,yt,be,B,V);Ce=ct.useVertical,(ct.notEnoughRoom||Ce||ct.needsFlipping&&nr(de,Ue,!0,z,l,w,E,x.glyphOffsetArray,oe,ce,Ne,Je,yt,be,B,V).notEnoughRoom)&&Yt(de.numGlyphs,ce)}g?x.text.dynamicLayoutVertexBuffer.updateData(ce):x.icon.dynamicLayoutVertexBuffer.updateData(ce)}function Pi(x,l,d,g,w,E,P,z,B,V,G,X,K){const ce=z.glyphStartIndex+z.numGlyphs,oe=z.lineStartIndex,le=z.lineStartIndex+z.lineLength,be=l.getoffsetX(z.glyphStartIndex),Ce=l.getoffsetX(ce-1),Pe=Wi(x*be,d,g,w,E,P,z.segment,oe,le,B,V,G,X,K);if(!Pe)return null;const de=Wi(x*Ce,d,g,w,E,P,z.segment,oe,le,B,V,G,X,K);return de?{first:Pe,last:de}:null}function st(x,l,d,g){return x===o.WritingMode.horizontal&&Math.abs(d.y-l.y)>Math.abs(d.x-l.x)*g?{useVertical:!0}:(x===o.WritingMode.vertical?l.y<d.y:l.x>d.x)?{needsFlipping:!0}:null}function nr(x,l,d,g,w,E,P,z,B,V,G,X,K,ce,oe,le){const be=l/24,Ce=x.lineOffsetX*be,Pe=x.lineOffsetY*be;let de;if(x.numGlyphs>1){const Re=x.glyphStartIndex+x.numGlyphs,De=x.lineStartIndex,$e=x.lineStartIndex+x.lineLength,Ue=Pi(be,z,Ce,Pe,d,G,X,x,B,E,K,oe,le);if(!Ue)return{notEnoughRoom:!0};const Je=hr(Ue.first.point,P,le).point,Ne=hr(Ue.last.point,P,le).point;if(g&&!d){const yt=st(x.writingMode,Je,Ne,ce);if(yt)return yt}de=[Ue.first];for(let yt=x.glyphStartIndex+1;yt<Re-1;yt++)de.push(Wi(be*z.getoffsetX(yt),Ce,Pe,d,G,X,x.segment,De,$e,B,E,K,oe,le));de.push(Ue.last)}else{if(g&&!d){const De=hr(X,w,le).point,$e=x.lineStartIndex+x.segment+1,Ue=new o.pointGeometry(B.getx($e),B.gety($e)),Je=hr(Ue,w,le),Ne=Je.signedDistanceFromCamera>0?Je.point:Jt(X,Ue,De,1,w,le),yt=st(x.writingMode,De,Ne,ce);if(yt)return yt}const Re=Wi(be*z.getoffsetX(x.glyphStartIndex),Ce,Pe,d,G,X,x.segment,x.lineStartIndex,x.lineStartIndex+x.lineLength,B,E,K,oe,le);if(!Re)return{notEnoughRoom:!0};de=[Re]}for(const Re of de)o.addDynamicAttributes(V,Re.point,Re.angle);return{}}function Jt(x,l,d,g,w,E){const P=hr(x.add(x.sub(l)._unit()),w,E).point,z=d.sub(P);return d.add(z._mult(g/z.mag()))}function Wi(x,l,d,g,w,E,P,z,B,V,G,X,K,ce){const oe=g?x-l:x+l;let le=oe>0?1:-1,be=0;g&&(le*=-1,be=Math.PI),le<0&&(be+=Math.PI);let Ce=le>0?z+P:z+P+1,Pe=w,de=w,Re=0,De=0;const $e=Math.abs(oe),Ue=[];for(;Re+De<=$e;){if(Ce+=le,Ce<z||Ce>=B)return null;if(de=Pe,Ue.push(Pe),Pe=X[Ce],Pe===void 0){const bt=new o.pointGeometry(V.getx(Ce),V.gety(Ce)),Qt=hr(bt,G,ce);if(Qt.signedDistanceFromCamera>0)Pe=X[Ce]=Qt.point;else{const or=Ce-le;Pe=Jt(Re===0?E:new o.pointGeometry(V.getx(or),V.gety(or)),bt,de,$e-Re+1,G,ce)}}Re+=De,De=de.dist(Pe)}const Je=($e-Re)/De,Ne=Pe.sub(de),yt=Ne.mult(Je)._add(de);yt._add(Ne._unit()._perp()._mult(d*le));const ct=be+Math.atan2(Pe.y-de.y,Pe.x-de.x);return Ue.push(yt),{point:yt,angle:K?ct:0,path:Ue}}const So=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Yt(x,l){for(let d=0;d<x;d++){const g=l.length;l.resize(g+4),l.float32.set(So,3*g)}}function Ka(x,l,d){const g=l[0],w=l[1];return x[0]=d[0]*g+d[4]*w+d[12],x[1]=d[1]*g+d[5]*w+d[13],x[3]=d[3]*g+d[7]*w+d[15],x}const Fi=100;class Fs{constructor(l,d=new tt(l.width+200,l.height+200,25),g=new tt(l.width+200,l.height+200,25)){this.transform=l,this.grid=d,this.ignoredGrid=g,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Fi,this.screenBottomBoundary=l.height+Fi,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(l,d,g,w,E,P){const z=this.projectAndGetPerspectiveRatio(w,l.anchorPointX,l.anchorPointY,P),B=g*z.perspectiveRatio,V=l.x1*B+z.point.x,G=l.y1*B+z.point.y,X=l.x2*B+z.point.x,K=l.y2*B+z.point.y;return!this.isInsideGrid(V,G,X,K)||d!=="always"&&this.grid.hitTest(V,G,X,K,d,E)||z.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[V,G,X,K],offscreen:this.isOffscreen(V,G,X,K)}}placeCollisionCircles(l,d,g,w,E,P,z,B,V,G,X,K,ce,oe){const le=[],be=new o.pointGeometry(d.anchorX,d.anchorY),Ce=hr(be,P,oe),Pe=Bi(this.transform.cameraToCenterDistance,Ce.signedDistanceFromCamera),de=(G?E/Pe:E*Pe)/o.ONE_EM,Re=hr(be,z,oe).point,De=Pi(de,w,d.lineOffsetX*de,d.lineOffsetY*de,!1,Re,be,d,g,z,{},!1,oe);let $e=!1,Ue=!1,Je=!0;if(De){const Ne=.5*K*Pe+ce,yt=new o.pointGeometry(-100,-100),ct=new o.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),bt=new vr,Qt=De.first,or=De.last;let Nt=[];for(let pr=Qt.path.length-1;pr>=1;pr--)Nt.push(Qt.path[pr]);for(let pr=1;pr<or.path.length;pr++)Nt.push(or.path[pr]);const kr=2.5*Ne;if(B){const pr=Nt.map(yr=>hr(yr,B,oe));Nt=pr.some(yr=>yr.signedDistanceFromCamera<=0)?[]:pr.map(yr=>yr.point)}let Rr=[];if(Nt.length>0){const pr=Nt[0].clone(),yr=Nt[0].clone();for(let Fr=1;Fr<Nt.length;Fr++)pr.x=Math.min(pr.x,Nt[Fr].x),pr.y=Math.min(pr.y,Nt[Fr].y),yr.x=Math.max(yr.x,Nt[Fr].x),yr.y=Math.max(yr.y,Nt[Fr].y);Rr=pr.x>=yt.x&&yr.x<=ct.x&&pr.y>=yt.y&&yr.y<=ct.y?[Nt]:yr.x<yt.x||pr.x>ct.x||yr.y<yt.y||pr.y>ct.y?[]:o.clipLine([Nt],yt.x,yt.y,ct.x,ct.y)}for(const pr of Rr){bt.reset(pr,.25*Ne);let yr=0;yr=bt.length<=.5*Ne?1:Math.ceil(bt.paddedLength/kr)+1;for(let Fr=0;Fr<yr;Fr++){const Vi=Fr/Math.max(yr-1,1),Ia=bt.lerp(Vi),da=Ia.x+Fi,Pa=Ia.y+Fi;le.push(da,Pa,Ne,0);const Po=da-Ne,Qn=Pa-Ne,bn=da+Ne,eo=Pa+Ne;if(Je=Je&&this.isOffscreen(Po,Qn,bn,eo),Ue=Ue||this.isInsideGrid(Po,Qn,bn,eo),l!=="always"&&this.grid.hitTestCircle(da,Pa,Ne,l,X)&&($e=!0,!V))return{circles:[],offscreen:!1,collisionDetected:$e}}}}return{circles:!V&&$e||!Ue||Pe<this.perspectiveRatioCutoff?[]:le,offscreen:Je,collisionDetected:$e}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let g=1/0,w=1/0,E=-1/0,P=-1/0;for(const G of l){const X=new o.pointGeometry(G.x+Fi,G.y+Fi);g=Math.min(g,X.x),w=Math.min(w,X.y),E=Math.max(E,X.x),P=Math.max(P,X.y),d.push(X)}const z=this.grid.query(g,w,E,P).concat(this.ignoredGrid.query(g,w,E,P)),B={},V={};for(const G of z){const X=G.key;if(B[X.bucketInstanceId]===void 0&&(B[X.bucketInstanceId]={}),B[X.bucketInstanceId][X.featureIndex])continue;const K=[new o.pointGeometry(G.x1,G.y1),new o.pointGeometry(G.x2,G.y1),new o.pointGeometry(G.x2,G.y2),new o.pointGeometry(G.x1,G.y2)];o.polygonIntersectsPolygon(d,K)&&(B[X.bucketInstanceId][X.featureIndex]=!0,V[X.bucketInstanceId]===void 0&&(V[X.bucketInstanceId]=[]),V[X.bucketInstanceId].push(X.featureIndex))}return V}insertCollisionBox(l,d,g,w,E,P){(g?this.ignoredGrid:this.grid).insert({bucketInstanceId:w,featureIndex:E,collisionGroupID:P,overlapMode:d},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,d,g,w,E,P){const z=g?this.ignoredGrid:this.grid,B={bucketInstanceId:w,featureIndex:E,collisionGroupID:P,overlapMode:d};for(let V=0;V<l.length;V+=4)z.insertCircle(B,l[V],l[V+1],l[V+2])}projectAndGetPerspectiveRatio(l,d,g,w){let E;return w?(E=[d,g,w(d,g),1],o.transformMat4(E,E,l)):(E=[d,g,0,1],Ka(E,E,l)),{point:new o.pointGeometry((E[0]/E[3]+1)/2*this.transform.width+Fi,(-E[1]/E[3]+1)/2*this.transform.height+Fi),perspectiveRatio:.5+this.transform.cameraToCenterDistance/E[3]*.5}}isOffscreen(l,d,g,w){return g<Fi||l>=this.screenRightBoundary||w<Fi||d>this.screenBottomBoundary}isInsideGrid(l,d,g,w){return g>=0&&l<this.gridRightBoundary&&w>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const l=o.identity([]);return o.translate(l,l,[-100,-100,0]),l}}function Si(x,l,d){return l*(o.EXTENT/(x.tileSize*Math.pow(2,d-x.tileID.overscaledZ)))}class un{constructor(l,d,g,w){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?d:-d))):w&&g?1:0,this.placed=g}isHidden(){return this.opacity===0&&!this.placed}}class Br{constructor(l,d,g,w,E){this.text=new un(l?l.text:null,d,g,E),this.icon=new un(l?l.icon:null,d,w,E)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ns{constructor(l,d,g){this.text=l,this.icon=d,this.skipFade=g}}class Ca{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class Ko{constructor(l,d,g,w,E){this.bucketInstanceId=l,this.featureIndex=d,this.sourceLayerIndex=g,this.bucketIndex=w,this.tileID=E}}class Jo{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const d=++this.maxGroupID;this.collisionGroups[l]={ID:d,predicate:g=>g.collisionGroupID===d}}return this.collisionGroups[l]}}function Vs(x,l,d,g,w){const{horizontalAlign:E,verticalAlign:P}=o.getAnchorAlignment(x),z=-(E-.5)*l,B=-(P-.5)*d,V=o.evaluateVariableOffset(x,g);return new o.pointGeometry(z+V[0]*w,B+V[1]*w)}function Qo(x,l,d,g,w,E){const{x1:P,x2:z,y1:B,y2:V,anchorPointX:G,anchorPointY:X}=x,K=new o.pointGeometry(l,d);return g&&K._rotate(w?E:-E),{x1:P+K.x,y1:B+K.y,x2:z+K.x,y2:V+K.y,anchorPointX:G,anchorPointY:X}}class ne{constructor(l,d,g,w,E){this.transform=l.clone(),this.terrain=d,this.collisionIndex=new Fs(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=g,this.retainedQueryData={},this.collisionGroups=new Jo(w),this.collisionCircleArrays={},this.prevPlacement=E,E&&(E.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,d,g,w){const E=g.getBucket(d),P=g.latestFeatureIndex;if(!E||!P||d.id!==E.layerIds[0])return;const z=g.collisionBoxArray,B=E.layers[0].layout,V=Math.pow(2,this.transform.zoom-g.tileID.overscaledZ),G=g.tileSize/o.EXTENT,X=this.transform.calculatePosMatrix(g.tileID.toUnwrapped()),K=B.get("text-pitch-alignment")==="map",ce=B.get("text-rotation-alignment")==="map",oe=Si(g,1,this.transform.zoom),le=Ii(X,K,ce,this.transform,oe);let be=null;if(K){const Pe=Oi(X,K,ce,this.transform,oe);be=o.multiply([],this.transform.labelPlaneMatrix,Pe)}this.retainedQueryData[E.bucketInstanceId]=new Ko(E.bucketInstanceId,P,E.sourceLayerIndex,E.index,g.tileID);const Ce={bucket:E,layout:B,posMatrix:X,textLabelPlaneMatrix:le,labelToScreenMatrix:be,scale:V,textPixelRatio:G,holdingForFade:g.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(E.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(E.sourceID)};if(w)for(const Pe of E.sortKeyRanges){const{sortKey:de,symbolInstanceStart:Re,symbolInstanceEnd:De}=Pe;l.push({sortKey:de,symbolInstanceStart:Re,symbolInstanceEnd:De,parameters:Ce})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:E.symbolInstances.length,parameters:Ce})}attemptAnchorPlacement(l,d,g,w,E,P,z,B,V,G,X,K,ce,oe,le,be){const Ce=[K.textOffset0,K.textOffset1],Pe=Vs(l,g,w,Ce,E),de=this.collisionIndex.placeCollisionBox(Qo(d,Pe.x,Pe.y,P,z,this.transform.angle),X,B,V,G.predicate,be);if((!le||this.collisionIndex.placeCollisionBox(Qo(le,Pe.x,Pe.y,P,z,this.transform.angle),X,B,V,G.predicate,be).box.length!==0)&&de.box.length>0){let Re;if(this.prevPlacement&&this.prevPlacement.variableOffsets[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID]&&this.prevPlacement.placements[K.crossTileID].text&&(Re=this.prevPlacement.variableOffsets[K.crossTileID].anchor),K.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[K.crossTileID]={textOffset:Ce,width:g,height:w,anchor:l,textBoxScale:E,prevAnchor:Re},this.markUsedJustification(ce,l,K,oe),ce.allowVerticalPlacement&&(this.markUsedOrientation(ce,oe,K),this.placedOrientations[K.crossTileID]=oe),{shift:Pe,placedGlyphBoxes:de}}}placeLayerBucketPart(l,d,g){const{bucket:w,layout:E,posMatrix:P,textLabelPlaneMatrix:z,labelToScreenMatrix:B,textPixelRatio:V,holdingForFade:G,collisionBoxArray:X,partiallyEvaluatedTextSize:K,collisionGroup:ce}=l.parameters,oe=E.get("text-optional"),le=E.get("icon-optional"),be=o.getOverlapMode(E,"text-overlap","text-allow-overlap"),Ce=be==="always",Pe=o.getOverlapMode(E,"icon-overlap","icon-allow-overlap"),de=Pe==="always",Re=E.get("text-rotation-alignment")==="map",De=E.get("text-pitch-alignment")==="map",$e=E.get("icon-text-fit")!=="none",Ue=E.get("symbol-z-order")==="viewport-y",Je=Ce&&(de||!w.hasIconData()||le),Ne=de&&(Ce||!w.hasTextData()||oe);!w.collisionArrays&&X&&w.deserializeCollisionBoxes(X);const yt=(ct,bt)=>{if(d[ct.crossTileID])return;if(G)return void(this.placements[ct.crossTileID]=new Ns(!1,!1,!1));let Qt=!1,or=!1,Nt=!0,kr=null,Rr={box:null,offscreen:null},pr={box:null,offscreen:null},yr=null,Fr=null,Vi=null,Ia=0,da=0,Pa=0;bt.textFeatureIndex?Ia=bt.textFeatureIndex:ct.useRuntimeCollisionCircles&&(Ia=ct.featureIndex),bt.verticalTextFeatureIndex&&(da=bt.verticalTextFeatureIndex);const Po=this.retainedQueryData[w.bucketInstanceId].tileID,Qn=this.terrain?(Di,ur)=>this.terrain.getElevation(Po,Di,ur):null;for(const Di of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const ur=bt[Di];ur&&(ur.elevation=Qn?Qn(ur.anchorPointX,ur.anchorPointY):0)}const bn=bt.textBox;if(bn){const Di=Pr=>{let $i=o.WritingMode.horizontal;if(w.allowVerticalPlacement&&!Pr&&this.prevPlacement){const Ui=this.prevPlacement.placedOrientations[ct.crossTileID];Ui&&(this.placedOrientations[ct.crossTileID]=Ui,$i=Ui,this.markUsedOrientation(w,$i,ct))}return $i},ur=(Pr,$i)=>{if(w.allowVerticalPlacement&&ct.numVerticalGlyphVertices>0&&bt.verticalTextBox){for(const Ui of w.writingModes)if(Ui===o.WritingMode.vertical?(Rr=$i(),pr=Rr):Rr=Pr(),Rr&&Rr.box&&Rr.box.length)break}else Rr=Pr()};if(E.get("text-variable-anchor")){let Pr=E.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[ct.crossTileID]){const li=this.prevPlacement.variableOffsets[ct.crossTileID];Pr.indexOf(li.anchor)>0&&(Pr=Pr.filter(ea=>ea!==li.anchor),Pr.unshift(li.anchor))}const $i=(li,ea,as)=>{const kf=li.x2-li.x1,Qs=li.y2-li.y1,zm=ct.textBoxScale,Rf=$e&&Pe==="never"?ea:null;let Do={box:[],offscreen:!1};const os=be!=="never"?2*Pr.length:Pr.length;for(let ss=0;ss<os;++ss){const kc=this.attemptAnchorPlacement(Pr[ss%Pr.length],li,kf,Qs,zm,Re,De,V,P,ce,ss>=Pr.length?be:"never",ct,w,as,Rf,Qn);if(kc&&(Do=kc.placedGlyphBoxes,Do&&Do.box&&Do.box.length)){Qt=!0,kr=kc.shift;break}}return Do};ur(()=>$i(bn,bt.iconBox,o.WritingMode.horizontal),()=>{const li=bt.verticalTextBox;return w.allowVerticalPlacement&&!(Rr&&Rr.box&&Rr.box.length)&&ct.numVerticalGlyphVertices>0&&li?$i(li,bt.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null}}),Rr&&(Qt=Rr.box,Nt=Rr.offscreen);const Ui=Di(Rr&&Rr.box);if(!Qt&&this.prevPlacement){const li=this.prevPlacement.variableOffsets[ct.crossTileID];li&&(this.variableOffsets[ct.crossTileID]=li,this.markUsedJustification(w,li.anchor,ct,Ui))}}else{const Pr=($i,Ui)=>{const li=this.collisionIndex.placeCollisionBox($i,be,V,P,ce.predicate,Qn);return li&&li.box&&li.box.length&&(this.markUsedOrientation(w,Ui,ct),this.placedOrientations[ct.crossTileID]=Ui),li};ur(()=>Pr(bn,o.WritingMode.horizontal),()=>{const $i=bt.verticalTextBox;return w.allowVerticalPlacement&&ct.numVerticalGlyphVertices>0&&$i?Pr($i,o.WritingMode.vertical):{box:null,offscreen:null}}),Di(Rr&&Rr.box&&Rr.box.length)}}if(yr=Rr,Qt=yr&&yr.box&&yr.box.length>0,Nt=yr&&yr.offscreen,ct.useRuntimeCollisionCircles){const Di=w.text.placedSymbolArray.get(ct.centerJustifiedTextSymbolIndex),ur=o.evaluateSizeForFeature(w.textSizeData,K,Di),Pr=E.get("text-padding");Fr=this.collisionIndex.placeCollisionCircles(be,Di,w.lineVertexArray,w.glyphOffsetArray,ur,P,z,B,g,De,ce.predicate,ct.collisionCircleDiameter,Pr,Qn),Fr.circles.length&&Fr.collisionDetected&&!g&&o.warnOnce("Collisions detected, but collision boxes are not shown"),Qt=Ce||Fr.circles.length>0&&!Fr.collisionDetected,Nt=Nt&&Fr.offscreen}if(bt.iconFeatureIndex&&(Pa=bt.iconFeatureIndex),bt.iconBox){const Di=ur=>{const Pr=$e&&kr?Qo(ur,kr.x,kr.y,Re,De,this.transform.angle):ur;return this.collisionIndex.placeCollisionBox(Pr,Pe,V,P,ce.predicate,Qn)};pr&&pr.box&&pr.box.length&&bt.verticalIconBox?(Vi=Di(bt.verticalIconBox),or=Vi.box.length>0):(Vi=Di(bt.iconBox),or=Vi.box.length>0),Nt=Nt&&Vi.offscreen}const eo=oe||ct.numHorizontalGlyphVertices===0&&ct.numVerticalGlyphVertices===0,Lc=le||ct.numIconVertices===0;if(eo||Lc?Lc?eo||(or=or&&Qt):Qt=or&&Qt:or=Qt=or&&Qt,Qt&&yr&&yr.box&&this.collisionIndex.insertCollisionBox(yr.box,be,E.get("text-ignore-placement"),w.bucketInstanceId,pr&&pr.box&&da?da:Ia,ce.ID),or&&Vi&&this.collisionIndex.insertCollisionBox(Vi.box,Pe,E.get("icon-ignore-placement"),w.bucketInstanceId,Pa,ce.ID),Fr&&(Qt&&this.collisionIndex.insertCollisionCircles(Fr.circles,be,E.get("text-ignore-placement"),w.bucketInstanceId,Ia,ce.ID),g)){const Di=w.bucketInstanceId;let ur=this.collisionCircleArrays[Di];ur===void 0&&(ur=this.collisionCircleArrays[Di]=new Ca);for(let Pr=0;Pr<Fr.circles.length;Pr+=4)ur.circles.push(Fr.circles[Pr+0]),ur.circles.push(Fr.circles[Pr+1]),ur.circles.push(Fr.circles[Pr+2]),ur.circles.push(Fr.collisionDetected?1:0)}if(ct.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(w.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ct.crossTileID]=new Ns(Qt||Je,or||Ne,Nt||w.justReloaded),d[ct.crossTileID]=!0};if(Ue){if(l.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const ct=w.getSortedSymbolIndexes(this.transform.angle);for(let bt=ct.length-1;bt>=0;--bt){const Qt=ct[bt];yt(w.symbolInstances.get(Qt),w.collisionArrays[Qt])}}else for(let ct=l.symbolInstanceStart;ct<l.symbolInstanceEnd;ct++)yt(w.symbolInstances.get(ct),w.collisionArrays[ct]);if(g&&w.bucketInstanceId in this.collisionCircleArrays){const ct=this.collisionCircleArrays[w.bucketInstanceId];o.invert(ct.invProjMatrix,P),ct.viewportMatrix=this.collisionIndex.getViewportMatrix()}w.justReloaded=!1}markUsedJustification(l,d,g,w){let E;E=w===o.WritingMode.vertical?g.verticalPlacedTextSymbolIndex:{left:g.leftJustifiedTextSymbolIndex,center:g.centerJustifiedTextSymbolIndex,right:g.rightJustifiedTextSymbolIndex}[o.getAnchorJustification(d)];const P=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex,g.verticalPlacedTextSymbolIndex];for(const z of P)z>=0&&(l.text.placedSymbolArray.get(z).crossTileID=E>=0&&z!==E?0:g.crossTileID)}markUsedOrientation(l,d,g){const w=d===o.WritingMode.horizontal||d===o.WritingMode.horizontalOnly?d:0,E=d===o.WritingMode.vertical?d:0,P=[g.leftJustifiedTextSymbolIndex,g.centerJustifiedTextSymbolIndex,g.rightJustifiedTextSymbolIndex];for(const z of P)l.text.placedSymbolArray.get(z).placedOrientation=w;g.verticalPlacedTextSymbolIndex&&(l.text.placedSymbolArray.get(g.verticalPlacedTextSymbolIndex).placedOrientation=E)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let g=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const w=d?d.symbolFadeChange(l):1,E=d?d.opacities:{},P=d?d.variableOffsets:{},z=d?d.placedOrientations:{};for(const B in this.placements){const V=this.placements[B],G=E[B];G?(this.opacities[B]=new Br(G,w,V.text,V.icon),g=g||V.text!==G.text.placed||V.icon!==G.icon.placed):(this.opacities[B]=new Br(null,w,V.text,V.icon,V.skipFade),g=g||V.text||V.icon)}for(const B in E){const V=E[B];if(!this.opacities[B]){const G=new Br(V,w,!1,!1);G.isHidden()||(this.opacities[B]=G,g=g||V.text.placed||V.icon.placed)}}for(const B in P)this.variableOffsets[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.variableOffsets[B]=P[B]);for(const B in z)this.placedOrientations[B]||!this.opacities[B]||this.opacities[B].isHidden()||(this.placedOrientations[B]=z[B]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");g?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:l)}updateLayerOpacities(l,d){const g={};for(const w of d){const E=w.getBucket(l);E&&w.latestFeatureIndex&&l.id===E.layerIds[0]&&this.updateBucketOpacities(E,g,w.collisionBoxArray)}}updateBucketOpacities(l,d,g){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const w=l.layers[0].layout,E=new Br(null,0,!1,!1,!0),P=w.get("text-allow-overlap"),z=w.get("icon-allow-overlap"),B=w.get("text-variable-anchor"),V=w.get("text-rotation-alignment")==="map",G=w.get("text-pitch-alignment")==="map",X=w.get("icon-text-fit")!=="none",K=new Br(null,0,P&&(z||!l.hasIconData()||w.get("icon-optional")),z&&(P||!l.hasTextData()||w.get("text-optional")),!0);!l.collisionArrays&&g&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(g);const ce=(oe,le,be)=>{for(let Ce=0;Ce<le/4;Ce++)oe.opacityVertexArray.emplaceBack(be)};for(let oe=0;oe<l.symbolInstances.length;oe++){const le=l.symbolInstances.get(oe),{numHorizontalGlyphVertices:be,numVerticalGlyphVertices:Ce,crossTileID:Pe}=le;let de=this.opacities[Pe];d[Pe]?de=E:de||(de=K,this.opacities[Pe]=de),d[Pe]=!0;const Re=le.numIconVertices>0,De=this.placedOrientations[le.crossTileID],$e=De===o.WritingMode.vertical,Ue=De===o.WritingMode.horizontal||De===o.WritingMode.horizontalOnly;if(be>0||Ce>0){const Je=Te(de.text);ce(l.text,be,$e?Fe:Je),ce(l.text,Ce,Ue?Fe:Je);const Ne=de.text.isHidden();[le.rightJustifiedTextSymbolIndex,le.centerJustifiedTextSymbolIndex,le.leftJustifiedTextSymbolIndex].forEach(bt=>{bt>=0&&(l.text.placedSymbolArray.get(bt).hidden=Ne||$e?1:0)}),le.verticalPlacedTextSymbolIndex>=0&&(l.text.placedSymbolArray.get(le.verticalPlacedTextSymbolIndex).hidden=Ne||Ue?1:0);const yt=this.variableOffsets[le.crossTileID];yt&&this.markUsedJustification(l,yt.anchor,le,De);const ct=this.placedOrientations[le.crossTileID];ct&&(this.markUsedJustification(l,"left",le,ct),this.markUsedOrientation(l,ct,le))}if(Re){const Je=Te(de.icon),Ne=!(X&&le.verticalPlacedIconSymbolIndex&&$e);le.placedIconSymbolIndex>=0&&(ce(l.icon,le.numIconVertices,Ne?Je:Fe),l.icon.placedSymbolArray.get(le.placedIconSymbolIndex).hidden=de.icon.isHidden()),le.verticalPlacedIconSymbolIndex>=0&&(ce(l.icon,le.numVerticalIconVertices,Ne?Fe:Je),l.icon.placedSymbolArray.get(le.verticalPlacedIconSymbolIndex).hidden=de.icon.isHidden())}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Je=l.collisionArrays[oe];if(Je){let Ne=new o.pointGeometry(0,0);if(Je.textBox||Je.verticalTextBox){let ct=!0;if(B){const bt=this.variableOffsets[Pe];bt?(Ne=Vs(bt.anchor,bt.width,bt.height,bt.textOffset,bt.textBoxScale),V&&Ne._rotate(G?this.transform.angle:-this.transform.angle)):ct=!1}Je.textBox&&$(l.textCollisionBox.collisionVertexArray,de.text.placed,!ct||$e,Ne.x,Ne.y),Je.verticalTextBox&&$(l.textCollisionBox.collisionVertexArray,de.text.placed,!ct||Ue,Ne.x,Ne.y)}const yt=!!(!Ue&&Je.verticalIconBox);Je.iconBox&&$(l.iconCollisionBox.collisionVertexArray,de.icon.placed,yt,X?Ne.x:0,X?Ne.y:0),Je.verticalIconBox&&$(l.iconCollisionBox.collisionVertexArray,de.icon.placed,!yt,X?Ne.x:0,X?Ne.y:0)}}}if(l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.text.opacityVertexArray.length!==l.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${l.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${l.text.layoutVertexArray.length}) / 4`);if(l.icon.opacityVertexArray.length!==l.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${l.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${l.icon.layoutVertexArray.length}) / 4`);if(l.bucketInstanceId in this.collisionCircleArrays){const oe=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=oe.invProjMatrix,l.placementViewportMatrix=oe.viewportMatrix,l.collisionCircleArray=oe.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,d){const g=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*g>l}setStale(){this.stale=!0}}function $(x,l,d,g,w){x.emplaceBack(l?1:0,d?1:0,g||0,w||0),x.emplaceBack(l?1:0,d?1:0,g||0,w||0),x.emplaceBack(l?1:0,d?1:0,g||0,w||0),x.emplaceBack(l?1:0,d?1:0,g||0,w||0)}const W=Math.pow(2,25),te=Math.pow(2,24),re=Math.pow(2,17),ge=Math.pow(2,16),Se=Math.pow(2,9),xe=Math.pow(2,8),_e=Math.pow(2,1);function Te(x){if(x.opacity===0&&!x.placed)return 0;if(x.opacity===1&&x.placed)return 4294967295;const l=x.placed?1:0,d=Math.floor(127*x.opacity);return d*W+l*te+d*re+l*ge+d*Se+l*xe+d*_e+l}const Fe=0;class Xe{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&!l.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,d,g,w,E){const P=this._bucketParts;for(;this._currentTileIndex<l.length;)if(d.getBucketParts(P,w,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,E())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((z,B)=>z.sortKey-B.sortKey));this._currentPartIndex<P.length;)if(d.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,g),this._currentPartIndex++,E())return!0;return!1}}class Be{constructor(l,d,g,w,E,P,z,B){this.placement=new ne(l,d,P,z,B),this._currentPlacementIndex=g.length-1,this._forceFullPlacement=w,this._showCollisionBoxes=E,this._done=!1}isDone(){return this._done}continuePlacement(l,d,g){const w=o.exported.now(),E=()=>{const P=o.exported.now()-w;return!this._forceFullPlacement&&P>2};for(;this._currentPlacementIndex>=0;){const P=d[l[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=z)&&(!P.maxzoom||P.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new Xe(P)),this._inProgressLayer.continuePlacement(g[P.source],this.placement,this._showCollisionBoxes,P,E))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const At=512/o.EXTENT/2;class Pt{constructor(l,d,g){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=g;for(let w=0;w<d.length;w++){const E=d.get(w),P=E.key;this.indexedSymbolInstances[P]||(this.indexedSymbolInstances[P]=[]),this.indexedSymbolInstances[P].push({crossTileID:E.crossTileID,coord:this.getScaledCoordinates(E,l)})}}getScaledCoordinates(l,d){const g=At/Math.pow(2,d.canonical.z-this.tileID.canonical.z);return{x:Math.floor((d.canonical.x*o.EXTENT+l.anchorX)*g),y:Math.floor((d.canonical.y*o.EXTENT+l.anchorY)*g)}}findMatches(l,d,g){const w=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let E=0;E<l.length;E++){const P=l.get(E);if(P.crossTileID)continue;const z=this.indexedSymbolInstances[P.key];if(!z)continue;const B=this.getScaledCoordinates(P,d);for(const V of z)if(Math.abs(V.coord.x-B.x)<=w&&Math.abs(V.coord.y-B.y)<=w&&!g[V.crossTileID]){g[V.crossTileID]=!0,P.crossTileID=V.crossTileID;break}}}}class _t{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ut{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const d=Math.round((l-this.lng)/360);if(d!==0)for(const g in this.indexes){const w=this.indexes[g],E={};for(const P in w){const z=w[P];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+d),E[z.tileID.key]=z}this.indexes[g]=E}this.lng=l}addBucket(l,d,g){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let E=0;E<d.symbolInstances.length;E++)d.symbolInstances.get(E).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const w=this.usedCrossTileIDs[l.overscaledZ];for(const E in this.indexes){const P=this.indexes[E];if(Number(E)>l.overscaledZ)for(const z in P){const B=P[z];B.tileID.isChildOf(l)&&B.findMatches(d.symbolInstances,l,w)}else{const z=P[l.scaledTo(Number(E)).key];z&&z.findMatches(d.symbolInstances,l,w)}}for(let E=0;E<d.symbolInstances.length;E++){const P=d.symbolInstances.get(E);P.crossTileID||(P.crossTileID=g.generate(),w[P.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Pt(l,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(l,d){for(const g in d.indexedSymbolInstances)for(const w of d.indexedSymbolInstances[g])delete this.usedCrossTileIDs[l][w.crossTileID]}removeStaleBuckets(l){let d=!1;for(const g in this.indexes){const w=this.indexes[g];for(const E in w)l[w[E].bucketInstanceId]||(this.removeBucketCrossTileIDs(g,w[E]),delete w[E],d=!0)}return d}}class qt{constructor(){this.layerIndexes={},this.crossTileIDs=new _t,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,d,g){let w=this.layerIndexes[l.id];w===void 0&&(w=this.layerIndexes[l.id]=new Ut);let E=!1;const P={};w.handleWrapJump(g);for(const z of d){const B=z.getBucket(l);B&&l.id===B.layerIds[0]&&(B.bucketInstanceId||(B.bucketInstanceId=++this.maxBucketInstanceId),w.addBucket(z.tileID,B,this.crossTileIDs)&&(E=!0),P[B.bucketInstanceId]=!0)}return w.removeStaleBuckets(P)&&(E=!0),E}pruneUnusedLayers(l){const d={};l.forEach(g=>{d[g]=!0});for(const g in this.layerIndexes)d[g]||delete this.layerIndexes[g]}}var gr=o.createLayout([{name:"a_pos",type:"Int16",components:2}]);class Xt extends o.Evented{constructor(l){super(),this.sourceCache=l,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=l._cache.max,l.usedForTerrain=!0,l.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const l in this._tiles){const d=this._tiles[l];d.textures.forEach(g=>g.destroy()),d.textures=[]}}update(l,d){this.sourceCache.update(l,d),this._renderableTilesKeys=[];for(const g of l.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))this._renderableTilesKeys.push(g.key),this._tiles[g.key]||(g.posMatrix=new Float64Array(16),o.ortho(g.posMatrix,0,o.EXTENT,0,o.EXTENT,0,1),this._tiles[g.key]=new dr(g,this.tileSize))}removeOutdated(l){const d={};this.renderHistory=this.renderHistory.filter((g,w)=>this.renderHistory.indexOf(g)===w).slice(0,this.renderHistorySize);for(const g of this._renderableTilesKeys)d[g]=!0;for(const g of this.renderHistory)d[g]=!0;for(const g in this._tiles)d[g]||(this._tiles[g].clearTextures(l),delete this._tiles[g])}getRenderableTiles(){return this._renderableTilesKeys.map(l=>this.getTileByID(l))}getTileByID(l){return this._tiles[l]}getTerrainCoords(l){const d={};for(const g of this._renderableTilesKeys){const w=this._tiles[g].tileID;if(w.canonical.equals(l.canonical)){const E=l.clone();E.posMatrix=new Float64Array(16),o.ortho(E.posMatrix,0,o.EXTENT,0,o.EXTENT,0,1),d[g]=E}else if(w.canonical.isChildOf(l.canonical)){const E=l.clone();E.posMatrix=new Float64Array(16);const P=w.canonical.z-l.canonical.z,z=w.canonical.x-(w.canonical.x>>P<<P),B=w.canonical.y-(w.canonical.y>>P<<P),V=o.EXTENT>>P;o.ortho(E.posMatrix,0,V,0,V,0,1),o.translate(E.posMatrix,E.posMatrix,[-z*V,-B*V,0]),d[g]=E}else if(l.canonical.isChildOf(w.canonical)){const E=l.clone();E.posMatrix=new Float64Array(16);const P=l.canonical.z-w.canonical.z,z=l.canonical.x-(l.canonical.x>>P<<P),B=l.canonical.y-(l.canonical.y>>P<<P),V=o.EXTENT>>P;o.ortho(E.posMatrix,0,o.EXTENT,0,o.EXTENT,0,1),o.translate(E.posMatrix,E.posMatrix,[z*V,B*V,0]),o.scale(E.posMatrix,E.posMatrix,[1/2**P,1/2**P,0]),d[g]=E}}return d}getSourceTile(l,d){const g=this.sourceCache._source;let w=l.overscaledZ-this.deltaZoom;if(w>g.maxzoom&&(w=g.maxzoom),w<g.minzoom)return null;this._sourceTileCache[l.key]||(this._sourceTileCache[l.key]=l.scaledTo(w).key);let E=this.sourceCache.getTileByID(this._sourceTileCache[l.key]);if((!E||!E.dem)&&d)for(;w>=g.minzoom&&(!E||!E.dem);)E=this.sourceCache.getTileByID(l.scaledTo(w--).key);return E}tilesAfterTime(l=Date.now()){return Object.values(this._tiles).filter(d=>d.timeLoaded>=l)}}class ar{constructor(l,d,g){this.style=l,this.sourceCache=new Xt(d),this.options=g,this.exaggeration=typeof g.exaggeration=="number"?g.exaggeration:1,this.elevationOffset=typeof g.elevationOffset=="number"?g.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(l,d,g,w=o.EXTENT){if(!(d>=0&&d<w&&g>=0&&g<w))return this.elevationOffset;let E=0;const P=this.getTerrainData(l);if(P.tile&&P.tile.dem){const z=o.transformMat4$1([],[d/w*o.EXTENT,g/w*o.EXTENT],P.u_terrain_matrix),B=[z[0]*P.tile.dem.dim,z[1]*P.tile.dem.dim],V=[Math.floor(B[0]),Math.floor(B[1])],G=P.tile.dem.get(V[0],V[1]),X=P.tile.dem.get(V[0],V[1]+1),K=P.tile.dem.get(V[0]+1,V[1]),ce=P.tile.dem.get(V[0]+1,V[1]+1);E=o.number(o.number(G,X,B[0]-V[0]),o.number(K,ce,B[0]-V[0]),B[1]-V[1])}return E}rememberForRerender(l,d){for(const g in this.sourceCache._tiles){const w=this.sourceCache._tiles[g];(w.tileID.equals(d)||w.tileID.isChildOf(d))&&(l===this.sourceCache.sourceCache.id&&(w.timeLoaded=Date.now()),this._rerender[l]=this._rerender[l]||{},this._rerender[l][w.tileID.key]=!0)}}needsRerender(l,d){return this._rerender[l]&&this._rerender[l][d.key]}clearRerenderCache(){this._rerender={}}getElevation(l,d,g,w=o.EXTENT){return(this.getDEMElevation(l,d,g,w)+this.elevationOffset)*this.exaggeration}getTerrainData(l){if(!this._emptyDemTexture){const w=this.style.map.painter.context,E=new o.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new L(w,E,w.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new L(w,new o.RGBAImage({width:1,height:1}),w.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.identity([])}const d=this.sourceCache.getSourceTile(l,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){const w=this.style.map.painter.context;d.demTexture=this.style.map.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new L(w,d.dem.getPixels(),w.gl.RGBA,{premultiply:!1}),d.demTexture.bind(w.gl.NEAREST,w.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}const g=d&&d+d.tileID.key+l.key;if(g&&!this._demMatrixCache[g]){const w=this.sourceCache.sourceCache._source.maxzoom;let E=l.canonical.z-d.tileID.canonical.z;l.overscaledZ>l.canonical.z&&(l.canonical.z>=w?E=l.canonical.z-w:o.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=l.canonical.x-(l.canonical.x>>E<<E),z=l.canonical.y-(l.canonical.y>>E<<E),B=o.fromScaling(new Float64Array(16),[1/(o.EXTENT<<E),1/(o.EXTENT<<E),0]);o.translate(B,B,[P*o.EXTENT,z*o.EXTENT,0]),this._demMatrixCache[l.key]={matrix:B,coord:l}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:g?this._demMatrixCache[l.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getRTTFramebuffer(){const l=this.style.map.painter;if(!this._rttFramebuffer){const d=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=l.context.createFramebuffer(d,d,!0),this._rttFramebuffer.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,d,d))}return this._rttFramebuffer}getFramebuffer(l){const d=this.style.map.painter,g=d.width/devicePixelRatio,w=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===g&&this._fbo.height===w||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new L(d.context,{width:g,height:w,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new L(d.context,{width:g,height:w,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(g,w,!0),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,g,w))),this._fbo.colorAttachment.set(l==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const l=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let E=0,P=0;E<this._coordsTextureSize;E++)for(let z=0;z<this._coordsTextureSize;z++,P+=4)d[P+0]=255&z,d[P+1]=255&E,d[P+2]=z>>8<<4|E>>8,d[P+3]=0;const g=new o.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),w=new L(l,g,l.gl.RGBA,{premultiply:!1});return w.bind(l.gl.NEAREST,l.gl.CLAMP_TO_EDGE),this._coordsTexture=w,w}pointCoordinate(l){const d=new Uint8Array(4),g=this.style.map.painter,w=g.context,E=w.gl;w.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),E.readPixels(l.x,g.height/devicePixelRatio-l.y-1,1,1,E.RGBA,E.UNSIGNED_BYTE,d),w.bindFramebuffer.set(null);const P=d[0]+(d[2]>>4<<8),z=d[1]+((15&d[2])<<8),B=this.coordsIndex[255-d[3]],V=B&&this.sourceCache.getTileByID(B);if(!V)return null;const G=this._coordsTextureSize,X=(1<<V.tileID.canonical.z)*G;return new o.MercatorCoordinate((V.tileID.canonical.x*G+P)/X,(V.tileID.canonical.y*G+z)/X,this.getElevation(V.tileID,P,z,G))}getTerrainMesh(){if(this._mesh)return this._mesh;const l=this.style.map.painter.context,d=new o.PosArray,g=new o.TriangleIndexArray,w=this.meshSize,E=o.EXTENT/w,P=w*w;for(let z=0;z<=w;z++)for(let B=0;B<=w;B++)d.emplaceBack(B*E,z*E);for(let z=0;z<P;z+=w+1)for(let B=0;B<w;B++)g.emplaceBack(B+z,w+B+z+1,w+B+z+2),g.emplaceBack(B+z,w+B+z+2,B+z+1);return this._mesh={indexBuffer:l.createIndexBuffer(g),vertexBuffer:l.createVertexBuffer(d,gr.members),segments:o.SegmentVector.simpleSegment(0,0,d.length,g.length)},this._mesh}getMinMaxElevation(l){const d=this.getTerrainData(l).tile,g={minElevation:null,maxElevation:null};return d&&d.dem&&(g.minElevation=(d.dem.min+this.elevationOffset)*this.exaggeration,g.maxElevation=(d.dem.max+this.elevationOffset)*this.exaggeration),g}}const _r=(x,l)=>o.emitValidationErrors(x,l&&l.filter(d=>d.identifier!=="source.canvas")),Gr=o.pick(qe,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ni=o.pick(qe,["setCenter","setZoom","setBearing","setPitch"]),ni=function(){const x={},l=o.spec.$version;for(const d in o.spec.$root){const g=o.spec.$root[d];if(g.required){let w=null;w=d==="version"?l:g.type==="array"?[]:{},w!=null&&(x[d]=w)}}return x}();class tn extends o.Evented{constructor(l,d={}){super(),this.map=l,this.dispatcher=new ae(We(),this),this.imageManager=new M,this.imageManager.setEventedParent(this),this.glyphManager=new q(l._requestManager,d.localIdeographFontFamily),this.lineAtlas=new ie(256,512),this.crossTileSymbolIndex=new qt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const g=this;this._rtlTextPluginCallback=tn.registerForPluginStateChange(w=>{g.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:w.pluginStatus,pluginURL:w.pluginURL},(E,P)=>{if(o.triggerPluginCompletionEvent(E),P&&P.every(z=>z))for(const z in g.sourceCaches)g.sourceCaches[z].reload()})}),this.on("data",w=>{if(w.dataType!=="source"||w.sourceDataType!=="metadata")return;const E=this.sourceCaches[w.sourceId];if(!E)return;const P=E.getSource();if(P&&P.vectorLayerIds)for(const z in this._layers){const B=this._layers[z];B.source===P.id&&this._validateLayer(B)}})}loadURL(l,d={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const g=typeof d.validate!="boolean"||d.validate,w=this.map._requestManager.transformRequest(l,o.ResourceType.Style);this._request=o.getJSON(w,(E,P)=>{this._request=null,E?this.fire(new o.ErrorEvent(E)):P&&this._load(P,g)})}loadJSON(l,d={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(l,d.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(ni,!1)}_load(l,d){if(d&&_r(this,o.validateStyle(l)))return;this._loaded=!0,this.stylesheet=l;for(const w in l.sources)this.addSource(w,l.sources[w],{validate:!1});l.sprite?this._loadSprite(l.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(l.glyphs);const g=dt(this.stylesheet.layers);this._order=g.map(w=>w.id),this._layers={},this._serializedLayers={};for(let w of g)w=o.createStyleLayer(w),w.setEventedParent(this,{layer:{id:w.id}}),this._layers[w.id]=w,this._serializedLayers[w.id]=w.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new j(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}_loadSprite(l){this._spriteRequest=function(d,g,w,E){let P,z,B;const V=w>1?"@2x":"";let G=o.getJSON(g.transformRequest(g.normalizeSpriteURL(d,V,".json"),o.ResourceType.SpriteJSON),(ce,oe)=>{G=null,B||(B=ce,P=oe,K())}),X=o.getImage(g.transformRequest(g.normalizeSpriteURL(d,V,".png"),o.ResourceType.SpriteImage),(ce,oe)=>{X=null,B||(B=ce,z=oe,K())});function K(){if(B)E(B);else if(P&&z){const ce=o.exported.getImageData(z),oe={};for(const le in P){const{width:be,height:Ce,x:Pe,y:de,sdf:Re,pixelRatio:De,stretchX:$e,stretchY:Ue,content:Je}=P[le],Ne=new o.RGBAImage({width:be,height:Ce});o.RGBAImage.copy(ce,Ne,{x:Pe,y:de},{x:0,y:0},{width:be,height:Ce}),oe[le]={data:Ne,pixelRatio:De,sdf:Re,stretchX:$e,stretchY:Ue,content:Je}}E(null,oe)}}return{cancel(){G&&(G.cancel(),G=null),X&&(X.cancel(),X=null)}}}(l,this.map._requestManager,this.map.getPixelRatio(),(d,g)=>{if(this._spriteRequest=null,d)this.fire(new o.ErrorEvent(d));else if(g)for(const w in g)this.imageManager.addImage(w,g[w]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(l){const d=this.sourceCaches[l.source];if(!d)return;const g=l.sourceLayer;if(!g)return;const w=d.getSource();(w.type==="geojson"||w.vectorLayerIds&&w.vectorLayerIds.indexOf(g)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${g}" does not exist on source "${w.id}" as specified by style layer "${l.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this.sourceCaches)if(!this.sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const d=[];for(const g of l){const w=this._layers[g];w.type!=="custom"&&d.push(w.serialize())}return d}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const l in this.sourceCaches)if(this.sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(l){if(!this._loaded)return;const d=this._changed;if(this._changed){const w=Object.keys(this._updatedLayers),E=Object.keys(this._removedLayers);(w.length||E.length)&&this._updateWorkerLayers(w,E);for(const P in this._updatedSources){const z=this._updatedSources[P];if(z==="reload")this._reloadSource(P);else{if(z!=="clear")throw new Error(`Invalid action ${z}`);this._clearSource(P)}}this._updateTilesForChangedImages();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(l);this.light.updateTransitions(l),this._resetUpdates()}const g={};for(const w in this.sourceCaches){const E=this.sourceCaches[w];g[w]=E.used,E.used=!1}for(const w of this._order){const E=this._layers[w];E.recalculate(l,this._availableImages),!E.isHidden(l.zoom)&&E.source&&(this.sourceCaches[E.source].used=!0)}for(const w in g){const E=this.sourceCaches[w];g[w]!==E.used&&E.fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:w}))}this.light.recalculate(l),this.z=l.zoom,d&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(l){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),l){const d=this.sourceCaches[l.source];if(!d)throw new Error(`cannot load terrain, because there exists no source with ID: ${l.source}`);this.terrain=new ar(this,d,l),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=g=>{g.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=g=>{g.tile&&(g.sourceId===l.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(g.sourceId,g.tile.tileID)):g.source.type==="geojson"&&this.terrain.rememberForRerender(g.sourceId,g.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new o.Event("terrain",{terrain:l}))}setState(l){if(this._checkLoaded(),_r(this,o.validateStyle(l)))return!1;(l=o.clone$1(l)).layers=dt(l.layers);const d=function(w,E){if(!w)return[{command:qe.setStyle,args:[E]}];let P=[];try{if(!_(w.version,E.version))return[{command:qe.setStyle,args:[E]}];_(w.center,E.center)||P.push({command:qe.setCenter,args:[E.center]}),_(w.zoom,E.zoom)||P.push({command:qe.setZoom,args:[E.zoom]}),_(w.bearing,E.bearing)||P.push({command:qe.setBearing,args:[E.bearing]}),_(w.pitch,E.pitch)||P.push({command:qe.setPitch,args:[E.pitch]}),_(w.sprite,E.sprite)||P.push({command:qe.setSprite,args:[E.sprite]}),_(w.glyphs,E.glyphs)||P.push({command:qe.setGlyphs,args:[E.glyphs]}),_(w.transition,E.transition)||P.push({command:qe.setTransition,args:[E.transition]}),_(w.light,E.light)||P.push({command:qe.setLight,args:[E.light]});const z={},B=[];(function(G,X,K,ce){let oe;for(oe in X=X||{},G=G||{})Object.prototype.hasOwnProperty.call(G,oe)&&(Object.prototype.hasOwnProperty.call(X,oe)||Qe(oe,K,ce));for(oe in X)Object.prototype.hasOwnProperty.call(X,oe)&&(Object.prototype.hasOwnProperty.call(G,oe)?_(G[oe],X[oe])||(G[oe].type==="geojson"&&X[oe].type==="geojson"&&Lt(G,X,oe)?K.push({command:qe.setGeoJSONSourceData,args:[oe,X[oe].data]}):Bt(oe,X,K,ce)):at(oe,X,K))})(w.sources,E.sources,B,z);const V=[];w.layers&&w.layers.forEach(G=>{z[G.source]?P.push({command:qe.removeLayer,args:[G.id]}):V.push(G)}),P=P.concat(B),function(G,X,K){X=X||[];const ce=(G=G||[]).map(Ht),oe=X.map(Ht),le=G.reduce(ir,{}),be=X.reduce(ir,{}),Ce=ce.slice(),Pe=Object.create(null);let de,Re,De,$e,Ue,Je,Ne;for(de=0,Re=0;de<ce.length;de++)De=ce[de],Object.prototype.hasOwnProperty.call(be,De)?Re++:(K.push({command:qe.removeLayer,args:[De]}),Ce.splice(Ce.indexOf(De,Re),1));for(de=0,Re=0;de<oe.length;de++)De=oe[oe.length-1-de],Ce[Ce.length-1-de]!==De&&(Object.prototype.hasOwnProperty.call(le,De)?(K.push({command:qe.removeLayer,args:[De]}),Ce.splice(Ce.lastIndexOf(De,Ce.length-Re),1)):Re++,Je=Ce[Ce.length-de],K.push({command:qe.addLayer,args:[be[De],Je]}),Ce.splice(Ce.length-de,0,De),Pe[De]=!0);for(de=0;de<oe.length;de++)if(De=oe[de],$e=le[De],Ue=be[De],!Pe[De]&&!_($e,Ue))if(_($e.source,Ue.source)&&_($e["source-layer"],Ue["source-layer"])&&_($e.type,Ue.type)){for(Ne in Ot($e.layout,Ue.layout,K,De,null,qe.setLayoutProperty),Ot($e.paint,Ue.paint,K,De,null,qe.setPaintProperty),_($e.filter,Ue.filter)||K.push({command:qe.setFilter,args:[De,Ue.filter]}),_($e.minzoom,Ue.minzoom)&&_($e.maxzoom,Ue.maxzoom)||K.push({command:qe.setLayerZoomRange,args:[De,Ue.minzoom,Ue.maxzoom]}),$e)Object.prototype.hasOwnProperty.call($e,Ne)&&Ne!=="layout"&&Ne!=="paint"&&Ne!=="filter"&&Ne!=="metadata"&&Ne!=="minzoom"&&Ne!=="maxzoom"&&(Ne.indexOf("paint.")===0?Ot($e[Ne],Ue[Ne],K,De,Ne.slice(6),qe.setPaintProperty):_($e[Ne],Ue[Ne])||K.push({command:qe.setLayerProperty,args:[De,Ne,Ue[Ne]]}));for(Ne in Ue)Object.prototype.hasOwnProperty.call(Ue,Ne)&&!Object.prototype.hasOwnProperty.call($e,Ne)&&Ne!=="layout"&&Ne!=="paint"&&Ne!=="filter"&&Ne!=="metadata"&&Ne!=="minzoom"&&Ne!=="maxzoom"&&(Ne.indexOf("paint.")===0?Ot($e[Ne],Ue[Ne],K,De,Ne.slice(6),qe.setPaintProperty):_($e[Ne],Ue[Ne])||K.push({command:qe.setLayerProperty,args:[De,Ne,Ue[Ne]]}))}else K.push({command:qe.removeLayer,args:[De]}),Je=Ce[Ce.lastIndexOf(De)+1],K.push({command:qe.addLayer,args:[Ue,Je]})}(V,E.layers,P)}catch(z){console.warn("Unable to compute style diff:",z),P=[{command:qe.setStyle,args:[E]}]}return P}(this.serialize(),l).filter(w=>!(w.command in Ni));if(d.length===0)return!1;const g=d.filter(w=>!(w.command in Gr));if(g.length>0)throw new Error(`Unimplemented: ${g.map(w=>w.command).join(", ")}.`);return d.forEach(w=>{w.command!=="setTransition"&&this[w.command].apply(this,w.args)}),this.stylesheet=l,!0}addImage(l,d){if(this.getImage(l))return this.fire(new o.ErrorEvent(new Error(`An image named "${l}" already exists.`)));this.imageManager.addImage(l,d),this._afterImageUpdated(l)}updateImage(l,d){this.imageManager.updateImage(l,d)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){if(!this.getImage(l))return this.fire(new o.ErrorEvent(new Error(`An image named "${l}" does not exist.`)));this.imageManager.removeImage(l),this._afterImageUpdated(l)}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(l,d,g={}){if(this._checkLoaded(),this.sourceCaches[l]!==void 0)throw new Error(`Source "${l}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(o.validateStyle.source,`sources.${l}`,d,null,g))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const w=this.sourceCaches[l]=new Ye(l,d,this.dispatcher);w.style=this,w.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:w.serialize(),sourceId:l})),w.onAdd(this.map),this._changed=!0}removeSource(l){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error("There is no source with this ID");for(const g in this._layers)if(this._layers[g].source===l)return this.fire(new o.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${g}" is using it.`)));const d=this.sourceCaches[l];delete this.sourceCaches[l],delete this._updatedSources[l],d.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:l})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(l,d){if(this._checkLoaded(),this.sourceCaches[l]===void 0)throw new Error(`There is no source with this ID=${l}`);const g=this.sourceCaches[l].getSource();if(g.type!=="geojson")throw new Error(`geojsonSource.type is ${g.type}, which is !== 'geojson`);g.setData(d),this._changed=!0}getSource(l){return this.sourceCaches[l]&&this.sourceCaches[l].getSource()}addLayer(l,d,g={}){this._checkLoaded();const w=l.id;if(this.getLayer(w))return void this.fire(new o.ErrorEvent(new Error(`Layer "${w}" already exists on this map.`)));let E;if(l.type==="custom"){if(_r(this,o.validateCustomStyleLayer(l)))return;E=o.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(w,l.source),l=o.clone$1(l),l=o.extend(l,{source:w})),this._validate(o.validateStyle.layer,`layers.${w}`,l,{arrayIndex:-1},g))return;E=o.createStyleLayer(l),this._validateLayer(E),E.setEventedParent(this,{layer:{id:w}}),this._serializedLayers[E.id]=E.serialize()}const P=d?this._order.indexOf(d):this._order.length;if(d&&P===-1)this.fire(new o.ErrorEvent(new Error(`Cannot add layer "${w}" before non-existing layer "${d}".`)));else{if(this._order.splice(P,0,w),this._layerOrderChanged=!0,this._layers[w]=E,this._removedLayers[w]&&E.source&&E.type!=="custom"){const z=this._removedLayers[w];delete this._removedLayers[w],z.type!==E.type?this._updatedSources[E.source]="clear":(this._updatedSources[E.source]="reload",this.sourceCaches[E.source].pause())}this._updateLayer(E),E.onAdd&&E.onAdd(this.map)}}moveLayer(l,d){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===d)return;const g=this._order.indexOf(l);this._order.splice(g,1);const w=d?this._order.indexOf(d):this._order.length;d&&w===-1?this.fire(new o.ErrorEvent(new Error(`Cannot move layer "${l}" before non-existing layer "${d}".`))):(this._order.splice(w,0,l),this._layerOrderChanged=!0)}removeLayer(l){this._checkLoaded();const d=this._layers[l];if(!d)return void this.fire(new o.ErrorEvent(new Error(`Cannot remove non-existing layer "${l}".`)));d.setEventedParent(null);const g=this._order.indexOf(l);this._order.splice(g,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=d,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],d.onRemove&&d.onRemove(this.map)}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}setLayerZoomRange(l,d,g){this._checkLoaded();const w=this.getLayer(l);w?w.minzoom===d&&w.maxzoom===g||(d!=null&&(w.minzoom=d),g!=null&&(w.maxzoom=g),this._updateLayer(w)):this.fire(new o.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${l}".`)))}setFilter(l,d,g={}){this._checkLoaded();const w=this.getLayer(l);if(w){if(!_(w.filter,d))return d==null?(w.filter=void 0,void this._updateLayer(w)):void(this._validate(o.validateStyle.filter,`layers.${w.id}.filter`,d,null,g)||(w.filter=o.clone$1(d),this._updateLayer(w)))}else this.fire(new o.ErrorEvent(new Error(`Cannot filter non-existing layer "${l}".`)))}getFilter(l){return o.clone$1(this.getLayer(l).filter)}setLayoutProperty(l,d,g,w={}){this._checkLoaded();const E=this.getLayer(l);E?_(E.getLayoutProperty(d),g)||(E.setLayoutProperty(d,g,w),this._updateLayer(E)):this.fire(new o.ErrorEvent(new Error(`Cannot style non-existing layer "${l}".`)))}getLayoutProperty(l,d){const g=this.getLayer(l);if(g)return g.getLayoutProperty(d);this.fire(new o.ErrorEvent(new Error(`Cannot get style of non-existing layer "${l}".`)))}setPaintProperty(l,d,g,w={}){this._checkLoaded();const E=this.getLayer(l);E?_(E.getPaintProperty(d),g)||(E.setPaintProperty(d,g,w)&&this._updateLayer(E),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new o.ErrorEvent(new Error(`Cannot style non-existing layer "${l}".`)))}getPaintProperty(l,d){return this.getLayer(l).getPaintProperty(d)}setFeatureState(l,d){this._checkLoaded();const g=l.source,w=l.sourceLayer,E=this.sourceCaches[g];if(E===void 0)return void this.fire(new o.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const P=E.getSource().type;P==="geojson"&&w?this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||w?(l.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),E.setFeatureState(w,l.id,d)):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(l,d){this._checkLoaded();const g=l.source,w=this.sourceCaches[g];if(w===void 0)return void this.fire(new o.ErrorEvent(new Error(`The source '${g}' does not exist in the map's style.`)));const E=w.getSource().type,P=E==="vector"?l.sourceLayer:void 0;E!=="vector"||P?d&&typeof l.id!="string"&&typeof l.id!="number"?this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):w.removeFeatureState(P,l.id,d):this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(l){this._checkLoaded();const d=l.source,g=l.sourceLayer,w=this.sourceCaches[d];if(w!==void 0)return w.getSource().type!=="vector"||g?(l.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),w.getFeatureState(g,l.id)):void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.ErrorEvent(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:o.mapObject(this.sourceCaches,l=>l.serialize()),layers:this._serializeLayers(this._order)},l=>l!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0,l.source&&!this._updatedSources[l.source]&&this.sourceCaches[l.source].getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",this.sourceCaches[l.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(l){const d=P=>this._layers[P].type==="fill-extrusion",g={},w=[];for(let P=this._order.length-1;P>=0;P--){const z=this._order[P];if(d(z)){g[z]=P;for(const B of l){const V=B[z];if(V)for(const G of V)w.push(G)}}}w.sort((P,z)=>z.intersectionZ-P.intersectionZ);const E=[];for(let P=this._order.length-1;P>=0;P--){const z=this._order[P];if(d(z))for(let B=w.length-1;B>=0;B--){const V=w[B].feature;if(g[V.layer.id]<P)break;E.push(V),w.pop()}else for(const B of l){const V=B[z];if(V)for(const G of V)E.push(G.feature)}}return E}queryRenderedFeatures(l,d,g){d&&d.filter&&this._validate(o.validateStyle.filter,"queryRenderedFeatures.filter",d.filter,null,d);const w={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const P of d.layers){const z=this._layers[P];if(!z)return this.fire(new o.ErrorEvent(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];w[z.source]=!0}}const E=[];d.availableImages=this._availableImages;for(const P in this.sourceCaches)d.layers&&!w[P]||E.push(Ir(this.sourceCaches[P],this._layers,this._serializedLayers,l,d,g));return this.placement&&E.push(function(P,z,B,V,G,X,K){const ce={},oe=X.queryRenderedSymbols(V),le=[];for(const be of Object.keys(oe).map(Number))le.push(K[be]);le.sort(Cr);for(const be of le){const Ce=be.featureIndex.lookupSymbolFeatures(oe[be.bucketInstanceId],z,be.bucketIndex,be.sourceLayerIndex,G.filter,G.layers,G.availableImages,P);for(const Pe in Ce){const de=ce[Pe]=ce[Pe]||[],Re=Ce[Pe];Re.sort((De,$e)=>{const Ue=be.featureSortOrder;if(Ue){const Je=Ue.indexOf(De.featureIndex);return Ue.indexOf($e.featureIndex)-Je}return $e.featureIndex-De.featureIndex});for(const De of Re)de.push(De)}}for(const be in ce)ce[be].forEach(Ce=>{const Pe=Ce.feature,de=B[P[be].source].getFeatureState(Pe.layer["source-layer"],Pe.id);Pe.source=Pe.layer.source,Pe.layer["source-layer"]&&(Pe.sourceLayer=Pe.layer["source-layer"]),Pe.state=de});return ce}(this._layers,this._serializedLayers,this.sourceCaches,l,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(E)}querySourceFeatures(l,d){d&&d.filter&&this._validate(o.validateStyle.filter,"querySourceFeatures.filter",d.filter,null,d);const g=this.sourceCaches[l];return g?function(w,E){const P=w.getRenderableIds().map(V=>w.getTileByID(V)),z=[],B={};for(let V=0;V<P.length;V++){const G=P[V],X=G.tileID.canonical.key;B[X]||(B[X]=!0,G.querySourceFeatures(z,E))}return z}(g,d):[]}addSourceType(l,d,g){return tn.getSourceType(l)?g(new Error(`A source type called "${l}" already exists.`)):(tn.setSourceType(l,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:d.workerSourceURL},g):g(null,null))}getLight(){return this.light.getLight()}setLight(l,d={}){this._checkLoaded();const g=this.light.getLight();let w=!1;for(const P in l)if(!_(l[P],g[P])){w=!0;break}if(!w)return;const E={now:o.exported.now(),transition:o.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(l,d),this.light.updateTransitions(E)}_validate(l,d,g,w,E={}){return(!E||E.validate!==!1)&&_r(this,l.call(o.validateStyle,o.extend({key:d,style:this.serialize(),value:g,styleSpec:o.spec},w)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const d=this.sourceCaches[l];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){this.sourceCaches[l].clearTiles()}_reloadSource(l){this.sourceCaches[l].resume(),this.sourceCaches[l].reload()}_updateSources(l){for(const d in this.sourceCaches)this.sourceCaches[d].update(l,this.terrain)}_generateCollisionBoxes(){for(const l in this.sourceCaches)this._reloadSource(l)}_updatePlacement(l,d,g,w,E=!1){let P=!1,z=!1;const B={};for(const V of this._order){const G=this._layers[V];if(G.type!=="symbol")continue;if(!B[G.source]){const K=this.sourceCaches[G.source];B[G.source]=K.getRenderableIds(!0).map(ce=>K.getTileByID(ce)).sort((ce,oe)=>oe.tileID.overscaledZ-ce.tileID.overscaledZ||(ce.tileID.isLessThan(oe.tileID)?-1:1))}const X=this.crossTileSymbolIndex.addLayer(G,B[G.source],l.center.lng);P=P||X}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((E=E||this._layerOrderChanged||g===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),l.zoom))&&(this.pauseablePlacement=new Be(l,this.terrain,this._order,E,d,g,w,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,B),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),z=!0),P&&this.pauseablePlacement.placement.setStale()),z||P)for(const V of this._order){const G=this._layers[V];G.type==="symbol"&&this.placement.updateLayerOpacities(G,B[G.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const l in this.sourceCaches)this.sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,d,g){this.imageManager.getImages(d.icons,g),this._updateTilesForChangedImages();const w=this.sourceCaches[d.source];w&&w.setDependencies(d.tileID.key,d.type,d.icons)}getGlyphs(l,d,g){this.glyphManager.getGlyphs(d.stacks,g)}getResource(l,d,g){return o.makeRequest(d,g)}}tn.getSourceType=function(x){return $t[x]},tn.setSourceType=function(x,l){$t[x]=l},tn.registerForPluginStateChange=o.registerForPluginStateChange;var $s="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const Fl={prelude:Hr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Hr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Hr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Hr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Hr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Hr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Hr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Hr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Hr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Hr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Hr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Hr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Hr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Hr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Hr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Hr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Hr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Hr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Hr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Hr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Hr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Hr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Hr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Hr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Hr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Hr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",$s),terrainDepth:Hr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",$s),terrainCoords:Hr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",$s)};function Hr(x,l){const d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,g=l.match(/attribute ([\w]+) ([\w]+)/g),w=x.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=l.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=E?E.concat(w):w,z={};return{fragmentSource:x=x.replace(d,(B,V,G,X,K)=>(z[K]=!0,V==="define"?`
#ifndef HAS_UNIFORM_u_${K}
varying ${G} ${X} ${K};
#else
uniform ${G} ${X} u_${K};
#endif
`:`
#ifdef HAS_UNIFORM_u_${K}
    ${G} ${X} ${K} = u_${K};
#endif
`)),vertexSource:l=l.replace(d,(B,V,G,X,K)=>{const ce=X==="float"?"vec2":"vec4",oe=K.match(/color/)?"color":ce;return z[K]?V==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${G} ${ce} a_${K};
varying ${G} ${X} ${K};
#else
uniform ${G} ${X} u_${K};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = a_${K};
#else
    ${G} ${X} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${K} = unpack_mix_${oe}(a_${K}, u_${K}_t);
#else
    ${G} ${X} ${K} = u_${K};
#endif
`:V==="define"?`
#ifndef HAS_UNIFORM_u_${K}
uniform lowp float u_${K}_t;
attribute ${G} ${ce} a_${K};
#else
uniform ${G} ${X} u_${K};
#endif
`:oe==="vec4"?`
#ifndef HAS_UNIFORM_u_${K}
    ${G} ${X} ${K} = a_${K};
#else
    ${G} ${X} ${K} = u_${K};
#endif
`:`
#ifndef HAS_UNIFORM_u_${K}
    ${G} ${X} ${K} = unpack_mix_${oe}(a_${K}, u_${K}_t);
#else
    ${G} ${X} ${K} = u_${K};
#endif
`}),staticAttributes:g,staticUniforms:P}}class ef{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(l,d,g,w,E,P,z,B,V){this.context=l;let G=this.boundPaintVertexBuffers.length!==w.length;for(let X=0;!G&&X<w.length;X++)this.boundPaintVertexBuffers[X]!==w[X]&&(G=!0);l.extVertexArrayObject&&this.vao&&this.boundProgram===d&&this.boundLayoutVertexBuffer===g&&!G&&this.boundIndexBuffer===E&&this.boundVertexOffset===P&&this.boundDynamicVertexBuffer===z&&this.boundDynamicVertexBuffer2===B&&this.boundDynamicVertexBuffer3===V?(l.bindVertexArrayOES.set(this.vao),z&&z.bind(),E&&E.dynamicDraw&&E.bind(),B&&B.bind(),V&&V.bind()):this.freshBind(d,g,w,E,P,z,B,V)}freshBind(l,d,g,w,E,P,z,B){let V;const G=l.numAttributes,X=this.context,K=X.gl;if(X.extVertexArrayObject)this.vao&&this.destroy(),this.vao=X.extVertexArrayObject.createVertexArrayOES(),X.bindVertexArrayOES.set(this.vao),V=0,this.boundProgram=l,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=g,this.boundIndexBuffer=w,this.boundVertexOffset=E,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=z,this.boundDynamicVertexBuffer3=B;else{V=X.currentNumAttributes||0;for(let ce=G;ce<V;ce++)K.disableVertexAttribArray(ce)}d.enableAttributes(K,l);for(const ce of g)ce.enableAttributes(K,l);P&&P.enableAttributes(K,l),z&&z.enableAttributes(K,l),B&&B.enableAttributes(K,l),d.bind(),d.setVertexAttribPointers(K,l,E);for(const ce of g)ce.bind(),ce.setVertexAttribPointers(K,l,E);P&&(P.bind(),P.setVertexAttribPointers(K,l,E)),w&&w.bind(),z&&(z.bind(),z.setVertexAttribPointers(K,l,E)),B&&(B.bind(),B.setVertexAttribPointers(K,l,E)),X.currentNumAttributes=G}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function tf(x){const l=[];for(let d=0;d<x.length;d++){if(x[d]===null)continue;const g=x[d].split(" ");l.push(g.pop())}return l}class Kp{constructor(l,d,g,w,E,P,z){const B=l.gl;this.program=B.createProgram();const V=tf(g.staticAttributes),G=w?w.getBinderAttributes():[],X=V.concat(G),K=Fl.prelude.staticUniforms?tf(Fl.prelude.staticUniforms):[],ce=g.staticUniforms?tf(g.staticUniforms):[],oe=w?w.getBinderUniforms():[],le=K.concat(ce).concat(oe),be=[];for(const Ue of le)be.indexOf(Ue)<0&&be.push(Ue);const Ce=w?w.defines():[];P&&Ce.push("#define OVERDRAW_INSPECTOR;"),z&&Ce.push("#define TERRAIN3D;");const Pe=Ce.concat(Fl.prelude.fragmentSource,g.fragmentSource).join(`
`),de=Ce.concat(Fl.prelude.vertexSource,g.vertexSource).join(`
`),Re=B.createShader(B.FRAGMENT_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);B.shaderSource(Re,Pe),B.compileShader(Re),B.attachShader(this.program,Re);const De=B.createShader(B.VERTEX_SHADER);if(B.isContextLost())return void(this.failedToCreate=!0);B.shaderSource(De,de),B.compileShader(De),B.attachShader(this.program,De),this.attributes={};const $e={};this.numAttributes=X.length;for(let Ue=0;Ue<this.numAttributes;Ue++)X[Ue]&&(B.bindAttribLocation(this.program,Ue,X[Ue]),this.attributes[X[Ue]]=Ue);B.linkProgram(this.program),B.deleteShader(De),B.deleteShader(Re);for(let Ue=0;Ue<be.length;Ue++){const Je=be[Ue];if(Je&&!$e[Je]){const Ne=B.getUniformLocation(this.program,Je);Ne&&($e[Je]=Ne)}}this.fixedUniforms=E(l,$e),this.terrainUniforms=((Ue,Je)=>({u_depth:new o.Uniform1i(Ue,Je.u_depth),u_terrain:new o.Uniform1i(Ue,Je.u_terrain),u_terrain_dim:new o.Uniform1f(Ue,Je.u_terrain_dim),u_terrain_matrix:new o.UniformMatrix4f(Ue,Je.u_terrain_matrix),u_terrain_unpack:new o.Uniform4f(Ue,Je.u_terrain_unpack),u_terrain_offset:new o.Uniform1f(Ue,Je.u_terrain_offset),u_terrain_exaggeration:new o.Uniform1f(Ue,Je.u_terrain_exaggeration)}))(l,$e),this.binderUniforms=w?w.getUniforms(l,$e):[]}draw(l,d,g,w,E,P,z,B,V,G,X,K,ce,oe,le,be,Ce,Pe){const de=l.gl;if(this.failedToCreate)return;if(l.program.set(this.program),l.setDepthMode(g),l.setStencilMode(w),l.setColorMode(E),l.setCullFace(P),B){l.activeTexture.set(de.TEXTURE2),de.bindTexture(de.TEXTURE_2D,B.depthTexture),l.activeTexture.set(de.TEXTURE3),de.bindTexture(de.TEXTURE_2D,B.texture);for(const De in this.terrainUniforms)this.terrainUniforms[De].set(B[De])}for(const De in this.fixedUniforms)this.fixedUniforms[De].set(z[De]);le&&le.setUniforms(l,this.binderUniforms,ce,{zoom:oe});let Re=0;switch(d){case de.LINES:Re=2;break;case de.TRIANGLES:Re=3;break;case de.LINE_STRIP:Re=1}for(const De of K.get()){const $e=De.vaos||(De.vaos={});($e[V]||($e[V]=new ef)).bind(l,this,G,le?le.getPaintVertexBuffers():[],X,De.vertexOffset,be,Ce,Pe),de.drawElements(d,De.primitiveLength*Re,de.UNSIGNED_SHORT,De.primitiveOffset*Re*2)}}}function Jp(x,l,d){const g=1/Si(d,1,l.transform.tileZoom),w=Math.pow(2,d.tileID.overscaledZ),E=d.tileSize*Math.pow(2,l.transform.tileZoom)/w,P=E*(d.tileID.canonical.x+d.tileID.wrap*w),z=E*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[g,x.fromScale,x.toScale],u_fade:x.t,u_pixel_coord_upper:[P>>16,z>>16],u_pixel_coord_lower:[65535&P,65535&z]}}const rf=(x,l,d,g)=>{const w=l.style.light,E=w.properties.get("position"),P=[E.x,E.y,E.z],z=o.create$1();w.properties.get("anchor")==="viewport"&&o.fromRotation(z,-l.transform.angle),o.transformMat3(P,P,z);const B=w.properties.get("color");return{u_matrix:x,u_lightpos:P,u_lightintensity:w.properties.get("intensity"),u_lightcolor:[B.r,B.g,B.b],u_vertical_gradient:+d,u_opacity:g}},ny=(x,l,d,g,w,E,P)=>o.extend(rf(x,l,d,g),Jp(E,l,P),{u_height_factor:-Math.pow(2,w.overscaledZ)/P.tileSize/8}),dc=x=>({u_matrix:x}),nf=(x,l,d,g)=>o.extend(dc(x),Jp(d,l,g)),Qp=(x,l)=>({u_matrix:x,u_world:l}),em=(x,l,d,g,w)=>o.extend(nf(x,l,d,g),{u_world:w}),tm=(x,l,d,g)=>{const w=x.transform;let E,P;if(g.paint.get("circle-pitch-alignment")==="map"){const z=Si(d,1,w.zoom);E=!0,P=[z,z]}else E=!1,P=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(g.paint.get("circle-pitch-scale")==="map"),u_matrix:x.translatePosMatrix(l.posMatrix,d,g.paint.get("circle-translate"),g.paint.get("circle-translate-anchor")),u_pitch_with_map:+E,u_device_pixel_ratio:x.pixelRatio,u_extrude_scale:P}},es=(x,l,d)=>{const g=Si(d,1,l.zoom),w=Math.pow(2,l.zoom-d.tileID.overscaledZ),E=d.tileID.overscaleFactor();return{u_matrix:x,u_camera_to_center_distance:l.cameraToCenterDistance,u_pixels_to_tile_units:g,u_extrude_scale:[l.pixelsToGLUnits[0]/(g*w),l.pixelsToGLUnits[1]/(g*w)],u_overscale_factor:E}},Nl=(x,l,d=1)=>({u_matrix:x,u_color:l,u_overlay:0,u_overlay_scale:d}),Us=x=>({u_matrix:x}),pc=(x,l,d,g)=>({u_matrix:x,u_extrude_scale:Si(l,1,d),u_intensity:g});function mc(x,l){const d=Math.pow(2,l.canonical.z),g=l.canonical.y;return[new o.MercatorCoordinate(0,g/d).toLngLat().lat,new o.MercatorCoordinate(0,(g+1)/d).toLngLat().lat]}const Gs=(x,l,d,g)=>{const w=x.transform;return{u_matrix:$l(x,l,d,g),u_ratio:1/Si(l,1,w.zoom),u_device_pixel_ratio:x.pixelRatio,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},af=(x,l,d,g,w)=>o.extend(Gs(x,l,d,w),{u_image:0,u_image_height:g}),vc=(x,l,d,g,w)=>{const E=x.transform,P=ai(l,E);return{u_matrix:$l(x,l,d,w),u_texsize:l.imageAtlasTexture.size,u_ratio:1/Si(l,1,E.zoom),u_device_pixel_ratio:x.pixelRatio,u_image:0,u_scale:[P,g.fromScale,g.toScale],u_fade:g.t,u_units_to_pixels:[1/E.pixelsToGLUnits[0],1/E.pixelsToGLUnits[1]]}},Vl=(x,l,d,g,w,E)=>{const P=x.lineAtlas,z=ai(l,x.transform),B=d.layout.get("line-cap")==="round",V=P.getDash(g.from,B),G=P.getDash(g.to,B),X=V.width*w.fromScale,K=G.width*w.toScale;return o.extend(Gs(x,l,d,E),{u_patternscale_a:[z/X,-V.height/2],u_patternscale_b:[z/K,-G.height/2],u_sdfgamma:P.width/(256*Math.min(X,K)*x.pixelRatio)/2,u_image:0,u_tex_y_a:V.y,u_tex_y_b:G.y,u_mix:w.t})};function ai(x,l){return 1/Si(x,1,l.tileZoom)}function $l(x,l,d,g){return x.translatePosMatrix(g?g.posMatrix:l.tileID.posMatrix,l,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}const rm=(x,l,d,g,w)=>{return{u_matrix:x,u_tl_parent:l,u_scale_parent:d,u_buffer_scale:1,u_fade_t:g.mix,u_opacity:g.opacity*w.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:w.paint.get("raster-brightness-min"),u_brightness_high:w.paint.get("raster-brightness-max"),u_saturation_factor:(P=w.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(E=w.paint.get("raster-contrast"),E>0?1/(1-E):1+E),u_spin_weights:im(w.paint.get("raster-hue-rotate"))};var E,P};function im(x){x*=Math.PI/180;const l=Math.sin(x),d=Math.cos(x);return[(2*d+1)/3,(-Math.sqrt(3)*l-d+1)/3,(Math.sqrt(3)*l-d+1)/3]}const of=(x,l,d,g,w,E,P,z,B,V)=>{const G=w.transform;return{u_is_size_zoom_constant:+(x==="constant"||x==="source"),u_is_size_feature_constant:+(x==="constant"||x==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:G.cameraToCenterDistance,u_pitch:G.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:G.width/G.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:E,u_label_plane_matrix:P,u_coord_matrix:z,u_is_text:+B,u_pitch_with_map:+g,u_texsize:V,u_texture:0}},gc=(x,l,d,g,w,E,P,z,B,V,G)=>{const X=w.transform;return o.extend(of(x,l,d,g,w,E,P,z,B,V),{u_gamma_scale:g?Math.cos(X._pitch)*X.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:+G})},nm=(x,l,d,g,w,E,P,z,B,V)=>o.extend(gc(x,l,d,g,w,E,P,z,!0,B,!0),{u_texsize_icon:V,u_texture_icon:1}),ay=(x,l,d)=>({u_matrix:x,u_opacity:l,u_color:d}),oy=(x,l,d,g,w,E)=>o.extend(function(P,z,B,V){const G=B.imageManager.getPattern(P.from.toString()),X=B.imageManager.getPattern(P.to.toString()),{width:K,height:ce}=B.imageManager.getPixelSize(),oe=Math.pow(2,V.tileID.overscaledZ),le=V.tileSize*Math.pow(2,B.transform.tileZoom)/oe,be=le*(V.tileID.canonical.x+V.tileID.wrap*oe),Ce=le*V.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:G.tl,u_pattern_br_a:G.br,u_pattern_tl_b:X.tl,u_pattern_br_b:X.br,u_texsize:[K,ce],u_mix:z.t,u_pattern_size_a:G.displaySize,u_pattern_size_b:X.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/Si(V,1,B.transform.tileZoom),u_pixel_coord_upper:[be>>16,Ce>>16],u_pixel_coord_lower:[65535&be,65535&Ce]}}(g,E,d,w),{u_matrix:x,u_opacity:l}),sf={fillExtrusion:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_lightpos:new o.Uniform3f(x,l.u_lightpos),u_lightintensity:new o.Uniform1f(x,l.u_lightintensity),u_lightcolor:new o.Uniform3f(x,l.u_lightcolor),u_vertical_gradient:new o.Uniform1f(x,l.u_vertical_gradient),u_opacity:new o.Uniform1f(x,l.u_opacity)}),fillExtrusionPattern:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_lightpos:new o.Uniform3f(x,l.u_lightpos),u_lightintensity:new o.Uniform1f(x,l.u_lightintensity),u_lightcolor:new o.Uniform3f(x,l.u_lightcolor),u_vertical_gradient:new o.Uniform1f(x,l.u_vertical_gradient),u_height_factor:new o.Uniform1f(x,l.u_height_factor),u_image:new o.Uniform1i(x,l.u_image),u_texsize:new o.Uniform2f(x,l.u_texsize),u_pixel_coord_upper:new o.Uniform2f(x,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(x,l.u_pixel_coord_lower),u_scale:new o.Uniform3f(x,l.u_scale),u_fade:new o.Uniform1f(x,l.u_fade),u_opacity:new o.Uniform1f(x,l.u_opacity)}),fill:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix)}),fillPattern:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_image:new o.Uniform1i(x,l.u_image),u_texsize:new o.Uniform2f(x,l.u_texsize),u_pixel_coord_upper:new o.Uniform2f(x,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(x,l.u_pixel_coord_lower),u_scale:new o.Uniform3f(x,l.u_scale),u_fade:new o.Uniform1f(x,l.u_fade)}),fillOutline:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_world:new o.Uniform2f(x,l.u_world)}),fillOutlinePattern:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_world:new o.Uniform2f(x,l.u_world),u_image:new o.Uniform1i(x,l.u_image),u_texsize:new o.Uniform2f(x,l.u_texsize),u_pixel_coord_upper:new o.Uniform2f(x,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(x,l.u_pixel_coord_lower),u_scale:new o.Uniform3f(x,l.u_scale),u_fade:new o.Uniform1f(x,l.u_fade)}),circle:(x,l)=>({u_camera_to_center_distance:new o.Uniform1f(x,l.u_camera_to_center_distance),u_scale_with_map:new o.Uniform1i(x,l.u_scale_with_map),u_pitch_with_map:new o.Uniform1i(x,l.u_pitch_with_map),u_extrude_scale:new o.Uniform2f(x,l.u_extrude_scale),u_device_pixel_ratio:new o.Uniform1f(x,l.u_device_pixel_ratio),u_matrix:new o.UniformMatrix4f(x,l.u_matrix)}),collisionBox:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_camera_to_center_distance:new o.Uniform1f(x,l.u_camera_to_center_distance),u_pixels_to_tile_units:new o.Uniform1f(x,l.u_pixels_to_tile_units),u_extrude_scale:new o.Uniform2f(x,l.u_extrude_scale),u_overscale_factor:new o.Uniform1f(x,l.u_overscale_factor)}),collisionCircle:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_inv_matrix:new o.UniformMatrix4f(x,l.u_inv_matrix),u_camera_to_center_distance:new o.Uniform1f(x,l.u_camera_to_center_distance),u_viewport_size:new o.Uniform2f(x,l.u_viewport_size)}),debug:(x,l)=>({u_color:new o.UniformColor(x,l.u_color),u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_overlay:new o.Uniform1i(x,l.u_overlay),u_overlay_scale:new o.Uniform1f(x,l.u_overlay_scale)}),clippingMask:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix)}),heatmap:(x,l)=>({u_extrude_scale:new o.Uniform1f(x,l.u_extrude_scale),u_intensity:new o.Uniform1f(x,l.u_intensity),u_matrix:new o.UniformMatrix4f(x,l.u_matrix)}),heatmapTexture:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_world:new o.Uniform2f(x,l.u_world),u_image:new o.Uniform1i(x,l.u_image),u_color_ramp:new o.Uniform1i(x,l.u_color_ramp),u_opacity:new o.Uniform1f(x,l.u_opacity)}),hillshade:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_image:new o.Uniform1i(x,l.u_image),u_latrange:new o.Uniform2f(x,l.u_latrange),u_light:new o.Uniform2f(x,l.u_light),u_shadow:new o.UniformColor(x,l.u_shadow),u_highlight:new o.UniformColor(x,l.u_highlight),u_accent:new o.UniformColor(x,l.u_accent)}),hillshadePrepare:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_image:new o.Uniform1i(x,l.u_image),u_dimension:new o.Uniform2f(x,l.u_dimension),u_zoom:new o.Uniform1f(x,l.u_zoom),u_unpack:new o.Uniform4f(x,l.u_unpack)}),line:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_ratio:new o.Uniform1f(x,l.u_ratio),u_device_pixel_ratio:new o.Uniform1f(x,l.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(x,l.u_units_to_pixels)}),lineGradient:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_ratio:new o.Uniform1f(x,l.u_ratio),u_device_pixel_ratio:new o.Uniform1f(x,l.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(x,l.u_units_to_pixels),u_image:new o.Uniform1i(x,l.u_image),u_image_height:new o.Uniform1f(x,l.u_image_height)}),linePattern:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_texsize:new o.Uniform2f(x,l.u_texsize),u_ratio:new o.Uniform1f(x,l.u_ratio),u_device_pixel_ratio:new o.Uniform1f(x,l.u_device_pixel_ratio),u_image:new o.Uniform1i(x,l.u_image),u_units_to_pixels:new o.Uniform2f(x,l.u_units_to_pixels),u_scale:new o.Uniform3f(x,l.u_scale),u_fade:new o.Uniform1f(x,l.u_fade)}),lineSDF:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_ratio:new o.Uniform1f(x,l.u_ratio),u_device_pixel_ratio:new o.Uniform1f(x,l.u_device_pixel_ratio),u_units_to_pixels:new o.Uniform2f(x,l.u_units_to_pixels),u_patternscale_a:new o.Uniform2f(x,l.u_patternscale_a),u_patternscale_b:new o.Uniform2f(x,l.u_patternscale_b),u_sdfgamma:new o.Uniform1f(x,l.u_sdfgamma),u_image:new o.Uniform1i(x,l.u_image),u_tex_y_a:new o.Uniform1f(x,l.u_tex_y_a),u_tex_y_b:new o.Uniform1f(x,l.u_tex_y_b),u_mix:new o.Uniform1f(x,l.u_mix)}),raster:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_tl_parent:new o.Uniform2f(x,l.u_tl_parent),u_scale_parent:new o.Uniform1f(x,l.u_scale_parent),u_buffer_scale:new o.Uniform1f(x,l.u_buffer_scale),u_fade_t:new o.Uniform1f(x,l.u_fade_t),u_opacity:new o.Uniform1f(x,l.u_opacity),u_image0:new o.Uniform1i(x,l.u_image0),u_image1:new o.Uniform1i(x,l.u_image1),u_brightness_low:new o.Uniform1f(x,l.u_brightness_low),u_brightness_high:new o.Uniform1f(x,l.u_brightness_high),u_saturation_factor:new o.Uniform1f(x,l.u_saturation_factor),u_contrast_factor:new o.Uniform1f(x,l.u_contrast_factor),u_spin_weights:new o.Uniform3f(x,l.u_spin_weights)}),symbolIcon:(x,l)=>({u_is_size_zoom_constant:new o.Uniform1i(x,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(x,l.u_is_size_feature_constant),u_size_t:new o.Uniform1f(x,l.u_size_t),u_size:new o.Uniform1f(x,l.u_size),u_camera_to_center_distance:new o.Uniform1f(x,l.u_camera_to_center_distance),u_pitch:new o.Uniform1f(x,l.u_pitch),u_rotate_symbol:new o.Uniform1i(x,l.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(x,l.u_aspect_ratio),u_fade_change:new o.Uniform1f(x,l.u_fade_change),u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(x,l.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(x,l.u_coord_matrix),u_is_text:new o.Uniform1i(x,l.u_is_text),u_pitch_with_map:new o.Uniform1i(x,l.u_pitch_with_map),u_texsize:new o.Uniform2f(x,l.u_texsize),u_texture:new o.Uniform1i(x,l.u_texture)}),symbolSDF:(x,l)=>({u_is_size_zoom_constant:new o.Uniform1i(x,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(x,l.u_is_size_feature_constant),u_size_t:new o.Uniform1f(x,l.u_size_t),u_size:new o.Uniform1f(x,l.u_size),u_camera_to_center_distance:new o.Uniform1f(x,l.u_camera_to_center_distance),u_pitch:new o.Uniform1f(x,l.u_pitch),u_rotate_symbol:new o.Uniform1i(x,l.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(x,l.u_aspect_ratio),u_fade_change:new o.Uniform1f(x,l.u_fade_change),u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(x,l.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(x,l.u_coord_matrix),u_is_text:new o.Uniform1i(x,l.u_is_text),u_pitch_with_map:new o.Uniform1i(x,l.u_pitch_with_map),u_texsize:new o.Uniform2f(x,l.u_texsize),u_texture:new o.Uniform1i(x,l.u_texture),u_gamma_scale:new o.Uniform1f(x,l.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(x,l.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(x,l.u_is_halo)}),symbolTextAndIcon:(x,l)=>({u_is_size_zoom_constant:new o.Uniform1i(x,l.u_is_size_zoom_constant),u_is_size_feature_constant:new o.Uniform1i(x,l.u_is_size_feature_constant),u_size_t:new o.Uniform1f(x,l.u_size_t),u_size:new o.Uniform1f(x,l.u_size),u_camera_to_center_distance:new o.Uniform1f(x,l.u_camera_to_center_distance),u_pitch:new o.Uniform1f(x,l.u_pitch),u_rotate_symbol:new o.Uniform1i(x,l.u_rotate_symbol),u_aspect_ratio:new o.Uniform1f(x,l.u_aspect_ratio),u_fade_change:new o.Uniform1f(x,l.u_fade_change),u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_label_plane_matrix:new o.UniformMatrix4f(x,l.u_label_plane_matrix),u_coord_matrix:new o.UniformMatrix4f(x,l.u_coord_matrix),u_is_text:new o.Uniform1i(x,l.u_is_text),u_pitch_with_map:new o.Uniform1i(x,l.u_pitch_with_map),u_texsize:new o.Uniform2f(x,l.u_texsize),u_texsize_icon:new o.Uniform2f(x,l.u_texsize_icon),u_texture:new o.Uniform1i(x,l.u_texture),u_texture_icon:new o.Uniform1i(x,l.u_texture_icon),u_gamma_scale:new o.Uniform1f(x,l.u_gamma_scale),u_device_pixel_ratio:new o.Uniform1f(x,l.u_device_pixel_ratio),u_is_halo:new o.Uniform1i(x,l.u_is_halo)}),background:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_opacity:new o.Uniform1f(x,l.u_opacity),u_color:new o.UniformColor(x,l.u_color)}),backgroundPattern:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_opacity:new o.Uniform1f(x,l.u_opacity),u_image:new o.Uniform1i(x,l.u_image),u_pattern_tl_a:new o.Uniform2f(x,l.u_pattern_tl_a),u_pattern_br_a:new o.Uniform2f(x,l.u_pattern_br_a),u_pattern_tl_b:new o.Uniform2f(x,l.u_pattern_tl_b),u_pattern_br_b:new o.Uniform2f(x,l.u_pattern_br_b),u_texsize:new o.Uniform2f(x,l.u_texsize),u_mix:new o.Uniform1f(x,l.u_mix),u_pattern_size_a:new o.Uniform2f(x,l.u_pattern_size_a),u_pattern_size_b:new o.Uniform2f(x,l.u_pattern_size_b),u_scale_a:new o.Uniform1f(x,l.u_scale_a),u_scale_b:new o.Uniform1f(x,l.u_scale_b),u_pixel_coord_upper:new o.Uniform2f(x,l.u_pixel_coord_upper),u_pixel_coord_lower:new o.Uniform2f(x,l.u_pixel_coord_lower),u_tile_units_to_pixels:new o.Uniform1f(x,l.u_tile_units_to_pixels)}),terrain:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_texture:new o.Uniform1i(x,l.u_texture)}),terrainDepth:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix)}),terrainCoords:(x,l)=>({u_matrix:new o.UniformMatrix4f(x,l.u_matrix),u_texture:new o.Uniform1i(x,l.u_texture),u_terrain_coords_id:new o.Uniform1f(x,l.u_terrain_coords_id)})};class lf{constructor(l,d,g){this.context=l;const w=l.gl;this.buffer=w.createBuffer(),this.dynamicDraw=!!g,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),w.bufferData(w.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const uf={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class cf{constructor(l,d,g,w){this.length=d.length,this.attributes=g,this.itemSize=d.bytesPerElement,this.dynamicDraw=w,this.context=l;const E=l.gl;this.buffer=E.createBuffer(),l.bindVertexBuffer.set(this.buffer),E.bufferData(E.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?E.DYNAMIC_DRAW:E.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){if(l.length!==this.length)throw new Error(`Length of new data is ${l.length}, which doesn't match current length of ${this.length}`);const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,d){for(let g=0;g<this.attributes.length;g++){const w=d.attributes[this.attributes[g].name];w!==void 0&&l.enableVertexAttribArray(w)}}setVertexAttribPointers(l,d,g){for(let w=0;w<this.attributes.length;w++){const E=this.attributes[w],P=d.attributes[E.name];P!==void 0&&l.vertexAttribPointer(P,E.components,l[uf[E.type]],!1,this.itemSize,E.offset+this.itemSize*(g||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ar{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class am extends Ar{getDefault(){return o.Color.transparent}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class sy extends Ar{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Ul extends Ar{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Gl extends Ar{getDefault(){return[!0,!0,!0,!0]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class om extends Ar{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Rn extends Ar{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class hf extends Ar{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const d=this.current;(l.func!==d.func||l.ref!==d.ref||l.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class _c extends Ar{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class yc extends Ar{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=l,this.dirty=!1}}class ff extends Ar{getDefault(){return[0,1]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class df extends Ar{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=l,this.dirty=!1}}class xc extends Ar{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class pf extends Ar{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.BLEND):d.disable(d.BLEND),this.current=l,this.dirty=!1}}class mf extends Ar{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class bc extends Ar{getDefault(){return o.Color.transparent}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class sm extends Ar{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class lm extends Ar{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=l,this.dirty=!1}}class Hs extends Ar{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class ly extends Ar{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class uy extends Ar{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class cy extends Ar{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class hy extends Ar{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class fy extends Ar{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class dy extends Ar{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class vf extends Ar{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class wc extends Ar{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class gf extends Ar{getDefault(){return null}set(l){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class _f extends Ar{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class qs extends Ar{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class um extends Ar{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class cm extends Ar{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Sc extends Ar{constructor(l,d){super(l),this.context=l,this.parent=d}getDefault(){return null}}class ts extends Sc{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class hm extends Sc{set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class js{constructor(l,d,g,w){this.context=l,this.width=d,this.height=g;const E=l.gl,P=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new ts(l,P),w&&(this.depthAttachment=new hm(l,P)),E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const l=this.context.gl,d=this.colorAttachment.get();if(d&&l.deleteTexture(d),this.depthAttachment){const g=this.depthAttachment.get();g&&l.deleteRenderbuffer(g)}l.deleteFramebuffer(this.framebuffer)}}class Qr{constructor(l,d,g){this.blendFunction=l,this.blendColor=d,this.mask=g}}Qr.Replace=[1,0],Qr.disabled=new Qr(Qr.Replace,o.Color.transparent,[!1,!1,!1,!1]),Qr.unblended=new Qr(Qr.Replace,o.Color.transparent,[!0,!0,!0,!0]),Qr.alphaBlended=new Qr([1,771],o.Color.transparent,[!0,!0,!0,!0]);class fm{constructor(l){this.gl=l,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new am(this),this.clearDepth=new sy(this),this.clearStencil=new Ul(this),this.colorMask=new Gl(this),this.depthMask=new om(this),this.stencilMask=new Rn(this),this.stencilFunc=new hf(this),this.stencilOp=new _c(this),this.stencilTest=new yc(this),this.depthRange=new ff(this),this.depthTest=new df(this),this.depthFunc=new xc(this),this.blend=new pf(this),this.blendFunc=new mf(this),this.blendColor=new bc(this),this.blendEquation=new sm(this),this.cullFace=new lm(this),this.cullFaceSide=new Hs(this),this.frontFace=new ly(this),this.program=new uy(this),this.activeTexture=new cy(this),this.viewport=new hy(this),this.bindFramebuffer=new fy(this),this.bindRenderbuffer=new dy(this),this.bindTexture=new vf(this),this.bindVertexBuffer=new wc(this),this.bindElementBuffer=new gf(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new _f(this),this.pixelStoreUnpack=new qs(this),this.pixelStoreUnpackPremultiplyAlpha=new um(this),this.pixelStoreUnpackFlipY=new cm(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=l.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(l.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,d){return new lf(this,l,d)}createVertexBuffer(l,d,g){return new cf(this,l,d,g)}createRenderbuffer(l,d,g){const w=this.gl,E=w.createRenderbuffer();return this.bindRenderbuffer.set(E),w.renderbufferStorage(w.RENDERBUFFER,l,d,g),this.bindRenderbuffer.set(null),E}createFramebuffer(l,d,g){return new js(this,l,d,g)}clear({color:l,depth:d}){const g=this.gl;let w=0;l&&(w|=g.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(w|=g.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),g.clear(w)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){_(l.blendFunction,Qr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class fr{constructor(l,d,g){this.func=l,this.mask=d,this.range=g}}fr.ReadOnly=!1,fr.ReadWrite=!0,fr.disabled=new fr(519,fr.ReadOnly,[0,1]);const Mr=7680;class Zr{constructor(l,d,g,w,E,P){this.test=l,this.ref=d,this.mask=g,this.fail=w,this.depthFail=E,this.pass=P}}Zr.disabled=new Zr({func:519,mask:0},0,0,Mr,Mr,Mr);class oi{constructor(l,d,g){this.enable=l,this.mode=d,this.frontFace=g}}let Hl;function Ws(x,l,d,g,w,E,P){const z=x.context,B=z.gl,V=x.useProgram("collisionBox"),G=[];let X=0,K=0;for(let de=0;de<g.length;de++){const Re=g[de],De=l.getTile(Re),$e=De.getBucket(d);if(!$e)continue;let Ue=Re.posMatrix;w[0]===0&&w[1]===0||(Ue=x.translatePosMatrix(Re.posMatrix,De,w,E));const Je=P?$e.textCollisionBox:$e.iconCollisionBox,Ne=$e.collisionCircleArray;if(Ne.length>0){const yt=o.create(),ct=Ue;o.mul(yt,$e.placementInvProjMatrix,x.transform.glCoordMatrix),o.mul(yt,yt,$e.placementViewportMatrix),G.push({circleArray:Ne,circleOffset:K,transform:ct,invTransform:yt,coord:Re}),X+=Ne.length/4,K=X}Je&&V.draw(z,B.LINES,fr.disabled,Zr.disabled,x.colorModeForRenderPass(),oi.disabled,es(Ue,x.transform,De),x.style.terrain&&x.style.terrain.getTerrainData(Re),d.id,Je.layoutVertexBuffer,Je.indexBuffer,Je.segments,null,x.transform.zoom,null,null,Je.collisionVertexBuffer)}if(!P||!G.length)return;const ce=x.useProgram("collisionCircle"),oe=new o.CollisionCircleLayoutArray;oe.resize(4*X),oe._trim();let le=0;for(const de of G)for(let Re=0;Re<de.circleArray.length/4;Re++){const De=4*Re,$e=de.circleArray[De+0],Ue=de.circleArray[De+1],Je=de.circleArray[De+2],Ne=de.circleArray[De+3];oe.emplace(le++,$e,Ue,Je,Ne,0),oe.emplace(le++,$e,Ue,Je,Ne,1),oe.emplace(le++,$e,Ue,Je,Ne,2),oe.emplace(le++,$e,Ue,Je,Ne,3)}(!Hl||Hl.length<2*X)&&(Hl=function(de){const Re=2*de,De=new o.QuadTriangleArray;De.resize(Re),De._trim();for(let $e=0;$e<Re;$e++){const Ue=6*$e;De.uint16[Ue+0]=4*$e+0,De.uint16[Ue+1]=4*$e+1,De.uint16[Ue+2]=4*$e+2,De.uint16[Ue+3]=4*$e+2,De.uint16[Ue+4]=4*$e+3,De.uint16[Ue+5]=4*$e+0}return De}(X));const be=z.createIndexBuffer(Hl,!0),Ce=z.createVertexBuffer(oe,o.collisionCircleLayout.members,!0);for(const de of G){const Re={u_matrix:de.transform,u_inv_matrix:de.invTransform,u_camera_to_center_distance:(Pe=x.transform).cameraToCenterDistance,u_viewport_size:[Pe.width,Pe.height]};ce.draw(z,B.TRIANGLES,fr.disabled,Zr.disabled,x.colorModeForRenderPass(),oi.disabled,Re,x.style.terrain&&x.style.terrain.getTerrainData(de.coord),d.id,Ce,be,o.SegmentVector.simpleSegment(0,2*de.circleOffset,de.circleArray.length,de.circleArray.length/2),null,x.transform.zoom,null,null,null)}var Pe;Ce.destroy(),be.destroy()}oi.disabled=new oi(!1,1029,2305),oi.backCCW=new oi(!0,1029,2305);const py=o.identity(new Float32Array(16));function my(x,l,d,g,w,E){const{horizontalAlign:P,verticalAlign:z}=o.getAnchorAlignment(x),B=-(P-.5)*l,V=-(z-.5)*d,G=o.evaluateVariableOffset(x,g);return new o.pointGeometry((B/w+G[0])*E,(V/w+G[1])*E)}function dm(x,l,d,g,w,E,P,z,B,V,G){const X=x.text.placedSymbolArray,K=x.text.dynamicLayoutVertexArray,ce=x.icon.dynamicLayoutVertexArray,oe={};K.clear();for(let le=0;le<X.length;le++){const be=X.get(le),Ce=x.allowVerticalPlacement&&!be.placedOrientation,Pe=be.hidden||!be.crossTileID||Ce?null:g[be.crossTileID];if(Pe){const de=new o.pointGeometry(be.anchorX,be.anchorY),Re=hr(de,d?P:E,G),De=Bi(w.cameraToCenterDistance,Re.signedDistanceFromCamera);let $e=o.evaluateSizeForFeature(x.textSizeData,B,be)*De/o.ONE_EM;d&&($e*=x.tilePixelRatio/z);const{width:Ue,height:Je,anchor:Ne,textOffset:yt,textBoxScale:ct}=Pe,bt=my(Ne,Ue,Je,yt,ct,$e),Qt=d?hr(de.add(bt),E,G).point:Re.point.add(l?bt.rotate(-w.angle):bt),or=x.allowVerticalPlacement&&be.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let Nt=0;Nt<be.numGlyphs;Nt++)o.addDynamicAttributes(K,Qt,or);V&&be.associatedIconIndex>=0&&(oe[be.associatedIconIndex]={shiftedAnchor:Qt,angle:or})}else Yt(be.numGlyphs,K)}if(V){ce.clear();const le=x.icon.placedSymbolArray;for(let be=0;be<le.length;be++){const Ce=le.get(be);if(Ce.hidden)Yt(Ce.numGlyphs,ce);else{const Pe=oe[be];if(Pe)for(let de=0;de<Ce.numGlyphs;de++)o.addDynamicAttributes(ce,Pe.shiftedAnchor,Pe.angle);else Yt(Ce.numGlyphs,ce)}}x.icon.dynamicLayoutVertexBuffer.updateData(ce)}x.text.dynamicLayoutVertexBuffer.updateData(K)}function vy(x,l,d){return d.iconsInText&&l?"symbolTextAndIcon":x?"symbolSDF":"symbolIcon"}function Tc(x,l,d,g,w,E,P,z,B,V,G,X){const K=x.context,ce=K.gl,oe=x.transform,le=z==="map",be=B==="map",Ce=z!=="viewport"&&d.layout.get("symbol-placement")!=="point",Pe=le&&!be&&!Ce,de=!d.layout.get("symbol-sort-key").isConstant();let Re=!1;const De=x.depthModeForSublayer(0,fr.ReadOnly),$e=d.layout.get("text-variable-anchor"),Ue=[];for(const Je of g){const Ne=l.getTile(Je),yt=Ne.getBucket(d);if(!yt)continue;const ct=w?yt.text:yt.icon;if(!ct||!ct.segments.get().length)continue;const bt=ct.programConfigurations.get(d.id),Qt=w||yt.sdfIcons,or=w?yt.textSizeData:yt.iconSizeData,Nt=be||oe.pitch!==0,kr=x.useProgram(vy(Qt,w,yt),bt),Rr=o.evaluateSizeForZoom(or,oe.zoom),pr=x.style.terrain&&x.style.terrain.getTerrainData(Je);let yr,Fr,Vi,Ia,da=[0,0],Pa=null;if(w){if(Fr=Ne.glyphAtlasTexture,Vi=ce.LINEAR,yr=Ne.glyphAtlasTexture.size,yt.iconsInText){da=Ne.imageAtlasTexture.size,Pa=Ne.imageAtlasTexture;const ea=or.kind==="composite"||or.kind==="camera";Ia=Nt||x.options.rotating||x.options.zooming||ea?ce.LINEAR:ce.NEAREST}}else{const ea=d.layout.get("icon-size").constantOr(0)!==1||yt.iconsNeedLinear;Fr=Ne.imageAtlasTexture,Vi=Qt||x.options.rotating||x.options.zooming||ea||Nt?ce.LINEAR:ce.NEAREST,yr=Ne.imageAtlasTexture.size}const Po=Si(Ne,1,x.transform.zoom),Qn=Ii(Je.posMatrix,be,le,x.transform,Po),bn=Oi(Je.posMatrix,be,le,x.transform,Po),eo=$e&&yt.hasTextData(),Lc=d.layout.get("icon-text-fit")!=="none"&&eo&&yt.hasIconData();if(Ce){const ea=x.style.terrain?(kf,Qs)=>x.style.terrain.getElevation(Je,kf,Qs):null,as=d.layout.get("text-rotation-alignment")==="map";Wr(yt,Je.posMatrix,x,w,Qn,bn,be,V,as,ea)}const Di=x.translatePosMatrix(Je.posMatrix,Ne,E,P),ur=Ce||w&&$e||Lc?py:Qn,Pr=x.translatePosMatrix(bn,Ne,E,P,!0),$i=Qt&&d.paint.get(w?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Ui;Ui=Qt?yt.iconsInText?nm(or.kind,Rr,Pe,be,x,Di,ur,Pr,yr,da):gc(or.kind,Rr,Pe,be,x,Di,ur,Pr,w,yr,!0):of(or.kind,Rr,Pe,be,x,Di,ur,Pr,w,yr);const li={program:kr,buffers:ct,uniformValues:Ui,atlasTexture:Fr,atlasTextureIcon:Pa,atlasInterpolation:Vi,atlasInterpolationIcon:Ia,isSDF:Qt,hasHalo:$i};if(de&&yt.canOverlap){Re=!0;const ea=ct.segments.get();for(const as of ea)Ue.push({segments:new o.SegmentVector([as]),sortKey:as.sortKey,state:li,terrainData:pr})}else Ue.push({segments:ct.segments,sortKey:0,state:li,terrainData:pr})}Re&&Ue.sort((Je,Ne)=>Je.sortKey-Ne.sortKey);for(const Je of Ue){const Ne=Je.state;if(K.activeTexture.set(ce.TEXTURE0),Ne.atlasTexture.bind(Ne.atlasInterpolation,ce.CLAMP_TO_EDGE),Ne.atlasTextureIcon&&(K.activeTexture.set(ce.TEXTURE1),Ne.atlasTextureIcon&&Ne.atlasTextureIcon.bind(Ne.atlasInterpolationIcon,ce.CLAMP_TO_EDGE)),Ne.isSDF){const yt=Ne.uniformValues;Ne.hasHalo&&(yt.u_is_halo=1,ql(Ne.buffers,Je.segments,d,x,Ne.program,De,G,X,yt,Je.terrainData)),yt.u_is_halo=0}ql(Ne.buffers,Je.segments,d,x,Ne.program,De,G,X,Ne.uniformValues,Je.terrainData)}}function ql(x,l,d,g,w,E,P,z,B,V){const G=g.context;w.draw(G,G.gl.TRIANGLES,E,P,z,oi.disabled,B,V,d.id,x.layoutVertexBuffer,x.indexBuffer,l,d.paint,g.transform.zoom,x.programConfigurations.get(d.id),x.dynamicLayoutVertexBuffer,x.opacityVertexBuffer)}function jl(x,l,d,g,w,E,P){const z=x.context.gl,B=d.paint.get("fill-pattern"),V=B&&B.constantOr(1),G=d.getCrossfadeParameters();let X,K,ce,oe,le;P?(K=V&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=z.LINES):(K=V?"fillPattern":"fill",X=z.TRIANGLES);for(const be of g){const Ce=l.getTile(be);if(V&&!Ce.patternsLoaded())continue;const Pe=Ce.getBucket(d);if(!Pe)continue;const de=Pe.programConfigurations.get(d.id),Re=x.useProgram(K,de),De=x.style.terrain&&x.style.terrain.getTerrainData(be);V&&(x.context.activeTexture.set(z.TEXTURE0),Ce.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),de.updatePaintBuffers(G));const $e=B.constantOr(null);if($e&&Ce.imageAtlas){const Ne=Ce.imageAtlas,yt=Ne.patternPositions[$e.to.toString()],ct=Ne.patternPositions[$e.from.toString()];yt&&ct&&de.setConstantPatternPositions(yt,ct)}const Ue=De?be:null,Je=x.translatePosMatrix(Ue?Ue.posMatrix:be.posMatrix,Ce,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(P){oe=Pe.indexBuffer2,le=Pe.segments2;const Ne=[z.drawingBufferWidth,z.drawingBufferHeight];ce=K==="fillOutlinePattern"&&V?em(Je,x,G,Ce,Ne):Qp(Je,Ne)}else oe=Pe.indexBuffer,le=Pe.segments,ce=V?nf(Je,x,G,Ce):dc(Je);Re.draw(x.context,X,w,x.stencilModeForClipping(be),E,oi.disabled,ce,De,d.id,Pe.layoutVertexBuffer,oe,le,d.paint,x.transform.zoom,de)}}function Wl(x,l,d,g,w,E,P){const z=x.context,B=z.gl,V=d.paint.get("fill-extrusion-pattern"),G=V.constantOr(1),X=d.getCrossfadeParameters(),K=d.paint.get("fill-extrusion-opacity");for(const ce of g){const oe=l.getTile(ce),le=oe.getBucket(d);if(!le)continue;const be=x.style.terrain&&x.style.terrain.getTerrainData(ce),Ce=le.programConfigurations.get(d.id),Pe=x.useProgram(G?"fillExtrusionPattern":"fillExtrusion",Ce);G&&(x.context.activeTexture.set(B.TEXTURE0),oe.imageAtlasTexture.bind(B.LINEAR,B.CLAMP_TO_EDGE),Ce.updatePaintBuffers(X));const de=V.constantOr(null);if(de&&oe.imageAtlas){const Ue=oe.imageAtlas,Je=Ue.patternPositions[de.to.toString()],Ne=Ue.patternPositions[de.from.toString()];Je&&Ne&&Ce.setConstantPatternPositions(Je,Ne)}const Re=x.translatePosMatrix(ce.posMatrix,oe,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),De=d.paint.get("fill-extrusion-vertical-gradient"),$e=G?ny(Re,x,De,K,ce,X,oe):rf(Re,x,De,K);Pe.draw(z,z.gl.TRIANGLES,w,E,P,oi.backCCW,$e,be,d.id,le.layoutVertexBuffer,le.indexBuffer,le.segments,d.paint,x.transform.zoom,Ce,x.style.terrain&&le.centroidVertexBuffer)}}function yf(x,l,d,g,w,E,P){const z=x.context,B=z.gl,V=d.fbo;if(!V)return;const G=x.useProgram("hillshade"),X=x.style.terrain&&x.style.terrain.getTerrainData(l);z.activeTexture.set(B.TEXTURE0),B.bindTexture(B.TEXTURE_2D,V.colorAttachment.get()),G.draw(z,B.TRIANGLES,w,E,P,oi.disabled,((K,ce,oe,le)=>{const be=oe.paint.get("hillshade-shadow-color"),Ce=oe.paint.get("hillshade-highlight-color"),Pe=oe.paint.get("hillshade-accent-color");let de=oe.paint.get("hillshade-illumination-direction")*(Math.PI/180);oe.paint.get("hillshade-illumination-anchor")==="viewport"&&(de-=K.transform.angle);const Re=!K.options.moving;return{u_matrix:le?le.posMatrix:K.transform.calculatePosMatrix(ce.tileID.toUnwrapped(),Re),u_image:0,u_latrange:mc(0,ce.tileID),u_light:[oe.paint.get("hillshade-exaggeration"),de],u_shadow:be,u_highlight:Ce,u_accent:Pe}})(x,d,g,X?l:null),X,g.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}function pm(x,l,d,g,w,E){const P=x.context,z=P.gl,B=l.dem;if(B&&B.data){const V=B.dim,G=B.stride,X=B.getPixels();if(P.activeTexture.set(z.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||x.getTileTexture(G),l.demTexture){const ce=l.demTexture;ce.update(X,{premultiply:!1}),ce.bind(z.NEAREST,z.CLAMP_TO_EDGE)}else l.demTexture=new L(P,X,z.RGBA,{premultiply:!1}),l.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);P.activeTexture.set(z.TEXTURE0);let K=l.fbo;if(!K){const ce=new L(P,{width:V,height:V,data:null},z.RGBA);ce.bind(z.LINEAR,z.CLAMP_TO_EDGE),K=l.fbo=P.createFramebuffer(V,V,!0),K.colorAttachment.set(ce.texture)}P.bindFramebuffer.set(K.framebuffer),P.viewport.set([0,0,V,V]),x.useProgram("hillshadePrepare").draw(P,z.TRIANGLES,g,w,E,oi.disabled,((ce,oe)=>{const le=oe.stride,be=o.create();return o.ortho(be,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(be,be,[0,-o.EXTENT,0]),{u_matrix:be,u_image:1,u_dimension:[le,le],u_zoom:ce.overscaledZ,u_unpack:oe.getUnpackVector()}})(l.tileID,B),null,d.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments),l.needsHillshadePrepare=!1}}function Ec(x,l,d,g,w,E){const P=g.paint.get("raster-fade-duration");if(!E&&P>0){const z=o.exported.now(),B=(z-x.timeAdded)/P,V=l?(z-l.timeAdded)/P:-1,G=d.getSource(),X=w.coveringZoomLevel({tileSize:G.tileSize,roundZoom:G.roundZoom}),K=!l||Math.abs(l.tileID.overscaledZ-X)>Math.abs(x.tileID.overscaledZ-X),ce=K&&x.refreshedUponExpiration?1:o.clamp(K?B:1-V,0,1);return x.refreshedUponExpiration&&B>=1&&(x.refreshedUponExpiration=!1),l?{opacity:1,mix:1-ce}:{opacity:ce,mix:0}}return{opacity:1,mix:0}}const Cc=new o.Color(1,0,0,1),fa=new o.Color(0,1,0,1),mm=new o.Color(0,0,1,1),xf=new o.Color(1,0,1,1),vm=new o.Color(0,1,1,1);function rs(x,l,d,g){Zs(x,0,l+d/2,x.transform.width,d,g)}function Zl(x,l,d,g){Zs(x,l-d/2,0,d,x.transform.height,g)}function Zs(x,l,d,g,w,E){const P=x.context,z=P.gl;z.enable(z.SCISSOR_TEST),z.scissor(l*x.pixelRatio,d*x.pixelRatio,g*x.pixelRatio,w*x.pixelRatio),P.clear({color:E}),z.disable(z.SCISSOR_TEST)}function gy(x,l,d){const g=x.context,w=g.gl,E=d.posMatrix,P=x.useProgram("debug"),z=fr.disabled,B=Zr.disabled,V=x.colorModeForRenderPass(),G="$debug",X=x.style.terrain&&x.style.terrain.getTerrainData(d);g.activeTexture.set(w.TEXTURE0),x.emptyTexture.bind(w.LINEAR,w.CLAMP_TO_EDGE);const K=l.getTileByID(d.key).latestRawTileData,ce=Math.floor((K&&K.byteLength||0)/1024),oe=l.getTile(d).tileSize,le=512/Math.min(oe,512)*(d.overscaledZ/x.transform.zoom)*.5;let be=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(be+=` => ${d.overscaledZ}`),function(Ce,Pe){Ce.initDebugOverlayCanvas();const de=Ce.debugOverlayCanvas,Re=Ce.context.gl,De=Ce.debugOverlayCanvas.getContext("2d");De.clearRect(0,0,de.width,de.height),De.shadowColor="white",De.shadowBlur=2,De.lineWidth=1.5,De.strokeStyle="white",De.textBaseline="top",De.font="bold 36px Open Sans, sans-serif",De.fillText(Pe,5,5),De.strokeText(Pe,5,5),Ce.debugOverlayTexture.update(de),Ce.debugOverlayTexture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE)}(x,`${be} ${ce}kB`),P.draw(g,w.TRIANGLES,z,B,Qr.alphaBlended,oi.disabled,Nl(E,o.Color.transparent,le),null,G,x.debugBuffer,x.quadTriangleIndexBuffer,x.debugSegments),P.draw(g,w.LINE_STRIP,z,B,V,oi.disabled,Nl(E,o.Color.red),X,G,x.debugBuffer,x.tileBorderIndexBuffer,x.debugSegments)}function Ac(x,l,d){const g=x.context,w=g.gl,E=x.colorModeForRenderPass(),P=new fr(w.LEQUAL,fr.ReadWrite,x.depthRangeFor3D),z=x.useProgram("terrain"),B=l.getTerrainMesh(),V=l.getTerrainData(d.tileID);g.bindFramebuffer.set(null),g.viewport.set([0,0,x.width,x.height]),g.activeTexture.set(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,l.getRTTFramebuffer().colorAttachment.get());const G=x.transform.calculatePosMatrix(d.tileID.toUnwrapped());z.draw(g,w.TRIANGLES,P,Zr.disabled,E,oi.backCCW,{u_matrix:G,u_texture:0},V,"terrain",B.vertexBuffer,B.indexBuffer,B.segments)}function gm(x,l,d,g){const w=x.context,E=d.tileSize*l.qualityFactor;d.textures[g]||(d.textures[g]=x.getTileTexture(E)||new L(w,{width:E,height:E,data:null},w.gl.RGBA),d.textures[g].bind(w.gl.LINEAR,w.gl.CLAMP_TO_EDGE),g===0&&l.sourceCache.renderHistory.unshift(d.tileID.key));const P=l.getRTTFramebuffer();P.colorAttachment.set(d.textures[g].texture),w.bindFramebuffer.set(P.framebuffer),w.viewport.set([0,0,E,E])}class _m{constructor(l){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=l,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=l.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const l=this.painter.style,d=l.terrain;for(const g in l.sourceCaches){this._coordsDescendingInv[g]={};const w=l.sourceCaches[g].getVisibleCoordinates();for(const E of w){const P=d.sourceCache.getTerrainCoords(E);for(const z in P)this._coordsDescendingInv[g][z]||(this._coordsDescendingInv[g][z]=[]),this._coordsDescendingInv[g][z].push(P[z])}}for(const g of l._order){const w=l._layers[g],E=w.source;if(this._renderToTexture[w.type]&&!this._coordsDescendingInvStr[E]){this._coordsDescendingInvStr[E]={};for(const P in this._coordsDescendingInv[E])this._coordsDescendingInvStr[E][P]=this._coordsDescendingInv[E][P].map(z=>z.key).sort().join()}}return this._renderableTiles.forEach(g=>{for(const w in this._coordsDescendingInvStr){const E=this._coordsDescendingInvStr[w][g.tileID.key];E&&E!==g.textureCoords[w]&&g.clearTextures(this.painter),d.needsRerender(w,g.tileID)&&g.clearTextures(this.painter)}this._rerender[g.tileID.key]=!g.textures.length}),d.clearRerenderCache(),d.sourceCache.removeOutdated(this.painter),this}renderLayer(l){const d=l.type,g=this.painter,w=g.style._order,E=g.currentLayer,P=E+1===w.length;if(this._renderToTexture[d]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(w[E]),!P))return!0;if(this._renderToTexture[this._prevType]||d==="hillshade"||this._renderToTexture[d]&&P){this._prevType=d;const z=this._stacks.length-1,B=this._stacks[z]||[];for(const V of this._renderableTiles){if(gm(g,g.style.terrain,V,z),this._rerender[V.tileID.key]){g.context.clear({color:o.Color.transparent});for(let G=0;G<B.length;G++){const X=g.style._layers[B[G]],K=X.source?this._coordsDescendingInv[X.source][V.tileID.key]:[V.tileID];g._renderTileClippingMasks(X,K),g.renderLayer(g,g.style.sourceCaches[X.source],X,K),X.source&&(V.textureCoords[X.source]=this._coordsDescendingInvStr[X.source][V.tileID.key])}}Ac(g,g.style.terrain,V)}if(d==="hillshade"){this._stacks.push([w[E]]);for(const V of this._renderableTiles){const G=this._coordsDescendingInv[l.source][V.tileID.key];gm(g,g.style.terrain,V,this._stacks.length-1),g.context.clear({color:o.Color.transparent}),g._renderTileClippingMasks(l,G),g.renderLayer(g,g.style.sourceCaches[l.source],l,G),Ac(g,g.style.terrain,V)}return!0}return this._renderToTexture[d]}return!1}}const Xl={symbol:function(x,l,d,g,w){if(x.renderPass!=="translucent")return;const E=Zr.disabled,P=x.colorModeForRenderPass();d.layout.get("text-variable-anchor")&&function(z,B,V,G,X,K,ce){const oe=B.transform,le=X==="map",be=K==="map";for(const Ce of z){const Pe=G.getTile(Ce),de=Pe.getBucket(V);if(!de||!de.text||!de.text.segments.get().length)continue;const Re=o.evaluateSizeForZoom(de.textSizeData,oe.zoom),De=Si(Pe,1,B.transform.zoom),$e=Ii(Ce.posMatrix,be,le,B.transform,De),Ue=V.layout.get("icon-text-fit")!=="none"&&de.hasIconData();if(Re){const Je=Math.pow(2,oe.zoom-Pe.tileID.overscaledZ);dm(de,le,be,ce,oe,$e,Ce.posMatrix,Je,Re,Ue,B.style.terrain?(Ne,yt)=>B.style.terrain.getElevation(Ce,Ne,yt):null)}}}(g,x,d,l,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),w),d.paint.get("icon-opacity").constantOr(1)!==0&&Tc(x,l,d,g,!1,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),d.layout.get("icon-rotation-alignment"),d.layout.get("icon-pitch-alignment"),d.layout.get("icon-keep-upright"),E,P),d.paint.get("text-opacity").constantOr(1)!==0&&Tc(x,l,d,g,!0,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),d.layout.get("text-keep-upright"),E,P),l.map.showCollisionBoxes&&(Ws(x,l,d,g,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),Ws(x,l,d,g,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(x,l,d,g){if(x.renderPass!=="translucent")return;const w=d.paint.get("circle-opacity"),E=d.paint.get("circle-stroke-width"),P=d.paint.get("circle-stroke-opacity"),z=!d.layout.get("circle-sort-key").isConstant();if(w.constantOr(1)===0&&(E.constantOr(1)===0||P.constantOr(1)===0))return;const B=x.context,V=B.gl,G=x.depthModeForSublayer(0,fr.ReadOnly),X=Zr.disabled,K=x.colorModeForRenderPass(),ce=[];for(let oe=0;oe<g.length;oe++){const le=g[oe],be=l.getTile(le),Ce=be.getBucket(d);if(!Ce)continue;const Pe=Ce.programConfigurations.get(d.id),de=x.useProgram("circle",Pe),Re=Ce.layoutVertexBuffer,De=Ce.indexBuffer,$e=x.style.terrain&&x.style.terrain.getTerrainData(le),Ue={programConfiguration:Pe,program:de,layoutVertexBuffer:Re,indexBuffer:De,uniformValues:tm(x,le,be,d),terrainData:$e};if(z){const Je=Ce.segments.get();for(const Ne of Je)ce.push({segments:new o.SegmentVector([Ne]),sortKey:Ne.sortKey,state:Ue})}else ce.push({segments:Ce.segments,sortKey:0,state:Ue})}z&&ce.sort((oe,le)=>oe.sortKey-le.sortKey);for(const oe of ce){const{programConfiguration:le,program:be,layoutVertexBuffer:Ce,indexBuffer:Pe,uniformValues:de,terrainData:Re}=oe.state;be.draw(B,V.TRIANGLES,G,X,K,oi.disabled,de,Re,d.id,Ce,Pe,oe.segments,d.paint,x.transform.zoom,le)}},heatmap:function(x,l,d,g){if(d.paint.get("heatmap-opacity")!==0)if(x.renderPass==="offscreen"){const w=x.context,E=w.gl,P=Zr.disabled,z=new Qr([E.ONE,E.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(B,V,G){const X=B.gl;B.activeTexture.set(X.TEXTURE1),B.viewport.set([0,0,V.width/4,V.height/4]);let K=G.heatmapFbo;if(K)X.bindTexture(X.TEXTURE_2D,K.colorAttachment.get()),B.bindFramebuffer.set(K.framebuffer);else{const ce=X.createTexture();X.bindTexture(X.TEXTURE_2D,ce),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_S,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_WRAP_T,X.CLAMP_TO_EDGE),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MIN_FILTER,X.LINEAR),X.texParameteri(X.TEXTURE_2D,X.TEXTURE_MAG_FILTER,X.LINEAR),K=G.heatmapFbo=B.createFramebuffer(V.width/4,V.height/4,!1),function(oe,le,be,Ce){const Pe=oe.gl;Pe.texImage2D(Pe.TEXTURE_2D,0,Pe.RGBA,le.width/4,le.height/4,0,Pe.RGBA,oe.extRenderToTextureHalfFloat?oe.extTextureHalfFloat.HALF_FLOAT_OES:Pe.UNSIGNED_BYTE,null),Ce.colorAttachment.set(be)}(B,V,ce,K)}})(w,x,d),w.clear({color:o.Color.transparent});for(let B=0;B<g.length;B++){const V=g[B];if(l.hasRenderableParent(V))continue;const G=l.getTile(V),X=G.getBucket(d);if(!X)continue;const K=X.programConfigurations.get(d.id),ce=x.useProgram("heatmap",K),{zoom:oe}=x.transform;ce.draw(w,E.TRIANGLES,fr.disabled,P,z,oi.disabled,pc(V.posMatrix,G,oe,d.paint.get("heatmap-intensity")),null,d.id,X.layoutVertexBuffer,X.indexBuffer,X.segments,d.paint,x.transform.zoom,K)}w.viewport.set([0,0,x.width,x.height])}else x.renderPass==="translucent"&&(x.context.setColorMode(x.colorModeForRenderPass()),function(w,E){const P=w.context,z=P.gl,B=E.heatmapFbo;if(!B)return;P.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,B.colorAttachment.get()),P.activeTexture.set(z.TEXTURE1);let V=E.colorRampTexture;V||(V=E.colorRampTexture=new L(P,E.colorRamp,z.RGBA)),V.bind(z.LINEAR,z.CLAMP_TO_EDGE),w.useProgram("heatmapTexture").draw(P,z.TRIANGLES,fr.disabled,Zr.disabled,w.colorModeForRenderPass(),oi.disabled,((G,X,K,ce)=>{const oe=o.create();o.ortho(oe,0,G.width,G.height,0,0,1);const le=G.context.gl;return{u_matrix:oe,u_world:[le.drawingBufferWidth,le.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:X.paint.get("heatmap-opacity")}})(w,E),null,E.id,w.viewportBuffer,w.quadTriangleIndexBuffer,w.viewportSegments,E.paint,w.transform.zoom)}(x,d))},line:function(x,l,d,g){if(x.renderPass!=="translucent")return;const w=d.paint.get("line-opacity"),E=d.paint.get("line-width");if(w.constantOr(1)===0||E.constantOr(1)===0)return;const P=x.depthModeForSublayer(0,fr.ReadOnly),z=x.colorModeForRenderPass(),B=d.paint.get("line-dasharray"),V=d.paint.get("line-pattern"),G=V.constantOr(1),X=d.paint.get("line-gradient"),K=d.getCrossfadeParameters(),ce=G?"linePattern":B?"lineSDF":X?"lineGradient":"line",oe=x.context,le=oe.gl;let be=!0;for(const Ce of g){const Pe=l.getTile(Ce);if(G&&!Pe.patternsLoaded())continue;const de=Pe.getBucket(d);if(!de)continue;const Re=de.programConfigurations.get(d.id),De=x.context.program.get(),$e=x.useProgram(ce,Re),Ue=be||$e.program!==De,Je=x.style.terrain&&x.style.terrain.getTerrainData(Ce),Ne=V.constantOr(null);if(Ne&&Pe.imageAtlas){const bt=Pe.imageAtlas,Qt=bt.patternPositions[Ne.to.toString()],or=bt.patternPositions[Ne.from.toString()];Qt&&or&&Re.setConstantPatternPositions(Qt,or)}const yt=Je?Ce:null,ct=G?vc(x,Pe,d,K,yt):B?Vl(x,Pe,d,B,K,yt):X?af(x,Pe,d,de.lineClipsArray.length,yt):Gs(x,Pe,d,yt);if(G)oe.activeTexture.set(le.TEXTURE0),Pe.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),Re.updatePaintBuffers(K);else if(B&&(Ue||x.lineAtlas.dirty))oe.activeTexture.set(le.TEXTURE0),x.lineAtlas.bind(oe);else if(X){const bt=de.gradients[d.id];let Qt=bt.texture;if(d.gradientVersion!==bt.version){let or=256;if(d.stepInterpolant){const Nt=l.getSource().maxzoom,kr=Ce.canonical.z===Nt?Math.ceil(1<<x.transform.maxZoom-Ce.canonical.z):1;or=o.clamp(o.nextPowerOfTwo(de.maxLineLength/o.EXTENT*1024*kr),256,oe.maxTextureSize)}bt.gradient=o.renderColorRamp({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:or,image:bt.gradient||void 0,clips:de.lineClipsArray}),bt.texture?bt.texture.update(bt.gradient):bt.texture=new L(oe,bt.gradient,le.RGBA),bt.version=d.gradientVersion,Qt=bt.texture}oe.activeTexture.set(le.TEXTURE0),Qt.bind(d.stepInterpolant?le.NEAREST:le.LINEAR,le.CLAMP_TO_EDGE)}$e.draw(oe,le.TRIANGLES,P,x.stencilModeForClipping(Ce),z,oi.disabled,ct,Je,d.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,d.paint,x.transform.zoom,Re,de.layoutVertexBuffer2),be=!1}},fill:function(x,l,d,g){const w=d.paint.get("fill-color"),E=d.paint.get("fill-opacity");if(E.constantOr(1)===0)return;const P=x.colorModeForRenderPass(),z=d.paint.get("fill-pattern"),B=x.opaquePassEnabledForLayer()&&!z.constantOr(1)&&w.constantOr(o.Color.transparent).a===1&&E.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===B){const V=x.depthModeForSublayer(1,x.renderPass==="opaque"?fr.ReadWrite:fr.ReadOnly);jl(x,l,d,g,V,P,!1)}if(x.renderPass==="translucent"&&d.paint.get("fill-antialias")){const V=x.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,fr.ReadOnly);jl(x,l,d,g,V,P,!0)}},"fill-extrusion":function(x,l,d,g){const w=d.paint.get("fill-extrusion-opacity");if(w!==0&&x.renderPass==="translucent"){const E=new fr(x.context.gl.LEQUAL,fr.ReadWrite,x.depthRangeFor3D);if(w!==1||d.paint.get("fill-extrusion-pattern").constantOr(1))Wl(x,l,d,g,E,Zr.disabled,Qr.disabled),Wl(x,l,d,g,E,x.stencilModeFor3D(),x.colorModeForRenderPass());else{const P=x.colorModeForRenderPass();Wl(x,l,d,g,E,Zr.disabled,P)}}},hillshade:function(x,l,d,g){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;const w=x.context,E=x.depthModeForSublayer(0,fr.ReadOnly),P=x.colorModeForRenderPass(),[z,B]=x.renderPass==="translucent"?x.stencilConfigForOverlap(g):[{},g];for(const V of B){const G=l.getTile(V);G.needsHillshadePrepare!==void 0&&G.needsHillshadePrepare&&x.renderPass==="offscreen"?pm(x,G,d,E,Zr.disabled,P):x.renderPass==="translucent"&&yf(x,V,G,d,E,z[V.overscaledZ],P)}w.viewport.set([0,0,x.width,x.height])},raster:function(x,l,d,g){if(x.renderPass!=="translucent"||d.paint.get("raster-opacity")===0||!g.length)return;const w=x.context,E=w.gl,P=l.getSource(),z=x.useProgram("raster"),B=x.colorModeForRenderPass(),[V,G]=P instanceof Ct?[{},g]:x.stencilConfigForOverlap(g),X=G[G.length-1].overscaledZ,K=!x.options.moving;for(const ce of G){const oe=x.depthModeForSublayer(ce.overscaledZ-X,d.paint.get("raster-opacity")===1?fr.ReadWrite:fr.ReadOnly,E.LESS),le=l.getTile(ce);le.registerFadeDuration(d.paint.get("raster-fade-duration"));const be=l.findLoadedParent(ce,0),Ce=Ec(le,be,l,d,x.transform,x.style.terrain);let Pe,de;const Re=d.paint.get("raster-resampling")==="nearest"?E.NEAREST:E.LINEAR;w.activeTexture.set(E.TEXTURE0),le.texture.bind(Re,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),w.activeTexture.set(E.TEXTURE1),be?(be.texture.bind(Re,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST),Pe=Math.pow(2,be.tileID.overscaledZ-le.tileID.overscaledZ),de=[le.tileID.canonical.x*Pe%1,le.tileID.canonical.y*Pe%1]):le.texture.bind(Re,E.CLAMP_TO_EDGE,E.LINEAR_MIPMAP_NEAREST);const De=x.style.terrain&&x.style.terrain.getTerrainData(ce),$e=De?ce:null,Ue=$e?$e.posMatrix:x.transform.calculatePosMatrix(ce.toUnwrapped(),K),Je=rm(Ue,de||[0,0],Pe||1,Ce,d);P instanceof Ct?z.draw(w,E.TRIANGLES,oe,Zr.disabled,B,oi.disabled,Je,De,d.id,P.boundsBuffer,x.quadTriangleIndexBuffer,P.boundsSegments):z.draw(w,E.TRIANGLES,oe,V[ce.overscaledZ],B,oi.disabled,Je,De,d.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments)}},background:function(x,l,d,g){const w=d.paint.get("background-color"),E=d.paint.get("background-opacity");if(E===0)return;const P=x.context,z=P.gl,B=x.transform,V=B.tileSize,G=d.paint.get("background-pattern");if(x.isPatternMissing(G))return;const X=!G&&w.a===1&&E===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==X)return;const K=Zr.disabled,ce=x.depthModeForSublayer(0,X==="opaque"?fr.ReadWrite:fr.ReadOnly),oe=x.colorModeForRenderPass(),le=x.useProgram(G?"backgroundPattern":"background"),be=g||B.coveringTiles({tileSize:V,terrain:x.style.terrain});G&&(P.activeTexture.set(z.TEXTURE0),x.imageManager.bind(x.context));const Ce=d.getCrossfadeParameters();for(const Pe of be){const de=g?Pe.posMatrix:x.transform.calculatePosMatrix(Pe.toUnwrapped()),Re=G?oy(de,E,x,G,{tileID:Pe,tileSize:V},Ce):ay(de,E,w),De=x.style.terrain&&x.style.terrain.getTerrainData(Pe);le.draw(P,z.TRIANGLES,ce,K,oe,oi.disabled,Re,De,d.id,x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}},debug:function(x,l,d){for(let g=0;g<d.length;g++)gy(x,l,d[g])},custom:function(x,l,d){const g=x.context,w=d.implementation;if(x.renderPass==="offscreen"){const E=w.prerender;E&&(x.setCustomLayerDefaults(),g.setColorMode(x.colorModeForRenderPass()),E.call(w,g.gl,x.transform.customLayerMatrix()),g.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),g.setColorMode(x.colorModeForRenderPass()),g.setStencilMode(Zr.disabled);const E=w.renderingMode==="3d"?new fr(x.context.gl.LEQUAL,fr.ReadWrite,x.depthRangeFor3D):x.depthModeForSublayer(0,fr.ReadOnly);g.setDepthMode(E),w.render(g.gl,x.transform.customLayerMatrix()),g.setDirty(),x.setBaseState(),g.bindFramebuffer.set(null)}}};class bf{constructor(l,d){this.context=new fm(l),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.create(),renderTime:0},this.setup(),this.numSublayers=Ye.maxUnderzooming+Ye.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new qt,this.gpuTimers={}}resize(l,d,g){if(this.width=l*g,this.height=d*g,this.pixelRatio=g,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const w of this.style._order)this.style._layers[w].resize()}setup(){const l=this.context,d=new o.PosArray;d.emplaceBack(0,0),d.emplaceBack(o.EXTENT,0),d.emplaceBack(0,o.EXTENT),d.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(d,gr.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const g=new o.PosArray;g.emplaceBack(0,0),g.emplaceBack(o.EXTENT,0),g.emplaceBack(0,o.EXTENT),g.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=l.createVertexBuffer(g,gr.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const w=new o.RasterBoundsArray;w.emplaceBack(0,0,0,0),w.emplaceBack(o.EXTENT,0,o.EXTENT,0),w.emplaceBack(0,o.EXTENT,0,o.EXTENT),w.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.rasterBoundsBuffer=l.createVertexBuffer(w,et.members),this.rasterBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const E=new o.PosArray;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(E,gr.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const P=new o.LineStripIndexArray;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=l.createIndexBuffer(P);const z=new o.TriangleIndexArray;z.emplaceBack(0,1,2),z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(z),this.emptyTexture=new L(l,{width:1,height:1,data:new Uint8Array([0,0,0,0])},l.gl.RGBA);const B=this.context.gl;this.stencilClearMode=new Zr({func:B.ALWAYS,mask:0},0,255,B.ZERO,B.ZERO,B.ZERO)}clearStencil(){const l=this.context,d=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const g=o.create();o.ortho(g,0,this.width,this.height,0,0,1),o.scale(g,g,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(l,d.TRIANGLES,fr.disabled,this.stencilClearMode,Qr.disabled,oi.disabled,Us(g),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(l,d){if(this.currentStencilSource===l.source||!l.isTileClipped()||!d||!d.length)return;this.currentStencilSource=l.source;const g=this.context,w=g.gl;this.nextStencilID+d.length>256&&this.clearStencil(),g.setColorMode(Qr.disabled),g.setDepthMode(fr.disabled);const E=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of d){const z=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,B=this.style.terrain&&this.style.terrain.getTerrainData(P);E.draw(g,w.TRIANGLES,fr.disabled,new Zr({func:w.ALWAYS,mask:0},z,255,w.KEEP,w.KEEP,w.REPLACE),Qr.disabled,oi.disabled,Us(P.posMatrix),B,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,d=this.context.gl;return new Zr({func:d.NOTEQUAL,mask:255},l,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(l){const d=this.context.gl;return new Zr({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(l){const d=this.context.gl,g=l.sort((P,z)=>z.overscaledZ-P.overscaledZ),w=g[g.length-1].overscaledZ,E=g[0].overscaledZ-w+1;if(E>1){this.currentStencilSource=void 0,this.nextStencilID+E>256&&this.clearStencil();const P={};for(let z=0;z<E;z++)P[z+w]=new Zr({func:d.GEQUAL,mask:255},z+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=E,[P,g]}return[{[w]:Zr.disabled},g]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Qr([l.CONSTANT_COLOR,l.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Qr.unblended:Qr.alphaBlended}depthModeForSublayer(l,d,g){if(!this.opaquePassEnabledForLayer())return fr.disabled;const w=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new fr(g||this.context.gl.LEQUAL,d,[w,w])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,d){this.style=l,this.options=d,this.lineAtlas=l.lineAtlas,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const g=this.style._order,w=this.style.sourceCaches,E=this.style.terrain&&new _m(this);for(const V in w){const G=w[V];G.used&&G.prepare(this.context)}const P={},z={},B={};for(const V in w){const G=w[V];P[V]=G.getVisibleCoordinates(),z[V]=P[V].slice().reverse(),B[V]=G.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let V=0;V<g.length;V++)if(this.style._layers[g[V]].is3D()){this.opaquePassCutoff=V;break}if(E){this.opaquePassCutoff=0;const V=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!o.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||V.length)&&(o.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(G,X){const K=G.context,ce=K.gl,oe=Qr.unblended,le=new fr(ce.LEQUAL,fr.ReadWrite,[0,1]),be=X.getTerrainMesh(),Ce=X.sourceCache.getRenderableTiles(),Pe=G.useProgram("terrainDepth");K.bindFramebuffer.set(X.getFramebuffer("depth").framebuffer),K.viewport.set([0,0,G.width/devicePixelRatio,G.height/devicePixelRatio]),K.clear({color:o.Color.transparent,depth:1});for(const de of Ce){const Re=X.getTerrainData(de.tileID),De=G.transform.calculatePosMatrix(de.tileID.toUnwrapped());Pe.draw(K,ce.TRIANGLES,le,Zr.disabled,oe,oi.backCCW,{u_matrix:De},Re,"terrain",be.vertexBuffer,be.indexBuffer,be.segments)}K.bindFramebuffer.set(null),K.viewport.set([0,0,G.width,G.height])}(this,this.style.terrain),function(G,X){const K=G.context,ce=K.gl,oe=Qr.unblended,le=new fr(ce.LEQUAL,fr.ReadWrite,[0,1]),be=X.getTerrainMesh(),Ce=X.getCoordsTexture(),Pe=X.sourceCache.getRenderableTiles(),de=G.useProgram("terrainCoords");K.bindFramebuffer.set(X.getFramebuffer("coords").framebuffer),K.viewport.set([0,0,G.width/devicePixelRatio,G.height/devicePixelRatio]),K.clear({color:o.Color.transparent,depth:1}),X.coordsIndex=[];for(const Re of Pe){const De=X.getTerrainData(Re.tileID);K.activeTexture.set(ce.TEXTURE0),ce.bindTexture(ce.TEXTURE_2D,Ce.texture);const $e=G.transform.calculatePosMatrix(Re.tileID.toUnwrapped());de.draw(K,ce.TRIANGLES,le,Zr.disabled,oe,oi.backCCW,{u_matrix:$e,u_terrain_coords_id:(255-X.coordsIndex.length)/255,u_texture:0},De,"terrain",be.vertexBuffer,be.indexBuffer,be.segments),X.coordsIndex.push(Re.tileID.key)}K.bindFramebuffer.set(null),K.viewport.set([0,0,G.width,G.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const V of g){const G=this.style._layers[V];if(!G.hasOffscreenPass()||G.isHidden(this.transform.zoom))continue;const X=z[G.source];(G.type==="custom"||X.length)&&this.renderLayer(this,w[G.source],G,X)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(l._order.length+2)*this.numSublayers*this.depthEpsilon],!E)for(this.renderPass="opaque",this.currentLayer=g.length-1;this.currentLayer>=0;this.currentLayer--){const V=this.style._layers[g[this.currentLayer]],G=w[V.source],X=P[V.source];this._renderTileClippingMasks(V,X),this.renderLayer(this,G,V,X)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<g.length;this.currentLayer++){const V=this.style._layers[g[this.currentLayer]],G=w[V.source];if(E&&E.renderLayer(V))continue;const X=(V.type==="symbol"?B:z)[V.source];this._renderTileClippingMasks(V,P[V.source]),this.renderLayer(this,G,V,X)}if(this.options.showTileBoundaries){let V,G;Object.values(this.style._layers).forEach(X=>{X.source&&!X.isHidden(this.transform.zoom)&&(X.source!==(G&&G.id)&&(G=this.style.sourceCaches[X.source]),(!V||V.getSource().maxzoom<G.getSource().maxzoom)&&(V=G))}),V&&Xl.debug(this,V,V.getVisibleCoordinates())}this.options.showPadding&&function(V){const G=V.transform.padding;rs(V,V.transform.height-(G.top||0),3,Cc),rs(V,G.bottom||0,3,fa),Zl(V,G.left||0,3,mm),Zl(V,V.transform.width-(G.right||0),3,xf);const X=V.transform.centerPoint;(function(K,ce,oe,le){Zs(K,ce-1,oe-10,2,20,le),Zs(K,ce-10,oe-1,20,2,le)})(V,X.x,V.transform.height-X.y,vm)}(this),this.context.setDefault()}renderLayer(l,d,g,w){g.isHidden(this.transform.zoom)||(g.type==="background"||g.type==="custom"||(w||[]).length)&&(this.id=g.id,this.gpuTimingStart(g),Xl[g.type](l,d,g,w,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery;let g=this.gpuTimers[l.id];g||(g=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:d.createQueryEXT()}),g.calls++,d.beginQueryEXT(d.TIME_ELAPSED_EXT,g.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}queryGpuTimers(l){const d={};for(const g in l){const w=l[g],E=this.context.extTimerQuery,P=E.getQueryObjectEXT(w.query,E.QUERY_RESULT_EXT)/1e6;E.deleteQueryEXT(w.query),d[g]=P}return d}translatePosMatrix(l,d,g,w,E){if(!g[0]&&!g[1])return l;const P=E?w==="map"?this.transform.angle:0:w==="viewport"?-this.transform.angle:0;if(P){const V=Math.sin(P),G=Math.cos(P);g=[g[0]*G-g[1]*V,g[0]*V+g[1]*G]}const z=[E?g[0]:Si(d,g[0],this.transform.zoom),E?g[1]:Si(d,g[1],this.transform.zoom),0],B=new Float32Array(16);return o.translate(B,l,z),B}saveTileTexture(l){const d=this._tileTextures[l.size[0]];d?d.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const d=this._tileTextures[l];return d&&d.length>0?d.pop():null}isPatternMissing(l){if(!l)return!1;if(!l.from||!l.to)return!0;const d=this.imageManager.getPattern(l.from.toString()),g=this.imageManager.getPattern(l.to.toString());return!d||!g}useProgram(l,d){this.cache=this.cache||{};const g=l+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[g]||(this.cache[g]=new Kp(this.context,l,Fl[l],d,sf[l],this._showOverdrawInspector,this.style.terrain)),this.cache[g]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new L(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Mc{constructor(l,d){this.points=l,this.planes=d}static fromInvProjectionMatrix(l,d,g){const w=Math.pow(2,g),E=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>{const B=1/(z=o.transformMat4([],z,l))[3]/d*w;return o.mul$1(z,z,[B,B,1/z[3],B])}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(z=>{const B=o.sub([],E[z[0]],E[z[1]]),V=o.sub([],E[z[2]],E[z[1]]),G=o.normalize([],o.cross([],B,V)),X=-o.dot(G,E[z[1]]);return G.concat(X)});return new Mc(E,P)}}class Yl{constructor(l,d){this.min=l,this.max=d,this.center=o.scale$1([],o.add([],this.min,this.max),.5)}quadrant(l){const d=[l%2==0,l<2],g=o.clone$2(this.min),w=o.clone$2(this.max);for(let E=0;E<d.length;E++)g[E]=d[E]?this.min[E]:this.center[E],w[E]=d[E]?this.center[E]:this.max[E];return w[2]=this.max[2],new Yl(g,w)}distanceX(l){return Math.max(Math.min(this.max[0],l[0]),this.min[0])-l[0]}distanceY(l){return Math.max(Math.min(this.max[1],l[1]),this.min[1])-l[1]}intersects(l){const d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let g=!0;for(let w=0;w<l.planes.length;w++){const E=l.planes[w];let P=0;for(let z=0;z<d.length;z++)o.dot$1(E,d[z])>=0&&P++;if(P===0)return 0;P!==d.length&&(g=!1)}if(g)return 2;for(let w=0;w<3;w++){let E=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let z=0;z<l.points.length;z++){const B=l.points[z][w]-this.min[w];E=Math.min(E,B),P=Math.max(P,B)}if(P<0||E>this.max[w]-this.min[w])return 0}return 1}}class Xs{constructor(l=0,d=0,g=0,w=0){if(isNaN(l)||l<0||isNaN(d)||d<0||isNaN(g)||g<0||isNaN(w)||w<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=d,this.left=g,this.right=w}interpolate(l,d,g){return d.top!=null&&l.top!=null&&(this.top=o.number(l.top,d.top,g)),d.bottom!=null&&l.bottom!=null&&(this.bottom=o.number(l.bottom,d.bottom,g)),d.left!=null&&l.left!=null&&(this.left=o.number(l.left,d.left,g)),d.right!=null&&l.right!=null&&(this.right=o.number(l.right,d.right,g)),this}getCenter(l,d){const g=o.clamp((this.left+l-this.right)/2,0,l),w=o.clamp((this.top+d-this.bottom)/2,0,d);return new o.pointGeometry(g,w)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Xs(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Kl{constructor(l,d,g,w,E){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=E===void 0||!!E,this._minZoom=l||0,this._maxZoom=d||22,this._minPitch=g??0,this._maxPitch=w??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Xs,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const l=new Kl(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return l.tileSize=this.tileSize,l.latRange=this.latRange,l.width=this.width,l.height=this.height,l._center=this._center,l._elevation=this._elevation,l.zoom=this.zoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._calcMatrices(),l}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(l){const d=-o.wrap(l,-180,180)*Math.PI/180;var g;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=(g=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g),function(w,E,P){var z=E[0],B=E[1],V=E[2],G=E[3],X=Math.sin(P),K=Math.cos(P);w[0]=z*K+V*X,w[1]=B*K+G*X,w[2]=z*-X+V*K,w[3]=B*-X+G*K}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const d=o.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=l/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(l){const d=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.scale=this.zoomScale(d),this.tileZoom=Math.floor(d),this.zoomFraction=d-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(l){l!==this._elevation&&(this._elevation=l,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,d,g){this._unmodified=!1,this._edgeInsets.interpolate(l,d,g),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const d=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(l){const d=[new o.UnwrappedTileID(0,l)];if(this._renderWorldCopies){const g=this.pointCoordinate(new o.pointGeometry(0,0)),w=this.pointCoordinate(new o.pointGeometry(this.width,0)),E=this.pointCoordinate(new o.pointGeometry(this.width,this.height)),P=this.pointCoordinate(new o.pointGeometry(0,this.height)),z=Math.floor(Math.min(g.x,w.x,E.x,P.x)),B=Math.floor(Math.max(g.x,w.x,E.x,P.x)),V=1;for(let G=z-V;G<=B+V;G++)G!==0&&d.push(new o.UnwrappedTileID(G,l))}return d}coveringTiles(l){var d,g;let w=this.coveringZoomLevel(l);const E=w;if(l.minzoom!==void 0&&w<l.minzoom)return[];l.maxzoom!==void 0&&w>l.maxzoom&&(w=l.maxzoom);const P=this.pointCoordinate(this.getCameraPoint()),z=o.MercatorCoordinate.fromLngLat(this.center),B=Math.pow(2,w),V=[B*P.x,B*P.y,0],G=[B*z.x,B*z.y,0],X=Mc.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,w);let K=l.minzoom||0;!l.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(K=w);const ce=l.terrain?2/Math.min(this.tileSize,l.tileSize)*this.tileSize:3,oe=de=>({aabb:new Yl([de*B,0,0],[(de+1)*B,B,0]),zoom:0,x:0,y:0,wrap:de,fullyVisible:!1}),le=[],be=[],Ce=w,Pe=l.reparseOverscaled?E:w;if(this._renderWorldCopies)for(let de=1;de<=3;de++)le.push(oe(-de)),le.push(oe(de));for(le.push(oe(0));le.length>0;){const de=le.pop(),Re=de.x,De=de.y;let $e=de.fullyVisible;if(!$e){const bt=de.aabb.intersects(X);if(bt===0)continue;$e=bt===2}const Ue=l.terrain?V:G,Je=de.aabb.distanceX(Ue),Ne=de.aabb.distanceY(Ue),yt=Math.max(Math.abs(Je),Math.abs(Ne)),ct=ce+(1<<Ce-de.zoom)-2;if(de.zoom===Ce||yt>ct&&de.zoom>=K){const bt=Ce-de.zoom,Qt=V[0]-.5-(Re<<bt),or=V[1]-.5-(De<<bt);be.push({tileID:new o.OverscaledTileID(de.zoom===Ce?Pe:de.zoom,de.wrap,de.zoom,Re,De),distanceSq:o.sqrLen([G[0]-.5-Re,G[1]-.5-De]),tileDistanceToCamera:Math.sqrt(Qt*Qt+or*or)})}else for(let bt=0;bt<4;bt++){const Qt=(Re<<1)+bt%2,or=(De<<1)+(bt>>1),Nt=de.zoom+1;let kr=de.aabb.quadrant(bt);if(l.terrain){const Rr=new o.OverscaledTileID(Nt,de.wrap,Nt,Qt,or),pr=l.terrain.getMinMaxElevation(Rr),yr=(d=pr.minElevation)!==null&&d!==void 0?d:this.elevation,Fr=(g=pr.maxElevation)!==null&&g!==void 0?g:this.elevation;kr=new Yl([kr.min[0],kr.min[1],yr],[kr.max[0],kr.max[1],Fr])}le.push({aabb:kr,zoom:Nt,x:Qt,y:or,wrap:de.wrap,fullyVisible:$e})}}return be.sort((de,Re)=>de.distanceSq-Re.distanceSq).map(de=>de.tileID)}resize(l,d){this.width=l,this.height=d,this.pixelsToGLUnits=[2/l,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const d=o.clamp(l.lat,-this.maxValidLatitude,this.maxValidLatitude);return new o.pointGeometry(o.mercatorXfromLng(l.lng)*this.worldSize,o.mercatorYfromLat(d)*this.worldSize)}unproject(l){return new o.MercatorCoordinate(l.x/this.worldSize,l.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(l){this.freezeElevation||(this.elevation=l?this.getElevation(this._center,l):0)}getElevation(l,d){const g=o.MercatorCoordinate.fromLngLat(l),w=(1<<this.tileZoom)*o.EXTENT,E=g.x*w,P=g.y*w,z=Math.floor(E/o.EXTENT),B=Math.floor(P/o.EXTENT),V=new o.OverscaledTileID(this.tileZoom,0,this.tileZoom,z,B);return d.getElevation(V,E%o.EXTENT,P%o.EXTENT,o.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(l){const d=this.pointLocation(this.centerPoint,l),g=this.getElevation(d,l);if(!(this.elevation-g))return;const w=this.getCameraPosition(),E=o.MercatorCoordinate.fromLngLat(w.lngLat,w.altitude),P=o.MercatorCoordinate.fromLngLat(d,g),z=E.x-P.x,B=E.y-P.y,V=E.z-P.z,G=Math.sqrt(z*z+B*B+V*V),X=this.scaleZoom(this.cameraToCenterDistance/G/this.tileSize);this._elevation=g,this._center=d,this.zoom=X}setLocationAtPoint(l,d){const g=this.pointCoordinate(d),w=this.pointCoordinate(this.centerPoint),E=this.locationCoordinate(l),P=new o.MercatorCoordinate(E.x-(g.x-w.x),E.y-(g.y-w.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(l,d){return d?this.coordinatePoint(this.locationCoordinate(l),this.getElevation(l,d),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(l))}pointLocation(l,d){return this.coordinateLocation(this.pointCoordinate(l,d))}locationCoordinate(l){return o.MercatorCoordinate.fromLngLat(l)}coordinateLocation(l){return l&&l.toLngLat()}pointCoordinate(l,d){if(d){const K=d.pointCoordinate(l);if(K!=null)return K}const g=[l.x,l.y,0,1],w=[l.x,l.y,1,1];o.transformMat4(g,g,this.pixelMatrixInverse),o.transformMat4(w,w,this.pixelMatrixInverse);const E=g[3],P=w[3],z=g[1]/E,B=w[1]/P,V=g[2]/E,G=w[2]/P,X=V===G?0:(0-V)/(G-V);return new o.MercatorCoordinate(o.number(g[0]/E,w[0]/P,X)/this.worldSize,o.number(z,B,X)/this.worldSize)}coordinatePoint(l,d=0,g=this.pixelMatrix){const w=[l.x*this.worldSize,l.y*this.worldSize,d,1];return o.transformMat4(w,w,g),new o.pointGeometry(w[0]/w[3],w[1]/w[3])}getBounds(){const l=Math.max(0,this.height/2-this.getHorizon());return new o.LngLatBounds().extend(this.pointLocation(new o.pointGeometry(0,l))).extend(this.pointLocation(new o.pointGeometry(this.width,l))).extend(this.pointLocation(new o.pointGeometry(this.width,this.height))).extend(this.pointLocation(new o.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new o.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(l){l?(this.lngRange=[l.getWest(),l.getEast()],this.latRange=[l.getSouth(),l.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(l,d=!1){const g=l.key,w=d?this._alignedPosMatrixCache:this._posMatrixCache;if(w[g])return w[g];const E=l.canonical,P=this.worldSize/this.zoomScale(E.z),z=E.x+Math.pow(2,E.z)*l.wrap,B=o.identity(new Float64Array(16));return o.translate(B,B,[z*P,E.y*P,0]),o.scale(B,B,[P/o.EXTENT,P/o.EXTENT,1]),o.multiply(B,d?this.alignedProjMatrix:this.projMatrix,B),w[g]=new Float32Array(B),w[g]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let l,d,g,w,E=-90,P=90,z=-180,B=180;const V=this.size,G=this._unmodified;if(this.latRange){const ce=this.latRange;E=o.mercatorYfromLat(ce[1])*this.worldSize,P=o.mercatorYfromLat(ce[0])*this.worldSize,l=P-E<V.y?V.y/(P-E):0}if(this.lngRange){const ce=this.lngRange;z=o.wrap(o.mercatorXfromLng(ce[0])*this.worldSize,0,this.worldSize),B=o.wrap(o.mercatorXfromLng(ce[1])*this.worldSize,0,this.worldSize),B<z&&(B+=this.worldSize),d=B-z<V.x?V.x/(B-z):0}const X=this.point,K=Math.max(d||0,l||0);if(K)return this.center=this.unproject(new o.pointGeometry(d?(B+z)/2:X.x,l?(P+E)/2:X.y)),this.zoom+=this.scaleZoom(K),this._unmodified=G,void(this._constraining=!1);if(this.latRange){const ce=X.y,oe=V.y/2;ce-oe<E&&(w=E+oe),ce+oe>P&&(w=P-oe)}if(this.lngRange){const ce=(z+B)/2,oe=o.wrap(X.x,ce-this.worldSize/2,ce+this.worldSize/2),le=V.x/2;oe-le<z&&(g=z+le),oe+le>B&&(g=B-le)}g===void 0&&w===void 0||(this.center=this.unproject(new o.pointGeometry(g!==void 0?g:X.x,w!==void 0?w:X.y)).wrap()),this._unmodified=G,this._constraining=!1}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,d=this.point.x,g=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let w=o.identity(new Float64Array(16));o.scale(w,w,[this.width/2,-this.height/2,1]),o.translate(w,w,[1,-1,0]),this.labelPlaneMatrix=w,w=o.identity(new Float64Array(16)),o.scale(w,w,[1,-1,1]),o.translate(w,w,[-1,-1,0]),o.scale(w,w,[2/this.width,2/this.height,1]),this.glCoordMatrix=w,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const E=Math.PI/2+this._pitch,P=this._fov*(.5+l.y/this.height),z=Math.sin(P)*this.cameraToSeaLevelDistance/Math.sin(o.clamp(Math.PI-E-P,.01,Math.PI-.01)),B=this.getHorizon(),V=2*Math.atan(B/this.cameraToCenterDistance)*(.5+l.y/(2*B)),G=Math.sin(V)*this.cameraToSeaLevelDistance/Math.sin(o.clamp(Math.PI-E-V,.01,Math.PI-.01)),X=Math.cos(Math.PI/2-this._pitch)*z+this.cameraToSeaLevelDistance,K=Math.cos(Math.PI/2-this._pitch)*G+this.cameraToSeaLevelDistance,ce=1.01*Math.min(X,K),oe=this.height/50;w=new Float64Array(16),o.perspective(w,this._fov,this.width/this.height,oe,ce),w[8]=2*-l.x/this.width,w[9]=2*l.y/this.height,o.scale(w,w,[1,-1,1]),o.translate(w,w,[0,0,-this.cameraToCenterDistance]),o.rotateX(w,w,this._pitch),o.rotateZ(w,w,this.angle),o.translate(w,w,[-d,-g,0]),this.mercatorMatrix=o.scale([],w,[this.worldSize,this.worldSize,this.worldSize]),o.scale(w,w,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,w),o.translate(w,w,[0,0,-this.elevation]),this.projMatrix=w,this.invProjMatrix=o.invert([],w),this.pixelMatrix3D=o.multiply(new Float64Array(16),this.labelPlaneMatrix,w);const le=this.width%2/2,be=this.height%2/2,Ce=Math.cos(this.angle),Pe=Math.sin(this.angle),de=d-Math.round(d)+Ce*le+Pe*be,Re=g-Math.round(g)+Ce*be+Pe*le,De=new Float64Array(w);if(o.translate(De,De,[de>.5?de-1:de,Re>.5?Re-1:Re,0]),this.alignedProjMatrix=De,w=o.invert(new Float64Array(16),this.pixelMatrix),!w)throw new Error("failed to invert matrix");this.pixelMatrixInverse=w,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const l=this.pointCoordinate(new o.pointGeometry(0,0)),d=[l.x*this.worldSize,l.y*this.worldSize,0,1];return o.transformMat4(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.pointGeometry(0,l))}getCameraQueryGeometry(l){const d=this.getCameraPoint();if(l.length===1)return[l[0],d];{let g=d.x,w=d.y,E=d.x,P=d.y;for(const z of l)g=Math.min(g,z.x),w=Math.min(w,z.y),E=Math.max(E,z.x),P=Math.max(P,z.y);return[new o.pointGeometry(g,w),new o.pointGeometry(E,w),new o.pointGeometry(E,P),new o.pointGeometry(g,P),new o.pointGeometry(g,w)]}}}class ym{constructor(l){this._hashName=l&&encodeURIComponent(l),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(d,g){let w=!1,E=null;const P=()=>{E=null,w&&(d(),E=setTimeout(P,300),w=!1)};return()=>(w=!0,E||P(),E)}(this._updateHashUnthrottled.bind(this))}addTo(l){return this._map=l,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(l){const d=this._map.getCenter(),g=Math.round(100*this._map.getZoom())/100,w=Math.ceil((g*Math.LN2+Math.log(512/360/.5))/Math.LN10),E=Math.pow(10,w),P=Math.round(d.lng*E)/E,z=Math.round(d.lat*E)/E,B=this._map.getBearing(),V=this._map.getPitch();let G="";if(G+=l?`/${P}/${z}/${g}`:`${g}/${z}/${P}`,(B||V)&&(G+="/"+Math.round(10*B)/10),V&&(G+=`/${Math.round(V)}`),this._hashName){const X=this._hashName;let K=!1;const ce=window.location.hash.slice(1).split("&").map(oe=>{const le=oe.split("=")[0];return le===X?(K=!0,`${le}=${G}`):oe}).filter(oe=>oe);return K||ce.push(`${X}=${G}`),`#${ce.join("&")}`}return`#${G}`}_getCurrentHash(){const l=window.location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(g=>g.split("=")).forEach(g=>{g[0]===this._hashName&&(d=g)}),(d&&d[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._getCurrentHash();if(l.length>=3&&!l.some(d=>isNaN(d))){const d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:d,pitch:+(l[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,l)}catch{}}}const Jl={linearity:.3,easing:o.bezier(0,0,.3,1)},xm=o.extend({deceleration:2500,maxSpeed:1400},Jl),bm=o.extend({deceleration:20,maxSpeed:1400},Jl),wm=o.extend({deceleration:1e3,maxSpeed:360},Jl),Ys=o.extend({deceleration:1e3,maxSpeed:90},Jl);class Sm{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,d=o.exported.now();for(;l.length>0&&d-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const d={zoom:0,bearing:0,pitch:0,pan:new o.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:E}of this._inertiaBuffer)d.zoom+=E.zoomDelta||0,d.bearing+=E.bearingDelta||0,d.pitch+=E.pitchDelta||0,E.panDelta&&d.pan._add(E.panDelta),E.around&&(d.around=E.around),E.pinchAround&&(d.pinchAround=E.pinchAround);const g=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,w={};if(d.pan.mag()){const E=eu(d.pan.mag(),g,o.extend({},xm,l||{}));w.offset=d.pan.mult(E.amount/d.pan.mag()),w.center=this._map.transform.center,Ql(w,E)}if(d.zoom){const E=eu(d.zoom,g,bm);w.zoom=this._map.transform.zoom+E.amount,Ql(w,E)}if(d.bearing){const E=eu(d.bearing,g,wm);w.bearing=this._map.transform.bearing+o.clamp(E.amount,-179,179),Ql(w,E)}if(d.pitch){const E=eu(d.pitch,g,Ys);w.pitch=this._map.transform.pitch+E.amount,Ql(w,E)}if(w.zoom||w.bearing){const E=d.pinchAround===void 0?d.around:d.pinchAround;w.around=E?this._map.unproject(E):this._map.getCenter()}return this.clear(),o.extend(w,{noMoveStart:!0})}}function Ql(x,l){(!x.duration||x.duration<l.duration)&&(x.duration=l.duration,x.easing=l.easing)}function eu(x,l,d){const{maxSpeed:g,linearity:w,deceleration:E}=d,P=o.clamp(x*w/(l/1e3),-g,g),z=Math.abs(P)/(E*w);return{easing:d.easing,duration:1e3*z,amount:P*(z/2)}}class zn extends o.Event{constructor(l,d,g,w={}){const E=y.mousePos(d.getCanvasContainer(),g),P=d.unproject(E);super(l,o.extend({point:E,lngLat:P,originalEvent:g},w)),this._defaultPrevented=!1,this.target=d}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class tu extends o.Event{constructor(l,d,g){const w=l==="touchend"?g.changedTouches:g.touches,E=y.touchPos(d.getCanvasContainer(),w),P=E.map(B=>d.unproject(B)),z=E.reduce((B,V,G,X)=>B.add(V.div(X.length)),new o.pointGeometry(0,0));super(l,{points:E,point:z,lngLats:P,lngLat:d.unproject(z),originalEvent:g}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class On extends o.Event{constructor(l,d,g){super(l,{originalEvent:g}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class _y{constructor(l,d){this._map=l,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(l){return this._firePreventable(new On(l.type,this._map,l))}mousedown(l,d){return this._mousedownPos=d,this._firePreventable(new zn(l.type,this._map,l))}mouseup(l){this._map.fire(new zn(l.type,this._map,l))}click(l,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new zn(l.type,this._map,l))}dblclick(l){return this._firePreventable(new zn(l.type,this._map,l))}mouseover(l){this._map.fire(new zn(l.type,this._map,l))}mouseout(l){this._map.fire(new zn(l.type,this._map,l))}touchstart(l){return this._firePreventable(new tu(l.type,this._map,l))}touchmove(l){this._map.fire(new tu(l.type,this._map,l))}touchend(l){this._map.fire(new tu(l.type,this._map,l))}touchcancel(l){this._map.fire(new tu(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class To{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(l){this._map.fire(new zn(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new zn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._ignoreContextMenu||this._map.fire(new zn(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Tm{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,d){this.isEnabled()&&l.shiftKey&&l.button===0&&(y.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(l,d){if(!this._active)return;const g=d;if(this._lastPos.equals(g)||!this._box&&g.dist(this._startPos)<this._clickTolerance)return;const w=this._startPos;this._lastPos=g,this._box||(this._box=y.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const E=Math.min(w.x,g.x),P=Math.max(w.x,g.x),z=Math.min(w.y,g.y),B=Math.max(w.y,g.y);y.setTransform(this._box,`translate(${E}px,${z}px)`),this._box.style.width=P-E+"px",this._box.style.height=B-z+"px"}mouseupWindow(l,d){if(!this._active||l.button!==0)return;const g=this._startPos,w=d;if(this.reset(),y.suppressClick(),g.x!==w.x||g.y!==w.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:E=>E.fitScreenCoordinates(g,w,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",l)}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(y.remove(this._box),this._box=null),y.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(l,d){return this._map.fire(new o.Event(l,{originalEvent:d}))}}function Ja(x,l){if(x.length!==l.length)throw new Error(`The number of touches and points are not equal - touches ${x.length}, points ${l.length}`);const d={};for(let g=0;g<x.length;g++)d[x[g].identifier]=l[g];return d}class ru{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(l,d,g){(this.centroid||g.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=l.timeStamp),g.length===this.numTouches&&(this.centroid=function(w){const E=new o.pointGeometry(0,0);for(const P of w)E._add(P);return E.div(w.length)}(d),this.touches=Ja(g,d)))}touchmove(l,d,g){if(this.aborted||!this.centroid)return;const w=Ja(g,d);for(const E in this.touches){const P=this.touches[E],z=w[E];(!z||z.dist(P)>30)&&(this.aborted=!0)}}touchend(l,d,g){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),g.length===0){const w=!this.aborted&&this.centroid;if(this.reset(),w)return w}}}class wf{constructor(l){this.singleTap=new ru(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(l,d,g){this.singleTap.touchstart(l,d,g)}touchmove(l,d,g){this.singleTap.touchmove(l,d,g)}touchend(l,d,g){const w=this.singleTap.touchend(l,d,g);if(w){const E=l.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(w)<30;if(E&&P||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=w,this.count===this.numTaps)return this.reset(),w}}}class yy{constructor(){this._zoomIn=new wf({numTouches:1,numTaps:2}),this._zoomOut=new wf({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,d,g){this._zoomIn.touchstart(l,d,g),this._zoomOut.touchstart(l,d,g)}touchmove(l,d,g){this._zoomIn.touchmove(l,d,g),this._zoomOut.touchmove(l,d,g)}touchend(l,d,g){const w=this._zoomIn.touchend(l,d,g),E=this._zoomOut.touchend(l,d,g);return w?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()+1,around:P.unproject(w)},{originalEvent:l})}):E?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()-1,around:P.unproject(E)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const xy={0:1,2:2};class Ic{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(l,d){return!1}_move(l,d){return{}}mousedown(l,d){if(this._lastPoint)return;const g=y.mouseButton(l);this._correctButton(l,g)&&(this._lastPoint=d,this._eventButton=g)}mousemoveWindow(l,d){const g=this._lastPoint;if(g){if(l.preventDefault(),function(w,E){const P=xy[E];return w.buttons===void 0||(w.buttons&P)!==P}(l,this._eventButton))this.reset();else if(this._moved||!(d.dist(g)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(g,d)}}mouseupWindow(l){this._lastPoint&&y.mouseButton(l)===this._eventButton&&(this._moved&&y.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class iu extends Ic{mousedown(l,d){super.mousedown(l,d),this._lastPoint&&(this._active=!0)}_correctButton(l,d){return d===0&&!l.ctrlKey}_move(l,d){return{around:d,panDelta:d.sub(l)}}}class Qa extends Ic{_correctButton(l,d){return d===0&&l.ctrlKey||d===2}_move(l,d){const g=.8*(d.x-l.x);if(g)return this._active=!0,{bearingDelta:g}}contextmenu(l){l.preventDefault()}}class Tt extends Ic{_correctButton(l,d){return d===0&&l.ctrlKey||d===2}_move(l,d){const g=-.5*(d.y-l.y);if(g)return this._active=!0,{pitchDelta:g}}contextmenu(l){l.preventDefault()}}class Em{constructor(l,d){this._minTouches=l.cooperativeGestures?2:1,this._clickTolerance=l.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(l,d,g){return this._calculateTransform(l,d,g)}touchmove(l,d,g){if(this._map._cooperativeGestures&&(this._minTouches===2&&g.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(l,!1,g.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(g.length<this._minTouches))return l.preventDefault(),this._calculateTransform(l,d,g)}touchend(l,d,g){this._calculateTransform(l,d,g),this._active&&g.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,d,g){g.length>0&&(this._active=!0);const w=Ja(g,d),E=new o.pointGeometry(0,0),P=new o.pointGeometry(0,0);let z=0;for(const V in w){const G=w[V],X=this._touches[V];X&&(E._add(G),P._add(G.sub(X)),z++,w[V]=G)}if(this._touches=w,z<this._minTouches||!P.mag())return;const B=P.div(z);return this._sum._add(B),this._sum.mag()<this._clickTolerance?void 0:{around:E.div(z),panDelta:B}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class is{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(l){}_move(l,d,g){return{}}touchstart(l,d,g){this._firstTwoTouches||g.length<2||(this._firstTwoTouches=[g[0].identifier,g[1].identifier],this._start([d[0],d[1]]))}touchmove(l,d,g){if(!this._firstTwoTouches)return;l.preventDefault();const[w,E]=this._firstTwoTouches,P=Eo(g,d,w),z=Eo(g,d,E);if(!P||!z)return;const B=this._aroundCenter?null:P.add(z).div(2);return this._move([P,z],B,l)}touchend(l,d,g){if(!this._firstTwoTouches)return;const[w,E]=this._firstTwoTouches,P=Eo(g,d,w),z=Eo(g,d,E);P&&z||(this._active&&y.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Eo(x,l,d){for(let g=0;g<x.length;g++)if(x[g].identifier===d)return l[g]}function Sf(x,l){return Math.log(x/l)/Math.LN2}class mt extends is{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,d){const g=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Sf(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sf(this._distance,g),pinchAround:d}}}function Pc(x,l){return 180*x.angleWith(l)/Math.PI}class by extends is{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,d){const g=this._vector;if(this._vector=l[0].sub(l[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Pc(this._vector,g),pinchAround:d}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const d=25/(Math.PI*this._minDiameter)*360,g=Pc(l,this._startVector);return Math.abs(g)<d}}function Tf(x){return Math.abs(x.y)>Math.abs(x.x)}class Ef extends is{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(l,d,g){super.touchstart(l,d,g),this._currentTouchCount=g.length}_start(l){this._lastPoints=l,Tf(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,d,g){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const w=l[0].sub(this._lastPoints[0]),E=l[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(w,E,g.timeStamp),this._valid?(this._lastPoints=l,this._active=!0,{pitchDelta:(w.y+E.y)/2*-.5}):void 0}gestureBeginsVertically(l,d,g){if(this._valid!==void 0)return this._valid;const w=l.mag()>=2,E=d.mag()>=2;if(!w&&!E)return;if(!w||!E)return this._firstMove===void 0&&(this._firstMove=g),g-this._firstMove<100&&void 0;const P=l.y>0==d.y>0;return Tf(l)&&Tf(d)&&P}}const Cm={panStep:100,bearingStep:15,pitchStep:10};class Am{constructor(){const l=Cm;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let d=0,g=0,w=0,E=0,P=0;switch(l.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:l.shiftKey?g=-1:(l.preventDefault(),E=-1);break;case 39:l.shiftKey?g=1:(l.preventDefault(),E=1);break;case 38:l.shiftKey?w=1:(l.preventDefault(),P=-1);break;case 40:l.shiftKey?w=-1:(l.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(g=0,w=0),{cameraAnimation:z=>{const B=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:wy,zoom:d?Math.round(B)+d*(l.shiftKey?2:1):B,bearing:z.getBearing()+g*this._bearingStep,pitch:z.getPitch()+w*this._pitchStep,offset:[-E*this._panStep,-P*this._panStep],center:z.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function wy(x){return x*(2-x)}const Mm=4.000244140625;class Cf{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._handler=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=l&&l.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;l.preventDefault()}let d=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const g=o.exported.now(),w=g-(this._lastWheelEventTime||0);this._lastWheelEventTime=g,d!==0&&d%Mm==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":w>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(w*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),l.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=l,this._delta-=d,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=y.mousePos(this._el,l);this._around=o.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(d)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>Mm?this._wheelZoomRate:this._defaultZoomRate;let B=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&B!==0&&(B=1/B);const V=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):l.scale;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(V*B))),this._type==="wheel"&&(this._startZoom=l.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const d=typeof this._targetZoom=="number"?this._targetZoom:l.zoom,g=this._startZoom,w=this._easing;let E,P=!1;if(this._type==="wheel"&&g&&w){const z=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),B=w(z);E=o.number(g,d,B),z<1?this._frameId||(this._frameId=!0):P=!0}else E=d,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:E-l.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let d=o.ease;if(this._prevEase){const g=this._prevEase,w=(o.exported.now()-g.start)/g.duration,E=g.easing(w+.01)-g.easing(w),P=.27/Math.sqrt(E*E+1e-4)*.01,z=Math.sqrt(.0729-P*P);d=o.bezier(P,z,.25,1)}return this._prevEase={start:o.exported.now(),duration:l,easing:d},d}reset(){this._active=!1}}class Af{constructor(l,d){this._clickZoom=l,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Mf{constructor(){this.reset()}reset(){this._active=!1}dblclick(l,d){return l.preventDefault(),{cameraAnimation:g=>{g.easeTo({duration:300,zoom:g.getZoom()+(l.shiftKey?-1:1),around:g.unproject(d)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class If{constructor(){this._tap=new wf({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(l,d,g){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?g.length>0&&(this._swipePoint=d[0],this._swipeTouch=g[0].identifier):this._tap.touchstart(l,d,g))}touchmove(l,d,g){if(this._tapTime){if(this._swipePoint){if(g[0].identifier!==this._swipeTouch)return;const w=d[0],E=w.y-this._swipePoint.y;return this._swipePoint=w,l.preventDefault(),this._active=!0,{zoomDelta:E/128}}}else this._tap.touchmove(l,d,g)}touchend(l,d,g){this._tapTime?this._swipePoint&&g.length===0&&this.reset():this._tap.touchend(l,d,g)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xn{constructor(l,d,g){this._el=l,this._mousePan=d,this._touchPan=g}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Co{constructor(l,d,g){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=d,this._mousePitch=g}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Im{constructor(l,d,g,w){this._el=l,this._touchZoom=d,this._touchRotate=g,this._tapDragZoom=w,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ks=x=>x.zoom||x.drag||x.pitch||x.rotate;class Pf extends o.Event{}function nu(x){return x.panDelta&&x.panDelta.mag()||x.zoomDelta||x.bearingDelta||x.pitchDelta}class Pm{constructor(l,d){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Sm(l),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d),o.bindAll(["handleEvent","handleWindowEvent"],this);const g=this._el;this._listeners=[[g,"touchstart",{passive:!0}],[g,"touchmove",{passive:!1}],[g,"touchend",void 0],[g,"touchcancel",void 0],[g,"mousedown",void 0],[g,"mousemove",void 0],[g,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[g,"mouseover",void 0],[g,"mouseout",void 0],[g,"dblclick",void 0],[g,"click",void 0],[g,"keydown",{capture:!1}],[g,"keyup",void 0],[g,"wheel",{passive:!1}],[g,"contextmenu",void 0],[window,"blur",void 0]];for(const[w,E,P]of this._listeners)y.addEventListener(w,E,w===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[l,d,g]of this._listeners)y.removeEventListener(l,d,l===document?this.handleWindowEvent:this.handleEvent,g)}_addDefaultHandlers(l){const d=this._map,g=d.getCanvasContainer();this._add("mapEvent",new _y(d,l));const w=d.boxZoom=new Tm(d,l);this._add("boxZoom",w);const E=new yy,P=new Mf;d.doubleClickZoom=new Af(P,E),this._add("tapZoom",E),this._add("clickZoom",P);const z=new If;this._add("tapDragZoom",z);const B=d.touchPitch=new Ef(d);this._add("touchPitch",B);const V=new Qa(l),G=new Tt(l);d.dragRotate=new Co(l,V,G),this._add("mouseRotate",V,["mousePitch"]),this._add("mousePitch",G,["mouseRotate"]);const X=new iu(l),K=new Em(l,d);d.dragPan=new xn(g,X,K),this._add("mousePan",X),this._add("touchPan",K,["touchZoom","touchRotate"]);const ce=new by,oe=new mt;d.touchZoomRotate=new Im(g,oe,ce,z),this._add("touchRotate",ce,["touchPan","touchZoom"]),this._add("touchZoom",oe,["touchPan","touchRotate"]);const le=d.scrollZoom=new Cf(d,this);this._add("scrollZoom",le,["mousePan"]);const be=d.keyboard=new Am;this._add("keyboard",be),this._add("blockableMapEvent",new To(d));for(const Ce of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[Ce]&&d[Ce].enable(l[Ce])}_add(l,d,g){this._handlers.push({handlerName:l,handler:d,allowed:g}),this._handlersById[l]=d}stop(l){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ks(this._eventsInProgress)||this.isZooming()}_blockedByActive(l,d,g){for(const w in l)if(w!==g&&(!d||d.indexOf(w)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const d=[];for(const g of l)this._el.contains(g.target)&&d.push(g);return d}handleEvent(l,d){if(l.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const g=l.type==="renderFrame"?void 0:l,w={needsRenderFrame:!1},E={},P={},z=l.touches,B=z?this._getMapTouches(z):void 0,V=B?y.touchPos(this._el,B):y.mousePos(this._el,l);for(const{handlerName:K,handler:ce,allowed:oe}of this._handlers){if(!ce.isEnabled())continue;let le;this._blockedByActive(P,oe,K)?ce.reset():ce[d||l.type]&&(le=ce[d||l.type](l,V,B),this.mergeHandlerResult(w,E,le,K,g),le&&le.needsRenderFrame&&this._triggerRenderFrame()),(le||ce.isActive())&&(P[K]=ce)}const G={};for(const K in this._previousActiveHandlers)P[K]||(G[K]=g);this._previousActiveHandlers=P,(Object.keys(G).length||nu(w))&&(this._changes.push([w,E,G]),this._triggerRenderFrame()),(Object.keys(P).length||nu(w))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:X}=w;X&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],X(this._map))}mergeHandlerResult(l,d,g,w,E){if(!g)return;o.extend(l,g);const P={handlerName:w,originalEvent:g.originalEvent||E};g.zoomDelta!==void 0&&(d.zoom=P),g.panDelta!==void 0&&(d.drag=P),g.pitchDelta!==void 0&&(d.pitch=P),g.bearingDelta!==void 0&&(d.rotate=P)}_applyChanges(){const l={},d={},g={};for(const[w,E,P]of this._changes)w.panDelta&&(l.panDelta=(l.panDelta||new o.pointGeometry(0,0))._add(w.panDelta)),w.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+w.zoomDelta),w.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+w.bearingDelta),w.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+w.pitchDelta),w.around!==void 0&&(l.around=w.around),w.pinchAround!==void 0&&(l.pinchAround=w.pinchAround),w.noInertia&&(l.noInertia=w.noInertia),o.extend(d,E),o.extend(g,P);this._updateMapTransform(l,d,g),this._changes=[]}_updateMapTransform(l,d,g){const w=this._map,E=w.transform,P=w.style&&w.style.terrain;if(!(nu(l)||P&&this._drag))return this._fireEvents(d,g,!0);let{panDelta:z,zoomDelta:B,bearingDelta:V,pitchDelta:G,around:X,pinchAround:K}=l;K!==void 0&&(X=K),w._stop(!0),X=X||w.transform.centerPoint;const ce=E.pointLocation(z?X.sub(z):X);V&&(E.bearing+=V),G&&(E.pitch+=G),B&&(E.zoom+=B),P?d.drag&&!this._drag?(this._drag={center:E.centerPoint,lngLat:E.pointLocation(X),point:X,handlerName:d.drag.handlerName},w.fire(new o.Event("freezeElevation",{freeze:!0}))):this._drag&&g[this._drag.handlerName]?(w.fire(new o.Event("freezeElevation",{freeze:!1})),this._drag=null):d.drag&&this._drag&&(E.center=E.pointLocation(E.centerPoint.sub(z))):E.setLocationAtPoint(ce,X),this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(d,g,!0)}_fireEvents(l,d,g){const w=Ks(this._eventsInProgress),E=Ks(l),P={};for(const G in l){const{originalEvent:X}=l[G];this._eventsInProgress[G]||(P[`${G}start`]=X),this._eventsInProgress[G]=l[G]}!w&&E&&this._fireEvent("movestart",E.originalEvent);for(const G in P)this._fireEvent(G,P[G]);E&&this._fireEvent("move",E.originalEvent);for(const G in l){const{originalEvent:X}=l[G];this._fireEvent(G,X)}const z={};let B;for(const G in this._eventsInProgress){const{handlerName:X,originalEvent:K}=this._eventsInProgress[G];this._handlersById[X].isActive()||(delete this._eventsInProgress[G],B=d[X]||K,z[`${G}end`]=B)}for(const G in z)this._fireEvent(G,z[G]);const V=Ks(this._eventsInProgress);if(g&&(w||E)&&!V){this._updatingCamera=!0;const G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=K=>K!==0&&-this._bearingSnap<K&&K<this._bearingSnap;G?(X(G.bearing||this._map.getBearing())&&(G.bearing=0),this._map.easeTo(G,{originalEvent:B})):(this._map.fire(new o.Event("moveend",{originalEvent:B})),X(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,d){this._map.fire(new o.Event(l,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{delete this._frameId,this.handleEvent(new Pf("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Jn={extend:(x,...l)=>o.extend(x,...l),run(x){x()},logToElement(x,l=!1,d="log"){const g=window.document.getElementById(d);g&&(l&&(g.innerHTML=""),g.innerHTML+=`<br>${x}`)}};class si extends o.Evented{constructor(l,d){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=d.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,d){return this.jumpTo({center:l},d)}panBy(l,d,g){return l=o.pointGeometry.convert(l).mult(-1),this.panTo(this.transform.center,o.extend({offset:l},d),g)}panTo(l,d,g){return this.easeTo(o.extend({center:l},d),g)}getZoom(){return this.transform.zoom}setZoom(l,d){return this.jumpTo({zoom:l},d),this}zoomTo(l,d,g){return this.easeTo(o.extend({zoom:l},d),g)}zoomIn(l,d){return this.zoomTo(this.getZoom()+1,l,d),this}zoomOut(l,d){return this.zoomTo(this.getZoom()-1,l,d),this}getBearing(){return this.transform.bearing}setBearing(l,d){return this.jumpTo({bearing:l},d),this}getPadding(){return this.transform.padding}setPadding(l,d){return this.jumpTo({padding:l},d),this}rotateTo(l,d,g){return this.easeTo(o.extend({bearing:l},d),g)}resetNorth(l,d){return this.rotateTo(0,o.extend({duration:1e3},l),d),this}resetNorthPitch(l,d){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},l),d),this}snapToNorth(l,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,d):this}getPitch(){return this.transform.pitch}setPitch(l,d){return this.jumpTo({pitch:l},d),this}cameraForBounds(l,d){l=o.LngLatBounds.convert(l);const g=d&&d.bearing||0;return this._cameraForBoxAndBearing(l.getNorthWest(),l.getSouthEast(),g,d)}_cameraForBoxAndBearing(l,d,g,w){const E={top:0,bottom:0,right:0,left:0};if(typeof(w=o.extend({padding:E,offset:[0,0],maxZoom:this.transform.maxZoom},w)).padding=="number"){const De=w.padding;w.padding={top:De,bottom:De,right:De,left:De}}w.padding=o.extend(E,w.padding);const P=this.transform,z=P.padding,B=P.project(o.LngLat.convert(l)),V=P.project(o.LngLat.convert(d)),G=B.rotate(-g*Math.PI/180),X=V.rotate(-g*Math.PI/180),K=new o.pointGeometry(Math.max(G.x,X.x),Math.max(G.y,X.y)),ce=new o.pointGeometry(Math.min(G.x,X.x),Math.min(G.y,X.y)),oe=K.sub(ce),le=(P.width-(z.left+z.right+w.padding.left+w.padding.right))/oe.x,be=(P.height-(z.top+z.bottom+w.padding.top+w.padding.bottom))/oe.y;if(be<0||le<0)return void o.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ce=Math.min(P.scaleZoom(P.scale*Math.min(le,be)),w.maxZoom),Pe=o.pointGeometry.convert(w.offset),de=new o.pointGeometry((w.padding.left-w.padding.right)/2,(w.padding.top-w.padding.bottom)/2).rotate(g*Math.PI/180),Re=Pe.add(de).mult(P.scale/P.zoomScale(Ce));return{center:P.unproject(B.add(V).div(2).sub(Re)),zoom:Ce,bearing:g}}fitBounds(l,d,g){return this._fitInternal(this.cameraForBounds(l,d),d,g)}fitScreenCoordinates(l,d,g,w,E){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.pointGeometry.convert(l)),this.transform.pointLocation(o.pointGeometry.convert(d)),g,w),w,E)}_fitInternal(l,d,g){return l?(delete(d=o.extend(l,d)).padding,d.linear?this.easeTo(d,g):this.flyTo(d,g)):this}jumpTo(l,d){this.stop();const g=this.transform;let w=!1,E=!1,P=!1;return"zoom"in l&&g.zoom!==+l.zoom&&(w=!0,g.zoom=+l.zoom),l.center!==void 0&&(g.center=o.LngLat.convert(l.center)),"bearing"in l&&g.bearing!==+l.bearing&&(E=!0,g.bearing=+l.bearing),"pitch"in l&&g.pitch!==+l.pitch&&(P=!0,g.pitch=+l.pitch),l.padding==null||g.isPaddingEqual(l.padding)||(g.padding=l.padding),this.fire(new o.Event("movestart",d)).fire(new o.Event("move",d)),w&&this.fire(new o.Event("zoomstart",d)).fire(new o.Event("zoom",d)).fire(new o.Event("zoomend",d)),E&&this.fire(new o.Event("rotatestart",d)).fire(new o.Event("rotate",d)).fire(new o.Event("rotateend",d)),P&&this.fire(new o.Event("pitchstart",d)).fire(new o.Event("pitch",d)).fire(new o.Event("pitchend",d)),this.fire(new o.Event("moveend",d))}calculateCameraOptionsFromTo(l,d,g,w=0){const E=o.MercatorCoordinate.fromLngLat(l,d),P=o.MercatorCoordinate.fromLngLat(g,w),z=P.x-E.x,B=P.y-E.y,V=P.z-E.z,G=Math.hypot(z,B,V);if(G===0)throw new Error("Can't calculate camera options with same From and To");const X=Math.hypot(z,B),K=this.transform.scaleZoom(this.transform.cameraToCenterDistance/G/this.transform.tileSize),ce=180*Math.atan2(z,-B)/Math.PI;let oe=180*Math.acos(X/G)/Math.PI;return oe=V<0?90-oe:90+oe,{center:P.toLngLat(),zoom:K,pitch:oe,bearing:ce}}easeTo(l,d){this._stop(!1,l.easeId),((l=o.extend({offset:[0,0],duration:500,easing:o.ease},l)).animate===!1||!l.essential&&o.exported.prefersReducedMotion)&&(l.duration=0);const g=this.transform,w=this.getZoom(),E=this.getBearing(),P=this.getPitch(),z=this.getPadding(),B="zoom"in l?+l.zoom:w,V="bearing"in l?this._normalizeBearing(l.bearing,E):E,G="pitch"in l?+l.pitch:P,X="padding"in l?l.padding:g.padding,K=o.pointGeometry.convert(l.offset);let ce=g.centerPoint.add(K);const oe=g.pointLocation(ce),le=o.LngLat.convert(l.center||oe);this._normalizeCenter(le);const be=g.project(oe),Ce=g.project(le).sub(be),Pe=g.zoomScale(B-w);let de,Re;l.around&&(de=o.LngLat.convert(l.around),Re=g.locationPoint(de));const De={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||B!==w,this._rotating=this._rotating||E!==V,this._pitching=this._pitching||G!==P,this._padding=!g.isPaddingEqual(X),this._easeId=l.easeId,this._prepareEase(d,l.noMoveStart,De),this._ease($e=>{if(this._zooming&&(g.zoom=o.number(w,B,$e)),this._rotating&&(g.bearing=o.number(E,V,$e)),this._pitching&&(g.pitch=o.number(P,G,$e)),this._padding&&(g.interpolatePadding(z,X,$e),ce=g.centerPoint.add(K)),de)g.setLocationAtPoint(de,Re);else{const Ue=g.zoomScale(g.zoom-w),Je=B>w?Math.min(2,Pe):Math.max(.5,Pe),Ne=Math.pow(Je,1-$e),yt=g.unproject(be.add(Ce.mult($e*Ne)).mult(Ue));g.setLocationAtPoint(g.renderWorldCopies?yt.wrap():yt,ce)}this._fireMoveEvents(d)},$e=>{this._afterEase(d,$e)},l),this}_prepareEase(l,d,g={}){this._moving=!0,this.fire(new o.Event("freezeElevation",{freeze:!0})),d||g.moving||this.fire(new o.Event("movestart",l)),this._zooming&&!g.zooming&&this.fire(new o.Event("zoomstart",l)),this._rotating&&!g.rotating&&this.fire(new o.Event("rotatestart",l)),this._pitching&&!g.pitching&&this.fire(new o.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new o.Event("move",l)),this._zooming&&this.fire(new o.Event("zoom",l)),this._rotating&&this.fire(new o.Event("rotate",l)),this._pitching&&this.fire(new o.Event("pitch",l))}_afterEase(l,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId,this.fire(new o.Event("freezeElevation",{freeze:!1}));const g=this._zooming,w=this._rotating,E=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,g&&this.fire(new o.Event("zoomend",l)),w&&this.fire(new o.Event("rotateend",l)),E&&this.fire(new o.Event("pitchend",l)),this.fire(new o.Event("moveend",l))}flyTo(l,d){if(!l.essential&&o.exported.prefersReducedMotion){const Nt=o.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Nt,d)}this.stop(),l=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},l);const g=this.transform,w=this.getZoom(),E=this.getBearing(),P=this.getPitch(),z=this.getPadding(),B="zoom"in l?o.clamp(+l.zoom,g.minZoom,g.maxZoom):w,V="bearing"in l?this._normalizeBearing(l.bearing,E):E,G="pitch"in l?+l.pitch:P,X="padding"in l?l.padding:g.padding,K=g.zoomScale(B-w),ce=o.pointGeometry.convert(l.offset);let oe=g.centerPoint.add(ce);const le=g.pointLocation(oe),be=o.LngLat.convert(l.center||le);this._normalizeCenter(be);const Ce=g.project(le),Pe=g.project(be).sub(Ce);let de=l.curve;const Re=Math.max(g.width,g.height),De=Re/K,$e=Pe.mag();if("minZoom"in l){const Nt=o.clamp(Math.min(l.minZoom,w,B),g.minZoom,g.maxZoom),kr=Re/g.zoomScale(Nt-w);de=Math.sqrt(kr/$e*2)}const Ue=de*de;function Je(Nt){const kr=(De*De-Re*Re+(Nt?-1:1)*Ue*Ue*$e*$e)/(2*(Nt?De:Re)*Ue*$e);return Math.log(Math.sqrt(kr*kr+1)-kr)}function Ne(Nt){return(Math.exp(Nt)-Math.exp(-Nt))/2}function yt(Nt){return(Math.exp(Nt)+Math.exp(-Nt))/2}const ct=Je(0);let bt=function(Nt){return yt(ct)/yt(ct+de*Nt)},Qt=function(Nt){return Re*((yt(ct)*(Ne(kr=ct+de*Nt)/yt(kr))-Ne(ct))/Ue)/$e;var kr},or=(Je(1)-ct)/de;if(Math.abs($e)<1e-6||!isFinite(or)){if(Math.abs(Re-De)<1e-6)return this.easeTo(l,d);const Nt=De<Re?-1:1;or=Math.abs(Math.log(De/Re))/de,Qt=function(){return 0},bt=function(kr){return Math.exp(Nt*de*kr)}}return l.duration="duration"in l?+l.duration:1e3*or/("screenSpeed"in l?+l.screenSpeed/de:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0),this._zooming=!0,this._rotating=E!==V,this._pitching=G!==P,this._padding=!g.isPaddingEqual(X),this._prepareEase(d,!1),this._ease(Nt=>{const kr=Nt*or,Rr=1/bt(kr);g.zoom=Nt===1?B:w+g.scaleZoom(Rr),this._rotating&&(g.bearing=o.number(E,V,Nt)),this._pitching&&(g.pitch=o.number(P,G,Nt)),this._padding&&(g.interpolatePadding(z,X,Nt),oe=g.centerPoint.add(ce));const pr=Nt===1?be:g.unproject(Ce.add(Pe.mult(Qt(kr))).mult(Rr));g.setLocationAtPoint(g.renderWorldCopies?pr.wrap():pr,oe),this._fireMoveEvents(d)},()=>this._afterEase(d),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const g=this._onEaseEnd;delete this._onEaseEnd,g.call(this,d)}if(!l){const g=this.handlers;g&&g.stop(!1)}return this}_ease(l,d,g){g.animate===!1||g.duration===0?(l(1),d()):(this._easeStart=o.exported.now(),this._easeOptions=g,this._onEaseFrame=l,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,d){l=o.wrap(l,-180,180);const g=Math.abs(l-d);return Math.abs(l-360-d)<g&&(l-=360),Math.abs(l+360-d)<g&&(l+=360),l}_normalizeCenter(l){const d=this.transform;if(!d.renderWorldCopies||d.lngRange)return;const g=l.lng-d.center.lng;l.lng+=g>180?-360:g<-180?360:0}}class au{constructor(l={}){this.options=l,o.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){return this._map=l,this._compact=this.options&&this.options.compact,this._container=y.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=y.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){y.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(l,d){const g=this._map._getUIString(`AttributionControl.${d}`);l.title=g,l.setAttribute("aria-label",g)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let l=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=l.concat(this.options.customAttribution.map(w=>typeof w!="string"?"":w)):typeof this.options.customAttribution=="string"&&l.push(this.options.customAttribution)),this._map.style.stylesheet){const w=this._map.style.stylesheet;this.styleOwner=w.owner,this.styleId=w.id}const d=this._map.style.sourceCaches;for(const w in d){const E=d[w];if(E.used||E.usedForTerrain){const P=E.getSource();P.attribution&&l.indexOf(P.attribution)<0&&l.push(P.attribution)}}l=l.filter(w=>String(w).trim()),l.sort((w,E)=>w.length-E.length),l=l.filter((w,E)=>{for(let P=E+1;P<l.length;P++)if(l[P].indexOf(w)>=0)return!1;return!0});const g=l.join(" | ");g!==this._attribHTML&&(this._attribHTML=g,l.length?(this._innerContainer.innerHTML=g,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class Dc{constructor(l={}){this.options=l,o.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(l){this._map=l,this._compact=this.options&&this.options.compact,this._container=y.create("div","maplibregl-ctrl mapboxgl-ctrl");const d=y.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){y.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact","mapboxgl-compact"):d.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Dm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const d=++this._id;return this._queue.push({callback:l,id:d,cancelled:!1}),d}remove(l){const d=this._currentlyRunning,g=d?this._queue.concat(d):this._queue;for(const w of g)if(w.id===l)return void(w.cancelled=!0)}run(l=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const d=this._currentlyRunning=this._queue;this._queue=[];for(const g of d)if(!g.cancelled&&(g.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Lm={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},km={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Sy={showCompass:!0,showZoom:!0,visualizePitch:!1};class Aa{constructor(l,d,g=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new Qa({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,g&&(this.mousePitch=new Tt({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),y.addEventListener(d,"mousedown",this.mousedown),y.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),y.addEventListener(d,"touchmove",this.touchmove),y.addEventListener(d,"touchend",this.touchend),y.addEventListener(d,"touchcancel",this.reset)}down(l,d){this.mouseRotate.mousedown(l,d),this.mousePitch&&this.mousePitch.mousedown(l,d),y.disableDrag()}move(l,d){const g=this.map,w=this.mouseRotate.mousemoveWindow(l,d);if(w&&w.bearingDelta&&g.setBearing(g.getBearing()+w.bearingDelta),this.mousePitch){const E=this.mousePitch.mousemoveWindow(l,d);E&&E.pitchDelta&&g.setPitch(g.getPitch()+E.pitchDelta)}}off(){const l=this.element;y.removeEventListener(l,"mousedown",this.mousedown),y.removeEventListener(l,"touchstart",this.touchstart,{passive:!1}),y.removeEventListener(l,"touchmove",this.touchmove),y.removeEventListener(l,"touchend",this.touchend),y.removeEventListener(l,"touchcancel",this.reset),this.offTemp()}offTemp(){y.enableDrag(),y.removeEventListener(window,"mousemove",this.mousemove),y.removeEventListener(window,"mouseup",this.mouseup)}mousedown(l){this.down(o.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),y.mousePos(this.element,l)),y.addEventListener(window,"mousemove",this.mousemove),y.addEventListener(window,"mouseup",this.mouseup)}mousemove(l){this.move(l,y.mousePos(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=y.touchPos(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=y.touchPos(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function ou(x,l,d){if(x=new o.LngLat(x.lng,x.lat),l){const g=new o.LngLat(x.lng-360,x.lat),w=new o.LngLat(x.lng+360,x.lat),E=d.locationPoint(x).distSqr(l);d.locationPoint(g).distSqr(l)<E?x=g:d.locationPoint(w).distSqr(l)<E&&(x=w)}for(;Math.abs(x.lng-d.center.lng)>180;){const g=d.locationPoint(x);if(g.x>=0&&g.y>=0&&g.x<=d.width&&g.y<=d.height)break;x.lng>d.center.lng?x.lng-=360:x.lng+=360}return x}const Dt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Gt(x,l,d){const g=x.classList;for(const w in Dt)g.remove(`maplibregl-${d}-anchor-${w}`,`mapboxgl-${d}-anchor-${w}`);g.add(`maplibregl-${d}-anchor-${l}`,`mapboxgl-${d}-anchor-${l}`)}class Js extends o.Evented{constructor(l,d){if(super(),(l instanceof HTMLElement||d)&&(l=o.extend({element:l},d)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment!=="auto"?l.pitchAlignment:this._rotationAlignment,l&&l.element)this._element=l.element,this._offset=o.pointGeometry.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=y.create("div"),this._element.setAttribute("aria-label","Map marker");const g=y.createNS("http://www.w3.org/2000/svg","svg"),w=41,E=27;g.setAttributeNS(null,"display","block"),g.setAttributeNS(null,"height",`${w}px`),g.setAttributeNS(null,"width",`${E}px`),g.setAttributeNS(null,"viewBox",`0 0 ${E} ${w}`);const P=y.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");const z=y.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const B=y.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"transform","translate(3.0, 29.0)"),B.setAttributeNS(null,"fill","#000000");const V=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Pe of V){const de=y.createNS("http://www.w3.org/2000/svg","ellipse");de.setAttributeNS(null,"opacity","0.04"),de.setAttributeNS(null,"cx","10.5"),de.setAttributeNS(null,"cy","5.80029008"),de.setAttributeNS(null,"rx",Pe.rx),de.setAttributeNS(null,"ry",Pe.ry),B.appendChild(de)}const G=y.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"fill",this._color);const X=y.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),G.appendChild(X);const K=y.createNS("http://www.w3.org/2000/svg","g");K.setAttributeNS(null,"opacity","0.25"),K.setAttributeNS(null,"fill","#000000");const ce=y.createNS("http://www.w3.org/2000/svg","path");ce.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),K.appendChild(ce);const oe=y.createNS("http://www.w3.org/2000/svg","g");oe.setAttributeNS(null,"transform","translate(6.0, 7.0)"),oe.setAttributeNS(null,"fill","#FFFFFF");const le=y.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(8.0, 8.0)");const be=y.createNS("http://www.w3.org/2000/svg","circle");be.setAttributeNS(null,"fill","#000000"),be.setAttributeNS(null,"opacity","0.25"),be.setAttributeNS(null,"cx","5.5"),be.setAttributeNS(null,"cy","5.5"),be.setAttributeNS(null,"r","5.4999962");const Ce=y.createNS("http://www.w3.org/2000/svg","circle");Ce.setAttributeNS(null,"fill","#FFFFFF"),Ce.setAttributeNS(null,"cx","5.5"),Ce.setAttributeNS(null,"cy","5.5"),Ce.setAttributeNS(null,"r","5.4999962"),le.appendChild(be),le.appendChild(Ce),z.appendChild(B),z.appendChild(G),z.appendChild(K),z.appendChild(oe),z.appendChild(le),g.appendChild(z),g.setAttributeNS(null,"height",w*this._scale+"px"),g.setAttributeNS(null,"width",E*this._scale+"px"),this._element.appendChild(g),this._offset=o.pointGeometry.convert(l&&l.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",g=>{g.preventDefault()}),this._element.addEventListener("mousedown",g=>{g.preventDefault()}),Gt(this._element,this._anchor,"marker"),this._popup=null}addTo(l){return this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._update),l.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),y.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=o.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const w=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[w,-1*(38.1-13.5+w)],"bottom-right":[-w,-1*(38.1-13.5+w)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(l){const d=l.code,g=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&g!==32&&g!==13||this.togglePopup()}_onMapClick(l){const d=l.originalEvent.target,g=this._element;this._popup&&(d===g||g.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?l.remove():l.addTo(this._map),this):this}_update(l){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=ou(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(d=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let g="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?g="rotateX(0deg)":this._pitchAlignment==="map"&&(g=`rotateX(${this._map.getPitch()}deg)`),l&&l.type!=="moveend"||(this._pos=this._pos.round()),y.setTransform(this._element,`${Dt[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${g} ${d}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const w=this._map.unproject(this._pos),E=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=w.distanceTo(this._lngLat)>20*E?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(l){return this._offset=o.pointGeometry.convert(l),this._update(),this}_onMove(l){if(!this._isDragging){const d=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(l){this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(l){return this._draggable=!!l,this._map&&(l?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l&&l!=="auto"?l:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Df={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ao,Zi=0,Mo=!1;const Ma={maxWidth:100,unit:"metric"};function Rm(x,l,d){const g=d&&d.maxWidth||100,w=x._container.clientHeight/2,E=x.unproject([0,w]),P=x.unproject([g,w]),z=E.distanceTo(P);if(d&&d.unit==="imperial"){const B=3.2808*z;B>5280?Io(l,g,B/5280,x._getUIString("ScaleControl.Miles")):Io(l,g,B,x._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?Io(l,g,z/1852,x._getUIString("ScaleControl.NauticalMiles")):z>=1e3?Io(l,g,z/1e3,x._getUIString("ScaleControl.Kilometers")):Io(l,g,z,x._getUIString("ScaleControl.Meters"))}function Io(x,l,d,g){const w=function(E){const P=Math.pow(10,`${Math.floor(E)}`.length-1);let z=E/P;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(B){const V=Math.pow(10,Math.ceil(-Math.log(B)/Math.LN10));return Math.round(B*V)/V}(z),P*z}(d);x.style.width=l*(w/d)+"px",x.innerHTML=`${w}&nbsp;${g}`}const vi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Ti=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Lf(x){if(x){if(typeof x=="number"){const l=Math.round(Math.sqrt(.5*Math.pow(x,2)));return{center:new o.pointGeometry(0,0),top:new o.pointGeometry(0,x),"top-left":new o.pointGeometry(l,l),"top-right":new o.pointGeometry(-l,l),bottom:new o.pointGeometry(0,-x),"bottom-left":new o.pointGeometry(l,-l),"bottom-right":new o.pointGeometry(-l,-l),left:new o.pointGeometry(x,0),right:new o.pointGeometry(-x,0)}}if(x instanceof o.pointGeometry||Array.isArray(x)){const l=o.pointGeometry.convert(x);return{center:l,top:l,"top-left":l,"top-right":l,bottom:l,"bottom-left":l,"bottom-right":l,left:l,right:l}}return{center:o.pointGeometry.convert(x.center||[0,0]),top:o.pointGeometry.convert(x.top||[0,0]),"top-left":o.pointGeometry.convert(x["top-left"]||[0,0]),"top-right":o.pointGeometry.convert(x["top-right"]||[0,0]),bottom:o.pointGeometry.convert(x.bottom||[0,0]),"bottom-left":o.pointGeometry.convert(x["bottom-left"]||[0,0]),"bottom-right":o.pointGeometry.convert(x["bottom-right"]||[0,0]),left:o.pointGeometry.convert(x.left||[0,0]),right:o.pointGeometry.convert(x.right||[0,0])}}return Lf(new o.pointGeometry(0,0))}const ns={supported:f,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends si{constructor(x){var l;if(o.PerformanceUtils.mark(o.PerformanceMarkers.create),(x=o.extend({},km,x)).minZoom!=null&&x.maxZoom!=null&&x.minZoom>x.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(x.minPitch!=null&&x.maxPitch!=null&&x.minPitch>x.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(x.minPitch!=null&&x.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(x.maxPitch!=null&&x.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Kl(x.minZoom,x.maxZoom,x.minPitch,x.maxPitch,x.renderWorldCopies),{bearingSnap:x.bearingSnap}),this._interactive=x.interactive,this._cooperativeGestures=x.cooperativeGestures,this._maxTileCacheSize=x.maxTileCacheSize,this._failIfMajorPerformanceCaveat=x.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=x.preserveDrawingBuffer,this._antialias=x.antialias,this._trackResize=x.trackResize,this._bearingSnap=x.bearingSnap,this._refreshExpiredTiles=x.refreshExpiredTiles,this._fadeDuration=x.fadeDuration,this._crossSourceCollisions=x.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=x.collectResourceTiming,this._renderTaskQueue=new Dm,this._controls=[],this._mapId=o.uniqueId(),this._locale=o.extend({},Lm,x.locale),this._clickTolerance=x.clickTolerance,this._pixelRatio=(l=x.pixelRatio)!==null&&l!==void 0?l:devicePixelRatio,this._requestManager=new S(x.transformRequest),typeof x.container=="string"){if(this._container=document.getElementById(x.container),!this._container)throw new Error(`Container '${x.container}' not found.`)}else{if(!(x.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=x.container}if(x.maxBounds&&this.setMaxBounds(x.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Pm(this,x),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=x.hash&&new ym(typeof x.hash=="string"&&x.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:x.center,zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),x.bounds&&(this.resize(),this.fitBounds(x.bounds,o.extend({},x.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=x.localIdeographFontFamily,x.style&&this.setStyle(x.style,{localIdeographFontFamily:x.localIdeographFontFamily}),x.attributionControl&&this.addControl(new au({customAttribution:x.customAttribution})),x.maplibreLogo&&this.addControl(new Dc,x.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new o.Event(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new o.Event(`${d.dataType}dataloading`,d))}),this.on("dataabort",d=>{this.fire(new o.Event("sourcedataabort",d))})}_getMapId(){return this._mapId}addControl(x,l){if(l===void 0&&(l=x.getDefaultPosition?x.getDefaultPosition():"top-right"),!x||!x.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=x.onAdd(this);this._controls.push(x);const g=this._controlPositions[l];return l.indexOf("bottom")!==-1?g.insertBefore(d,g.firstChild):g.appendChild(d),this}removeControl(x){if(!x||!x.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(x);return l>-1&&this._controls.splice(l,1),x.onRemove(this),this}hasControl(x){return this._controls.indexOf(x)>-1}calculateCameraOptionsFromTo(x,l,d,g){return g==null&&this.style.terrain&&(g=this.transform.getElevation(d,this.style.terrain)),super.calculateCameraOptionsFromTo(x,l,d,g)}resize(x){const l=this._containerDimensions(),d=l[0],g=l[1];this._resizeCanvas(d,g,this.getPixelRatio()),this.transform.resize(d,g),this.painter.resize(d,g,this.getPixelRatio());const w=!this._moving;return w&&(this.stop(),this.fire(new o.Event("movestart",x)).fire(new o.Event("move",x))),this.fire(new o.Event("resize",x)),w&&this.fire(new o.Event("moveend",x)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(x){const[l,d]=this._containerDimensions();this._pixelRatio=x,this._resizeCanvas(l,d,x),this.painter.resize(l,d,x)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(x){return this.transform.setMaxBounds(o.LngLatBounds.convert(x)),this._update()}setMinZoom(x){if((x=x??-2)>=-2&&x<=this.transform.maxZoom)return this.transform.minZoom=x,this._update(),this.getZoom()<x&&this.setZoom(x),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(x){if((x=x??22)>=this.transform.minZoom)return this.transform.maxZoom=x,this._update(),this.getZoom()>x&&this.setZoom(x),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(x){if((x=x??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(x>=0&&x<=this.transform.maxPitch)return this.transform.minPitch=x,this._update(),this.getPitch()<x&&this.setPitch(x),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(x){if((x=x??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(x>=this.transform.minPitch)return this.transform.maxPitch=x,this._update(),this.getPitch()>x&&this.setPitch(x),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(x){return this.transform.renderWorldCopies=x,this._update()}project(x){return this.transform.locationPoint(o.LngLat.convert(x),this.style&&this.style.terrain)}unproject(x){return this.transform.pointLocation(o.pointGeometry.convert(x),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(x,l,d){if(x==="mouseenter"||x==="mouseover"){let g=!1;return{layer:l,listener:d,delegates:{mousemove:E=>{const P=this.getLayer(l)?this.queryRenderedFeatures(E.point,{layers:[l]}):[];P.length?g||(g=!0,d.call(this,new zn(x,this,E.originalEvent,{features:P}))):g=!1},mouseout:()=>{g=!1}}}}if(x==="mouseleave"||x==="mouseout"){let g=!1;return{layer:l,listener:d,delegates:{mousemove:P=>{(this.getLayer(l)?this.queryRenderedFeatures(P.point,{layers:[l]}):[]).length?g=!0:g&&(g=!1,d.call(this,new zn(x,this,P.originalEvent)))},mouseout:P=>{g&&(g=!1,d.call(this,new zn(x,this,P.originalEvent)))}}}}{const g=w=>{const E=this.getLayer(l)?this.queryRenderedFeatures(w.point,{layers:[l]}):[];E.length&&(w.features=E,d.call(this,w),delete w.features)};return{layer:l,listener:d,delegates:{[x]:g}}}}on(x,l,d){if(d===void 0)return super.on(x,l);const g=this._createDelegatedListener(x,l,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[x]=this._delegatedListeners[x]||[],this._delegatedListeners[x].push(g);for(const w in g.delegates)this.on(w,g.delegates[w]);return this}once(x,l,d){if(d===void 0)return super.once(x,l);const g=this._createDelegatedListener(x,l,d);for(const w in g.delegates)this.once(w,g.delegates[w]);return this}off(x,l,d){return d===void 0?super.off(x,l):(this._delegatedListeners&&this._delegatedListeners[x]&&(g=>{const w=this._delegatedListeners[x];for(let E=0;E<w.length;E++){const P=w[E];if(P.layer===l&&P.listener===d){for(const z in P.delegates)this.off(z,P.delegates[z]);return w.splice(E,1),this}}})(),this)}queryRenderedFeatures(x,l){if(!this.style)return[];let d;if(l!==void 0||x===void 0||x instanceof o.pointGeometry||Array.isArray(x)||(l=x,x=void 0),l=l||{},(x=x||[[0,0],[this.transform.width,this.transform.height]])instanceof o.pointGeometry||typeof x[0]=="number")d=[o.pointGeometry.convert(x)];else{const g=o.pointGeometry.convert(x[0]),w=o.pointGeometry.convert(x[1]);d=[g,new o.pointGeometry(w.x,g.y),w,new o.pointGeometry(g.x,w.y),g]}return this.style.queryRenderedFeatures(d,l,this.transform)}querySourceFeatures(x,l){return this.style.querySourceFeatures(x,l)}setStyle(x,l){return(l=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&x?(this._diffStyle(x,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._updateStyle(x,l))}setTransformRequest(x){return this._requestManager.setTransformRequest(x),this}_getUIString(x){const l=this._locale[x];if(l==null)throw new Error(`Missing UI string '${x}'`);return l}_updateStyle(x,l){return this.style&&(this.style.setEventedParent(null),this.style._remove()),x?(this.style=new tn(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof x=="string"?this.style.loadURL(x):this.style.loadJSON(x),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new tn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(x,l){if(typeof x=="string"){const d=this._requestManager.transformRequest(x,o.ResourceType.Style);o.getJSON(d,(g,w)=>{g?this.fire(new o.ErrorEvent(g)):w&&this._updateDiff(w,l)})}else typeof x=="object"&&this._updateDiff(x,l)}_updateDiff(x,l){try{this.style.setState(x)&&this._update(!0)}catch(d){o.warnOnce(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(x,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")}addSource(x,l){return this._lazyInitEmptyStyle(),this.style.addSource(x,l),this._update(!0)}isSourceLoaded(x){const l=this.style&&this.style.sourceCaches[x];if(l!==void 0)return l.loaded();this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${x}'`)))}setTerrain(x){return this.style.setTerrain(x),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const x=this.style&&this.style.sourceCaches;for(const l in x){const d=x[l]._tiles;for(const g in d){const w=d[g];if(w.state!=="loaded"&&w.state!=="errored")return!1}}return!0}addSourceType(x,l,d){return this._lazyInitEmptyStyle(),this.style.addSourceType(x,l,d)}removeSource(x){return this.style.removeSource(x),this._update(!0)}getSource(x){return this.style.getSource(x)}addImage(x,l,{pixelRatio:d=1,sdf:g=!1,stretchX:w,stretchY:E,content:P}={}){if(this._lazyInitEmptyStyle(),l instanceof HTMLImageElement||o.isImageBitmap(l)){const{width:z,height:B,data:V}=o.exported.getImageData(l);this.style.addImage(x,{data:new o.RGBAImage({width:z,height:B},V),pixelRatio:d,stretchX:w,stretchY:E,content:P,sdf:g,version:0})}else{if(l.width===void 0||l.height===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:z,height:B,data:V}=l,G=l;this.style.addImage(x,{data:new o.RGBAImage({width:z,height:B},new Uint8Array(V)),pixelRatio:d,stretchX:w,stretchY:E,content:P,sdf:g,version:0,userImage:G}),G.onAdd&&G.onAdd(this,x)}}}updateImage(x,l){const d=this.style.getImage(x);if(!d)return this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const g=l instanceof HTMLImageElement||o.isImageBitmap(l)?o.exported.getImageData(l):l,{width:w,height:E,data:P}=g;if(w===void 0||E===void 0)return this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(w!==d.data.width||E!==d.data.height)return this.fire(new o.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const z=!(l instanceof HTMLImageElement||o.isImageBitmap(l));d.data.replace(P,z),this.style.updateImage(x,d)}hasImage(x){return x?!!this.style.getImage(x):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(x){this.style.removeImage(x)}loadImage(x,l){o.getImage(this._requestManager.transformRequest(x,o.ResourceType.Image),l)}listImages(){return this.style.listImages()}addLayer(x,l){return this._lazyInitEmptyStyle(),this.style.addLayer(x,l),this._update(!0)}moveLayer(x,l){return this.style.moveLayer(x,l),this._update(!0)}removeLayer(x){return this.style.removeLayer(x),this._update(!0)}getLayer(x){return this.style.getLayer(x)}setLayerZoomRange(x,l,d){return this.style.setLayerZoomRange(x,l,d),this._update(!0)}setFilter(x,l,d={}){return this.style.setFilter(x,l,d),this._update(!0)}getFilter(x){return this.style.getFilter(x)}setPaintProperty(x,l,d,g={}){return this.style.setPaintProperty(x,l,d,g),this._update(!0)}getPaintProperty(x,l){return this.style.getPaintProperty(x,l)}setLayoutProperty(x,l,d,g={}){return this.style.setLayoutProperty(x,l,d,g),this._update(!0)}getLayoutProperty(x,l){return this.style.getLayoutProperty(x,l)}setLight(x,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(x,l),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(x,l){return this.style.setFeatureState(x,l),this._update()}removeFeatureState(x,l){return this.style.removeFeatureState(x,l),this._update()}getFeatureState(x){return this.style.getFeatureState(x)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let x=0,l=0;return this._container&&(x=this._container.clientWidth||400,l=this._container.clientHeight||300),[x,l]}_setupContainer(){const x=this._container;x.classList.add("maplibregl-map","mapboxgl-map");const l=this._canvasContainer=y.create("div","maplibregl-canvas-container mapboxgl-canvas-container",x);this._interactive&&l.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=y.create("canvas","maplibregl-canvas mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const d=this._containerDimensions();this._resizeCanvas(d[0],d[1],this.getPixelRatio());const g=this._controlContainer=y.create("div","maplibregl-control-container mapboxgl-control-container",x),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{w[E]=y.create("div",`maplibregl-ctrl-${E} mapboxgl-ctrl-${E}`,g)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const x=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=y.create("div","maplibregl-cooperative-gesture-screen",x);let l="Control",d=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(d=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",l="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${d}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",g=>{g.key===l&&(this._metaPress=!0)}),document.addEventListener("keyup",g=>{g.key===l&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",g=>{this._onCooperativeGesture(g,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(x,l,d){this._canvas.width=d*x,this._canvas.height=d*l,this._canvas.style.width=`${x}px`,this._canvas.style.height=`${l}px`}_setupPainter(){const x=o.extend({},f.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl",x)||this._canvas.getContext("experimental-webgl",x);l?(this.painter=new bf(l,this.transform),o.exported$1.testSupport(l)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(x){x.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:x}))}_contextRestored(x){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:x}))}_onMapScroll(x){if(x.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(x,l,d){return!l&&d<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(x){return this.style?(this._styleDirty=this._styleDirty||x,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(x){return this._update(),this._renderTaskQueue.add(x)}_cancelRenderFrame(x){this._renderTaskQueue.remove(x)}_render(x){let l,d=0;const g=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(l=g.createQueryEXT(),g.beginQueryEXT(g.TIME_ELAPSED_EXT,l),d=o.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(x),this._removed)return;let w=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const P=this.transform.zoom,z=o.exported.now();this.style.zoomHistory.update(P,z);const B=new o.EvaluationParameters(P,{now:z,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),V=B.crossFadingFactor();V===1&&V===this._crossFadingFactor||(w=!0,this._crossFadingFactor=V),this.style.update(B)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.PerformanceUtils.mark(o.PerformanceMarkers.load),this.fire(new o.Event("load"))),this.style&&(this.style.hasTransitions()||w)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const P=o.exported.now()-d;g.endQueryEXT(g.TIME_ELAPSED_EXT,l),setTimeout(()=>{const z=g.getQueryObjectEXT(l,g.QUERY_RESULT_EXT)/1e6;g.deleteQueryEXT(l),this.fire(new o.Event("gpu-timing-frame",{cpuTime:P,gpuTime:z}))},50)}if(this.listens("gpu-timing-layer")){const P=this.painter.collectGpuTimers();setTimeout(()=>{const z=this.painter.queryGpuTimers(P);this.fire(new o.Event("gpu-timing-layer",{layerTimes:z}))},50)}const E=this._sourcesDirty||this._styleDirty||this._placementDirty;return E||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.Event("idle")),!this._loaded||this._fullyLoaded||E||(this._fullyLoaded=!0,o.PerformanceUtils.mark(o.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const x=this.painter.context.gl.getExtension("WEBGL_lose_context");x&&x.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),y.remove(this._canvasContainer),y.remove(this._controlContainer),this._cooperativeGestures&&y.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),o.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=o.exported.frame(x=>{o.PerformanceUtils.frame(x),this._frame=null,this._render(x)}))}_onWindowOnline(){this._update()}_onWindowResize(x){this._trackResize&&this.resize({originalEvent:x})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(x){this._showTileBoundaries!==x&&(this._showTileBoundaries=x,this._update())}get showPadding(){return!!this._showPadding}set showPadding(x){this._showPadding!==x&&(this._showPadding=x,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(x){this._showCollisionBoxes!==x&&(this._showCollisionBoxes=x,x?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(x){this._showOverdrawInspector!==x&&(this._showOverdrawInspector=x,this._update())}get repaint(){return!!this._repaint}set repaint(x){this._repaint!==x&&(this._repaint=x,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(x){this._vertices=x,this._update()}_setCacheLimits(x,l){o.setCacheLimits(x,l)}get version(){return"2.4.0"}},NavigationControl:class{constructor(x){this.options=o.extend({},Sy,x),this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",l=>this._map.zoomIn({},{originalEvent:l})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",l=>this._map.zoomOut({},{originalEvent:l})),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",l=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:l}):this._map.resetNorth({},{originalEvent:l})}),this._compassIcon=y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const x=this._map.getZoom(),l=x===this._map.getMaxZoom(),d=x===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())}_rotateCompassArrow(){const x=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=x}onAdd(x){return this._map=x,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Aa(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){y.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(x,l){const d=y.create("button",x,this._container);return d.type="button",d.addEventListener("click",l),d}_setButtonTitle(x,l){const d=this._map._getUIString(`NavigationControl.${l}`);x.title=d,x.setAttribute("aria-label",d)}},GeolocateControl:class extends o.Evented{constructor(x){super(),this.options=o.extend({},Df,x),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(x){var l;return this._map=x,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),l=this._setupUI,Ao!==void 0?l(Ao):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(d=>{Ao=d.state!=="denied",l(Ao)}):(Ao=!!window.navigator.geolocation,l(Ao)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),y.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Zi=0,Mo=!1}_isOutOfMapMaxBounds(x){const l=this._map.getMaxBounds(),d=x.coords;return l&&(d.longitude<l.getWest()||d.longitude>l.getEast()||d.latitude<l.getSouth()||d.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(x){if(this._map){if(this._isOutOfMapMaxBounds(x))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",x)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=x,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(x),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(x),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",x)),this._finish()}}_updateCamera(x){const l=new o.LngLat(x.coords.longitude,x.coords.latitude),d=x.coords.accuracy,g=this._map.getBearing(),w=o.extend({bearing:g},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(d),w,{geolocateSource:!0})}_updateMarker(x){if(x){const l=new o.LngLat(x.coords.longitude,x.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=x.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const x=this._map._container.clientHeight/2,l=this._map.unproject([0,x]),d=this._map.unproject([1,x]),g=l.distanceTo(d),w=Math.ceil(2*this._accuracy/g);this._circleElement.style.width=`${w}px`,this._circleElement.style.height=`${w}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(x){if(this._map){if(this.options.trackUserLocation)if(x.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(x.code===3&&Mo)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",x)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(x){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=y.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",x===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Js(this._dotElement),this._circleElement=y.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Js({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Zi--,Mo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let x;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Zi++,Zi>1?(x={maximumAge:6e5,timeout:0},Mo=!0):(x=this.options.positionOptions,Mo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,x)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:au,LogoControl:Dc,ScaleControl:class{constructor(x){this.options=o.extend({},Ma,x),o.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){Rm(this._map,this._container,this.options)}onAdd(x){return this._map=x,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",x.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){y.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(x){this.options.unit=x,Rm(this._map,this._container,this.options)}},FullscreenControl:class{constructor(x){this._fullscreen=!1,x&&x.container&&(x.container instanceof HTMLElement?this._container=x.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(x){return this._map=x,this._container||(this._container=this._map.getContainer()),this._controlContainer=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){y.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const x=this._fullscreenButton=y.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",x).setAttribute("aria-hidden","true"),x.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const x=this._getTitle();this._fullscreenButton.setAttribute("aria-label",x),this._fullscreenButton.title=x}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(x){this.options=x,o.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(x){return this._map=x,this._container=y.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=y.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),y.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){y.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends o.Evented{constructor(x){super(),this.options=o.extend(Object.create(vi),x),o.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&y.remove(this._content),this._container&&(y.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(x){return this._lngLat=o.LngLat.convert(x),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(x){return this.setDOMContent(document.createTextNode(x))}setHTML(x){const l=document.createDocumentFragment(),d=document.createElement("body");let g;for(d.innerHTML=x;g=d.firstChild,g;)l.appendChild(g);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(x){return this.options.maxWidth=x,this._update(),this}setDOMContent(x){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=y.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(x),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(x){this._container&&this._container.classList.add(x)}removeClassName(x){this._container&&this._container.classList.remove(x)}setOffset(x){return this.options.offset=x,this._update(),this}toggleClassName(x){if(this._container)return this._container.classList.toggle(x)}_createCloseButton(){this.options.closeButton&&(this._closeButton=y.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(x){this._update(x.point)}_onMouseMove(x){this._update(x.point)}_onDrag(x){this._update(x.point)}_update(x){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=y.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=y.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(E=>this._container.classList.add(E)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ou(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!x))return;const l=this._pos=this._trackPointer&&x?x:this._map.project(this._lngLat);let d=this.options.anchor;const g=Lf(this.options.offset);if(!d){const E=this._container.offsetWidth,P=this._container.offsetHeight;let z;z=l.y+g.bottom.y<P?["top"]:l.y>this._map.transform.height-P?["bottom"]:[],l.x<E/2?z.push("left"):l.x>this._map.transform.width-E/2&&z.push("right"),d=z.length===0?"bottom":z.join("-")}const w=l.add(g[d]).round();y.setTransform(this._container,`${Dt[d]} translate(${w.x}px,${w.y}px)`),Gt(this._container,d,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const x=this._container.querySelector(Ti);x&&x.focus()}_onClose(){this.remove()}},Marker:Js,Style:tn,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.pointGeometry,MercatorCoordinate:o.MercatorCoordinate,Evented:o.Evented,AJAXError:o.AJAXError,config:o.config,CanvasSource:tr,GeoJSONSource:it,ImageSource:Ct,RasterDEMTileSource:we,RasterTileSource:ye,VectorTileSource:fe,VideoSource:zt,prewarm:function(){We().acquire(se)},clearPrewarmedResources:function(){const x=Ve;x&&(x.isPreloaded()&&x.numActive()===1?(x.release(se),Ve=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return me.workerCount},set workerCount(x){me.workerCount=x},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(x){o.config.MAX_PARALLEL_IMAGE_REQUESTS=x},clearStorage(x){o.clearTileCache(x)},workerUrl:"",addProtocol(x,l){o.config.REGISTERED_PROTOCOLS[x]=l},removeProtocol(x){delete o.config.REGISTERED_PROTOCOLS[x]}};return Jn.extend(ns,{isSafari:o.isSafari,getPerformanceMetrics:o.PerformanceUtils.getPerformanceMetrics}),ns});var u=n;return u})})(nL);var x$=nL.exports;const ul=pw(x$);const b$={name:"MyMap",data:()=>({map_style_url:"https://mirrors.sustech.edu.cn/osm-tile/styles/osm-bright/style.json",map_text_colour:"#000000",bus_location_data_api:[],bus_location_data_display:[],bus_plate_hash:{298:{plate:"BDF298"},363:{plate:"BDF363"},8040:{plate:"BDF040"},8147:{plate:"BDF147"},8267:{plate:"BDF267"},8330:{plate:"BDF330"},8335:{plate:"BDF335"},8338:{plate:"BDF338"},8345:{plate:"BDF345"},8365:{plate:"BDF365"},8371:{plate:"BDF371"},8411:{plate:"BDF411"},8421:{plate:"BDF421"},8430:{plate:"BDF430"},8447:{plate:"BDE447"},8458:{plate:"BDF458"},8470:{plate:"BDF470"},8471:{plate:"BDF471"},18447:{plate:"BDF447"}},geojson_line_1:[[113.99739584160139,22.610765716856296],[113.99770244929088,22.610602750604695],[113.99771094950285,22.61059767778233],[113.99771890653385,22.610591789421974],[113.99772624241524,22.61058514322198],[113.99773288526481,22.610577804306548],[113.99773876999119,22.610569844587616],[113.99824514560808,22.609808813574297],[113.998249208217,22.609802159245984],[113.99825274007058,22.60979520864264],[113.99898879543889,22.60819510708253],[113.99899240486543,22.608186143427105],[113.99899513228698,22.608176873246407],[113.99899695223624,22.60816738310082],[113.9989978477194,22.608157761604655],[113.99899781037489,22.60814809859871],[113.99899684055141,22.608138484311375],[113.99876376465981,22.606584405046835],[113.99876186005746,22.60657488398115],[113.99875904105679,22.60656559250995],[113.9987553342348,22.606556618231554],[113.99875077453878,22.606548045753847],[113.9987454049567,22.606539955896604],[113.99840124581259,22.606072409367975],[113.99839530892635,22.606065092796133],[113.9983887097732,22.60605836746942],[113.99838150693964,22.606052293094507],[113.9983737643716,22.606046923598996],[113.99836555080671,22.606042306652647],[113.99835693916405,22.60603848324417],[113.99834800589677,22.606035487317342],[113.99774294809698,22.605863822610463],[113.99773312637,22.605861563911226],[113.99772312717697,22.605860305268262],[113.99771305207776,22.60586005946536],[113.99770300340316,22.605860828999095],[113.99769308321561,22.605862606053456],[113.9976833922725,22.605865372579256],[113.996462081496,22.60628164325351],[113.99540699384544,22.60655007340282],[113.99537688636465,22.60638436471066],[113.99537457846512,22.606374521317747],[113.99537128843397,22.606364961271755],[113.99536704990152,22.60635578229431],[113.99536190619351,22.606347078211808],[113.99535590988829,22.606338937996323],[113.99534912227939,22.606331444856142],[113.99534161274892,22.60632467538524],[113.99533345805837,22.60631869878032],[113.995324741564,22.606313576133513],[113.99531555236477,22.60630935980789],[113.99491868014185,22.60615102642152],[113.99446803578164,22.605922922486105],[113.993628105381,22.605432281601264],[113.99361436378835,22.60541624974317],[113.99361283376653,22.605399929510398],[113.99403523011212,22.604697356220907],[113.99427914343141,22.604297776694622],[113.99454570612934,22.60407119840138],[113.99455101208882,22.604066349285663],[113.99481121659123,22.60381079129223],[113.99481565952753,22.603806137576637],[113.99515576701069,22.603426136652367],[113.99549648383878,22.60304833084697],[113.99570726599393,22.60298417975627],[113.99623267681147,22.60298349183956],[113.99686127008054,22.603078201644227],[113.99770971150042,22.60339811537432],[113.9977201426685,22.603401409146592],[113.99773087118898,22.603403543871796],[113.99774176868631,22.603404494006192],[113.99787229266123,22.603408704456996],[113.99788215074415,22.603408536156227],[113.9978919443383,22.60340739789566],[113.99790157824009,22.603405300740327],[113.99791095879819,22.603402265076713],[113.9979199948241,22.603398320414538],[113.9979285984785,22.60339350509991],[113.99793668612513,22.60338786594256],[113.99794417914393,22.60338145776082],[113.9980199672584,22.603309880097154],[113.99802683618526,22.603302715227613],[113.99803296099675,22.603294904709315],[113.99803828135273,22.603286525489548],[113.99804274483841,22.603277660118295],[113.9980463074806,22.603268395934986],[113.99804893418107,22.603258824208055],[113.99810024403767,22.60302739683338],[113.99810134953593,22.603021608404344],[113.99816665521513,22.602614977726315],[113.99835030416712,22.60216721735362],[113.99856193554633,22.601842951121434],[113.99880470491176,22.601545730488308],[113.99881031760918,22.601538156502247],[113.99881519216395,22.60153008765145],[113.99881928525701,22.6015215956419],[113.99882256051407,22.601512755940064],[113.99882498882864,22.601503647102295],[113.9988265486209,22.601494350076678],[113.99882722602932,22.60148494748368],[113.9988344317295,22.601194082723367],[113.99895072783376,22.600790214181995],[113.99965135994073,22.60015739690114],[113.9997487439255,22.600094924156195],[113.99975662585287,22.600089311655786],[113.99976392845348,22.6000829636668],[113.99977058335678,22.600075939622243],[113.99977652825628,22.600068305284697],[113.99978170749289,22.600060132130594],[113.99978607257604,22.600051496681044],[113.99978958263767,22.600042479785387],[113.99979220481484,22.60003316586426],[113.99979391455744,22.600023642119194],[113.99979469585801,22.60001399771619],[113.99979454140164,22.600004322950916],[113.9997934526344,22.599994708403305],[113.9997914397499,22.5999852440895],[113.99978852159374,22.599976018619078],[113.99978472548715,22.599967118365456],[113.99978008697113,22.5999586266572],[113.99977464947378,22.599950622997884],[113.99976846390364,22.599943182321713],[113.99976158817306,22.599936374291982],[113.99975408665603,22.59993026264882],[113.99974602958545,22.59992490461245],[113.99973749239562,22.59992035034746],[113.9997285550159,22.599916642493127],[113.99931433242868,22.59976784741106],[113.9988527029684,22.59945117882353],[113.99885252734994,22.599451058627373],[113.99811209682619,22.59894545191823],[113.99660435988763,22.59725046170577],[113.9966030867808,22.597249057512315],[113.99536067582889,22.595904550009735],[113.9953541984203,22.59589815108709],[113.99534716583669,22.59589236785265],[113.99533963638028,22.595887248251184],[113.99460302843119,22.595434010528884],[113.99459456469982,22.595429350779234],[113.99458569078772,22.595425529562213],[113.9945764895311,22.59542258254812],[113.99456704682186,22.595420537246756],[113.99455745080581,22.59541941275059],[113.99454779105987,22.59541921955658],[113.99453815775585,22.59541995946815],[113.99452864081873,22.59542162557837],[113.99451932908723,22.595424202334442],[113.9945103094845,22.595427665682845],[113.99450166620676,22.59543198329392],[113.99449347993728,22.59543711486362],[113.99448582709327,22.59544301248976],[113.99447877911251,22.595449621119172],[113.99447240178651,22.59545687906161],[113.99446675464631,22.595464718565623],[113.99446189040688,22.595473066451],[113.99420385593578,22.595969591352997],[113.99382768199821,22.59595993652297],[113.9938169603822,22.59596023674876],[113.99380633259398,22.59596168357378],[113.99379592089899,22.59596426035329],[113.99378584507669,22.595967937443213],[113.99321594303598,22.596211295714554],[113.99320787618828,22.59621517605677],[113.99320018866534,22.59621976224022],[113.99319294206812,22.596225017515316],[113.9931861944644,22.596230899770962],[113.99265363550316,22.596738860232236],[113.99200633643709,22.59716671060916],[113.99157366427197,22.5971462468509],[113.99090478252046,22.5969456920235],[113.99089489978897,22.59694326928491],[113.99088482201618,22.596941863390235],[113.9908746535454,22.596941488895837],[113.99086449965898,22.596942149679155],[113.99039476525739,22.596996829390125],[113.99038484213679,22.596998494112995],[113.99037513653565,22.597001147588333],[113.99036574671312,22.59700476295245],[113.99035676773141,22.597009303603546],[113.99034829049342,22.59701472357223],[113.99034040082233,22.597020967986946],[113.99033317859293,22.597027973629473],[113.99032669692278,22.59703566957495],[113.99032102143205,22.597043977909916],[113.99031620957922,22.597052814521092],[113.9903123100793,22.597062089946967],[113.99030936241067,22.59707171028347],[113.99020088374516,22.59750194984639],[113.99019873660492,22.597513104722935],[113.99019786842672,22.597524431141103],[113.99019829041364,22.59753578294312],[113.99030139387085,22.59862956838946],[113.99030286538937,22.59863964935582],[113.9903053549666,22.598649528285655],[113.99030883676294,22.59865910264432],[113.99048378356784,22.59907317753902],[113.99048795907763,22.599081866470787],[113.99049295183752,22.59909011297101],[113.99049871544861,22.599097840402962],[113.99050519634824,22.599104976953754],[113.99051233430787,22.599111456301692],[113.99052006299269,22.59911721823263],[113.99075599101839,22.599276010611053],[113.99076619844251,22.59928203412041],[113.99126127611241,22.599535900836155],[113.9917686585336,22.6000105337692],[113.99191211157755,22.60053218120178],[113.99183362959826,22.601016496848214],[113.99144872111891,22.60153952301182],[113.99077751816642,22.602118998056795],[113.99045237812743,22.602377905865616],[113.9904454049912,22.602384007276413],[113.99043902651476,22.60239072790739],[113.9904332974585,22.6023980100607],[113.99025180113084,22.60265210491943],[113.99024623928223,22.60266080939295],[113.99024160504972,22.60267004118088],[113.99023794788148,22.602679701778165],[113.99023530680027,22.60268968810428],[113.99010219314502,22.60332391993846]],geojson_line_2:[[113.9914596783045,22.59960492109923],[113.9918969233072,22.59993661748595],[113.9920105698998,22.6005318195689],[113.9919172423369,22.60102266627295],[113.9917196221943,22.601431625928],[113.9915262747645,22.601612498395962],[113.99204584987558,22.60262745159568],[113.99233952276445,22.60296808489611],[113.99279885728298,22.603280910653833],[113.99298710913483,22.60350336409337],[113.99385306765333,22.603677155592816],[113.99419945106074,22.60426804504929],[113.99386414857948,22.604784676421257],[113.9934784038899,22.60548092977822],[113.995278497141,22.60640224097063],[113.9953277666447,22.60667341560261],[113.9964905851169,22.6063775771138],[113.9977156537446,22.60596002561628],[113.9983207115444,22.60613169032316],[113.9986648706885,22.60659923685179],[113.9988979465801,22.60815331611633],[113.9981618912118,22.60975341767644],[113.9976555155949,22.61051444868976],[113.9973489079054,22.61067741494136]],bldg_geojson:{},gate_geojson:{},stations_geojson:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[113.9902,22.60336]},properties:{name:" COE"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99153,22.599643]},properties:{name:" Research Building"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.990399,22.597132]},properties:{name:" Gate7"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.992403,22.597011]},properties:{name:" Administration Building"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.994898,22.59569]},properties:{name:"1 Gate1"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.99939,22.599893]},properties:{name:"3 Gate3"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.998329,22.601975]},properties:{name:" Guest Houses"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.997811,22.603325]},properties:{name:" Faculty Cafteria"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.995981,22.60293]},properties:{name:" C.Health.Center"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.993824,22.604854]},properties:{name:" Stu. Dormitories"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.995238,22.606518]},properties:{name:" Lychee Hill"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.996732,22.606278]},properties:{name:" Chuang Yuan"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.998372,22.606102]},properties:{name:" Hui Yuan"}},{type:"Feature",geometry:{type:"Point",coordinates:[113.997473,22.610667]},properties:{name:" Joy Highland"}}]},bus_marker_arr:[],map:[],time_difference:0,timer:{}}),async created(){const e=await ba.get("https://bus.sustcra.com/geojson/sustech_bldg.json");this.bldg_geojson=e.data;const t=await ba.get("https://bus.sustcra.com/geojson/sustech_gate.json");this.gate_geojson=t.data,console.log("Fetch geojson of sustech complete")},methods:{async fetch_bus(){const e=await ba.get("https://bus.sustcra.com/api/v2/monitor_osm/");this.bus_location_data_api=e.data;const t=new Date;console.log("bus location data fetched at "+parseInt(t.getTime()/1e3)),typeof this.bus_location_data_api[0].time_mt<"u"&&(this.time_difference=parseInt(t.getTime()/1e3-this.bus_location_data_api[0].time_mt),console.log("The clock drift is "+this.time_difference+" seconds")),this.update_location()},update_location:function(){this.display_data=[],this.bus_marker_arr.forEach(a=>a.remove());let e;for(e=0;e<this.bus_location_data_api.length;e++)if(parseInt(new Date().getTime()/1e3)-this.bus_location_data_api[e].time_mt<300){var t=document.createElement("div");t.className="marker",t.style.backgroundImage="url(https://bus.sustcra.com/img/bus-uphill.png)",t.style.width="28px",t.style.height="28px",t.style.backgroundSize="cover";var r=document.createElement("div");r.className="marker",r.style.backgroundImage="url(https://bus.sustcra.com/img/bus-downhill.png)",r.style.width="28px",r.style.height="28px",r.style.backgroundSize="cover";var i=document.createElement("div");if(i.className="marker",i.style.backgroundImage="url(https://bus.sustcra.com/bus-top-view.png)",i.style.width="35px",i.style.height="35px",i.style.backgroundSize="cover",this.bus_location_data_api[e].route_dir===0)var n=new ul.Marker(t).setLngLat([this.bus_location_data_api[e].lng,this.bus_location_data_api[e].lat]).setPopup(new ul.Popup({offset:20}).setHTML('<p class="car-plate">Plate: <b>'+this.bus_location_data_api[e].id+"</b></p><p>Speed: <b>"+this.bus_location_data_api[e].speed+"km/h</b></p><p>Line: <b>"+this.bus_location_data_api[e].route_code+"</b></p>")).addTo(this.map);else var n=new ul.Marker(r).setLngLat([this.bus_location_data_api[e].lng,this.bus_location_data_api[e].lat]).setPopup(new ul.Popup({offset:20}).setHTML('<p class="car-plate">Plate: <b>'+this.bus_location_data_api[e].id+"</b></p><p>Speed: <b>"+this.bus_location_data_api[e].speed+"km/h</b></p><p>Line: <b>"+this.bus_location_data_api[e].route_code+"</b></p>")).addTo(this.map);this.bus_marker_arr.push(n)}},async refresh(){await this.fetch_bus()}},async mounted(){const e={lng:113.99373,lat:22.60308,zoom:14},t={bus_location_data:this.bus_location_data,geojson_line_1:this.geojson_line_1,geojson_line_2:this.geojson_line_2},r=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches,await r&&(console.log("dark mode enabled."),this.map_text_colour="#FFFFFF",this.map_style_url="https://mirrors.sustech.edu.cn/osm-tile/styles/osm-blue/style.json"),this.map=new ul.Map({container:this.$refs.myMap,style:this.map_style_url,center:[e.lng,e.lat],zoom:e.zoom});var i=new ul.NavigationControl;this.map.addControl(i,"top-left"),this.map.addControl(new ul.FullscreenControl,"top-left"),this.map.addControl(new ul.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),this.map.on("load",()=>{this.map.addSource("line1",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.geojson_line_1}}}),this.map.addSource("line2",{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:t.geojson_line_2}}}),this.map.addLayer({id:"line1",type:"line",source:"line1",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#f7911d","line-width":3}}),this.map.addLayer({id:"line2",type:"line",source:"line2",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#29abe2","line-width":3}}),this.map.loadImage("https://bus.sustcra.com/station_icon.png",(n,a)=>{if(n)throw n;this.map.addImage("bus-station",a),this.map.loadImage("https://bus.sustcra.com/bldg_icon.png",(u,o)=>{this.map.addImage("bldg-icon",o)}),this.map.loadImage("https://bus.sustcra.com/gate_icon.png",(u,o)=>{this.map.addImage("gate-icon",o)}),this.map.addSource("stations",{type:"geojson",data:this.stations_geojson}),this.map.addSource("bldgs",{type:"geojson",data:this.bldg_geojson}),this.map.addSource("gates",{type:"geojson",data:this.gate_geojson}),this.map.addLayer({id:"bus-station",type:"symbol",source:"stations",layout:{"icon-size":.075,"icon-image":"bus-station","text-field":["get","name"],"text-size":10,"text-offset":[0,1.25],"text-anchor":"top"},paint:{"text-color":this.map_text_colour},filter:["==","$type","Point"]}),this.map.addLayer({id:"bldgs",type:"symbol",source:"bldgs",layout:{"icon-size":.02,"icon-image":"bldg-icon","text-field":["get","name"],"text-size":9,"text-offset":[0,.3],"text-anchor":"top"},paint:{"text-color":this.map_text_colour},filter:["==","$type","Point"]}),this.map.addLayer({id:"gates",type:"symbol",source:"gates",layout:{"icon-size":.05,"icon-image":"gate-icon","text-field":["get","name"],"text-size":10,"text-offset":[0,.6],"text-anchor":"top"},paint:{"text-color":this.map_text_colour},filter:["==","$type","Point"]})})}),await this.fetch_bus(),this.timer=setInterval(()=>{this.refresh()},5e3)},async unmounted(){clearInterval(this.timer)}},w$={class:"map-container",ref:"myMap"};function S$(e,t,r,i,n,a){return lt(),Rt(Nr,null,[rr("div",w$,null,512),rr("span",null,"Time drift: "+Vr(e.time_difference)+" sec.",1)],64)}const T$=Ur(b$,[["render",S$],["__scopeId","data-v-ed21b340"],["__file","Realtime-map.vue"]]),E$={name:"weather-span",data:()=>({text:""}),mounted(){this.load_weather()},methods:{load_weather(){ba.get("https://api.sustech.online/weather").then(e=>{this.text=e.data.msg})}}},C$={id:"weather-container"},A$={id:"weather"};function M$(e,t,r,i,n,a){return lt(),Rt("div",C$,[rr("span",A$,Vr(e.text),1)])}const I$=Ur(E$,[["render",M$],["__file","weather-span.vue"]]);var An=63710088e-1,Tw={centimeters:An*100,centimetres:An*100,degrees:An/111325,feet:An*3.28084,inches:An*39.37,kilometers:An/1e3,kilometres:An/1e3,meters:An,metres:An,miles:An/1609.344,millimeters:An*1e3,millimetres:An*1e3,nauticalmiles:An/1852,radians:1,yards:An*1.0936},P$={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/An,yards:1.0936133},Ax={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function Xa(e,t,r){r===void 0&&(r={});var i={type:"Feature"};return(r.id===0||r.id)&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.properties=t||{},i.geometry=e,i}function D$(e,t,r){switch(e){case"Point":return In(t).geometry;case"LineString":return qa(t).geometry;case"Polygon":return Ew(t).geometry;case"MultiPoint":return sL(t).geometry;case"MultiLineString":return oL(t).geometry;case"MultiPolygon":return lL(t).geometry;default:throw new Error(e+" is invalid")}}function In(e,t,r){if(r===void 0&&(r={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Ng(e[0])||!Ng(e[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:e};return Xa(i,t,r)}function L$(e,t,r){return r===void 0&&(r={}),nc(e.map(function(i){return In(i,t)}),r)}function Ew(e,t,r){r===void 0&&(r={});for(var i=0,n=e;i<n.length;i++){var a=n[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var u=0;u<a[a.length-1].length;u++)if(a[a.length-1][u]!==a[0][u])throw new Error("First and last Position are not equivalent.")}var o={type:"Polygon",coordinates:e};return Xa(o,t,r)}function k$(e,t,r){return r===void 0&&(r={}),nc(e.map(function(i){return Ew(i,t)}),r)}function qa(e,t,r){if(r===void 0&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");var i={type:"LineString",coordinates:e};return Xa(i,t,r)}function R$(e,t,r){return r===void 0&&(r={}),nc(e.map(function(i){return qa(i,t)}),r)}function nc(e,t){t===void 0&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function oL(e,t,r){r===void 0&&(r={});var i={type:"MultiLineString",coordinates:e};return Xa(i,t,r)}function sL(e,t,r){r===void 0&&(r={});var i={type:"MultiPoint",coordinates:e};return Xa(i,t,r)}function lL(e,t,r){r===void 0&&(r={});var i={type:"MultiPolygon",coordinates:e};return Xa(i,t,r)}function z$(e,t,r){r===void 0&&(r={});var i={type:"GeometryCollection",geometries:e};return Xa(i,t,r)}function O$(e,t){if(t===void 0&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r}function Cw(e,t){t===void 0&&(t="kilometers");var r=Tw[t];if(!r)throw new Error(t+" units is invalid");return e*r}function L_(e,t){t===void 0&&(t="kilometers");var r=Tw[t];if(!r)throw new Error(t+" units is invalid");return e/r}function B$(e,t){return sp(L_(e,t))}function F$(e){var t=e%360;return t<0&&(t+=360),t}function sp(e){var t=e%(2*Math.PI);return t*180/Math.PI}function ja(e){var t=e%360;return t*Math.PI/180}function N$(e,t,r){if(t===void 0&&(t="kilometers"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return Cw(L_(e,t),r)}function V$(e,t,r){if(t===void 0&&(t="meters"),r===void 0&&(r="kilometers"),!(e>=0))throw new Error("area must be a positive number");var i=Ax[t];if(!i)throw new Error("invalid original units");var n=Ax[r];if(!n)throw new Error("invalid final units");return e/i*n}function Ng(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function Aw(e){return!!e&&e.constructor===Object}function $$(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(e.length!==4&&e.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(t){if(!Ng(t))throw new Error("bbox must only contain numbers")})}function U$(e){if(!e)throw new Error("id is required");if(["string","number"].indexOf(typeof e)===-1)throw new Error("id must be a number or a string")}const G$=Object.freeze(Object.defineProperty({__proto__:null,areaFactors:Ax,bearingToAzimuth:F$,convertArea:V$,convertLength:N$,degreesToRadians:ja,earthRadius:An,factors:Tw,feature:Xa,featureCollection:nc,geometry:D$,geometryCollection:z$,isNumber:Ng,isObject:Aw,lengthToDegrees:B$,lengthToRadians:L_,lineString:qa,lineStrings:R$,multiLineString:oL,multiPoint:sL,multiPolygon:lL,point:In,points:L$,polygon:Ew,polygons:k$,radiansToDegrees:sp,radiansToLength:Cw,round:O$,unitsFactors:P$,validateBBox:$$,validateId:U$},Symbol.toStringTag,{value:"Module"}));function jh(e,t,r){if(e!==null)for(var i,n,a,u,o,f,p,v=0,_=0,y,S=e.type,A=S==="FeatureCollection",L=S==="Feature",I=A?e.features.length:1,M=0;M<I;M++){p=A?e.features[M].geometry:L?e.geometry:e,y=p?p.type==="GeometryCollection":!1,o=y?p.geometries.length:1;for(var D=0;D<o;D++){var O=0,N=0;if(u=y?p.geometries[D]:p,u!==null){f=u.coordinates;var q=u.type;switch(v=r&&(q==="Polygon"||q==="MultiPolygon")?1:0,q){case null:break;case"Point":if(t(f,_,M,O,N)===!1)return!1;_++,O++;break;case"LineString":case"MultiPoint":for(i=0;i<f.length;i++){if(t(f[i],_,M,O,N)===!1)return!1;_++,q==="MultiPoint"&&O++}q==="LineString"&&O++;break;case"Polygon":case"MultiLineString":for(i=0;i<f.length;i++){for(n=0;n<f[i].length-v;n++){if(t(f[i][n],_,M,O,N)===!1)return!1;_++}q==="MultiLineString"&&O++,q==="Polygon"&&N++}q==="Polygon"&&O++;break;case"MultiPolygon":for(i=0;i<f.length;i++){for(N=0,n=0;n<f[i].length;n++){for(a=0;a<f[i][n].length-v;a++){if(t(f[i][n][a],_,M,O,N)===!1)return!1;_++}N++}O++}break;case"GeometryCollection":for(i=0;i<u.geometries.length;i++)if(jh(u.geometries[i],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function H$(e,t,r,i){var n=r;return jh(e,function(a,u,o,f,p){u===0&&r===void 0?n=a:n=t(n,a,u,o,f,p)},i),n}function uL(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&t(e.features[r].properties,r)!==!1;r++);break;case"Feature":t(e.properties,0);break}}function q$(e,t,r){var i=r;return uL(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function lp(e,t){if(e.type==="Feature")t(e,0);else if(e.type==="FeatureCollection")for(var r=0;r<e.features.length&&t(e.features[r],r)!==!1;r++);}function j$(e,t,r){var i=r;return lp(e,function(n,a){a===0&&r===void 0?i=n:i=t(i,n,a)}),i}function W$(e){var t=[];return jh(e,function(r){t.push(r)}),t}function Mw(e,t){var r,i,n,a,u,o,f,p,v,_,y=0,S=e.type==="FeatureCollection",A=e.type==="Feature",L=S?e.features.length:1;for(r=0;r<L;r++){for(o=S?e.features[r].geometry:A?e.geometry:e,p=S?e.features[r].properties:A?e.properties:{},v=S?e.features[r].bbox:A?e.bbox:void 0,_=S?e.features[r].id:A?e.id:void 0,f=o?o.type==="GeometryCollection":!1,u=f?o.geometries.length:1,n=0;n<u;n++){if(a=f?o.geometries[n]:o,a===null){if(t(null,y,p,v,_)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(a,y,p,v,_)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<a.geometries.length;i++)if(t(a.geometries[i],y,p,v,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}y++}}function Z$(e,t,r){var i=r;return Mw(e,function(n,a,u,o,f){a===0&&r===void 0?i=n:i=t(i,n,a,u,o,f)}),i}function Wh(e,t){Mw(e,function(r,i,n,a,u){var o=r===null?null:r.type;switch(o){case null:case"Point":case"LineString":case"Polygon":return t(Xa(r,n,{bbox:a,id:u}),i,0)===!1?!1:void 0}var f;switch(o){case"MultiPoint":f="Point";break;case"MultiLineString":f="LineString";break;case"MultiPolygon":f="Polygon";break}for(var p=0;p<r.coordinates.length;p++){var v=r.coordinates[p],_={type:f,coordinates:v};if(t(Xa(_,n),i,p)===!1)return!1}})}function X$(e,t,r){var i=r;return Wh(e,function(n,a,u){a===0&&u===0&&r===void 0?i=n:i=t(i,n,a,u)}),i}function cL(e,t){Wh(e,function(r,i,n){var a=0;if(r.geometry){var u=r.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var o,f=0,p=0,v=0;if(jh(r,function(_,y,S,A,L){if(o===void 0||i>f||A>p||L>v){o=_,f=i,p=A,v=L,a=0;return}var I=qa([o,_],r.properties);if(t(I,i,n,L,a)===!1)return!1;a++,o=_})===!1)return!1}}})}function hL(e,t,r){var i=r,n=!1;return cL(e,function(a,u,o,f,p){n===!1&&r===void 0?i=a:i=t(i,a,u,o,f,p),n=!0}),i}function fL(e,t){if(!e)throw new Error("geojson is required");Wh(e,function(r,i,n){if(r.geometry!==null){var a=r.geometry.type,u=r.geometry.coordinates;switch(a){case"LineString":if(t(r,i,n,0,0)===!1)return!1;break;case"Polygon":for(var o=0;o<u.length;o++)if(t(qa(u[o],r.properties),i,n,o)===!1)return!1;break}}})}function Y$(e,t,r){var i=r;return fL(e,function(n,a,u,o){a===0&&r===void 0?i=n:i=t(i,n,a,u,o)}),i}function K$(e,t){if(t=t||{},!Aw(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.segmentIndex||0,u=t.properties,o;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),u=u||e.features[r].properties,o=e.features[r].geometry;break;case"Feature":u=u||e.properties,o=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=e;break;default:throw new Error("geojson is invalid")}if(o===null)return null;var f=o.coordinates;switch(o.type){case"Point":case"MultiPoint":return null;case"LineString":return a<0&&(a=f.length+a-1),qa([f[a],f[a+1]],u,t);case"Polygon":return n<0&&(n=f.length+n),a<0&&(a=f[n].length+a-1),qa([f[n][a],f[n][a+1]],u,t);case"MultiLineString":return i<0&&(i=f.length+i),a<0&&(a=f[i].length+a-1),qa([f[i][a],f[i][a+1]],u,t);case"MultiPolygon":return i<0&&(i=f.length+i),n<0&&(n=f[i].length+n),a<0&&(a=f[i][n].length-a-1),qa([f[i][n][a],f[i][n][a+1]],u,t)}throw new Error("geojson is invalid")}function J$(e,t){if(t=t||{},!Aw(t))throw new Error("options is invalid");var r=t.featureIndex||0,i=t.multiFeatureIndex||0,n=t.geometryIndex||0,a=t.coordIndex||0,u=t.properties,o;switch(e.type){case"FeatureCollection":r<0&&(r=e.features.length+r),u=u||e.features[r].properties,o=e.features[r].geometry;break;case"Feature":u=u||e.properties,o=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":o=e;break;default:throw new Error("geojson is invalid")}if(o===null)return null;var f=o.coordinates;switch(o.type){case"Point":return In(f,u,t);case"MultiPoint":return i<0&&(i=f.length+i),In(f[i],u,t);case"LineString":return a<0&&(a=f.length+a),In(f[a],u,t);case"Polygon":return n<0&&(n=f.length+n),a<0&&(a=f[n].length+a),In(f[n][a],u,t);case"MultiLineString":return i<0&&(i=f.length+i),a<0&&(a=f[i].length+a),In(f[i][a],u,t);case"MultiPolygon":return i<0&&(i=f.length+i),n<0&&(n=f[i].length+n),a<0&&(a=f[i][n].length-a),In(f[i][n][a],u,t)}throw new Error("geojson is invalid")}const Q$=Object.freeze(Object.defineProperty({__proto__:null,coordAll:W$,coordEach:jh,coordReduce:H$,featureEach:lp,featureReduce:j$,findPoint:J$,findSegment:K$,flattenEach:Wh,flattenReduce:X$,geomEach:Mw,geomReduce:Z$,lineEach:fL,lineReduce:Y$,propEach:uL,propReduce:q$,segmentEach:cL,segmentReduce:hL},Symbol.toStringTag,{value:"Module"}));function Mx(e){var t=[1/0,1/0,-1/0,-1/0];return jh(e,function(r){t[0]>r[0]&&(t[0]=r[0]),t[1]>r[1]&&(t[1]=r[1]),t[2]<r[0]&&(t[2]=r[0]),t[3]<r[1]&&(t[3]=r[1])}),t}Mx.default=Mx;const eU=Object.freeze(Object.defineProperty({__proto__:null,default:Mx},Symbol.toStringTag,{value:"Module"}));function up(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Rh(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function qu(e,t,r){r===void 0&&(r={});var i=up(e),n=up(t),a=ja(n[1]-i[1]),u=ja(n[0]-i[0]),o=ja(i[1]),f=ja(n[1]),p=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(u/2),2)*Math.cos(o)*Math.cos(f);return Cw(2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)),r.units)}function tU(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return dL(e);case"FeatureCollection":return rU(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return Iw(e);default:throw new Error("unknown GeoJSON type")}}function dL(e){var t={type:"Feature"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:t[r]=e[r]}}),t.properties=pL(e.properties),t.geometry=Iw(e.geometry),t}function pL(e){var t={};return e&&Object.keys(e).forEach(function(r){var i=e[r];typeof i=="object"?i===null?t[r]=null:Array.isArray(i)?t[r]=i.map(function(n){return n}):t[r]=pL(i):t[r]=i}),t}function rU(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"features":return;default:t[r]=e[r]}}),t.features=e.features.map(function(r){return dL(r)}),t}function Iw(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),e.type==="GeometryCollection"?(t.geometries=e.geometries.map(function(r){return Iw(r)}),t):(t.coordinates=mL(e.coordinates),t)}function mL(e){var t=e;return typeof t[0]!="object"?t.slice():t.map(function(r){return mL(r)})}function aC(e,t,r,i){i===void 0&&(i={});var n=up(e),a=ja(n[0]),u=ja(n[1]),o=ja(r),f=L_(t,i.units),p=Math.asin(Math.sin(u)*Math.cos(f)+Math.cos(u)*Math.sin(f)*Math.cos(o)),v=a+Math.atan2(Math.sin(o)*Math.sin(f)*Math.cos(u),Math.cos(f)-Math.sin(u)*Math.sin(p)),_=sp(v),y=sp(p);return In([_,y],i.properties)}function vL(e,t,r){if(r===void 0&&(r={}),r.final===!0)return iU(e,t);var i=up(e),n=up(t),a=ja(i[0]),u=ja(n[0]),o=ja(i[1]),f=ja(n[1]),p=Math.sin(u-a)*Math.cos(f),v=Math.cos(o)*Math.sin(f)-Math.sin(o)*Math.cos(f)*Math.cos(u-a);return sp(Math.atan2(p,v))}function iU(e,t){var r=vL(t,e);return r=(r+180)%360,r}function oC(e,t){if(!e)throw new Error("targetPoint is required");if(!t)throw new Error("points is required");var r,i=1/0,n=0;return lp(t,function(a,u){var o=qu(e,a);o<i&&(n=u,i=o)}),r=tU(t.features[n]),r.properties.featureIndex=n,r.properties.distanceToPoint=i,r}function sC(e){if(!e)throw new Error("geojson is required");var t=[];return Wh(e,function(r){nU(r,t)}),nc(t)}function nU(e,t){var r=[],i=e.geometry;if(i!==null){switch(i.type){case"Polygon":r=Rh(i);break;case"LineString":r=[Rh(i)]}r.forEach(function(n){var a=aU(n,e.properties);a.forEach(function(u){u.id=t.length,t.push(u)})})}}function aU(e,t){var r=[];return e.reduce(function(i,n){var a=qa([i,n],t);return a.bbox=oU(i,n),r.push(a),n}),r}function oU(e,t){var r=e[0],i=e[1],n=t[0],a=t[1],u=r<n?r:n,o=i<a?i:a,f=r>n?r:n,p=i>a?i:a;return[u,o,f,p]}var Pw={exports:{}},gL={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(VD,function(){function r(D,O,N,q,Z){(function Q(j,ie,ae,he,ue){for(;he>ae;){if(he-ae>600){var fe=he-ae+1,ye=ie-ae+1,He=Math.log(fe),we=.5*Math.exp(2*He/3),it=.5*Math.sqrt(He*we*(fe-we)/fe)*(ye-fe/2<0?-1:1),et=Math.max(ae,Math.floor(ie-ye*we/fe+it)),Ct=Math.min(he,Math.floor(ie+(fe-ye)*we/fe+it));Q(j,ie,et,Ct,ue)}var zt=j[ie],tr=ae,$t=he;for(i(j,ae,ie),ue(j[he],zt)>0&&i(j,ae,he);tr<$t;){for(i(j,tr,$t),tr++,$t--;ue(j[tr],zt)<0;)tr++;for(;ue(j[$t],zt)>0;)$t--}ue(j[ae],zt)===0?i(j,ae,$t):i(j,++$t,he),$t<=ie&&(ae=$t+1),ie<=$t&&(he=$t-1)}})(D,O,N||0,q||D.length-1,Z||n)}function i(D,O,N){var q=D[O];D[O]=D[N],D[N]=q}function n(D,O){return D<O?-1:D>O?1:0}var a=function(D){D===void 0&&(D=9),this._maxEntries=Math.max(4,D),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function u(D,O,N){if(!N)return O.indexOf(D);for(var q=0;q<O.length;q++)if(N(D,O[q]))return q;return-1}function o(D,O){f(D,0,D.children.length,O,D)}function f(D,O,N,q,Z){Z||(Z=I(null)),Z.minX=1/0,Z.minY=1/0,Z.maxX=-1/0,Z.maxY=-1/0;for(var Q=O;Q<N;Q++){var j=D.children[Q];p(Z,D.leaf?q(j):j)}return Z}function p(D,O){return D.minX=Math.min(D.minX,O.minX),D.minY=Math.min(D.minY,O.minY),D.maxX=Math.max(D.maxX,O.maxX),D.maxY=Math.max(D.maxY,O.maxY),D}function v(D,O){return D.minX-O.minX}function _(D,O){return D.minY-O.minY}function y(D){return(D.maxX-D.minX)*(D.maxY-D.minY)}function S(D){return D.maxX-D.minX+(D.maxY-D.minY)}function A(D,O){return D.minX<=O.minX&&D.minY<=O.minY&&O.maxX<=D.maxX&&O.maxY<=D.maxY}function L(D,O){return O.minX<=D.maxX&&O.minY<=D.maxY&&O.maxX>=D.minX&&O.maxY>=D.minY}function I(D){return{children:D,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function M(D,O,N,q,Z){for(var Q=[O,N];Q.length;)if(!((N=Q.pop())-(O=Q.pop())<=q)){var j=O+Math.ceil((N-O)/q/2)*q;r(D,j,O,N,Z),Q.push(O,j,j,N)}}return a.prototype.all=function(){return this._all(this.data,[])},a.prototype.search=function(D){var O=this.data,N=[];if(!L(D,O))return N;for(var q=this.toBBox,Z=[];O;){for(var Q=0;Q<O.children.length;Q++){var j=O.children[Q],ie=O.leaf?q(j):j;L(D,ie)&&(O.leaf?N.push(j):A(D,ie)?this._all(j,N):Z.push(j))}O=Z.pop()}return N},a.prototype.collides=function(D){var O=this.data;if(!L(D,O))return!1;for(var N=[];O;){for(var q=0;q<O.children.length;q++){var Z=O.children[q],Q=O.leaf?this.toBBox(Z):Z;if(L(D,Q)){if(O.leaf||A(D,Q))return!0;N.push(Z)}}O=N.pop()}return!1},a.prototype.load=function(D){if(!D||!D.length)return this;if(D.length<this._minEntries){for(var O=0;O<D.length;O++)this.insert(D[O]);return this}var N=this._build(D.slice(),0,D.length-1,0);if(this.data.children.length)if(this.data.height===N.height)this._splitRoot(this.data,N);else{if(this.data.height<N.height){var q=this.data;this.data=N,N=q}this._insert(N,this.data.height-N.height-1,!0)}else this.data=N;return this},a.prototype.insert=function(D){return D&&this._insert(D,this.data.height-1),this},a.prototype.clear=function(){return this.data=I([]),this},a.prototype.remove=function(D,O){if(!D)return this;for(var N,q,Z,Q=this.data,j=this.toBBox(D),ie=[],ae=[];Q||ie.length;){if(Q||(Q=ie.pop(),q=ie[ie.length-1],N=ae.pop(),Z=!0),Q.leaf){var he=u(D,Q.children,O);if(he!==-1)return Q.children.splice(he,1),ie.push(Q),this._condense(ie),this}Z||Q.leaf||!A(Q,j)?q?(N++,Q=q.children[N],Z=!1):Q=null:(ie.push(Q),ae.push(N),N=0,q=Q,Q=Q.children[0])}return this},a.prototype.toBBox=function(D){return D},a.prototype.compareMinX=function(D,O){return D.minX-O.minX},a.prototype.compareMinY=function(D,O){return D.minY-O.minY},a.prototype.toJSON=function(){return this.data},a.prototype.fromJSON=function(D){return this.data=D,this},a.prototype._all=function(D,O){for(var N=[];D;)D.leaf?O.push.apply(O,D.children):N.push.apply(N,D.children),D=N.pop();return O},a.prototype._build=function(D,O,N,q){var Z,Q=N-O+1,j=this._maxEntries;if(Q<=j)return o(Z=I(D.slice(O,N+1)),this.toBBox),Z;q||(q=Math.ceil(Math.log(Q)/Math.log(j)),j=Math.ceil(Q/Math.pow(j,q-1))),(Z=I([])).leaf=!1,Z.height=q;var ie=Math.ceil(Q/j),ae=ie*Math.ceil(Math.sqrt(j));M(D,O,N,ae,this.compareMinX);for(var he=O;he<=N;he+=ae){var ue=Math.min(he+ae-1,N);M(D,he,ue,ie,this.compareMinY);for(var fe=he;fe<=ue;fe+=ie){var ye=Math.min(fe+ie-1,ue);Z.children.push(this._build(D,fe,ye,q-1))}}return o(Z,this.toBBox),Z},a.prototype._chooseSubtree=function(D,O,N,q){for(;q.push(O),!O.leaf&&q.length-1!==N;){for(var Z=1/0,Q=1/0,j=void 0,ie=0;ie<O.children.length;ie++){var ae=O.children[ie],he=y(ae),ue=(fe=D,ye=ae,(Math.max(ye.maxX,fe.maxX)-Math.min(ye.minX,fe.minX))*(Math.max(ye.maxY,fe.maxY)-Math.min(ye.minY,fe.minY))-he);ue<Q?(Q=ue,Z=he<Z?he:Z,j=ae):ue===Q&&he<Z&&(Z=he,j=ae)}O=j||O.children[0]}var fe,ye;return O},a.prototype._insert=function(D,O,N){var q=N?D:this.toBBox(D),Z=[],Q=this._chooseSubtree(q,this.data,O,Z);for(Q.children.push(D),p(Q,q);O>=0&&Z[O].children.length>this._maxEntries;)this._split(Z,O),O--;this._adjustParentBBoxes(q,Z,O)},a.prototype._split=function(D,O){var N=D[O],q=N.children.length,Z=this._minEntries;this._chooseSplitAxis(N,Z,q);var Q=this._chooseSplitIndex(N,Z,q),j=I(N.children.splice(Q,N.children.length-Q));j.height=N.height,j.leaf=N.leaf,o(N,this.toBBox),o(j,this.toBBox),O?D[O-1].children.push(j):this._splitRoot(N,j)},a.prototype._splitRoot=function(D,O){this.data=I([D,O]),this.data.height=D.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},a.prototype._chooseSplitIndex=function(D,O,N){for(var q,Z,Q,j,ie,ae,he,ue=1/0,fe=1/0,ye=O;ye<=N-O;ye++){var He=f(D,0,ye,this.toBBox),we=f(D,ye,N,this.toBBox),it=(Z=He,Q=we,j=void 0,ie=void 0,ae=void 0,he=void 0,j=Math.max(Z.minX,Q.minX),ie=Math.max(Z.minY,Q.minY),ae=Math.min(Z.maxX,Q.maxX),he=Math.min(Z.maxY,Q.maxY),Math.max(0,ae-j)*Math.max(0,he-ie)),et=y(He)+y(we);it<ue?(ue=it,q=ye,fe=et<fe?et:fe):it===ue&&et<fe&&(fe=et,q=ye)}return q||N-O},a.prototype._chooseSplitAxis=function(D,O,N){var q=D.leaf?this.compareMinX:v,Z=D.leaf?this.compareMinY:_;this._allDistMargin(D,O,N,q)<this._allDistMargin(D,O,N,Z)&&D.children.sort(q)},a.prototype._allDistMargin=function(D,O,N,q){D.children.sort(q);for(var Z=this.toBBox,Q=f(D,0,O,Z),j=f(D,N-O,N,Z),ie=S(Q)+S(j),ae=O;ae<N-O;ae++){var he=D.children[ae];p(Q,D.leaf?Z(he):he),ie+=S(Q)}for(var ue=N-O-1;ue>=O;ue--){var fe=D.children[ue];p(j,D.leaf?Z(fe):fe),ie+=S(j)}return ie},a.prototype._adjustParentBBoxes=function(D,O,N){for(var q=N;q>=0;q--)p(O[q],D)},a.prototype._condense=function(D){for(var O=D.length-1,N=void 0;O>=0;O--)D[O].children.length===0?O>0?(N=D[O-1].children).splice(N.indexOf(D[O]),1):this.clear():o(D[O],this.toBBox)},a})})(gL);var sU=gL.exports;const lU=mw(G$),uU=mw(Q$),cU=mw(eU);var ko=sU,_L=lU,yL=uU,Wc=cU.default,hU=yL.featureEach;yL.coordEach;_L.polygon;var lC=_L.featureCollection;function xL(e){var t=new ko(e);return t.insert=function(r){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:Wc(r),ko.prototype.insert.call(this,r)},t.load=function(r){var i=[];return Array.isArray(r)?r.forEach(function(n){if(n.type!=="Feature")throw new Error("invalid features");n.bbox=n.bbox?n.bbox:Wc(n),i.push(n)}):hU(r,function(n){if(n.type!=="Feature")throw new Error("invalid features");n.bbox=n.bbox?n.bbox:Wc(n),i.push(n)}),ko.prototype.load.call(this,i)},t.remove=function(r,i){if(r.type!=="Feature")throw new Error("invalid feature");return r.bbox=r.bbox?r.bbox:Wc(r),ko.prototype.remove.call(this,r,i)},t.clear=function(){return ko.prototype.clear.call(this)},t.search=function(r){var i=ko.prototype.search.call(this,this.toBBox(r));return lC(i)},t.collides=function(r){return ko.prototype.collides.call(this,this.toBBox(r))},t.all=function(){var r=ko.prototype.all.call(this);return lC(r)},t.toJSON=function(){return ko.prototype.toJSON.call(this)},t.fromJSON=function(r){return ko.prototype.fromJSON.call(this,r)},t.toBBox=function(r){var i;if(r.bbox)i=r.bbox;else if(Array.isArray(r)&&r.length===4)i=r;else if(Array.isArray(r)&&r.length===6)i=[r[0],r[1],r[3],r[4]];else if(r.type==="Feature")i=Wc(r);else if(r.type==="FeatureCollection")i=Wc(r);else throw new Error("invalid geojson");return{minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}},t}Pw.exports=xL;Pw.exports.default=xL;var fU=Pw.exports;const dU=pw(fU);function pU(e,t){var r={},i=[];if(e.type==="LineString"&&(e=Xa(e)),t.type==="LineString"&&(t=Xa(t)),e.type==="Feature"&&t.type==="Feature"&&e.geometry!==null&&t.geometry!==null&&e.geometry.type==="LineString"&&t.geometry.type==="LineString"&&e.geometry.coordinates.length===2&&t.geometry.coordinates.length===2){var n=uC(e,t);return n&&i.push(n),nc(i)}var a=dU();return a.load(sC(t)),lp(sC(e),function(u){lp(a.search(u),function(o){var f=uC(u,o);if(f){var p=Rh(f).join(",");r[p]||(r[p]=!0,i.push(f))}})}),nc(i)}function uC(e,t){var r=Rh(e),i=Rh(t);if(r.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(i.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var n=r[0][0],a=r[0][1],u=r[1][0],o=r[1][1],f=i[0][0],p=i[0][1],v=i[1][0],_=i[1][1],y=(_-p)*(u-n)-(v-f)*(o-a),S=(v-f)*(a-p)-(_-p)*(n-f),A=(u-n)*(a-p)-(o-a)*(n-f);if(y===0)return null;var L=S/y,I=A/y;if(L>=0&&L<=1&&I>=0&&I<=1){var M=n+L*(u-n),D=a+L*(o-a);return In([M,D])}return null}function ms(e,t,r){r===void 0&&(r={});var i=In([1/0,1/0],{dist:1/0}),n=0;return Wh(e,function(a){for(var u=Rh(a),o=0;o<u.length-1;o++){var f=In(u[o]);f.properties.dist=qu(t,f,r);var p=In(u[o+1]);p.properties.dist=qu(t,p,r);var v=qu(f,p,r),_=Math.max(f.properties.dist,p.properties.dist),y=vL(f,p),S=aC(t,_,y+90,r),A=aC(t,_,y-90,r),L=pU(qa([S.geometry.coordinates,A.geometry.coordinates]),qa([f.geometry.coordinates,p.geometry.coordinates])),I=null;L.features.length>0&&(I=L.features[0],I.properties.dist=qu(t,I,r),I.properties.location=n+qu(f,I,r)),f.properties.dist<i.properties.dist&&(i=f,i.properties.index=o,i.properties.location=n),p.properties.dist<i.properties.dist&&(i=p,i.properties.index=o+1,i.properties.location=n+v),I&&I.properties.dist<i.properties.dist&&(i=I,i.properties.index=o),n+=v}}),i}function vs(e,t){return t===void 0&&(t={}),hL(e,function(r,i){var n=i.geometry.coordinates;return r+qu(n[0],n[1],t)},0)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ix=function(e,t){return Ix=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},Ix(e,t)};function It(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Ix(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var mU=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),vU=function(){function e(){this.browser=new mU,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),Vu=new vU;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Vu.wxa=!0,Vu.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Vu.worker=!0:typeof navigator>"u"?(Vu.node=!0,Vu.svgSupported=!0):gU(navigator.userAgent,Vu);function gU(e,t){var r=t.browser,i=e.match(/Firefox\/([\d.]+)/),n=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),a=e.match(/Edge?\/([\d.]+)/),u=/micromessenger/i.test(e);i&&(r.firefox=!0,r.version=i[1]),n&&(r.ie=!0,r.version=n[1]),a&&(r.edge=!0,r.version=a[1],r.newEdge=+a[1].split(".")[0]>18),u&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var o=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in o||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in o)&&!("OTransition"in o),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const xr=Vu;var Dw=12,bL="sans-serif",Rl=Dw+"px "+bL,_U=20,yU=100,xU="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function bU(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var i=String.fromCharCode(r+32),n=(e.charCodeAt(r)-_U)/yU;t[i]=n}return t}var wU=bU(xU),$p={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,i){if(!e){var n=$p.createCanvas();e=n&&n.getContext("2d")}if(e)return t!==i&&(t=e.font=i||Rl),e.measureText(r);r=r||"",i=i||Rl;var a=/(\d+)px/.exec(i),u=a&&+a[1]||Dw,o=0;if(i.indexOf("mono")>=0)o=u*r.length;else for(var f=0;f<r.length;f++){var p=wU[r[f]];o+=p==null?u:p*u}return{width:o}}}(),loadImage:function(e,t,r){var i=new Image;return i.onload=t,i.onerror=r,i.src=e,i}},wL=Zh(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),SL=Zh(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),Up=Object.prototype.toString,k_=Array.prototype,SU=k_.forEach,TU=k_.filter,Lw=k_.slice,EU=k_.map,cC=function(){}.constructor,vv=cC?cC.prototype:null,kw="__proto__",CU=2311;function TL(){return CU++}function EL(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function Dr(e){if(e==null||typeof e!="object")return e;var t=e,r=Up.call(e);if(r==="[object Array]"){if(!Nd(e)){t=[];for(var i=0,n=e.length;i<n;i++)t[i]=Dr(e[i])}}else if(SL[r]){if(!Nd(e)){var a=e.constructor;if(a.from)t=a.from(e);else{t=new a(e.length);for(var i=0,n=e.length;i<n;i++)t[i]=e[i]}}}else if(!wL[r]&&!Nd(e)&&!Vg(e)){t={};for(var u in e)e.hasOwnProperty(u)&&u!==kw&&(t[u]=Dr(e[u]))}return t}function xi(e,t,r){if(!Kt(t)||!Kt(e))return r?Dr(t):e;for(var i in t)if(t.hasOwnProperty(i)&&i!==kw){var n=e[i],a=t[i];Kt(a)&&Kt(n)&&!Ft(a)&&!Ft(n)&&!Vg(a)&&!Vg(n)&&!hC(a)&&!hC(n)&&!Nd(a)&&!Nd(n)?xi(n,a,r):(r||!(i in e))&&(e[i]=Dr(t[i]))}return e}function AU(e,t){for(var r=e[0],i=1,n=e.length;i<n;i++)r=xi(r,e[i],t);return r}function xt(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==kw&&(e[r]=t[r]);return e}function pi(e,t,r){for(var i=$r(t),n=0;n<i.length;n++){var a=i[n];(r?t[a]!=null:e[a]==null)&&(e[a]=t[a])}return e}function ri(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r}return-1}function MU(e,t){var r=e.prototype;function i(){}i.prototype=t.prototype,e.prototype=new i;for(var n in r)r.hasOwnProperty(n)&&(e.prototype[n]=r[n]);e.prototype.constructor=e,e.superClass=t}function bo(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(t),n=0;n<i.length;n++){var a=i[n];a!=="constructor"&&(r?t[a]!=null:e[a]==null)&&(e[a]=t[a])}else pi(e,t,r)}function ca(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function Ee(e,t,r){if(e&&t)if(e.forEach&&e.forEach===SU)e.forEach(t,r);else if(e.length===+e.length)for(var i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(r,e[a],a,e)}function Zt(e,t,r){if(!e)return[];if(!t)return zw(e);if(e.map&&e.map===EU)return e.map(t,r);for(var i=[],n=0,a=e.length;n<a;n++)i.push(t.call(r,e[n],n,e));return i}function Zh(e,t,r,i){if(e&&t){for(var n=0,a=e.length;n<a;n++)r=t.call(i,r,e[n],n,e);return r}}function Pn(e,t,r){if(!e)return[];if(!t)return zw(e);if(e.filter&&e.filter===TU)return e.filter(t,r);for(var i=[],n=0,a=e.length;n<a;n++)t.call(r,e[n],n,e)&&i.push(e[n]);return i}function $r(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function IU(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return function(){return e.apply(t,r.concat(Lw.call(arguments)))}}var Ai=vv&&lr(vv.bind)?vv.call.bind(vv.bind):IU;function ln(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(Lw.call(arguments)))}}function Ft(e){return Array.isArray?Array.isArray(e):Up.call(e)==="[object Array]"}function lr(e){return typeof e=="function"}function Wt(e){return typeof e=="string"}function Px(e){return Up.call(e)==="[object String]"}function Mi(e){return typeof e=="number"}function Kt(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function hC(e){return!!wL[Up.call(e)]}function Ea(e){return!!SL[Up.call(e)]}function Vg(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function Rw(e){return e.colorStops!=null}function $g(e){return e!==e}function zh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,i=e.length;r<i;r++)if(e[r]!=null)return e[r]}function br(e,t){return e??t}function lg(e,t,r){return e??t??r}function zw(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Lw.apply(e,t)}function CL(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function _o(e,t){if(!e)throw new Error(t)}function Go(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var AL="__ec_primitive__";function Dx(e){e[AL]=!0}function Nd(e){return e[AL]}var PU=function(){function e(){this.data={}}return e.prototype.delete=function(t){var r=this.has(t);return r&&delete this.data[t],r},e.prototype.has=function(t){return this.data.hasOwnProperty(t)},e.prototype.get=function(t){return this.data[t]},e.prototype.set=function(t,r){return this.data[t]=r,this},e.prototype.keys=function(){return $r(this.data)},e.prototype.forEach=function(t){var r=this.data;for(var i in r)r.hasOwnProperty(i)&&t(r[i],i)},e}(),ML=typeof Map=="function";function DU(){return ML?new Map:new PU}var LU=function(){function e(t){var r=Ft(t);this.data=DU();var i=this;t instanceof e?t.each(n):t&&Ee(t,n);function n(a,u){r?i.set(a,u):i.set(u,a)}}return e.prototype.hasKey=function(t){return this.data.has(t)},e.prototype.get=function(t){return this.data.get(t)},e.prototype.set=function(t,r){return this.data.set(t,r),r},e.prototype.each=function(t,r){this.data.forEach(function(i,n){t.call(r,i,n)})},e.prototype.keys=function(){var t=this.data.keys();return ML?Array.from(t):t},e.prototype.removeKey=function(t){this.data.delete(t)},e}();function wr(e){return new LU(e)}function Lx(e,t){for(var r=new e.constructor(e.length+t.length),i=0;i<e.length;i++)r[i]=e[i];for(var n=e.length,i=0;i<t.length;i++)r[i+n]=t[i];return r}function R_(e,t){var r;if(Object.create)r=Object.create(e);else{var i=function(){};i.prototype=e,r=new i}return t&&xt(r,t),r}function Oh(e,t){return e.hasOwnProperty(t)}function Zn(){}var ug=180/Math.PI;function Xh(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function kU(e){return[e[0],e[1]]}function fC(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function IL(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function RU(e){return Math.sqrt(zU(e))}function zU(e){return e[0]*e[0]+e[1]*e[1]}function F0(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function Ow(e,t){var r=RU(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function kx(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var hh=kx;function OU(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var xh=OU;function Za(e,t,r){var i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function fh(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function dh(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var Zc=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),BU=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Zc(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var i=t.offsetX,n=t.offsetY,a=i-this._x,u=n-this._y;this._x=i,this._y=n,r.drift(a,u,t),this.handler.dispatchToElement(new Zc(r,t),"drag",t.event);var o=this.handler.findHover(i,n,r).target,f=this._dropTarget;this._dropTarget=o,r!==o&&(f&&o!==f&&this.handler.dispatchToElement(new Zc(f,t),"dragleave",t.event),o&&o!==f&&this.handler.dispatchToElement(new Zc(o,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Zc(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Zc(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const FU=BU;var NU=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,i,n){this._$handlers||(this._$handlers={});var a=this._$handlers;if(typeof r=="function"&&(n=i,i=r,r=null),!i||!t)return this;var u=this._$eventProcessor;r!=null&&u&&u.normalizeQuery&&(r=u.normalizeQuery(r)),a[t]||(a[t]=[]);for(var o=0;o<a[t].length;o++)if(a[t][o].h===i)return this;var f={h:i,query:r,ctx:n||this,callAtLast:i.zrEventfulCallAtLast},p=a[t].length-1,v=a[t][p];return v&&v.callAtLast?a[t].splice(p,0,f):a[t].push(f),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var i=this._$handlers;if(!i)return this;if(!t)return this._$handlers={},this;if(r){if(i[t]){for(var n=[],a=0,u=i[t].length;a<u;a++)i[t][a].h!==r&&n.push(i[t][a]);i[t]=n}i[t]&&i[t].length===0&&delete i[t]}else delete i[t];return this},e.prototype.trigger=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(!this._$handlers)return this;var n=this._$handlers[t],a=this._$eventProcessor;if(n)for(var u=r.length,o=n.length,f=0;f<o;f++){var p=n[f];if(!(a&&a.filter&&p.query!=null&&!a.filter(t,p.query)))switch(u){case 0:p.h.call(p.ctx);break;case 1:p.h.call(p.ctx,r[0]);break;case 2:p.h.call(p.ctx,r[0],r[1]);break;default:p.h.apply(p.ctx,r);break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];if(!this._$handlers)return this;var n=this._$handlers[t],a=this._$eventProcessor;if(n)for(var u=r.length,o=r[u-1],f=n.length,p=0;p<f;p++){var v=n[p];if(!(a&&a.filter&&v.query!=null&&!a.filter(t,v.query)))switch(u){case 0:v.h.call(o);break;case 1:v.h.call(o,r[0]);break;case 2:v.h.call(o,r[0],r[1]);break;default:v.h.apply(o,r.slice(1,u-1));break}}return a&&a.afterTrigger&&a.afterTrigger(t),this},e}();const ks=NU;var VU=Math.log(2);function Rx(e,t,r,i,n,a){var u=i+"-"+n,o=e.length;if(a.hasOwnProperty(u))return a[u];if(t===1){var f=Math.round(Math.log((1<<o)-1&~n)/VU);return e[r][f]}for(var p=i|1<<r,v=r+1;i&1<<v;)v++;for(var _=0,y=0,S=0;y<o;y++){var A=1<<y;A&n||(_+=(S%2?-1:1)*e[r][y]*Rx(e,t-1,v,p,n|A,a),S++)}return a[u]=_,_}function dC(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],i={},n=Rx(r,8,0,0,0,i);if(n!==0){for(var a=[],u=0;u<8;u++)for(var o=0;o<8;o++)a[o]==null&&(a[o]=0),a[o]+=((u+o)%2?-1:1)*Rx(r,7,u===0?1:0,1<<u,1<<o,i)/n*t[u];return function(f,p,v){var _=p*a[6]+v*a[7]+1;f[0]=(p*a[0]+v*a[1]+a[2])/_,f[1]=(p*a[3]+v*a[4]+a[5])/_}}}var pC="___zrEVENTSAVED",N0=[];function $U(e,t,r,i,n){return zx(N0,t,i,n,!0)&&zx(e,r,N0[0],N0[1])}function zx(e,t,r,i,n){if(t.getBoundingClientRect&&xr.domSupported&&!PL(t)){var a=t[pC]||(t[pC]={}),u=UU(t,a),o=GU(u,a,n);if(o)return o(e,r,i),!0}return!1}function UU(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var i=["left","right"],n=["top","bottom"],a=0;a<4;a++){var u=document.createElement("div"),o=u.style,f=a%2,p=(a>>1)%2;o.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[f]+":0",n[p]+":0",i[1-f]+":auto",n[1-p]+":auto",""].join("!important;"),e.appendChild(u),r.push(u)}return r}function GU(e,t,r){for(var i=r?"invTrans":"trans",n=t[i],a=t.srcCoords,u=[],o=[],f=!0,p=0;p<4;p++){var v=e[p].getBoundingClientRect(),_=2*p,y=v.left,S=v.top;u.push(y,S),f=f&&a&&y===a[_]&&S===a[_+1],o.push(e[p].offsetLeft,e[p].offsetTop)}return f&&n?n:(t.srcCoords=u,t[i]=r?dC(o,u):dC(u,o))}function PL(e){return e.nodeName.toUpperCase()==="CANVAS"}var HU=/([&<>"'])/g,qU={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function wa(e){return e==null?"":(e+"").replace(HU,function(t,r){return qU[r]})}var jU=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,V0=[],WU=xr.browser.firefox&&+xr.browser.version.split(".")[0]<39;function Ox(e,t,r,i){return r=r||{},i?mC(e,t,r):WU&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):mC(e,t,r),r}function mC(e,t,r){if(xr.domSupported&&e.getBoundingClientRect){var i=t.clientX,n=t.clientY;if(PL(e)){var a=e.getBoundingClientRect();r.zrX=i-a.left,r.zrY=n-a.top;return}else if(zx(V0,e,i,n)){r.zrX=V0[0],r.zrY=V0[1];return}}r.zrX=r.zrY=0}function Bw(e){return e||window.event}function Fa(e,t,r){if(t=Bw(t),t.zrX!=null)return t;var i=t.type,n=i&&i.indexOf("touch")>=0;if(n){var u=i!=="touchend"?t.targetTouches[0]:t.changedTouches[0];u&&Ox(e,u,t,r)}else{Ox(e,t,t,r);var a=ZU(t);t.zrDelta=a?a/120:-(t.detail||0)/3}var o=t.button;return t.which==null&&o!==void 0&&jU.test(t.type)&&(t.which=o&1?1:o&2?3:o&4?2:0),t}function ZU(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,i=e.deltaY;if(r==null||i==null)return t;var n=Math.abs(i!==0?i:r),a=i>0?-1:i<0?1:r>0?-1:1;return 3*n*a}function XU(e,t,r,i){e.addEventListener(t,r,i)}function YU(e,t,r,i){e.removeEventListener(t,r,i)}var DL=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0},KU=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,i){return this._doTrack(t,r,i),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,i){var n=t.touches;if(n){for(var a={points:[],touches:[],target:r,event:t},u=0,o=n.length;u<o;u++){var f=n[u],p=Ox(i,f,{});a.points.push([p.zrX,p.zrY]),a.touches.push(f)}this._track.push(a)}},e.prototype._recognize=function(t){for(var r in $0)if($0.hasOwnProperty(r)){var i=$0[r](this._track,t);if(i)return i}},e}();function vC(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function JU(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var $0={pinch:function(e,t){var r=e.length;if(r){var i=(e[r-1]||{}).points,n=(e[r-2]||{}).points||i;if(n&&n.length>1&&i&&i.length>1){var a=vC(i)/vC(n);!isFinite(a)&&(a=1),t.pinchScale=a;var u=JU(i);return t.pinchX=u[0],t.pinchY=u[1],{type:"pinch",target:e[0].target,event:t}}}}};function cp(){return[1,0,0,1,0,0]}function Fw(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function QU(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function bh(e,t,r){var i=t[0]*r[0]+t[2]*r[1],n=t[1]*r[0]+t[3]*r[1],a=t[0]*r[2]+t[2]*r[3],u=t[1]*r[2]+t[3]*r[3],o=t[0]*r[4]+t[2]*r[5]+t[4],f=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=i,e[1]=n,e[2]=a,e[3]=u,e[4]=o,e[5]=f,e}function Bx(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function Nw(e,t,r){var i=t[0],n=t[2],a=t[4],u=t[1],o=t[3],f=t[5],p=Math.sin(r),v=Math.cos(r);return e[0]=i*v+u*p,e[1]=-i*p+u*v,e[2]=n*v+o*p,e[3]=-n*p+v*o,e[4]=v*a+p*f,e[5]=v*f-p*a,e}function eG(e,t,r){var i=r[0],n=r[1];return e[0]=t[0]*i,e[1]=t[1]*n,e[2]=t[2]*i,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*n,e}function Vw(e,t){var r=t[0],i=t[2],n=t[4],a=t[1],u=t[3],o=t[5],f=r*u-a*i;return f?(f=1/f,e[0]=u*f,e[1]=-a*f,e[2]=-i*f,e[3]=r*f,e[4]=(i*o-u*n)*f,e[5]=(a*n-r*o)*f,e):null}var tG=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,i=this.y-t.y;return Math.sqrt(r*r+i*i)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,i=this.y-t.y;return r*r+i*i},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(t){var r=this.x,i=this.y;return this.x=t[0]*r+t[2]*i+t[4],this.y=t[1]*r+t[3]*i+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,i){t.x=r,t.y=i},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,i){t.x=r.x+i.x,t.y=r.y+i.y},e.sub=function(t,r,i){t.x=r.x-i.x,t.y=r.y-i.y},e.scale=function(t,r,i){t.x=r.x*i,t.y=r.y*i},e.scaleAndAdd=function(t,r,i,n){t.x=r.x+i.x*n,t.y=r.y+i.y*n},e.lerp=function(t,r,i,n){var a=1-n;t.x=a*r.x+n*i.x,t.y=a*r.y+n*i.y},e}();const ci=tG;var gv=Math.min,_v=Math.max,vu=new ci,gu=new ci,_u=new ci,yu=new ci,rd=new ci,id=new ci,rG=function(){function e(t,r,i,n){i<0&&(t=t+i,i=-i),n<0&&(r=r+n,n=-n),this.x=t,this.y=r,this.width=i,this.height=n}return e.prototype.union=function(t){var r=gv(t.x,this.x),i=gv(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=_v(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=_v(t.y+t.height,this.y+this.height)-i:this.height=t.height,this.x=r,this.y=i},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,i=t.width/r.width,n=t.height/r.height,a=cp();return Bx(a,a,[-r.x,-r.y]),eG(a,a,[i,n]),Bx(a,a,[t.x,t.y]),a},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var i=this,n=i.x,a=i.x+i.width,u=i.y,o=i.y+i.height,f=t.x,p=t.x+t.width,v=t.y,_=t.y+t.height,y=!(a<f||p<n||o<v||_<u);if(r){var S=1/0,A=0,L=Math.abs(a-f),I=Math.abs(p-n),M=Math.abs(o-v),D=Math.abs(_-u),O=Math.min(L,I),N=Math.min(M,D);a<f||p<n?O>A&&(A=O,L<I?ci.set(id,-L,0):ci.set(id,I,0)):O<S&&(S=O,L<I?ci.set(rd,L,0):ci.set(rd,-I,0)),o<v||_<u?N>A&&(A=N,M<D?ci.set(id,0,-M):ci.set(id,0,D)):O<S&&(S=O,M<D?ci.set(rd,0,M):ci.set(rd,0,-D))}return r&&ci.copy(r,y?rd:id),y},e.prototype.contain=function(t,r){var i=this;return t>=i.x&&t<=i.x+i.width&&r>=i.y&&r<=i.y+i.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,i){if(!i){t!==r&&e.copy(t,r);return}if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var n=i[0],a=i[3],u=i[4],o=i[5];t.x=r.x*n+u,t.y=r.y*a+o,t.width=r.width*n,t.height=r.height*a,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}vu.x=_u.x=r.x,vu.y=yu.y=r.y,gu.x=yu.x=r.x+r.width,gu.y=_u.y=r.y+r.height,vu.transform(i),yu.transform(i),gu.transform(i),_u.transform(i),t.x=gv(vu.x,gu.x,_u.x,yu.x),t.y=gv(vu.y,gu.y,_u.y,yu.y);var f=_v(vu.x,gu.x,_u.x,yu.x),p=_v(vu.y,gu.y,_u.y,yu.y);t.width=f-t.x,t.height=p-t.y},e}();const ii=rG;var LL="silent";function iG(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:nG}}function nG(){DL(this.event)}var aG=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(ks),nd=function(){function e(t,r){this.x=t,this.y=r}return e}(),oG=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],U0=new ii(0,0,0,0),kL=function(e){It(t,e);function t(r,i,n,a,u){var o=e.call(this)||this;return o._hovered=new nd(0,0),o.storage=r,o.painter=i,o.painterRoot=a,o._pointerSize=u,n=n||new aG,o.proxy=null,o.setHandlerProxy(n),o._draggingMgr=new FU(o),o}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(Ee(oG,function(i){r.on&&r.on(i,this[i],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var i=r.zrX,n=r.zrY,a=RL(this,i,n),u=this._hovered,o=u.target;o&&!o.__zr&&(u=this.findHover(u.x,u.y),o=u.target);var f=this._hovered=a?new nd(i,n):this.findHover(i,n),p=f.target,v=this.proxy;v.setCursor&&v.setCursor(p?p.cursor:"default"),o&&p!==o&&this.dispatchToElement(u,"mouseout",r),this.dispatchToElement(f,"mousemove",r),p&&p!==o&&this.dispatchToElement(f,"mouseover",r)},t.prototype.mouseout=function(r){var i=r.zrEventControl;i!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),i!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new nd(0,0)},t.prototype.dispatch=function(r,i){var n=this[r];n&&n.call(this,i)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var i=this.proxy;i.setCursor&&i.setCursor(r)},t.prototype.dispatchToElement=function(r,i,n){r=r||{};var a=r.target;if(!(a&&a.silent)){for(var u="on"+i,o=iG(i,r,n);a&&(a[u]&&(o.cancelBubble=!!a[u].call(a,o)),a.trigger(i,o),a=a.__hostTarget?a.__hostTarget:a.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(i,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(f){typeof f[u]=="function"&&f[u].call(f,o),f.trigger&&f.trigger(i,o)}))}},t.prototype.findHover=function(r,i,n){var a=this.storage.getDisplayList(),u=new nd(r,i);if(gC(a,u,r,i,n),this._pointerSize&&!u.target){for(var o=[],f=this._pointerSize,p=f/2,v=new ii(r-p,i-p,f,f),_=a.length-1;_>=0;_--){var y=a[_];y!==n&&!y.ignore&&!y.ignoreCoarsePointer&&(!y.parent||!y.parent.ignoreCoarsePointer)&&(U0.copy(y.getBoundingRect()),y.transform&&U0.applyTransform(y.transform),U0.intersect(v)&&o.push(y))}if(o.length)for(var S=4,A=Math.PI/12,L=Math.PI*2,I=0;I<p;I+=S)for(var M=0;M<L;M+=A){var D=r+I*Math.cos(M),O=i+I*Math.sin(M);if(gC(o,u,D,O,n),u.target)return u}}return u},t.prototype.processGesture=function(r,i){this._gestureMgr||(this._gestureMgr=new KU);var n=this._gestureMgr;i==="start"&&n.clear();var a=n.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(i==="end"&&n.clear(),a){var u=a.type;r.gestureEvent=u;var o=new nd;o.target=a.target,this.dispatchToElement(o,u,a.event)}},t}(ks);Ee(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){kL.prototype[e]=function(t){var r=t.zrX,i=t.zrY,n=RL(this,r,i),a,u;if((e!=="mouseup"||!n)&&(a=this.findHover(r,i),u=a.target),e==="mousedown")this._downEl=u,this._downPoint=[t.zrX,t.zrY],this._upEl=u;else if(e==="mouseup")this._upEl=u;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||hh(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(a,e,t)}});function sG(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var i=e,n=void 0,a=!1;i;){if(i.ignoreClip&&(a=!0),!a){var u=i.getClipPath();if(u&&!u.contain(t,r))return!1;i.silent&&(n=!0)}var o=i.__hostTarget;i=o||i.parent}return n?LL:!0}return!1}function gC(e,t,r,i,n){for(var a=e.length-1;a>=0;a--){var u=e[a],o=void 0;if(u!==n&&!u.ignore&&(o=sG(u,r,i))&&(!t.topTarget&&(t.topTarget=u),o!==LL)){t.target=u;break}}}function RL(e,t,r){var i=e.painter;return t<0||t>i.getWidth()||r<0||r>i.getHeight()}const lG=kL;var zL=32,ad=7;function uG(e){for(var t=0;e>=zL;)t|=e&1,e>>=1;return e+t}function _C(e,t,r,i){var n=t+1;if(n===r)return 1;if(i(e[n++],e[t])<0){for(;n<r&&i(e[n],e[n-1])<0;)n++;cG(e,t,n)}else for(;n<r&&i(e[n],e[n-1])>=0;)n++;return n-t}function cG(e,t,r){for(r--;t<r;){var i=e[t];e[t++]=e[r],e[r--]=i}}function yC(e,t,r,i,n){for(i===t&&i++;i<r;i++){for(var a=e[i],u=t,o=i,f;u<o;)f=u+o>>>1,n(a,e[f])<0?o=f:u=f+1;var p=i-u;switch(p){case 3:e[u+3]=e[u+2];case 2:e[u+2]=e[u+1];case 1:e[u+1]=e[u];break;default:for(;p>0;)e[u+p]=e[u+p-1],p--}e[u]=a}}function G0(e,t,r,i,n,a){var u=0,o=0,f=1;if(a(e,t[r+n])>0){for(o=i-n;f<o&&a(e,t[r+n+f])>0;)u=f,f=(f<<1)+1,f<=0&&(f=o);f>o&&(f=o),u+=n,f+=n}else{for(o=n+1;f<o&&a(e,t[r+n-f])<=0;)u=f,f=(f<<1)+1,f<=0&&(f=o);f>o&&(f=o);var p=u;u=n-f,f=n-p}for(u++;u<f;){var v=u+(f-u>>>1);a(e,t[r+v])>0?u=v+1:f=v}return f}function H0(e,t,r,i,n,a){var u=0,o=0,f=1;if(a(e,t[r+n])<0){for(o=n+1;f<o&&a(e,t[r+n-f])<0;)u=f,f=(f<<1)+1,f<=0&&(f=o);f>o&&(f=o);var p=u;u=n-f,f=n-p}else{for(o=i-n;f<o&&a(e,t[r+n+f])>=0;)u=f,f=(f<<1)+1,f<=0&&(f=o);f>o&&(f=o),u+=n,f+=n}for(u++;u<f;){var v=u+(f-u>>>1);a(e,t[r+v])<0?f=v:u=v+1}return f}function hG(e,t){var r=ad,i,n,a=0;e.length;var u=[];i=[],n=[];function o(S,A){i[a]=S,n[a]=A,a+=1}function f(){for(;a>1;){var S=a-2;if(S>=1&&n[S-1]<=n[S]+n[S+1]||S>=2&&n[S-2]<=n[S]+n[S-1])n[S-1]<n[S+1]&&S--;else if(n[S]>n[S+1])break;v(S)}}function p(){for(;a>1;){var S=a-2;S>0&&n[S-1]<n[S+1]&&S--,v(S)}}function v(S){var A=i[S],L=n[S],I=i[S+1],M=n[S+1];n[S]=L+M,S===a-3&&(i[S+1]=i[S+2],n[S+1]=n[S+2]),a--;var D=H0(e[I],e,A,L,0,t);A+=D,L-=D,L!==0&&(M=G0(e[A+L-1],e,I,M,M-1,t),M!==0&&(L<=M?_(A,L,I,M):y(A,L,I,M)))}function _(S,A,L,I){var M=0;for(M=0;M<A;M++)u[M]=e[S+M];var D=0,O=L,N=S;if(e[N++]=e[O++],--I===0){for(M=0;M<A;M++)e[N+M]=u[D+M];return}if(A===1){for(M=0;M<I;M++)e[N+M]=e[O+M];e[N+I]=u[D];return}for(var q=r,Z,Q,j;;){Z=0,Q=0,j=!1;do if(t(e[O],u[D])<0){if(e[N++]=e[O++],Q++,Z=0,--I===0){j=!0;break}}else if(e[N++]=u[D++],Z++,Q=0,--A===1){j=!0;break}while((Z|Q)<q);if(j)break;do{if(Z=H0(e[O],u,D,A,0,t),Z!==0){for(M=0;M<Z;M++)e[N+M]=u[D+M];if(N+=Z,D+=Z,A-=Z,A<=1){j=!0;break}}if(e[N++]=e[O++],--I===0){j=!0;break}if(Q=G0(u[D],e,O,I,0,t),Q!==0){for(M=0;M<Q;M++)e[N+M]=e[O+M];if(N+=Q,O+=Q,I-=Q,I===0){j=!0;break}}if(e[N++]=u[D++],--A===1){j=!0;break}q--}while(Z>=ad||Q>=ad);if(j)break;q<0&&(q=0),q+=2}if(r=q,r<1&&(r=1),A===1){for(M=0;M<I;M++)e[N+M]=e[O+M];e[N+I]=u[D]}else{if(A===0)throw new Error;for(M=0;M<A;M++)e[N+M]=u[D+M]}}function y(S,A,L,I){var M=0;for(M=0;M<I;M++)u[M]=e[L+M];var D=S+A-1,O=I-1,N=L+I-1,q=0,Z=0;if(e[N--]=e[D--],--A===0){for(q=N-(I-1),M=0;M<I;M++)e[q+M]=u[M];return}if(I===1){for(N-=A,D-=A,Z=N+1,q=D+1,M=A-1;M>=0;M--)e[Z+M]=e[q+M];e[N]=u[O];return}for(var Q=r;;){var j=0,ie=0,ae=!1;do if(t(u[O],e[D])<0){if(e[N--]=e[D--],j++,ie=0,--A===0){ae=!0;break}}else if(e[N--]=u[O--],ie++,j=0,--I===1){ae=!0;break}while((j|ie)<Q);if(ae)break;do{if(j=A-H0(u[O],e,S,A,A-1,t),j!==0){for(N-=j,D-=j,A-=j,Z=N+1,q=D+1,M=j-1;M>=0;M--)e[Z+M]=e[q+M];if(A===0){ae=!0;break}}if(e[N--]=u[O--],--I===1){ae=!0;break}if(ie=I-G0(e[D],u,0,I,I-1,t),ie!==0){for(N-=ie,O-=ie,I-=ie,Z=N+1,q=O+1,M=0;M<ie;M++)e[Z+M]=u[q+M];if(I<=1){ae=!0;break}}if(e[N--]=e[D--],--A===0){ae=!0;break}Q--}while(j>=ad||ie>=ad);if(ae)break;Q<0&&(Q=0),Q+=2}if(r=Q,r<1&&(r=1),I===1){for(N-=A,D-=A,Z=N+1,q=D+1,M=A-1;M>=0;M--)e[Z+M]=e[q+M];e[N]=u[O]}else{if(I===0)throw new Error;for(q=N-(I-1),M=0;M<I;M++)e[q+M]=u[M]}}return{mergeRuns:f,forceMergeRuns:p,pushRun:o}}function cg(e,t,r,i){r||(r=0),i||(i=e.length);var n=i-r;if(!(n<2)){var a=0;if(n<zL){a=_C(e,r,i,t),yC(e,r,i,r+a,t);return}var u=hG(e,t),o=uG(n);do{if(a=_C(e,r,i,t),a<o){var f=n;f>o&&(f=o),yC(e,r,r+f,r+a,t),a=f}u.pushRun(r,a),u.mergeRuns(),n-=a,r+=a}while(n!==0);u.forceMergeRuns()}}var $o=1,Td=2,sh=4,xC=!1;function q0(){xC||(xC=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function bC(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var fG=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=bC}return e.prototype.traverse=function(t,r){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var i=this._displayList;return(t||!i.length)&&this.updateDisplayList(r),i},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,i=this._displayList,n=0,a=r.length;n<a;n++)this._updateAndAddDisplayable(r[n],null,t);i.length=this._displayListLen,cg(i,bC)},e.prototype._updateAndAddDisplayable=function(t,r,i){if(!(t.ignore&&!i)){t.beforeUpdate(),t.update(),t.afterUpdate();var n=t.getClipPath();if(t.ignoreClip)r=null;else if(n){r?r=r.slice():r=[];for(var a=n,u=t;a;)a.parent=u,a.updateTransform(),r.push(a),u=a,a=a.getClipPath()}if(t.childrenRef){for(var o=t.childrenRef(),f=0;f<o.length;f++){var p=o[f];t.__dirty&&(p.__dirty|=$o),this._updateAndAddDisplayable(p,r,i)}t.__dirty=0}else{var v=t;r&&r.length?v.__clipPaths=r:v.__clipPaths&&v.__clipPaths.length>0&&(v.__clipPaths=[]),isNaN(v.z)&&(q0(),v.z=0),isNaN(v.z2)&&(q0(),v.z2=0),isNaN(v.zlevel)&&(q0(),v.zlevel=0),this._displayList[this._displayListLen++]=v}var _=t.getDecalElement&&t.getDecalElement();_&&this._updateAndAddDisplayable(_,r,i);var y=t.getTextGuideLine();y&&this._updateAndAddDisplayable(y,r,i);var S=t.getTextContent();S&&this._updateAndAddDisplayable(S,r,i)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,i=t.length;r<i;r++)this.delRoot(t[r]);return}var n=ri(this._roots,t);n>=0&&this._roots.splice(n,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const dG=fG;var OL;OL=xr.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const wC=OL;var hg={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,i=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)))},elasticOut:function(e){var t,r=.1,i=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/i)+1)},elasticInOut:function(e){var t,r=.1,i=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=i/4):t=i*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/i)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-hg.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?hg.bounceIn(e*2)*.5:hg.bounceOut(e*2-1)*.5+.5}};const BL=hg;var yv=Math.pow,Il=Math.sqrt,Ug=1e-8,FL=1e-4,SC=Il(3),xv=1/3,Uo=Xh(),$a=Xh(),wh=Xh();function wl(e){return e>-Ug&&e<Ug}function NL(e){return e>Ug||e<-Ug}function dn(e,t,r,i,n){var a=1-n;return a*a*(a*e+3*n*t)+n*n*(n*i+3*a*r)}function TC(e,t,r,i,n){var a=1-n;return 3*(((t-e)*a+2*(r-t)*n)*a+(i-r)*n*n)}function VL(e,t,r,i,n,a){var u=i+3*(t-r)-e,o=3*(r-t*2+e),f=3*(t-e),p=e-n,v=o*o-3*u*f,_=o*f-9*u*p,y=f*f-3*o*p,S=0;if(wl(v)&&wl(_))if(wl(o))a[0]=0;else{var A=-f/o;A>=0&&A<=1&&(a[S++]=A)}else{var L=_*_-4*v*y;if(wl(L)){var I=_/v,A=-o/u+I,M=-I/2;A>=0&&A<=1&&(a[S++]=A),M>=0&&M<=1&&(a[S++]=M)}else if(L>0){var D=Il(L),O=v*o+1.5*u*(-_+D),N=v*o+1.5*u*(-_-D);O<0?O=-yv(-O,xv):O=yv(O,xv),N<0?N=-yv(-N,xv):N=yv(N,xv);var A=(-o-(O+N))/(3*u);A>=0&&A<=1&&(a[S++]=A)}else{var q=(2*v*o-3*u*_)/(2*Il(v*v*v)),Z=Math.acos(q)/3,Q=Il(v),j=Math.cos(Z),A=(-o-2*Q*j)/(3*u),M=(-o+Q*(j+SC*Math.sin(Z)))/(3*u),ie=(-o+Q*(j-SC*Math.sin(Z)))/(3*u);A>=0&&A<=1&&(a[S++]=A),M>=0&&M<=1&&(a[S++]=M),ie>=0&&ie<=1&&(a[S++]=ie)}}return S}function $L(e,t,r,i,n){var a=6*r-12*t+6*e,u=9*t+3*i-3*e-9*r,o=3*t-3*e,f=0;if(wl(u)){if(NL(a)){var p=-o/a;p>=0&&p<=1&&(n[f++]=p)}}else{var v=a*a-4*u*o;if(wl(v))n[0]=-a/(2*u);else if(v>0){var _=Il(v),p=(-a+_)/(2*u),y=(-a-_)/(2*u);p>=0&&p<=1&&(n[f++]=p),y>=0&&y<=1&&(n[f++]=y)}}return f}function Gg(e,t,r,i,n,a){var u=(t-e)*n+e,o=(r-t)*n+t,f=(i-r)*n+r,p=(o-u)*n+u,v=(f-o)*n+o,_=(v-p)*n+p;a[0]=e,a[1]=u,a[2]=p,a[3]=_,a[4]=_,a[5]=v,a[6]=f,a[7]=i}function pG(e,t,r,i,n,a,u,o,f,p,v){var _,y=.005,S=1/0,A,L,I,M;Uo[0]=f,Uo[1]=p;for(var D=0;D<1;D+=.05)$a[0]=dn(e,r,n,u,D),$a[1]=dn(t,i,a,o,D),I=xh(Uo,$a),I<S&&(_=D,S=I);S=1/0;for(var O=0;O<32&&!(y<FL);O++)A=_-y,L=_+y,$a[0]=dn(e,r,n,u,A),$a[1]=dn(t,i,a,o,A),I=xh($a,Uo),A>=0&&I<S?(_=A,S=I):(wh[0]=dn(e,r,n,u,L),wh[1]=dn(t,i,a,o,L),M=xh(wh,Uo),L<=1&&M<S?(_=L,S=M):y*=.5);return v&&(v[0]=dn(e,r,n,u,_),v[1]=dn(t,i,a,o,_)),Il(S)}function mG(e,t,r,i,n,a,u,o,f){for(var p=e,v=t,_=0,y=1/f,S=1;S<=f;S++){var A=S*y,L=dn(e,r,n,u,A),I=dn(t,i,a,o,A),M=L-p,D=I-v;_+=Math.sqrt(M*M+D*D),p=L,v=I}return _}function pn(e,t,r,i){var n=1-i;return n*(n*e+2*i*t)+i*i*r}function Fx(e,t,r,i){return 2*((1-i)*(t-e)+i*(r-t))}function vG(e,t,r,i,n){var a=e-2*t+r,u=2*(t-e),o=e-i,f=0;if(wl(a)){if(NL(u)){var p=-o/u;p>=0&&p<=1&&(n[f++]=p)}}else{var v=u*u-4*a*o;if(wl(v)){var p=-u/(2*a);p>=0&&p<=1&&(n[f++]=p)}else if(v>0){var _=Il(v),p=(-u+_)/(2*a),y=(-u-_)/(2*a);p>=0&&p<=1&&(n[f++]=p),y>=0&&y<=1&&(n[f++]=y)}}return f}function UL(e,t,r){var i=e+r-2*t;return i===0?.5:(e-t)/i}function Hg(e,t,r,i,n){var a=(t-e)*i+e,u=(r-t)*i+t,o=(u-a)*i+a;n[0]=e,n[1]=a,n[2]=o,n[3]=o,n[4]=u,n[5]=r}function gG(e,t,r,i,n,a,u,o,f){var p,v=.005,_=1/0;Uo[0]=u,Uo[1]=o;for(var y=0;y<1;y+=.05){$a[0]=pn(e,r,n,y),$a[1]=pn(t,i,a,y);var S=xh(Uo,$a);S<_&&(p=y,_=S)}_=1/0;for(var A=0;A<32&&!(v<FL);A++){var L=p-v,I=p+v;$a[0]=pn(e,r,n,L),$a[1]=pn(t,i,a,L);var S=xh($a,Uo);if(L>=0&&S<_)p=L,_=S;else{wh[0]=pn(e,r,n,I),wh[1]=pn(t,i,a,I);var M=xh(wh,Uo);I<=1&&M<_?(p=I,_=M):v*=.5}}return f&&(f[0]=pn(e,r,n,p),f[1]=pn(t,i,a,p)),Il(_)}function _G(e,t,r,i,n,a,u){for(var o=e,f=t,p=0,v=1/u,_=1;_<=u;_++){var y=_*v,S=pn(e,r,n,y),A=pn(t,i,a,y),L=S-o,I=A-f;p+=Math.sqrt(L*L+I*I),o=S,f=A}return p}var yG=/cubic-bezier\(([0-9,\.e ]+)\)/;function $w(e){var t=e&&yG.exec(e);if(t){var r=t[1].split(","),i=+Go(r[0]),n=+Go(r[1]),a=+Go(r[2]),u=+Go(r[3]);if(isNaN(i+n+a+u))return;var o=[];return function(f){return f<=0?0:f>=1?1:VL(0,i,a,1,f,o)&&dn(0,n,u,1,o[0])}}}var xG=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Zn,this.ondestroy=t.ondestroy||Zn,this.onrestart=t.onrestart||Zn,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var i=this._life,n=t-this._startTime-this._pausedTime,a=n/i;a<0&&(a=0),a=Math.min(a,1);var u=this.easingFunc,o=u?u(a):a;if(this.onframe(o),a===1)if(this.loop){var f=n%i;this._startTime=t-f,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=lr(t)?t:BL[t]||$w(t)},e}();const bG=xG;var GL=function(){function e(t){this.value=t}return e}(),wG=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new GL(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,i=t.next;r?r.next=i:this.head=i,i?i.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),SG=function(){function e(t){this._list=new wG,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var i=this._list,n=this._map,a=null;if(n[t]==null){var u=i.len(),o=this._lastRemovedEntry;if(u>=this._maxSize&&u>0){var f=i.head;i.remove(f),delete n[f.key],a=f.value,this._lastRemovedEntry=f}o?o.value=r:o=new GL(r),o.key=t,i.insertEntry(o),n[t]=o}return a},e.prototype.get=function(t){var r=this._map[t],i=this._list;if(r!=null)return r!==i.tail&&(i.remove(r),i.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const Gp=SG;var EC={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Vd(e){return e=Math.round(e),e<0?0:e>255?255:e}function CC(e){return e<0?0:e>1?1:e}function j0(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Vd(parseFloat(t)/100*255):Vd(parseInt(t,10))}function $d(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?CC(parseFloat(t)/100):CC(parseFloat(t))}function W0(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function Oa(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function Nx(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var HL=new Gp(20),bv=null;function Xc(e,t){bv&&Nx(bv,t),bv=HL.put(e,bv||t.slice())}function Qu(e,t){if(e){t=t||[];var r=HL.get(e);if(r)return Nx(t,r);e=e+"";var i=e.replace(/ /g,"").toLowerCase();if(i in EC)return Nx(t,EC[i]),Xc(e,t),t;var n=i.length;if(i.charAt(0)==="#"){if(n===4||n===5){var a=parseInt(i.slice(1,4),16);if(!(a>=0&&a<=4095)){Oa(t,0,0,0,1);return}return Oa(t,(a&3840)>>4|(a&3840)>>8,a&240|(a&240)>>4,a&15|(a&15)<<4,n===5?parseInt(i.slice(4),16)/15:1),Xc(e,t),t}else if(n===7||n===9){var a=parseInt(i.slice(1,7),16);if(!(a>=0&&a<=16777215)){Oa(t,0,0,0,1);return}return Oa(t,(a&16711680)>>16,(a&65280)>>8,a&255,n===9?parseInt(i.slice(7),16)/255:1),Xc(e,t),t}return}var u=i.indexOf("("),o=i.indexOf(")");if(u!==-1&&o+1===n){var f=i.substr(0,u),p=i.substr(u+1,o-(u+1)).split(","),v=1;switch(f){case"rgba":if(p.length!==4)return p.length===3?Oa(t,+p[0],+p[1],+p[2],1):Oa(t,0,0,0,1);v=$d(p.pop());case"rgb":if(p.length>=3)return Oa(t,j0(p[0]),j0(p[1]),j0(p[2]),p.length===3?v:$d(p[3])),Xc(e,t),t;Oa(t,0,0,0,1);return;case"hsla":if(p.length!==4){Oa(t,0,0,0,1);return}return p[3]=$d(p[3]),AC(p,t),Xc(e,t),t;case"hsl":if(p.length!==3){Oa(t,0,0,0,1);return}return AC(p,t),Xc(e,t),t;default:return}}Oa(t,0,0,0,1)}}function AC(e,t){var r=(parseFloat(e[0])%360+360)%360/360,i=$d(e[1]),n=$d(e[2]),a=n<=.5?n*(i+1):n+i-n*i,u=n*2-a;return t=t||[],Oa(t,Vd(W0(u,a,r+1/3)*255),Vd(W0(u,a,r)*255),Vd(W0(u,a,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function MC(e,t){var r=Qu(e);if(r){for(var i=0;i<3;i++)t<0?r[i]=r[i]*(1-t)|0:r[i]=(255-r[i])*t+r[i]|0,r[i]>255?r[i]=255:r[i]<0&&(r[i]=0);return qL(r,r.length===4?"rgba":"rgb")}}function qL(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function qg(e,t){var r=Qu(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}var jg=Math.round;function hp(e){var t;if(!e||e==="transparent")e="none";else if(typeof e=="string"&&e.indexOf("rgba")>-1){var r=Qu(e);r&&(e="rgb("+r[0]+","+r[1]+","+r[2]+")",t=r[3])}return{color:e,opacity:t??1}}var IC=1e-4;function Sl(e){return e<IC&&e>-IC}function wv(e){return jg(e*1e3)/1e3}function Vx(e){return jg(e*1e4)/1e4}function TG(e){return"matrix("+wv(e[0])+","+wv(e[1])+","+wv(e[2])+","+wv(e[3])+","+Vx(e[4])+","+Vx(e[5])+")"}var EG={left:"start",right:"end",center:"middle",middle:"middle"};function CG(e,t,r){return r==="top"?e+=t/2:r==="bottom"&&(e-=t/2),e}function AG(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY)}function MG(e){var t=e.style,r=e.getGlobalScale();return[t.shadowColor,(t.shadowBlur||0).toFixed(2),(t.shadowOffsetX||0).toFixed(2),(t.shadowOffsetY||0).toFixed(2),r[0],r[1]].join(",")}function jL(e){return e&&!!e.image}function IG(e){return e&&!!e.svgElement}function Uw(e){return jL(e)||IG(e)}function WL(e){return e.type==="linear"}function ZL(e){return e.type==="radial"}function XL(e){return e&&(e.type==="linear"||e.type==="radial")}function z_(e){return"url(#"+e+")"}function YL(e){var t=e.getGlobalScale(),r=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(r)/Math.log(10)),1)}function KL(e){var t=e.x||0,r=e.y||0,i=(e.rotation||0)*ug,n=br(e.scaleX,1),a=br(e.scaleY,1),u=e.skewX||0,o=e.skewY||0,f=[];return(t||r)&&f.push("translate("+t+"px,"+r+"px)"),i&&f.push("rotate("+i+")"),(n!==1||a!==1)&&f.push("scale("+n+","+a+")"),(u||o)&&f.push("skew("+jg(u*ug)+"deg, "+jg(o*ug)+"deg)"),f.join(" ")}var PG=function(){return xr.hasGlobalWindow&&lr(window.btoa)?function(e){return window.btoa(unescape(encodeURIComponent(e)))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}}(),$x=Array.prototype.slice;function ws(e,t,r){return(t-e)*r+e}function Z0(e,t,r,i){for(var n=t.length,a=0;a<n;a++)e[a]=ws(t[a],r[a],i);return e}function DG(e,t,r,i){for(var n=t.length,a=n&&t[0].length,u=0;u<n;u++){e[u]||(e[u]=[]);for(var o=0;o<a;o++)e[u][o]=ws(t[u][o],r[u][o],i)}return e}function Sv(e,t,r,i){for(var n=t.length,a=0;a<n;a++)e[a]=t[a]+r[a]*i;return e}function PC(e,t,r,i){for(var n=t.length,a=n&&t[0].length,u=0;u<n;u++){e[u]||(e[u]=[]);for(var o=0;o<a;o++)e[u][o]=t[u][o]+r[u][o]*i}return e}function LG(e,t){for(var r=e.length,i=t.length,n=r>i?t:e,a=Math.min(r,i),u=n[a-1]||{color:[0,0,0,0],offset:0},o=a;o<Math.max(r,i);o++)n.push({offset:u.offset,color:u.color.slice()})}function kG(e,t,r){var i=e,n=t;if(!(!i.push||!n.push)){var a=i.length,u=n.length;if(a!==u){var o=a>u;if(o)i.length=u;else for(var f=a;f<u;f++)i.push(r===1?n[f]:$x.call(n[f]))}for(var p=i[0]&&i[0].length,f=0;f<i.length;f++)if(r===1)isNaN(i[f])&&(i[f]=n[f]);else for(var v=0;v<p;v++)isNaN(i[f][v])&&(i[f][v]=n[f][v])}}function fg(e){if(ca(e)){var t=e.length;if(ca(e[0])){for(var r=[],i=0;i<t;i++)r.push($x.call(e[i]));return r}return $x.call(e)}return e}function dg(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function RG(e){return ca(e&&e[0])?2:1}var Tv=0,pg=1,JL=2,Ed=3,Ux=4,Gx=5,DC=6;function LC(e){return e===Ux||e===Gx}function Ev(e){return e===pg||e===JL}var od=[0,0,0,0],zG=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,i){this._needsSort=!0;var n=this.keyframes,a=n.length,u=!1,o=DC,f=r;if(ca(r)){var p=RG(r);o=p,(p===1&&!Mi(r[0])||p===2&&!Mi(r[0][0]))&&(u=!0)}else if(Mi(r)&&!$g(r))o=Tv;else if(Wt(r))if(!isNaN(+r))o=Tv;else{var v=Qu(r);v&&(f=v,o=Ed)}else if(Rw(r)){var _=xt({},f);_.colorStops=Zt(r.colorStops,function(S){return{offset:S.offset,color:Qu(S.color)}}),WL(r)?o=Ux:ZL(r)&&(o=Gx),f=_}a===0?this.valType=o:(o!==this.valType||o===DC)&&(u=!0),this.discrete=this.discrete||u;var y={time:t,value:f,rawValue:r,percent:0};return i&&(y.easing=i,y.easingFunc=lr(i)?i:BL[i]||$w(i)),n.push(y),y},e.prototype.prepare=function(t,r){var i=this.keyframes;this._needsSort&&i.sort(function(L,I){return L.time-I.time});for(var n=this.valType,a=i.length,u=i[a-1],o=this.discrete,f=Ev(n),p=LC(n),v=0;v<a;v++){var _=i[v],y=_.value,S=u.value;_.percent=_.time/t,o||(f&&v!==a-1?kG(y,S,n):p&&LG(y.colorStops,S.colorStops))}if(!o&&n!==Gx&&r&&this.needsAnimate()&&r.needsAnimate()&&n===r.valType&&!r._finished){this._additiveTrack=r;for(var A=i[0].value,v=0;v<a;v++)n===Tv?i[v].additiveValue=i[v].value-A:n===Ed?i[v].additiveValue=Sv([],i[v].value,A,-1):Ev(n)&&(i[v].additiveValue=n===pg?Sv([],i[v].value,A,-1):PC([],i[v].value,A,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var i=this._additiveTrack!=null,n=i?"additiveValue":"value",a=this.valType,u=this.keyframes,o=u.length,f=this.propName,p=a===Ed,v,_=this._lastFr,y=Math.min,S,A;if(o===1)S=A=u[0];else{if(r<0)v=0;else if(r<this._lastFrP){var L=y(_+1,o-1);for(v=L;v>=0&&!(u[v].percent<=r);v--);v=y(v,o-2)}else{for(v=_;v<o&&!(u[v].percent>r);v++);v=y(v-1,o-2)}A=u[v+1],S=u[v]}if(S&&A){this._lastFr=v,this._lastFrP=r;var I=A.percent-S.percent,M=I===0?1:y((r-S.percent)/I,1);A.easingFunc&&(M=A.easingFunc(M));var D=i?this._additiveValue:p?od:t[f];if((Ev(a)||p)&&!D&&(D=this._additiveValue=[]),this.discrete)t[f]=M<1?S.rawValue:A.rawValue;else if(Ev(a))a===pg?Z0(D,S[n],A[n],M):DG(D,S[n],A[n],M);else if(LC(a)){var O=S[n],N=A[n],q=a===Ux;t[f]={type:q?"linear":"radial",x:ws(O.x,N.x,M),y:ws(O.y,N.y,M),colorStops:Zt(O.colorStops,function(Q,j){var ie=N.colorStops[j];return{offset:ws(Q.offset,ie.offset,M),color:dg(Z0([],Q.color,ie.color,M))}}),global:N.global},q?(t[f].x2=ws(O.x2,N.x2,M),t[f].y2=ws(O.y2,N.y2,M)):t[f].r=ws(O.r,N.r,M)}else if(p)Z0(D,S[n],A[n],M),i||(t[f]=dg(D));else{var Z=ws(S[n],A[n],M);i?this._additiveValue=Z:t[f]=Z}i&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,i=this.propName,n=this._additiveValue;r===Tv?t[i]=t[i]+n:r===Ed?(Qu(t[i],od),Sv(od,od,n,1),t[i]=dg(od)):r===pg?Sv(t[i],t[i],n,1):r===JL&&PC(t[i],t[i],n,1)},e}(),OG=function(){function e(t,r,i,n){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&n){EL("Can' use additive animation on looped animation.");return}this._additiveAnimators=n,this._allowDiscrete=i}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,i){return this.whenWithKeys(t,r,$r(r),i)},e.prototype.whenWithKeys=function(t,r,i,n){for(var a=this._tracks,u=0;u<i.length;u++){var o=i[u],f=a[o];if(!f){f=a[o]=new zG(o);var p=void 0,v=this._getAdditiveTrack(o);if(v){var _=v.keyframes,y=_[_.length-1];p=y&&y.value,v.valType===Ed&&p&&(p=dg(p))}else p=this._target[o];if(p==null)continue;t>0&&f.addKeyframe(0,fg(p),n),this._trackKeys.push(o)}f.addKeyframe(t,fg(r[o]),n)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,i=0;i<r;i++)t[i].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var i=0;i<r.length;i++)r[i].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,i=0;i<r.length;i++)t[r[i]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,i=this._additiveAnimators;if(i)for(var n=0;n<i.length;n++){var a=i[n].getTrack(t);a&&(r=a)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,i=[],n=this._maxTime||0,a=0;a<this._trackKeys.length;a++){var u=this._trackKeys[a],o=this._tracks[u],f=this._getAdditiveTrack(u),p=o.keyframes,v=p.length;if(o.prepare(n,f),o.needsAnimate())if(!this._allowDiscrete&&o.discrete){var _=p[v-1];_&&(r._target[o.propName]=_.rawValue),o.setFinished()}else i.push(o)}if(i.length||this._force){var y=new bG({life:n,loop:this._loop,delay:this._delay||0,onframe:function(S){r._started=2;var A=r._additiveAnimators;if(A){for(var L=!1,I=0;I<A.length;I++)if(A[I]._clip){L=!0;break}L||(r._additiveAnimators=null)}for(var I=0;I<i.length;I++)i[I].step(r._target,S);var M=r._onframeCbs;if(M)for(var I=0;I<M.length;I++)M[I](r._target,S)},ondestroy:function(){r._doneCallback()}});this._clip=y,this.animation&&this.animation.addClip(y),t&&y.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return Zt(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var i=this._tracks,n=this._trackKeys,a=0;a<t.length;a++){var u=i[t[a]];u&&!u.isFinished()&&(r?u.step(this._target,1):this._started===1&&u.step(this._target,0),u.setFinished())}for(var o=!0,a=0;a<n.length;a++)if(!i[n[a]].isFinished()){o=!1;break}return o&&this._abortedCallback(),o},e.prototype.saveTo=function(t,r,i){if(t){r=r||this._trackKeys;for(var n=0;n<r.length;n++){var a=r[n],u=this._tracks[a];if(!(!u||u.isFinished())){var o=u.keyframes,f=o[i?0:o.length-1];f&&(t[a]=fg(f.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||$r(t);for(var i=0;i<r.length;i++){var n=r[i],a=this._tracks[n];if(a){var u=a.keyframes;if(u.length>1){var o=u.pop();a.addKeyframe(o.time,t[n]),a.prepare(this._maxTime,a.getAdditiveTrack())}}}},e}();const Gw=OG;function ph(){return new Date().getTime()}var BG=function(e){It(t,e);function t(r){var i=e.call(this)||this;return i._running=!1,i._time=0,i._pausedTime=0,i._pauseStart=0,i._paused=!1,r=r||{},i.stage=r.stage||{},i}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var i=r.getClip();i&&this.addClip(i)},t.prototype.removeClip=function(r){if(r.animation){var i=r.prev,n=r.next;i?i.next=n:this._head=n,n?n.prev=i:this._tail=i,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var i=r.getClip();i&&this.removeClip(i),r.animation=null},t.prototype.update=function(r){for(var i=ph()-this._pausedTime,n=i-this._time,a=this._head;a;){var u=a.next,o=a.step(i,n);o&&(a.ondestroy(),this.removeClip(a)),a=u}this._time=i,r||(this.trigger("frame",n),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function i(){r._running&&(wC(i),!r._paused&&r.update())}wC(i)},t.prototype.start=function(){this._running||(this._time=ph(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=ph(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=ph()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var i=r.next;r.prev=r.next=r.animation=null,r=i}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,i){i=i||{},this.start();var n=new Gw(r,i.loop);return this.addAnimator(n),n},t}(ks);const FG=BG;var NG=300,X0=xr.domSupported,Y0=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},i=Zt(e,function(n){var a=n.replace("mouse","pointer");return r.hasOwnProperty(a)?a:n});return{mouse:e,touch:t,pointer:i}}(),kC={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},RC=!1;function Hx(e){var t=e.pointerType;return t==="pen"||t==="touch"}function VG(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function K0(e){e&&(e.zrByTouch=!0)}function $G(e,t){return Fa(e.dom,new UG(e,t),!0)}function QL(e,t){for(var r=t,i=!1;r&&r.nodeType!==9&&!(i=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return i}var UG=function(){function e(t,r){this.stopPropagation=Zn,this.stopImmediatePropagation=Zn,this.preventDefault=Zn,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),uo={mousedown:function(e){e=Fa(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Fa(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=Fa(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=Fa(this.dom,e);var t=e.toElement||e.relatedTarget;QL(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){RC=!0,e=Fa(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){RC||(e=Fa(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=Fa(this.dom,e),K0(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),uo.mousemove.call(this,e),uo.mousedown.call(this,e)},touchmove:function(e){e=Fa(this.dom,e),K0(e),this.handler.processGesture(e,"change"),uo.mousemove.call(this,e)},touchend:function(e){e=Fa(this.dom,e),K0(e),this.handler.processGesture(e,"end"),uo.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<NG&&uo.click.call(this,e)},pointerdown:function(e){uo.mousedown.call(this,e)},pointermove:function(e){Hx(e)||uo.mousemove.call(this,e)},pointerup:function(e){uo.mouseup.call(this,e)},pointerout:function(e){Hx(e)||uo.mouseout.call(this,e)}};Ee(["click","dblclick","contextmenu"],function(e){uo[e]=function(t){t=Fa(this.dom,t),this.trigger(e,t)}});var qx={pointermove:function(e){Hx(e)||qx.mousemove.call(this,e)},pointerup:function(e){qx.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function GG(e,t){var r=t.domHandlers;xr.pointerEventsSupported?Ee(Y0.pointer,function(i){mg(t,i,function(n){r[i].call(e,n)})}):(xr.touchEventsSupported&&Ee(Y0.touch,function(i){mg(t,i,function(n){r[i].call(e,n),VG(t)})}),Ee(Y0.mouse,function(i){mg(t,i,function(n){n=Bw(n),t.touching||r[i].call(e,n)})}))}function HG(e,t){xr.pointerEventsSupported?Ee(kC.pointer,r):xr.touchEventsSupported||Ee(kC.mouse,r);function r(i){function n(a){a=Bw(a),QL(e,a.target)||(a=$G(e,a),t.domHandlers[i].call(e,a))}mg(t,i,n,{capture:!0})}}function mg(e,t,r,i){e.mounted[t]=r,e.listenerOpts[t]=i,XU(e.domTarget,t,r,i)}function J0(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&YU(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var zC=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),qG=function(e){It(t,e);function t(r,i){var n=e.call(this)||this;return n.__pointerCapturing=!1,n.dom=r,n.painterRoot=i,n._localHandlerScope=new zC(r,uo),X0&&(n._globalHandlerScope=new zC(document,qx)),GG(n,n._localHandlerScope),n}return t.prototype.dispose=function(){J0(this._localHandlerScope),X0&&J0(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,X0&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var i=this._globalHandlerScope;r?HG(this,i):J0(i)}},t}(ks);const jG=qG;var ek=1;xr.hasGlobalWindow&&(ek=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var OC=ek,jx=.4,Wx="#333",Zx="#ccc",WG="#eee",BC=Fw,FC=5e-5;function xu(e){return e>FC||e<-FC}var bu=[],Yc=[],Q0=cp(),e1=Math.abs,ZG=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return xu(this.rotation)||xu(this.x)||xu(this.y)||xu(this.scaleX-1)||xu(this.scaleY-1)||xu(this.skewX)||xu(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),i=this.transform;if(!(r||t)){i&&BC(i);return}i=i||cp(),r?this.getLocalTransform(i):BC(i),t&&(r?bh(i,t,i):QU(i,t)),this.transform=i,this._resolveGlobalScaleRatio(i)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(bu);var i=bu[0]<0?-1:1,n=bu[1]<0?-1:1,a=((bu[0]-i)*r+i)/bu[0]||0,u=((bu[1]-n)*r+n)/bu[1]||0;t[0]*=a,t[1]*=a,t[2]*=u,t[3]*=u}this.invTransform=this.invTransform||cp(),Vw(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(t){var r=t[0]*t[0]+t[1]*t[1],i=t[2]*t[2]+t[3]*t[3],n=Math.atan2(t[1],t[0]),a=Math.PI/2+n-Math.atan2(t[3],t[2]);i=Math.sqrt(i)*Math.cos(a),r=Math.sqrt(r),this.skewX=a,this.skewY=0,this.rotation=-n,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=i,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(bh(Yc,t.invTransform,r),r=Yc);var i=this.originX,n=this.originY;(i||n)&&(Q0[4]=i,Q0[5]=n,bh(Yc,r,Q0),Yc[4]-=i,Yc[5]-=n,r=Yc),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var i=[t,r],n=this.invTransform;return n&&Za(i,i,n),i},e.prototype.transformCoordToGlobal=function(t,r){var i=[t,r],n=this.transform;return n&&Za(i,i,n),i},e.prototype.getLineScale=function(){var t=this.transform;return t&&e1(t[0]-1)>1e-10&&e1(t[3]-1)>1e-10?Math.sqrt(e1(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){tk(this,t)},e.getLocalTransform=function(t,r){r=r||[];var i=t.originX||0,n=t.originY||0,a=t.scaleX,u=t.scaleY,o=t.anchorX,f=t.anchorY,p=t.rotation||0,v=t.x,_=t.y,y=t.skewX?Math.tan(t.skewX):0,S=t.skewY?Math.tan(-t.skewY):0;if(i||n||o||f){var A=i+o,L=n+f;r[4]=-A*a-y*L*u,r[5]=-L*u-S*A*a}else r[4]=r[5]=0;return r[0]=a,r[3]=u,r[1]=S*a,r[2]=y*u,p&&Nw(r,r,p),r[4]+=i+v,r[5]+=n+_,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),fp=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function tk(e,t){for(var r=0;r<fp.length;r++){var i=fp[r];e[i]=t[i]}}const Hw=ZG;var NC={};function Ta(e,t){t=t||Rl;var r=NC[t];r||(r=NC[t]=new Gp(500));var i=r.get(e);return i==null&&(i=$p.measureText(e,t).width,r.put(e,i)),i}function VC(e,t,r,i){var n=Ta(e,t),a=O_(t),u=Cd(0,n,r),o=lh(0,a,i),f=new ii(u,o,n,a);return f}function qw(e,t,r,i){var n=((e||"")+"").split(`
`),a=n.length;if(a===1)return VC(n[0],t,r,i);for(var u=new ii(0,0,0,0),o=0;o<n.length;o++){var f=VC(n[o],t,r,i);o===0?u.copy(f):u.union(f)}return u}function Cd(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function lh(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function O_(e){return Ta("",e)}function ac(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function rk(e,t,r){var i=t.position||"inside",n=t.distance!=null?t.distance:5,a=r.height,u=r.width,o=a/2,f=r.x,p=r.y,v="left",_="top";if(i instanceof Array)f+=ac(i[0],r.width),p+=ac(i[1],r.height),v=null,_=null;else switch(i){case"left":f-=n,p+=o,v="right",_="middle";break;case"right":f+=n+u,p+=o,_="middle";break;case"top":f+=u/2,p-=n,v="center",_="bottom";break;case"bottom":f+=u/2,p+=a+n,v="center";break;case"inside":f+=u/2,p+=o,v="center",_="middle";break;case"insideLeft":f+=n,p+=o,_="middle";break;case"insideRight":f+=u-n,p+=o,v="right",_="middle";break;case"insideTop":f+=u/2,p+=n,v="center";break;case"insideBottom":f+=u/2,p+=a-n,v="center",_="bottom";break;case"insideTopLeft":f+=n,p+=n;break;case"insideTopRight":f+=u-n,p+=n,v="right";break;case"insideBottomLeft":f+=n,p+=a-n,_="bottom";break;case"insideBottomRight":f+=u-n,p+=a-n,v="right",_="bottom";break}return e=e||{},e.x=f,e.y=p,e.align=v,e.verticalAlign=_,e}var t1="__zr_normal__",r1=fp.concat(["ignore"]),XG=Zh(fp,function(e,t){return e[t]=!0,e},{ignore:!1}),Kc={},YG=new ii(0,0,0,0),jw=function(){function e(t){this.id=TL(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,i){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var n=this.transform;n||(n=this.transform=[1,0,0,1,0,0]),n[4]+=t,n[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var i=this.textConfig,n=i.local,a=r.innerTransformable,u=void 0,o=void 0,f=!1;a.parent=n?this:null;var p=!1;if(a.copyTransform(r),i.position!=null){var v=YG;i.layoutRect?v.copy(i.layoutRect):v.copy(this.getBoundingRect()),n||v.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Kc,i,v):rk(Kc,i,v),a.x=Kc.x,a.y=Kc.y,u=Kc.align,o=Kc.verticalAlign;var _=i.origin;if(_&&i.rotation!=null){var y=void 0,S=void 0;_==="center"?(y=v.width*.5,S=v.height*.5):(y=ac(_[0],v.width),S=ac(_[1],v.height)),p=!0,a.originX=-a.x+y+(n?0:v.x),a.originY=-a.y+S+(n?0:v.y)}}i.rotation!=null&&(a.rotation=i.rotation);var A=i.offset;A&&(a.x+=A[0],a.y+=A[1],p||(a.originX=-A[0],a.originY=-A[1]));var L=i.inside==null?typeof i.position=="string"&&i.position.indexOf("inside")>=0:i.inside,I=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),M=void 0,D=void 0,O=void 0;L&&this.canBeInsideText()?(M=i.insideFill,D=i.insideStroke,(M==null||M==="auto")&&(M=this.getInsideTextFill()),(D==null||D==="auto")&&(D=this.getInsideTextStroke(M),O=!0)):(M=i.outsideFill,D=i.outsideStroke,(M==null||M==="auto")&&(M=this.getOutsideFill()),(D==null||D==="auto")&&(D=this.getOutsideStroke(M),O=!0)),M=M||"#000",(M!==I.fill||D!==I.stroke||O!==I.autoStroke||u!==I.align||o!==I.verticalAlign)&&(f=!0,I.fill=M,I.stroke=D,I.autoStroke=O,I.align=u,I.verticalAlign=o,r.setDefaultTextStyle(I)),r.__dirty|=$o,f&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?Zx:Wx},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),i=typeof r=="string"&&Qu(r);i||(i=[255,255,255,1]);for(var n=i[3],a=this.__zr.isDarkMode(),u=0;u<3;u++)i[u]=i[u]*n+(a?0:255)*(1-n);return i[3]=1,qL(i,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},xt(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(Kt(t))for(var i=t,n=$r(i),a=0;a<n.length;a++){var u=n[a];this.attrKV(u,t[u])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,i=0;i<this.animators.length;i++){var n=this.animators[i],a=n.__fromStateTransition;if(!(n.getLoop()||a&&a!==t1)){var u=n.targetName,o=u?r[u]:r;n.saveTo(o)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,r1)},e.prototype._savePrimaryToNormal=function(t,r,i){for(var n=0;n<i.length;n++){var a=i[n];t[a]!=null&&!(a in r)&&(r[a]=this[a])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(t1,!1,t)},e.prototype.useState=function(t,r,i,n){var a=t===t1,u=this.hasState();if(!(!u&&a)){var o=this.currentStates,f=this.stateTransition;if(!(ri(o,t)>=0&&(r||o.length===1))){var p;if(this.stateProxy&&!a&&(p=this.stateProxy(t)),p||(p=this.states&&this.states[t]),!p&&!a){EL("State "+t+" not exists.");return}a||this.saveCurrentToNormalState(p);var v=!!(p&&p.hoverLayer||n);v&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,p,this._normalState,r,!i&&!this.__inHover&&f&&f.duration>0,f);var _=this._textContent,y=this._textGuide;return _&&_.useState(t,r,i,v),y&&y.useState(t,r,i,v),a?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!v&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~$o),p}}},e.prototype.useStates=function(t,r,i){if(!t.length)this.clearStates();else{var n=[],a=this.currentStates,u=t.length,o=u===a.length;if(o){for(var f=0;f<u;f++)if(t[f]!==a[f]){o=!1;break}}if(o)return;for(var f=0;f<u;f++){var p=t[f],v=void 0;this.stateProxy&&(v=this.stateProxy(p,t)),v||(v=this.states[p]),v&&n.push(v)}var _=n[u-1],y=!!(_&&_.hoverLayer||i);y&&this._toggleHoverLayerFlag(!0);var S=this._mergeStates(n),A=this.stateTransition;this.saveCurrentToNormalState(S),this._applyStateObj(t.join(","),S,this._normalState,!1,!r&&!this.__inHover&&A&&A.duration>0,A);var L=this._textContent,I=this._textGuide;L&&L.useStates(t,r,y),I&&I.useStates(t,r,y),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!y&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~$o)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=ri(this.currentStates,t);if(r>=0){var i=this.currentStates.slice();i.splice(r,1),this.useStates(i)}},e.prototype.replaceState=function(t,r,i){var n=this.currentStates.slice(),a=ri(n,t),u=ri(n,r)>=0;a>=0?u?n.splice(a,1):n[a]=r:i&&!u&&n.push(r),this.useStates(n)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},i,n=0;n<t.length;n++){var a=t[n];xt(r,a),a.textConfig&&(i=i||{},xt(i,a.textConfig))}return i&&(r.textConfig=i),r},e.prototype._applyStateObj=function(t,r,i,n,a,u){var o=!(r&&n);r&&r.textConfig?(this.textConfig=xt({},n?this.textConfig:i.textConfig),xt(this.textConfig,r.textConfig)):o&&i.textConfig&&(this.textConfig=i.textConfig);for(var f={},p=!1,v=0;v<r1.length;v++){var _=r1[v],y=a&&XG[_];r&&r[_]!=null?y?(p=!0,f[_]=r[_]):this[_]=r[_]:o&&i[_]!=null&&(y?(p=!0,f[_]=i[_]):this[_]=i[_])}if(!a)for(var v=0;v<this.animators.length;v++){var S=this.animators[v],A=S.targetName;S.getLoop()||S.__changeFinalValue(A?(r||i)[A]:r||i)}p&&this._transitionState(t,f,u)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new Hw,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),xt(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=$o;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,i=this._textGuide;r&&(r.__inHover=t),i&&(i.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var i=0;i<r.length;i++)t.animation.addAnimator(r[i]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var r=this.animators;if(r)for(var i=0;i<r.length;i++)t.animation.removeAnimator(r[i]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,i){var n=t?this[t]:this,a=new Gw(n,r,i);return t&&(a.targetName=t),this.addAnimator(a,t),a},e.prototype.addAnimator=function(t,r){var i=this.__zr,n=this;t.during(function(){n.updateDuringAnimation(r)}).done(function(){var a=n.animators,u=ri(a,t);u>=0&&a.splice(u,1)}),this.animators.push(t),i&&i.animation.addAnimator(t),i&&i.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var i=this.animators,n=i.length,a=[],u=0;u<n;u++){var o=i[u];!t||t===o.scope?o.stop(r):a.push(o)}return this.animators=a,this},e.prototype.animateTo=function(t,r,i){i1(this,t,r,i)},e.prototype.animateFrom=function(t,r,i){i1(this,t,r,i,!0)},e.prototype._transitionState=function(t,r,i,n){for(var a=i1(this,r,i,n),u=0;u<a.length;u++)a[u].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=$o;function r(i,n,a,u){Object.defineProperty(t,i,{get:function(){if(!this[n]){var f=this[n]=[];o(this,f)}return this[n]},set:function(f){this[a]=f[0],this[u]=f[1],this[n]=f,o(this,f)}});function o(f,p){Object.defineProperty(p,0,{get:function(){return f[a]},set:function(v){f[a]=v}}),Object.defineProperty(p,1,{get:function(){return f[u]},set:function(v){f[u]=v}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();bo(jw,ks);bo(jw,Hw);function i1(e,t,r,i,n){r=r||{};var a=[];ik(e,"",e,t,r,i,a,n);var u=a.length,o=!1,f=r.done,p=r.aborted,v=function(){o=!0,u--,u<=0&&(o?f&&f():p&&p())},_=function(){u--,u<=0&&(o?f&&f():p&&p())};u||f&&f(),a.length>0&&r.during&&a[0].during(function(A,L){r.during(L)});for(var y=0;y<a.length;y++){var S=a[y];v&&S.done(v),_&&S.aborted(_),r.force&&S.duration(r.duration),S.start(r.easing)}return a}function n1(e,t,r){for(var i=0;i<r;i++)e[i]=t[i]}function KG(e){return ca(e[0])}function JG(e,t,r){if(ca(t[r]))if(ca(e[r])||(e[r]=[]),Ea(t[r])){var i=t[r].length;e[r].length!==i&&(e[r]=new t[r].constructor(i),n1(e[r],t[r],i))}else{var n=t[r],a=e[r],u=n.length;if(KG(n))for(var o=n[0].length,f=0;f<u;f++)a[f]?n1(a[f],n[f],o):a[f]=Array.prototype.slice.call(n[f]);else n1(a,n,u);a.length=n.length}else e[r]=t[r]}function QG(e,t){return e===t||ca(e)&&ca(t)&&eH(e,t)}function eH(e,t){var r=e.length;if(r!==t.length)return!1;for(var i=0;i<r;i++)if(e[i]!==t[i])return!1;return!0}function ik(e,t,r,i,n,a,u,o){for(var f=$r(i),p=n.duration,v=n.delay,_=n.additive,y=n.setToFinal,S=!Kt(a),A=e.animators,L=[],I=0;I<f.length;I++){var M=f[I],D=i[M];if(D!=null&&r[M]!=null&&(S||a[M]))if(Kt(D)&&!ca(D)&&!Rw(D)){if(t){o||(r[M]=D,e.updateDuringAnimation(t));continue}ik(e,M,r[M],D,n,a&&a[M],u,o)}else L.push(M);else o||(r[M]=D,e.updateDuringAnimation(t),L.push(M))}var O=L.length;if(!_&&O)for(var N=0;N<A.length;N++){var q=A[N];if(q.targetName===t){var Z=q.stopTracks(L);if(Z){var Q=ri(A,q);A.splice(Q,1)}}}if(n.force||(L=Pn(L,function(he){return!QG(i[he],r[he])}),O=L.length),O>0||n.force&&!u.length){var j=void 0,ie=void 0,ae=void 0;if(o){ie={},y&&(j={});for(var N=0;N<O;N++){var M=L[N];ie[M]=r[M],y?j[M]=i[M]:r[M]=i[M]}}else if(y){ae={};for(var N=0;N<O;N++){var M=L[N];ae[M]=fg(r[M]),JG(r,i,M)}}var q=new Gw(r,!1,!1,_?Pn(A,function(ue){return ue.targetName===t}):null);q.targetName=t,n.scope&&(q.scope=n.scope),y&&j&&q.whenWithKeys(0,j,L),ae&&q.whenWithKeys(0,ae,L),q.whenWithKeys(p??500,o?ie:i,L).delay(v||0),e.addAnimator(q,t),u.push(q)}}const nk=jw;var ak=function(e){It(t,e);function t(r){var i=e.call(this)||this;return i.isGroup=!0,i._children=[],i.attr(r),i}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var i=this._children,n=0;n<i.length;n++)if(i[n].name===r)return i[n]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,i){if(r&&r!==this&&r.parent!==this&&i&&i.parent===this){var n=this._children,a=n.indexOf(i);a>=0&&(n.splice(a,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,i){var n=ri(this._children,r);return n>=0&&this.replaceAt(i,n),this},t.prototype.replaceAt=function(r,i){var n=this._children,a=n[i];if(r&&r!==this&&r.parent!==this&&r!==a){n[i]=r,a.parent=null;var u=this.__zr;u&&a.removeSelfFromZr(u),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var i=this.__zr;i&&i!==r.__zr&&r.addSelfToZr(i),i&&i.refresh()},t.prototype.remove=function(r){var i=this.__zr,n=this._children,a=ri(n,r);return a<0?this:(n.splice(a,1),r.parent=null,i&&r.removeSelfFromZr(i),i&&i.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,i=this.__zr,n=0;n<r.length;n++){var a=r[n];i&&a.removeSelfFromZr(i),a.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,i){for(var n=this._children,a=0;a<n.length;a++){var u=n[a];r.call(i,u,a)}return this},t.prototype.traverse=function(r,i){for(var n=0;n<this._children.length;n++){var a=this._children[n],u=r.call(i,a);a.isGroup&&!u&&a.traverse(r,i)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var i=0;i<this._children.length;i++){var n=this._children[i];n.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var i=0;i<this._children.length;i++){var n=this._children[i];n.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var i=new ii(0,0,0,0),n=r||this._children,a=[],u=null,o=0;o<n.length;o++){var f=n[o];if(!(f.ignore||f.invisible)){var p=f.getBoundingRect(),v=f.getLocalTransform(a);v?(ii.applyTransform(i,p,v),u=u||i.clone(),u.union(i)):(u=u||p.clone(),u.union(p))}}return u||i},t}(nk);ak.prototype.type="group";const _n=ak;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var vg={},ok={};function tH(e){delete ok[e]}function rH(e){if(!e)return!1;if(typeof e=="string")return qg(e,1)<jx;if(e.colorStops){for(var t=e.colorStops,r=0,i=t.length,n=0;n<i;n++)r+=qg(t[n].color,1);return r/=i,r<jx}return!1}var iH=function(){function e(t,r,i){var n=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,i=i||{},this.dom=r,this.id=t;var a=new dG,u=i.renderer||"canvas";vg[u]||(u=$r(vg)[0]),i.useDirtyRect=i.useDirtyRect==null?!1:i.useDirtyRect;var o=new vg[u](r,a,i,t),f=i.ssr||o.ssrOnly;this.storage=a,this.painter=o;var p=!xr.node&&!xr.worker&&!f?new jG(o.getViewportRoot(),o.root):null,v=i.useCoarsePointer,_=v==null||v==="auto"?xr.touchEventsSupported:!!v,y=44,S;_&&(S=br(i.pointerSize,y)),this.handler=new lG(a,o,p,o.root,S),this.animation=new FG({stage:{update:f?null:function(){return n._flush(!0)}}}),f||this.animation.start()}return e.prototype.add=function(t){t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=rH(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,i=ph();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var n=ph();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:n-i})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,i){return this.handler.on(t,r,i),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof _n&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,tH(this.id)},e}();function $C(e,t){var r=new iH(TL(),e,t);return ok[r.id]=r,r}function nH(e,t){vg[e]=t}var UC=1e-4,sk=20;function aH(e){return e.replace(/^\s+|\s+$/g,"")}function GC(e,t,r,i){var n=t[0],a=t[1],u=r[0],o=r[1],f=a-n,p=o-u;if(f===0)return p===0?u:(u+o)/2;if(i)if(f>0){if(e<=n)return u;if(e>=a)return o}else{if(e>=n)return u;if(e<=a)return o}else{if(e===n)return u;if(e===a)return o}return(e-n)/f*p+u}function mn(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Wt(e)?aH(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function Ji(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),sk),e=(+e).toFixed(t),r?e:+e}function Bh(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return oH(e)}function oH(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),i=r>0?+t.slice(r+1):0,n=r>0?r:t.length,a=t.indexOf("."),u=a<0?0:n-1-a;return Math.max(0,u-i)}function sH(e,t){var r=Math.log,i=Math.LN10,n=Math.floor(r(e[1]-e[0])/i),a=Math.round(r(Math.abs(t[1]-t[0]))/i),u=Math.min(Math.max(-n+a,0),20);return isFinite(u)?u:20}function lH(e,t){var r=Math.max(Bh(e),Bh(t)),i=e+t;return r>sk?i:Ji(i,r)}function lk(e){var t=Math.PI*2;return(e%t+t)%t}function Wg(e){return e>-UC&&e<UC}var uH=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Ps(e){if(e instanceof Date)return e;if(Wt(e)){var t=uH.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function cH(e){return Math.pow(10,Ww(e))}function Ww(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function uk(e,t){var r=Ww(e),i=Math.pow(10,r),n=e/i,a;return t?n<1.5?a=1:n<2.5?a=2:n<4?a=3:n<7?a=5:a=10:n<1?a=1:n<2?a=2:n<3?a=3:n<5?a=5:a=10,e=a*i,r>=-20?+e.toFixed(r<0?-r:0):e}function Zg(e){var t=parseFloat(e);return t==e&&(t!==0||!Wt(e)||e.indexOf("x")<=0)?t:NaN}function hH(e){return!isNaN(Zg(e))}function ck(){return Math.round(Math.random()*9)}function hk(e,t){return t===0?e:hk(t,e%t)}function HC(e,t){return e==null?t:t==null?e:e*t/hk(e,t)}function aa(e){throw new Error(e)}var fk="series\0",fH="\0_ec_\0";function Xn(e){return e instanceof Array?e:e==null?[]:[e]}function Xx(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var i=0,n=r.length;i<n;i++){var a=r[i];!e.emphasis[t].hasOwnProperty(a)&&e[t].hasOwnProperty(a)&&(e.emphasis[t][a]=e[t][a])}}}var qC=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Hp(e){return Kt(e)&&!Ft(e)&&!(e instanceof Date)?e.value:e}function dH(e){return Kt(e)&&!(e instanceof Array)}function pH(e,t,r){var i=r==="normalMerge",n=r==="replaceMerge",a=r==="replaceAll";e=e||[],t=(t||[]).slice();var u=wr();Ee(t,function(f,p){if(!Kt(f)){t[p]=null;return}});var o=mH(e,u,r);return(i||n)&&vH(o,e,u,t),i&&gH(o,t),i||n?_H(o,t,n):a&&yH(o,t),xH(o),o}function mH(e,t,r){var i=[];if(r==="replaceAll")return i;for(var n=0;n<e.length;n++){var a=e[n];a&&a.id!=null&&t.set(a.id,n),i.push({existing:r==="replaceMerge"||dp(a)?null:a,newOption:null,keyInfo:null,brandNew:null})}return i}function vH(e,t,r,i){Ee(i,function(n,a){if(!(!n||n.id==null)){var u=Ud(n.id),o=r.get(u);if(o!=null){var f=e[o];_o(!f.newOption,'Duplicated option on id "'+u+'".'),f.newOption=n,f.existing=t[o],i[a]=null}}})}function gH(e,t){Ee(t,function(r,i){if(!(!r||r.name==null))for(var n=0;n<e.length;n++){var a=e[n].existing;if(!e[n].newOption&&a&&(a.id==null||r.id==null)&&!dp(r)&&!dp(a)&&dk("name",a,r)){e[n].newOption=r,t[i]=null;return}}})}function _H(e,t,r){Ee(t,function(i){if(i){for(var n,a=0;(n=e[a])&&(n.newOption||dp(n.existing)||n.existing&&i.id!=null&&!dk("id",i,n.existing));)a++;n?(n.newOption=i,n.brandNew=r):e.push({newOption:i,brandNew:r,existing:null,keyInfo:null}),a++}})}function yH(e,t){Ee(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function xH(e){var t=wr();Ee(e,function(r){var i=r.existing;i&&t.set(i.id,r)}),Ee(e,function(r){var i=r.newOption;_o(!i||i.id==null||!t.get(i.id)||t.get(i.id)===r,"id duplicates: "+(i&&i.id)),i&&i.id!=null&&t.set(i.id,r),!r.keyInfo&&(r.keyInfo={})}),Ee(e,function(r,i){var n=r.existing,a=r.newOption,u=r.keyInfo;if(Kt(a)){if(u.name=a.name!=null?Ud(a.name):n?n.name:fk+i,n)u.id=Ud(n.id);else if(a.id!=null)u.id=Ud(a.id);else{var o=0;do u.id="\0"+u.name+"\0"+o++;while(t.get(u.id))}t.set(u.id,r)}})}function dk(e,t,r){var i=Wo(t[e],null),n=Wo(r[e],null);return i!=null&&n!=null&&i===n}function Ud(e){return Wo(e,"")}function Wo(e,t){return e==null?t:Wt(e)?e:Mi(e)||Px(e)?e+"":t}function pk(e){var t=e.name;return!!(t&&t.indexOf(fk))}function dp(e){return e&&e.id!=null&&Ud(e.id).indexOf(fH)===0}function bH(e,t,r){Ee(e,function(i){var n=i.newOption;Kt(n)&&(i.keyInfo.mainType=t,i.keyInfo.subType=wH(t,n,i.existing,r))})}function wH(e,t,r,i){var n=t.type?t.type:r?r.subType:i.determineSubType(e,t);return n}function qp(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return Ft(t.dataIndex)?Zt(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return Ft(t.name)?Zt(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function zi(){var e="__ec_inner_"+SH++;return function(t){return t[e]||(t[e]={})}}var SH=ck();function a1(e,t,r){var i=Zw(t,r),n=i.mainTypeSpecified,a=i.queryOptionMap,u=i.others,o=u,f=r?r.defaultMainType:null;return!n&&f&&a.set(f,{}),a.each(function(p,v){var _=jp(e,v,p,{useDefault:f===v,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});o[v+"Models"]=_.models,o[v+"Model"]=_.models[0]}),o}function Zw(e,t){var r;if(Wt(e)){var i={};i[e+"Index"]=0,r=i}else r=e;var n=wr(),a={},u=!1;return Ee(r,function(o,f){if(f==="dataIndex"||f==="dataIndexInside"){a[f]=o;return}var p=f.match(/^(\w+)(Index|Id|Name)$/)||[],v=p[1],_=(p[2]||"").toLowerCase();if(!(!v||!_||t&&t.includeMainTypes&&ri(t.includeMainTypes,v)<0)){u=u||!!v;var y=n.get(v)||n.set(v,{});y[_]=o}}),{mainTypeSpecified:u,queryOptionMap:n,others:a}}var mo={useDefault:!0,enableAll:!1,enableNone:!1};function jp(e,t,r,i){i=i||mo;var n=r.index,a=r.id,u=r.name,o={models:null,specified:n!=null||a!=null||u!=null};if(!o.specified){var f=void 0;return o.models=i.useDefault&&(f=e.getComponent(t))?[f]:[],o}return n==="none"||n===!1?(_o(i.enableNone,'`"none"` or `false` is not a valid value on index option.'),o.models=[],o):(n==="all"&&(_o(i.enableAll,'`"all"` is not a valid value on index option.'),n=a=u=null),o.models=e.queryComponents({mainType:t,index:n,id:a,name:u}),o)}function mk(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function TH(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function EH(e){return e==="auto"?xr.domSupported?"html":"richText":e||"html"}var CH=".",wu="___EC__COMPONENT__CONTAINER___",vk="___EC__EXTENDED_CLASS___";function Ho(e){var t={main:"",sub:""};if(e){var r=e.split(CH);t.main=r[0]||"",t.sub=r[1]||""}return t}function AH(e){_o(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function MH(e){return!!(e&&e[vk])}function Xw(e,t){e.$constructor=e,e.extend=function(r){var i=this,n;return IH(i)?n=function(a){It(u,a);function u(){return a.apply(this,arguments)||this}return u}(i):(n=function(){(r.$constructor||i).apply(this,arguments)},MU(n,this)),xt(n.prototype,r),n[vk]=!0,n.extend=this.extend,n.superCall=LH,n.superApply=kH,n.superClass=i,n}}function IH(e){return lr(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function gk(e,t){e.extend=t.extend}var PH=Math.round(Math.random()*10);function DH(e){var t=["__\0is_clz",PH++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function LH(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return this.superClass.prototype[t].apply(e,r)}function kH(e,t,r){return this.superClass.prototype[t].apply(e,r)}function B_(e){var t={};e.registerClass=function(i){var n=i.type||i.prototype.type;if(n){AH(n),i.prototype.type=n;var a=Ho(n);if(!a.sub)t[a.main]=i;else if(a.sub!==wu){var u=r(a);u[a.sub]=i}}return i},e.getClass=function(i,n,a){var u=t[i];if(u&&u[wu]&&(u=n?u[n]:null),a&&!u)throw new Error(n?"Component "+i+"."+(n||"")+" is used but not imported.":i+".type should be specified.");return u},e.getClassesByMainType=function(i){var n=Ho(i),a=[],u=t[n.main];return u&&u[wu]?Ee(u,function(o,f){f!==wu&&a.push(o)}):a.push(u),a},e.hasClass=function(i){var n=Ho(i);return!!t[n.main]},e.getAllClassMainTypes=function(){var i=[];return Ee(t,function(n,a){i.push(a)}),i},e.hasSubTypes=function(i){var n=Ho(i),a=t[n.main];return a&&a[wu]};function r(i){var n=t[i.main];return(!n||!n[wu])&&(n=t[i.main]={},n[wu]=!0),n}}function pp(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(i,n,a){for(var u={},o=0;o<e.length;o++){var f=e[o][1];if(!(n&&ri(n,f)>=0||a&&ri(a,f)<0)){var p=i.getShallow(f,t);p!=null&&(u[e[o][0]]=p)}}return u}}var RH=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],zH=pp(RH),OH=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return zH(this,t,r)},e}(),Yx=new Gp(50);function BH(e){if(typeof e=="string"){var t=Yx.get(e);return t&&t.image}else return e}function Yw(e,t,r,i,n){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var a=Yx.get(e),u={hostEl:r,cb:i,cbPayload:n};return a?(t=a.image,!F_(t)&&a.pending.push(u)):(t=$p.loadImage(e,jC,jC),t.__zrImageSrc=e,Yx.put(e,t.__cachedImgObj={image:t,pending:[u]})),t}else return e;else return t}function jC(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],i=r.cb;i&&i(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function F_(e){return e&&e.width&&e.height}var o1=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function FH(e,t,r,i,n){if(!t)return"";var a=(e+"").split(`
`);n=_k(t,r,i,n);for(var u=0,o=a.length;u<o;u++)a[u]=yk(a[u],n);return a.join(`
`)}function _k(e,t,r,i){i=i||{};var n=xt({},i);n.font=t,r=br(r,"..."),n.maxIterations=br(i.maxIterations,2);var a=n.minChar=br(i.minChar,0);n.cnCharWidth=Ta("",t);var u=n.ascCharWidth=Ta("a",t);n.placeholder=br(i.placeholder,"");for(var o=e=Math.max(0,e-1),f=0;f<a&&o>=u;f++)o-=u;var p=Ta(r,t);return p>o&&(r="",p=0),o=e-p,n.ellipsis=r,n.ellipsisWidth=p,n.contentWidth=o,n.containerWidth=e,n}function yk(e,t){var r=t.containerWidth,i=t.font,n=t.contentWidth;if(!r)return"";var a=Ta(e,i);if(a<=r)return e;for(var u=0;;u++){if(a<=n||u>=t.maxIterations){e+=t.ellipsis;break}var o=u===0?NH(e,n,t.ascCharWidth,t.cnCharWidth):a>0?Math.floor(e.length*n/a):0;e=e.substr(0,o),a=Ta(e,i)}return e===""&&(e=t.placeholder),e}function NH(e,t,r,i){for(var n=0,a=0,u=e.length;a<u&&n<t;a++){var o=e.charCodeAt(a);n+=0<=o&&o<=127?r:i}return a}function VH(e,t){e!=null&&(e+="");var r=t.overflow,i=t.padding,n=t.font,a=r==="truncate",u=O_(n),o=br(t.lineHeight,u),f=!!t.backgroundColor,p=t.lineOverflow==="truncate",v=t.width,_;v!=null&&(r==="break"||r==="breakAll")?_=e?xk(e,t.font,v,r==="breakAll",0).lines:[]:_=e?e.split(`
`):[];var y=_.length*o,S=br(t.height,y);if(y>S&&p){var A=Math.floor(S/o);_=_.slice(0,A)}if(e&&a&&v!=null)for(var L=_k(v,n,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),I=0;I<_.length;I++)_[I]=yk(_[I],L);for(var M=S,D=0,I=0;I<_.length;I++)D=Math.max(Ta(_[I],n),D);v==null&&(v=D);var O=D;return i&&(M+=i[0]+i[2],O+=i[1]+i[3],v+=i[1]+i[3]),f&&(O=v),{lines:_,height:S,outerWidth:O,outerHeight:M,lineHeight:o,calculatedLineHeight:u,contentWidth:D,contentHeight:y,width:v}}var $H=function(){function e(){}return e}(),WC=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),UH=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function GH(e,t){var r=new UH;if(e!=null&&(e+=""),!e)return r;for(var i=t.width,n=t.height,a=t.overflow,u=(a==="break"||a==="breakAll")&&i!=null?{width:i,accumWidth:0,breakAll:a==="breakAll"}:null,o=o1.lastIndex=0,f;(f=o1.exec(e))!=null;){var p=f.index;p>o&&s1(r,e.substring(o,p),t,u),s1(r,f[2],t,u,f[1]),o=o1.lastIndex}o<e.length&&s1(r,e.substring(o,e.length),t,u);var v=[],_=0,y=0,S=t.padding,A=a==="truncate",L=t.lineOverflow==="truncate";function I(et,Ct,zt){et.width=Ct,et.lineHeight=zt,_+=zt,y=Math.max(y,Ct)}e:for(var M=0;M<r.lines.length;M++){for(var D=r.lines[M],O=0,N=0,q=0;q<D.tokens.length;q++){var Z=D.tokens[q],Q=Z.styleName&&t.rich[Z.styleName]||{},j=Z.textPadding=Q.padding,ie=j?j[1]+j[3]:0,ae=Z.font=Q.font||t.font;Z.contentHeight=O_(ae);var he=br(Q.height,Z.contentHeight);if(Z.innerHeight=he,j&&(he+=j[0]+j[2]),Z.height=he,Z.lineHeight=lg(Q.lineHeight,t.lineHeight,he),Z.align=Q&&Q.align||t.align,Z.verticalAlign=Q&&Q.verticalAlign||"middle",L&&n!=null&&_+Z.lineHeight>n){q>0?(D.tokens=D.tokens.slice(0,q),I(D,N,O),r.lines=r.lines.slice(0,M+1)):r.lines=r.lines.slice(0,M);break e}var ue=Q.width,fe=ue==null||ue==="auto";if(typeof ue=="string"&&ue.charAt(ue.length-1)==="%")Z.percentWidth=ue,v.push(Z),Z.contentWidth=Ta(Z.text,ae);else{if(fe){var ye=Q.backgroundColor,He=ye&&ye.image;He&&(He=BH(He),F_(He)&&(Z.width=Math.max(Z.width,He.width*he/He.height)))}var we=A&&i!=null?i-N:null;we!=null&&we<Z.width?!fe||we<ie?(Z.text="",Z.width=Z.contentWidth=0):(Z.text=FH(Z.text,we-ie,ae,t.ellipsis,{minChar:t.truncateMinChar}),Z.width=Z.contentWidth=Ta(Z.text,ae)):Z.contentWidth=Ta(Z.text,ae)}Z.width+=ie,N+=Z.width,Q&&(O=Math.max(O,Z.lineHeight))}I(D,N,O)}r.outerWidth=r.width=br(i,y),r.outerHeight=r.height=br(n,_),r.contentHeight=_,r.contentWidth=y,S&&(r.outerWidth+=S[1]+S[3],r.outerHeight+=S[0]+S[2]);for(var M=0;M<v.length;M++){var Z=v[M],it=Z.percentWidth;Z.width=parseInt(it,10)/100*r.width}return r}function s1(e,t,r,i,n){var a=t==="",u=n&&r.rich[n]||{},o=e.lines,f=u.font||r.font,p=!1,v,_;if(i){var y=u.padding,S=y?y[1]+y[3]:0;if(u.width!=null&&u.width!=="auto"){var A=ac(u.width,i.width)+S;o.length>0&&A+i.accumWidth>i.width&&(v=t.split(`
`),p=!0),i.accumWidth=A}else{var L=xk(t,f,i.width,i.breakAll,i.accumWidth);i.accumWidth=L.accumWidth+S,_=L.linesWidths,v=L.lines}}else v=t.split(`
`);for(var I=0;I<v.length;I++){var M=v[I],D=new $H;if(D.styleName=n,D.text=M,D.isLineHolder=!M&&!a,typeof u.width=="number"?D.width=u.width:D.width=_?_[I]:Ta(M,f),!I&&!p){var O=(o[o.length-1]||(o[0]=new WC)).tokens,N=O.length;N===1&&O[0].isLineHolder?O[0]=D:(M||!N||a)&&O.push(D)}else o.push(new WC([D]))}}function HH(e){var t=e.charCodeAt(0);return t>=33&&t<=383}var qH=Zh(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function jH(e){return HH(e)?!!qH[e]:!0}function xk(e,t,r,i,n){for(var a=[],u=[],o="",f="",p=0,v=0,_=0;_<e.length;_++){var y=e.charAt(_);if(y===`
`){f&&(o+=f,v+=p),a.push(o),u.push(v),o="",f="",p=0,v=0;continue}var S=Ta(y,t),A=i?!1:!jH(y);if(a.length?v+S>r:n+v+S>r){v?(o||f)&&(A?(o||(o=f,f="",p=0,v=p),a.push(o),u.push(v-p),f+=y,p+=S,o="",v=p):(f&&(o+=f,f="",p=0),a.push(o),u.push(v),o=y,v=S)):A?(a.push(f),u.push(p),f=y,p=S):(a.push(y),u.push(S));continue}v+=S,A?(f+=y,p+=S):(f&&(o+=f,f="",p=0),o+=y)}return!a.length&&!o&&(o=e,f="",p=0),f&&(o+=f),o&&(a.push(o),u.push(v)),a.length===1&&(v+=n),{accumWidth:v,lines:a,linesWidths:u}}var Kx="__zr_style_"+Math.round(Math.random()*10),ec={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},N_={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};ec[Kx]=!0;var ZC=["z","z2","invisible"],WH=["invisible"],ZH=function(e){It(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var i=$r(r),n=0;n<i.length;n++){var a=i[n];a==="style"?this.useStyle(r[a]):e.prototype.attrKV.call(this,a,r[a])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,i,n,a){var u=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&XH(this,r,i)||u&&!u[0]&&!u[3])return!1;if(n&&this.__clipPaths){for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1}if(a&&this.parent)for(var f=this.parent;f;){if(f.ignore)return!1;f=f.parent}return!0},t.prototype.contain=function(r,i){return this.rectContain(r,i)},t.prototype.traverse=function(r,i){r.call(i,this)},t.prototype.rectContain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect();return a.contain(n[0],n[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var i=this.transform,n=this.getBoundingRect(),a=this.style,u=a.shadowBlur||0,o=a.shadowOffsetX||0,f=a.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new ii(0,0,0,0)),i?ii.applyTransform(r,n,i):r.copy(n),(u||o||f)&&(r.width+=u*2+Math.abs(o),r.height+=u*2+Math.abs(f),r.x=Math.min(r.x,r.x+o-u),r.y=Math.min(r.y,r.y+f-u));var p=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-p),r.y=Math.floor(r.y-p),r.width=Math.ceil(r.width+1+p*2),r.height=Math.ceil(r.height+1+p*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new ii(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,i){r!=="style"?e.prototype.attrKV.call(this,r,i):this.style?this.setStyle(i):this.useStyle(i)},t.prototype.setStyle=function(r,i){return typeof r=="string"?this.style[r]=i:xt(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=Td,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Td)},t.prototype.styleUpdated=function(){this.__dirty&=~Td},t.prototype.createStyle=function(r){return R_(ec,r)},t.prototype.useStyle=function(r){r[Kx]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[Kx]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var i=this._normalState;r.style&&!i.style&&(i.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,i,ZC)},t.prototype._applyStateObj=function(r,i,n,a,u,o){e.prototype._applyStateObj.call(this,r,i,n,a,u,o);var f=!(i&&a),p;if(i&&i.style?u?a?p=i.style:(p=this._mergeStyle(this.createStyle(),n.style),this._mergeStyle(p,i.style)):(p=this._mergeStyle(this.createStyle(),a?this.style:n.style),this._mergeStyle(p,i.style)):f&&(p=n.style),p)if(u){var v=this.style;if(this.style=this.createStyle(f?{}:v),f)for(var _=$r(v),y=0;y<_.length;y++){var S=_[y];S in p&&(p[S]=p[S],this.style[S]=v[S])}for(var A=$r(p),y=0;y<A.length;y++){var S=A[y];this.style[S]=this.style[S]}this._transitionState(r,{style:p},o,this.getAnimationStyleProps())}else this.useStyle(p);for(var L=this.__inHover?WH:ZC,y=0;y<L.length;y++){var S=L[y];i&&i[S]!=null?this[S]=i[S]:f&&n[S]!=null&&(this[S]=n[S])}},t.prototype._mergeStates=function(r){for(var i=e.prototype._mergeStates.call(this,r),n,a=0;a<r.length;a++){var u=r[a];u.style&&(n=n||{},this._mergeStyle(n,u.style))}return n&&(i.style=n),i},t.prototype._mergeStyle=function(r,i){return xt(r,i),r},t.prototype.getAnimationStyleProps=function(){return N_},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=$o|Td}(),t}(nk),l1=new ii(0,0,0,0),u1=new ii(0,0,0,0);function XH(e,t,r){return l1.copy(e.getBoundingRect()),e.transform&&l1.applyTransform(e.transform),u1.width=t,u1.height=r,!l1.intersect(u1)}const Wp=ZH;var Ua=Math.min,Ga=Math.max,c1=Math.sin,h1=Math.cos,Su=Math.PI*2,Cv=Xh(),Av=Xh(),Mv=Xh();function XC(e,t,r,i,n,a){n[0]=Ua(e,r),n[1]=Ua(t,i),a[0]=Ga(e,r),a[1]=Ga(t,i)}var YC=[],KC=[];function YH(e,t,r,i,n,a,u,o,f,p){var v=$L,_=dn,y=v(e,r,n,u,YC);f[0]=1/0,f[1]=1/0,p[0]=-1/0,p[1]=-1/0;for(var S=0;S<y;S++){var A=_(e,r,n,u,YC[S]);f[0]=Ua(A,f[0]),p[0]=Ga(A,p[0])}y=v(t,i,a,o,KC);for(var S=0;S<y;S++){var L=_(t,i,a,o,KC[S]);f[1]=Ua(L,f[1]),p[1]=Ga(L,p[1])}f[0]=Ua(e,f[0]),p[0]=Ga(e,p[0]),f[0]=Ua(u,f[0]),p[0]=Ga(u,p[0]),f[1]=Ua(t,f[1]),p[1]=Ga(t,p[1]),f[1]=Ua(o,f[1]),p[1]=Ga(o,p[1])}function KH(e,t,r,i,n,a,u,o){var f=UL,p=pn,v=Ga(Ua(f(e,r,n),1),0),_=Ga(Ua(f(t,i,a),1),0),y=p(e,r,n,v),S=p(t,i,a,_);u[0]=Ua(e,n,y),u[1]=Ua(t,a,S),o[0]=Ga(e,n,y),o[1]=Ga(t,a,S)}function JH(e,t,r,i,n,a,u,o,f){var p=fh,v=dh,_=Math.abs(n-a);if(_%Su<1e-4&&_>1e-4){o[0]=e-r,o[1]=t-i,f[0]=e+r,f[1]=t+i;return}if(Cv[0]=h1(n)*r+e,Cv[1]=c1(n)*i+t,Av[0]=h1(a)*r+e,Av[1]=c1(a)*i+t,p(o,Cv,Av),v(f,Cv,Av),n=n%Su,n<0&&(n=n+Su),a=a%Su,a<0&&(a=a+Su),n>a&&!u?a+=Su:n<a&&u&&(n+=Su),u){var y=a;a=n,n=y}for(var S=0;S<a;S+=Math.PI/2)S>n&&(Mv[0]=h1(S)*r+e,Mv[1]=c1(S)*i+t,p(o,Mv,o),v(f,Mv,f))}var jr={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},Tu=[],Eu=[],Ro=[],cl=[],zo=[],Oo=[],f1=Math.min,d1=Math.max,Cu=Math.cos,Au=Math.sin,gs=Math.abs,Jx=Math.PI,ml=Jx*2,p1=typeof Float32Array<"u",sd=[];function m1(e){var t=Math.round(e/Jx*1e8)/1e8;return t%2*Jx}function QH(e,t){var r=m1(e[0]);r<0&&(r+=ml);var i=r-e[0],n=e[1];n+=i,!t&&n-r>=ml?n=r+ml:t&&r-n>=ml?n=r-ml:!t&&r>n?n=r+(ml-m1(r-n)):t&&r<n&&(n=r-(ml-m1(n-r))),e[0]=r,e[1]=n}var eq=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,i){i=i||0,i>0&&(this._ux=gs(i/OC/t)||0,this._uy=gs(i/OC/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(jr.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var i=gs(t-this._xi),n=gs(r-this._yi),a=i>this._ux||n>this._uy;if(this.addData(jr.L,t,r),this._ctx&&a&&this._ctx.lineTo(t,r),a)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var u=i*i+n*n;u>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=u)}return this},e.prototype.bezierCurveTo=function(t,r,i,n,a,u){return this._drawPendingPt(),this.addData(jr.C,t,r,i,n,a,u),this._ctx&&this._ctx.bezierCurveTo(t,r,i,n,a,u),this._xi=a,this._yi=u,this},e.prototype.quadraticCurveTo=function(t,r,i,n){return this._drawPendingPt(),this.addData(jr.Q,t,r,i,n),this._ctx&&this._ctx.quadraticCurveTo(t,r,i,n),this._xi=i,this._yi=n,this},e.prototype.arc=function(t,r,i,n,a,u){this._drawPendingPt(),sd[0]=n,sd[1]=a,QH(sd,u),n=sd[0],a=sd[1];var o=a-n;return this.addData(jr.A,t,r,i,i,n,o,0,u?0:1),this._ctx&&this._ctx.arc(t,r,i,n,a,u),this._xi=Cu(a)*i+t,this._yi=Au(a)*i+r,this},e.prototype.arcTo=function(t,r,i,n,a){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,i,n,a),this},e.prototype.rect=function(t,r,i,n){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,i,n),this.addData(jr.R,t,r,i,n),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(jr.Z);var t=this._ctx,r=this._x0,i=this._y0;return t&&t.closePath(),this._xi=r,this._yi=i,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&p1&&(this.data=new Float32Array(r));for(var i=0;i<r;i++)this.data[i]=t[i];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,i=0,n=this._len,a=0;a<r;a++)i+=t[a].len();p1&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(var a=0;a<r;a++)for(var u=t[a].data,o=0;o<u.length;o++)this.data[n++]=u[o];this._len=n},e.prototype.addData=function(t,r,i,n,a,u,o,f,p){if(this._saveData){var v=this.data;this._len+arguments.length>v.length&&(this._expandData(),v=this.data);for(var _=0;_<arguments.length;_++)v[this._len++]=arguments[_]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,p1&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){Ro[0]=Ro[1]=zo[0]=zo[1]=Number.MAX_VALUE,cl[0]=cl[1]=Oo[0]=Oo[1]=-Number.MAX_VALUE;var t=this.data,r=0,i=0,n=0,a=0,u;for(u=0;u<this._len;){var o=t[u++],f=u===1;switch(f&&(r=t[u],i=t[u+1],n=r,a=i),o){case jr.M:r=n=t[u++],i=a=t[u++],zo[0]=n,zo[1]=a,Oo[0]=n,Oo[1]=a;break;case jr.L:XC(r,i,t[u],t[u+1],zo,Oo),r=t[u++],i=t[u++];break;case jr.C:YH(r,i,t[u++],t[u++],t[u++],t[u++],t[u],t[u+1],zo,Oo),r=t[u++],i=t[u++];break;case jr.Q:KH(r,i,t[u++],t[u++],t[u],t[u+1],zo,Oo),r=t[u++],i=t[u++];break;case jr.A:var p=t[u++],v=t[u++],_=t[u++],y=t[u++],S=t[u++],A=t[u++]+S;u+=1;var L=!t[u++];f&&(n=Cu(S)*_+p,a=Au(S)*y+v),JH(p,v,_,y,S,A,L,zo,Oo),r=Cu(A)*_+p,i=Au(A)*y+v;break;case jr.R:n=r=t[u++],a=i=t[u++];var I=t[u++],M=t[u++];XC(n,a,n+I,a+M,zo,Oo);break;case jr.Z:r=n,i=a;break}fh(Ro,Ro,zo),dh(cl,cl,Oo)}return u===0&&(Ro[0]=Ro[1]=cl[0]=cl[1]=0),new ii(Ro[0],Ro[1],cl[0]-Ro[0],cl[1]-Ro[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,i=this._ux,n=this._uy,a=0,u=0,o=0,f=0;this._pathSegLen||(this._pathSegLen=[]);for(var p=this._pathSegLen,v=0,_=0,y=0;y<r;){var S=t[y++],A=y===1;A&&(a=t[y],u=t[y+1],o=a,f=u);var L=-1;switch(S){case jr.M:a=o=t[y++],u=f=t[y++];break;case jr.L:{var I=t[y++],M=t[y++],D=I-a,O=M-u;(gs(D)>i||gs(O)>n||y===r-1)&&(L=Math.sqrt(D*D+O*O),a=I,u=M);break}case jr.C:{var N=t[y++],q=t[y++],I=t[y++],M=t[y++],Z=t[y++],Q=t[y++];L=mG(a,u,N,q,I,M,Z,Q,10),a=Z,u=Q;break}case jr.Q:{var N=t[y++],q=t[y++],I=t[y++],M=t[y++];L=_G(a,u,N,q,I,M,10),a=I,u=M;break}case jr.A:var j=t[y++],ie=t[y++],ae=t[y++],he=t[y++],ue=t[y++],fe=t[y++],ye=fe+ue;y+=1,t[y++],A&&(o=Cu(ue)*ae+j,f=Au(ue)*he+ie),L=d1(ae,he)*f1(ml,Math.abs(fe)),a=Cu(ye)*ae+j,u=Au(ye)*he+ie;break;case jr.R:{o=a=t[y++],f=u=t[y++];var He=t[y++],we=t[y++];L=He*2+we*2;break}case jr.Z:{var D=o-a,O=f-u;L=Math.sqrt(D*D+O*O),a=o,u=f;break}}L>=0&&(p[_++]=L,v+=L)}return this._pathLen=v,v},e.prototype.rebuildPath=function(t,r){var i=this.data,n=this._ux,a=this._uy,u=this._len,o,f,p,v,_,y,S=r<1,A,L,I=0,M=0,D,O=0,N,q;if(!(S&&(this._pathSegLen||this._calculateLength(),A=this._pathSegLen,L=this._pathLen,D=r*L,!D)))e:for(var Z=0;Z<u;){var Q=i[Z++],j=Z===1;switch(j&&(p=i[Z],v=i[Z+1],o=p,f=v),Q!==jr.L&&O>0&&(t.lineTo(N,q),O=0),Q){case jr.M:o=p=i[Z++],f=v=i[Z++],t.moveTo(p,v);break;case jr.L:{_=i[Z++],y=i[Z++];var ie=gs(_-p),ae=gs(y-v);if(ie>n||ae>a){if(S){var he=A[M++];if(I+he>D){var ue=(D-I)/he;t.lineTo(p*(1-ue)+_*ue,v*(1-ue)+y*ue);break e}I+=he}t.lineTo(_,y),p=_,v=y,O=0}else{var fe=ie*ie+ae*ae;fe>O&&(N=_,q=y,O=fe)}break}case jr.C:{var ye=i[Z++],He=i[Z++],we=i[Z++],it=i[Z++],et=i[Z++],Ct=i[Z++];if(S){var he=A[M++];if(I+he>D){var ue=(D-I)/he;Gg(p,ye,we,et,ue,Tu),Gg(v,He,it,Ct,ue,Eu),t.bezierCurveTo(Tu[1],Eu[1],Tu[2],Eu[2],Tu[3],Eu[3]);break e}I+=he}t.bezierCurveTo(ye,He,we,it,et,Ct),p=et,v=Ct;break}case jr.Q:{var ye=i[Z++],He=i[Z++],we=i[Z++],it=i[Z++];if(S){var he=A[M++];if(I+he>D){var ue=(D-I)/he;Hg(p,ye,we,ue,Tu),Hg(v,He,it,ue,Eu),t.quadraticCurveTo(Tu[1],Eu[1],Tu[2],Eu[2]);break e}I+=he}t.quadraticCurveTo(ye,He,we,it),p=we,v=it;break}case jr.A:var zt=i[Z++],tr=i[Z++],$t=i[Z++],Lr=i[Z++],Ir=i[Z++],Cr=i[Z++],dr=i[Z++],Ge=!i[Z++],nt=$t>Lr?$t:Lr,Ye=gs($t-Lr)>.001,ft=Ir+Cr,ut=!1;if(S){var he=A[M++];I+he>D&&(ft=Ir+Cr*(D-I)/he,ut=!0),I+=he}if(Ye&&t.ellipse?t.ellipse(zt,tr,$t,Lr,dr,Ir,ft,Ge):t.arc(zt,tr,nt,Ir,ft,Ge),ut)break e;j&&(o=Cu(Ir)*$t+zt,f=Au(Ir)*Lr+tr),p=Cu(ft)*$t+zt,v=Au(ft)*Lr+tr;break;case jr.R:o=p=i[Z],f=v=i[Z+1],_=i[Z++],y=i[Z++];var se=i[Z++],me=i[Z++];if(S){var he=A[M++];if(I+he>D){var Ae=D-I;t.moveTo(_,y),t.lineTo(_+f1(Ae,se),y),Ae-=se,Ae>0&&t.lineTo(_+se,y+f1(Ae,me)),Ae-=me,Ae>0&&t.lineTo(_+d1(se-Ae,0),y+me),Ae-=se,Ae>0&&t.lineTo(_,y+d1(me-Ae,0));break e}I+=he}t.rect(_,y,se,me);break;case jr.Z:if(S){var he=A[M++];if(I+he>D){var ue=(D-I)/he;t.lineTo(p*(1-ue)+o*ue,v*(1-ue)+f*ue);break e}I+=he}t.closePath(),p=o,v=f}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=jr,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();const oc=eq;function bl(e,t,r,i,n,a,u){if(n===0)return!1;var o=n,f=0,p=e;if(u>t+o&&u>i+o||u<t-o&&u<i-o||a>e+o&&a>r+o||a<e-o&&a<r-o)return!1;if(e!==r)f=(t-i)/(e-r),p=(e*i-r*t)/(e-r);else return Math.abs(a-e)<=o/2;var v=f*a-u+p,_=v*v/(f*f+1);return _<=o/2*o/2}function tq(e,t,r,i,n,a,u,o,f,p,v){if(f===0)return!1;var _=f;if(v>t+_&&v>i+_&&v>a+_&&v>o+_||v<t-_&&v<i-_&&v<a-_&&v<o-_||p>e+_&&p>r+_&&p>n+_&&p>u+_||p<e-_&&p<r-_&&p<n-_&&p<u-_)return!1;var y=pG(e,t,r,i,n,a,u,o,p,v,null);return y<=_/2}function bk(e,t,r,i,n,a,u,o,f){if(u===0)return!1;var p=u;if(f>t+p&&f>i+p&&f>a+p||f<t-p&&f<i-p&&f<a-p||o>e+p&&o>r+p&&o>n+p||o<e-p&&o<r-p&&o<n-p)return!1;var v=gG(e,t,r,i,n,a,o,f,null);return v<=p/2}var JC=Math.PI*2;function Iv(e){return e%=JC,e<0&&(e+=JC),e}var ld=Math.PI*2;function rq(e,t,r,i,n,a,u,o,f){if(u===0)return!1;var p=u;o-=e,f-=t;var v=Math.sqrt(o*o+f*f);if(v-p>r||v+p<r)return!1;if(Math.abs(i-n)%ld<1e-4)return!0;if(a){var _=i;i=Iv(n),n=Iv(_)}else i=Iv(i),n=Iv(n);i>n&&(n+=ld);var y=Math.atan2(f,o);return y<0&&(y+=ld),y>=i&&y<=n||y+ld>=i&&y+ld<=n}function Mu(e,t,r,i,n,a){if(a>t&&a>i||a<t&&a<i||i===t)return 0;var u=(a-t)/(i-t),o=i<t?1:-1;(u===1||u===0)&&(o=i<t?.5:-.5);var f=u*(r-e)+e;return f===n?1/0:f>n?o:0}var hl=oc.CMD,Iu=Math.PI*2,iq=1e-4;function nq(e,t){return Math.abs(e-t)<iq}var Hn=[-1,-1,-1],Va=[-1,-1];function aq(){var e=Va[0];Va[0]=Va[1],Va[1]=e}function oq(e,t,r,i,n,a,u,o,f,p){if(p>t&&p>i&&p>a&&p>o||p<t&&p<i&&p<a&&p<o)return 0;var v=VL(t,i,a,o,p,Hn);if(v===0)return 0;for(var _=0,y=-1,S=void 0,A=void 0,L=0;L<v;L++){var I=Hn[L],M=I===0||I===1?.5:1,D=dn(e,r,n,u,I);D<f||(y<0&&(y=$L(t,i,a,o,Va),Va[1]<Va[0]&&y>1&&aq(),S=dn(t,i,a,o,Va[0]),y>1&&(A=dn(t,i,a,o,Va[1]))),y===2?I<Va[0]?_+=S<t?M:-M:I<Va[1]?_+=A<S?M:-M:_+=o<A?M:-M:I<Va[0]?_+=S<t?M:-M:_+=o<S?M:-M)}return _}function sq(e,t,r,i,n,a,u,o){if(o>t&&o>i&&o>a||o<t&&o<i&&o<a)return 0;var f=vG(t,i,a,o,Hn);if(f===0)return 0;var p=UL(t,i,a);if(p>=0&&p<=1){for(var v=0,_=pn(t,i,a,p),y=0;y<f;y++){var S=Hn[y]===0||Hn[y]===1?.5:1,A=pn(e,r,n,Hn[y]);A<u||(Hn[y]<p?v+=_<t?S:-S:v+=a<_?S:-S)}return v}else{var S=Hn[0]===0||Hn[0]===1?.5:1,A=pn(e,r,n,Hn[0]);return A<u?0:a<t?S:-S}}function lq(e,t,r,i,n,a,u,o){if(o-=t,o>r||o<-r)return 0;var f=Math.sqrt(r*r-o*o);Hn[0]=-f,Hn[1]=f;var p=Math.abs(i-n);if(p<1e-4)return 0;if(p>=Iu-1e-4){i=0,n=Iu;var v=a?1:-1;return u>=Hn[0]+e&&u<=Hn[1]+e?v:0}if(i>n){var _=i;i=n,n=_}i<0&&(i+=Iu,n+=Iu);for(var y=0,S=0;S<2;S++){var A=Hn[S];if(A+e>u){var L=Math.atan2(o,A),v=a?1:-1;L<0&&(L=Iu+L),(L>=i&&L<=n||L+Iu>=i&&L+Iu<=n)&&(L>Math.PI/2&&L<Math.PI*1.5&&(v=-v),y+=v)}}return y}function wk(e,t,r,i,n){for(var a=e.data,u=e.len(),o=0,f=0,p=0,v=0,_=0,y,S,A=0;A<u;){var L=a[A++],I=A===1;switch(L===hl.M&&A>1&&(r||(o+=Mu(f,p,v,_,i,n))),I&&(f=a[A],p=a[A+1],v=f,_=p),L){case hl.M:v=a[A++],_=a[A++],f=v,p=_;break;case hl.L:if(r){if(bl(f,p,a[A],a[A+1],t,i,n))return!0}else o+=Mu(f,p,a[A],a[A+1],i,n)||0;f=a[A++],p=a[A++];break;case hl.C:if(r){if(tq(f,p,a[A++],a[A++],a[A++],a[A++],a[A],a[A+1],t,i,n))return!0}else o+=oq(f,p,a[A++],a[A++],a[A++],a[A++],a[A],a[A+1],i,n)||0;f=a[A++],p=a[A++];break;case hl.Q:if(r){if(bk(f,p,a[A++],a[A++],a[A],a[A+1],t,i,n))return!0}else o+=sq(f,p,a[A++],a[A++],a[A],a[A+1],i,n)||0;f=a[A++],p=a[A++];break;case hl.A:var M=a[A++],D=a[A++],O=a[A++],N=a[A++],q=a[A++],Z=a[A++];A+=1;var Q=!!(1-a[A++]);y=Math.cos(q)*O+M,S=Math.sin(q)*N+D,I?(v=y,_=S):o+=Mu(f,p,y,S,i,n);var j=(i-M)*N/O+M;if(r){if(rq(M,D,N,q,q+Z,Q,t,j,n))return!0}else o+=lq(M,D,N,q,q+Z,Q,j,n);f=Math.cos(q+Z)*O+M,p=Math.sin(q+Z)*N+D;break;case hl.R:v=f=a[A++],_=p=a[A++];var ie=a[A++],ae=a[A++];if(y=v+ie,S=_+ae,r){if(bl(v,_,y,_,t,i,n)||bl(y,_,y,S,t,i,n)||bl(y,S,v,S,t,i,n)||bl(v,S,v,_,t,i,n))return!0}else o+=Mu(y,_,y,S,i,n),o+=Mu(v,S,v,_,i,n);break;case hl.Z:if(r){if(bl(f,p,v,_,t,i,n))return!0}else o+=Mu(f,p,v,_,i,n);f=v,p=_;break}}return!r&&!nq(p,_)&&(o+=Mu(f,p,v,_,i,n)||0),o!==0}function uq(e,t,r){return wk(e,0,!1,t,r)}function cq(e,t,r,i){return wk(e,t,!0,r,i)}var Xg=pi({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},ec),hq={style:pi({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},N_.style)},v1=fp.concat(["invisible","culling","z","z2","zlevel","parent"]),fq=function(e){It(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var i=this.style;if(i.decal){var n=this._decalEl=this._decalEl||new t;n.buildPath===t.prototype.buildPath&&(n.buildPath=function(f){r.buildPath(f,r.shape)}),n.silent=!0;var a=n.style;for(var u in i)a[u]!==i[u]&&(a[u]=i[u]);a.fill=i.fill?i.decal:null,a.decal=null,a.shadowColor=null,i.strokeFirst&&(a.stroke=null);for(var o=0;o<v1.length;++o)n[v1[o]]=this[v1[o]];n.__dirty|=$o}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var i=$r(r);this.shape=this.getDefaultShape();var n=this.getDefaultStyle();n&&this.useStyle(n);for(var a=0;a<i.length;a++){var u=i[a],o=r[u];u==="style"?this.style?xt(this.style,o):this.useStyle(o):u==="shape"?xt(this.shape,o):e.prototype.attrKV.call(this,u,o)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(Wt(r)){var i=qg(r,0);return i>.5?Wx:i>.2?WG:Zx}else if(r)return Zx}return Wx},t.prototype.getInsideTextStroke=function(r){var i=this.style.fill;if(Wt(i)){var n=this.__zr,a=!!(n&&n.isDarkMode()),u=qg(r,0)<jx;if(a===u)return i}},t.prototype.buildPath=function(r,i,n){},t.prototype.pathUpdated=function(){this.__dirty&=~sh},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new oc(!1)},t.prototype.hasStroke=function(){var r=this.style,i=r.stroke;return!(i==null||i==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,i=r.fill;return i!=null&&i!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,i=this.style,n=!r;if(n){var a=!1;this.path||(a=!0,this.createPathProxy());var u=this.path;(a||this.__dirty&sh)&&(u.beginPath(),this.buildPath(u,this.shape,!1),this.pathUpdated()),r=u.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||n){o.copy(r);var f=i.strokeNoScale?this.getLineScale():1,p=i.lineWidth;if(!this.hasFill()){var v=this.strokeContainThreshold;p=Math.max(p,v??4)}f>1e-10&&(o.width+=p/f,o.height+=p/f,o.x-=p/f/2,o.y-=p/f/2)}return o}return r},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect(),u=this.style;if(r=n[0],i=n[1],a.contain(r,i)){var o=this.path;if(this.hasStroke()){var f=u.lineWidth,p=u.strokeNoScale?this.getLineScale():1;if(p>1e-10&&(this.hasFill()||(f=Math.max(f,this.strokeContainThreshold)),cq(o,f/p,r,i)))return!0}if(this.hasFill())return uq(o,r,i)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=sh,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,i){r==="shape"?this.setShape(i):e.prototype.attrKV.call(this,r,i)},t.prototype.setShape=function(r,i){var n=this.shape;return n||(n=this.shape={}),typeof r=="string"?n[r]=i:xt(n,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&sh)},t.prototype.createStyle=function(r){return R_(Xg,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var i=this._normalState;r.shape&&!i.shape&&(i.shape=xt({},this.shape))},t.prototype._applyStateObj=function(r,i,n,a,u,o){e.prototype._applyStateObj.call(this,r,i,n,a,u,o);var f=!(i&&a),p;if(i&&i.shape?u?a?p=i.shape:(p=xt({},n.shape),xt(p,i.shape)):(p=xt({},a?this.shape:n.shape),xt(p,i.shape)):f&&(p=n.shape),p)if(u){this.shape=xt({},this.shape);for(var v={},_=$r(p),y=0;y<_.length;y++){var S=_[y];typeof p[S]=="object"?this.shape[S]=p[S]:v[S]=p[S]}this._transitionState(r,{shape:v},o)}else this.shape=p,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var i=e.prototype._mergeStates.call(this,r),n,a=0;a<r.length;a++){var u=r[a];u.shape&&(n=n||{},this._mergeStyle(n,u.shape))}return n&&(i.shape=n),i},t.prototype.getAnimationStyleProps=function(){return hq},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var i=function(a){It(u,a);function u(o){var f=a.call(this,o)||this;return r.init&&r.init.call(f,o),f}return u.prototype.getDefaultStyle=function(){return Dr(r.style)},u.prototype.getDefaultShape=function(){return Dr(r.shape)},u}(t);for(var n in r)typeof r[n]=="function"&&(i.prototype[n]=r[n]);return i},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=$o|Td|sh}(),t}(Wp);const Jr=fq;var dq=pi({strokeFirst:!0,font:Rl,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Xg),Sk=function(e){It(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,i=r.stroke;return i!=null&&i!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,i=r.fill;return i!=null&&i!=="none"},t.prototype.createStyle=function(r){return R_(dq,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var i=r.text;i!=null?i+="":i="";var n=qw(i,r.font,r.textAlign,r.textBaseline);if(n.x+=r.x||0,n.y+=r.y||0,this.hasStroke()){var a=r.lineWidth;n.x-=a/2,n.y-=a/2,n.width+=a,n.height+=a}this._rect=n}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(Wp);Sk.prototype.type="tspan";const Yg=Sk;var pq=pi({x:0,y:0},ec),mq={style:pi({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},N_.style)};function vq(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var Tk=function(e){It(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return R_(pq,r)},t.prototype._getSize=function(r){var i=this.style,n=i[r];if(n!=null)return n;var a=vq(i.image)?i.image:this.__image;if(!a)return 0;var u=r==="width"?"height":"width",o=i[u];return o==null?a[r]:a[r]/a[u]*o},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return mq},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new ii(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Wp);Tk.prototype.type="image";const Rs=Tk;function gq(e,t){var r=t.x,i=t.y,n=t.width,a=t.height,u=t.r,o,f,p,v;n<0&&(r=r+n,n=-n),a<0&&(i=i+a,a=-a),typeof u=="number"?o=f=p=v=u:u instanceof Array?u.length===1?o=f=p=v=u[0]:u.length===2?(o=p=u[0],f=v=u[1]):u.length===3?(o=u[0],f=v=u[1],p=u[2]):(o=u[0],f=u[1],p=u[2],v=u[3]):o=f=p=v=0;var _;o+f>n&&(_=o+f,o*=n/_,f*=n/_),p+v>n&&(_=p+v,p*=n/_,v*=n/_),f+p>a&&(_=f+p,f*=a/_,p*=a/_),o+v>a&&(_=o+v,o*=a/_,v*=a/_),e.moveTo(r+o,i),e.lineTo(r+n-f,i),f!==0&&e.arc(r+n-f,i+f,f,-Math.PI/2,0),e.lineTo(r+n,i+a-p),p!==0&&e.arc(r+n-p,i+a-p,p,0,Math.PI/2),e.lineTo(r+v,i+a),v!==0&&e.arc(r+v,i+a-v,v,Math.PI/2,Math.PI),e.lineTo(r,i+o),o!==0&&e.arc(r+o,i+o,o,Math.PI,Math.PI*1.5)}var mh=Math.round;function Ek(e,t,r){if(t){var i=t.x1,n=t.x2,a=t.y1,u=t.y2;e.x1=i,e.x2=n,e.y1=a,e.y2=u;var o=r&&r.lineWidth;return o&&(mh(i*2)===mh(n*2)&&(e.x1=e.x2=Xu(i,o,!0)),mh(a*2)===mh(u*2)&&(e.y1=e.y2=Xu(a,o,!0))),e}}function Ck(e,t,r){if(t){var i=t.x,n=t.y,a=t.width,u=t.height;e.x=i,e.y=n,e.width=a,e.height=u;var o=r&&r.lineWidth;return o&&(e.x=Xu(i,o,!0),e.y=Xu(n,o,!0),e.width=Math.max(Xu(i+a,o,!1)-e.x,a===0?0:1),e.height=Math.max(Xu(n+u,o,!1)-e.y,u===0?0:1)),e}}function Xu(e,t,r){if(!t)return e;var i=mh(e*2);return(i+mh(t))%2===0?i/2:(i+(r?1:-1))/2}var _q=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),yq={},Ak=function(e){It(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new _q},t.prototype.buildPath=function(r,i){var n,a,u,o;if(this.subPixelOptimize){var f=Ck(yq,i,this.style);n=f.x,a=f.y,u=f.width,o=f.height,f.r=i.r,i=f}else n=i.x,a=i.y,u=i.width,o=i.height;i.r?gq(r,i):r.rect(n,a,u,o)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Jr);Ak.prototype.type="rect";const sa=Ak;var QC={fill:"#000"},eA=2,xq={style:pi({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},N_.style)},Mk=function(e){It(t,e);function t(r){var i=e.call(this)||this;return i.type="text",i._children=[],i._defaultStyle=QC,i.attr(r),i}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var i=this._children[r];i.zlevel=this.zlevel,i.z=this.z,i.z2=this.z2,i.culling=this.culling,i.cursor=this.cursor,i.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var i=this.innerTransformable;return i?i.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,Sq(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var i=0;i<this._children.length;i++)this._children[i].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var i=0;i<this._children.length;i++)this._children[i].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new ii(0,0,0,0),i=this._children,n=[],a=null,u=0;u<i.length;u++){var o=i[u],f=o.getBoundingRect(),p=o.getLocalTransform(n);p?(r.copy(f),r.applyTransform(p),a=a||r.clone(),a.union(r)):(a=a||f.clone(),a.union(f))}this._rect=a||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||QC},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,i){if(!i)return r;var n=i.rich,a=r.rich||n&&{};return xt(r,i),n&&a?(this._mergeRich(a,n),r.rich=a):a&&(r.rich=a),r},t.prototype._mergeRich=function(r,i){for(var n=$r(i),a=0;a<n.length;a++){var u=n[a];r[u]=r[u]||{},xt(r[u],i[u])}},t.prototype.getAnimationStyleProps=function(){return xq},t.prototype._getOrCreateChild=function(r){var i=this._children[this._childCursor];return(!i||!(i instanceof r))&&(i=new r),this._children[this._childCursor++]=i,i.__zr=this.__zr,i.parent=this,i},t.prototype._updatePlainTexts=function(){var r=this.style,i=r.font||Rl,n=r.padding,a=sA(r),u=VH(a,r),o=g1(r),f=!!r.backgroundColor,p=u.outerHeight,v=u.outerWidth,_=u.contentWidth,y=u.lines,S=u.lineHeight,A=this._defaultStyle,L=r.x||0,I=r.y||0,M=r.align||A.align||"left",D=r.verticalAlign||A.verticalAlign||"top",O=L,N=lh(I,u.contentHeight,D);if(o||n){var q=Cd(L,v,M),Z=lh(I,p,D);o&&this._renderBackground(r,r,q,Z,v,p)}N+=S/2,n&&(O=oA(L,M,n),D==="top"?N+=n[0]:D==="bottom"&&(N-=n[2]));for(var Q=0,j=!1,ie=aA("fill"in r?r.fill:(j=!0,A.fill)),ae=nA("stroke"in r?r.stroke:!f&&(!A.autoStroke||j)?(Q=eA,A.stroke):null),he=r.textShadowBlur>0,ue=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),fe=u.calculatedLineHeight,ye=0;ye<y.length;ye++){var He=this._getOrCreateChild(Yg),we=He.createStyle();He.useStyle(we),we.text=y[ye],we.x=O,we.y=N,M&&(we.textAlign=M),we.textBaseline="middle",we.opacity=r.opacity,we.strokeFirst=!0,he&&(we.shadowBlur=r.textShadowBlur||0,we.shadowColor=r.textShadowColor||"transparent",we.shadowOffsetX=r.textShadowOffsetX||0,we.shadowOffsetY=r.textShadowOffsetY||0),we.stroke=ae,we.fill=ie,ae&&(we.lineWidth=r.lineWidth||Q,we.lineDash=r.lineDash,we.lineDashOffset=r.lineDashOffset||0),we.font=i,rA(we,r),N+=S,ue&&He.setBoundingRect(new ii(Cd(we.x,r.width,we.textAlign),lh(we.y,fe,we.textBaseline),_,fe))}},t.prototype._updateRichTexts=function(){var r=this.style,i=sA(r),n=GH(i,r),a=n.width,u=n.outerWidth,o=n.outerHeight,f=r.padding,p=r.x||0,v=r.y||0,_=this._defaultStyle,y=r.align||_.align,S=r.verticalAlign||_.verticalAlign,A=Cd(p,u,y),L=lh(v,o,S),I=A,M=L;f&&(I+=f[3],M+=f[0]);var D=I+a;g1(r)&&this._renderBackground(r,r,A,L,u,o);for(var O=!!r.backgroundColor,N=0;N<n.lines.length;N++){for(var q=n.lines[N],Z=q.tokens,Q=Z.length,j=q.lineHeight,ie=q.width,ae=0,he=I,ue=D,fe=Q-1,ye=void 0;ae<Q&&(ye=Z[ae],!ye.align||ye.align==="left");)this._placeToken(ye,r,j,M,he,"left",O),ie-=ye.width,he+=ye.width,ae++;for(;fe>=0&&(ye=Z[fe],ye.align==="right");)this._placeToken(ye,r,j,M,ue,"right",O),ie-=ye.width,ue-=ye.width,fe--;for(he+=(a-(he-I)-(D-ue)-ie)/2;ae<=fe;)ye=Z[ae],this._placeToken(ye,r,j,M,he+ye.width/2,"center",O),he+=ye.width,ae++;M+=j}},t.prototype._placeToken=function(r,i,n,a,u,o,f){var p=i.rich[r.styleName]||{};p.text=r.text;var v=r.verticalAlign,_=a+n/2;v==="top"?_=a+r.height/2:v==="bottom"&&(_=a+n-r.height/2);var y=!r.isLineHolder&&g1(p);y&&this._renderBackground(p,i,o==="right"?u-r.width:o==="center"?u-r.width/2:u,_-r.height/2,r.width,r.height);var S=!!p.backgroundColor,A=r.textPadding;A&&(u=oA(u,o,A),_-=r.height/2-A[0]-r.innerHeight/2);var L=this._getOrCreateChild(Yg),I=L.createStyle();L.useStyle(I);var M=this._defaultStyle,D=!1,O=0,N=aA("fill"in p?p.fill:"fill"in i?i.fill:(D=!0,M.fill)),q=nA("stroke"in p?p.stroke:"stroke"in i?i.stroke:!S&&!f&&(!M.autoStroke||D)?(O=eA,M.stroke):null),Z=p.textShadowBlur>0||i.textShadowBlur>0;I.text=r.text,I.x=u,I.y=_,Z&&(I.shadowBlur=p.textShadowBlur||i.textShadowBlur||0,I.shadowColor=p.textShadowColor||i.textShadowColor||"transparent",I.shadowOffsetX=p.textShadowOffsetX||i.textShadowOffsetX||0,I.shadowOffsetY=p.textShadowOffsetY||i.textShadowOffsetY||0),I.textAlign=o,I.textBaseline="middle",I.font=r.font||Rl,I.opacity=lg(p.opacity,i.opacity,1),rA(I,p),q&&(I.lineWidth=lg(p.lineWidth,i.lineWidth,O),I.lineDash=br(p.lineDash,i.lineDash),I.lineDashOffset=i.lineDashOffset||0,I.stroke=q),N&&(I.fill=N);var Q=r.contentWidth,j=r.contentHeight;L.setBoundingRect(new ii(Cd(I.x,Q,I.textAlign),lh(I.y,j,I.textBaseline),Q,j))},t.prototype._renderBackground=function(r,i,n,a,u,o){var f=r.backgroundColor,p=r.borderWidth,v=r.borderColor,_=f&&f.image,y=f&&!_,S=r.borderRadius,A=this,L,I;if(y||r.lineHeight||p&&v){L=this._getOrCreateChild(sa),L.useStyle(L.createStyle()),L.style.fill=null;var M=L.shape;M.x=n,M.y=a,M.width=u,M.height=o,M.r=S,L.dirtyShape()}if(y){var D=L.style;D.fill=f||null,D.fillOpacity=br(r.fillOpacity,1)}else if(_){I=this._getOrCreateChild(Rs),I.onload=function(){A.dirtyStyle()};var O=I.style;O.image=f.image,O.x=n,O.y=a,O.width=u,O.height=o}if(p&&v){var D=L.style;D.lineWidth=p,D.stroke=v,D.strokeOpacity=br(r.strokeOpacity,1),D.lineDash=r.borderDash,D.lineDashOffset=r.borderDashOffset||0,L.strokeContainThreshold=0,L.hasFill()&&L.hasStroke()&&(D.strokeFirst=!0,D.lineWidth*=2)}var N=(L||I).style;N.shadowBlur=r.shadowBlur||0,N.shadowColor=r.shadowColor||"transparent",N.shadowOffsetX=r.shadowOffsetX||0,N.shadowOffsetY=r.shadowOffsetY||0,N.opacity=lg(r.opacity,i.opacity,1)},t.makeFont=function(r){var i="";return Pk(r)&&(i=[r.fontStyle,r.fontWeight,Ik(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),i&&Go(i)||r.textFont||r.font},t}(Wp),bq={left:!0,right:1,center:1},wq={top:1,bottom:1,middle:1},tA=["fontStyle","fontWeight","fontSize","fontFamily"];function Ik(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?Dw+"px":e+"px"}function rA(e,t){for(var r=0;r<tA.length;r++){var i=tA[r],n=t[i];n!=null&&(e[i]=n)}}function Pk(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function Sq(e){return iA(e),Ee(e.rich,iA),e}function iA(e){if(e){e.font=Mk.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||bq[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||wq[r]?r:"top";var i=e.padding;i&&(e.padding=CL(e.padding))}}function nA(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function aA(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function oA(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function sA(e){var t=e.text;return t!=null&&(t+=""),t}function g1(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const yo=Mk;var fi=zi(),Tq=function(e,t,r,i){if(i){var n=fi(i);n.dataIndex=r,n.dataType=t,n.seriesIndex=e,i.type==="group"&&i.traverse(function(a){var u=fi(a);u.seriesIndex=e,u.dataIndex=r,u.dataType=t})}},lA=1,uA={},Dk=zi(),Kw=zi(),Lk=0,Jw=1,Qw=2,Xo=["emphasis","blur","select"],cA=["normal","emphasis","blur","select"],Eq=10,Cq=9,tc="highlight",gg="downplay",Gd="select",_g="unselect",Hd="toggleSelect";function Jc(e){return e!=null&&e!=="none"}var hA=new Gp(100);function fA(e){if(Wt(e)){var t=hA.get(e);return t||(t=MC(e,-.1),hA.put(e,t)),t}else if(Rw(e)){var r=xt({},e);return r.colorStops=Zt(e.colorStops,function(i){return{offset:i.offset,color:MC(i.color,-.1)}}),r}return e}function V_(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function kk(e){V_(e,"emphasis",Qw)}function Rk(e){e.hoverState===Qw&&V_(e,"normal",Lk)}function e2(e){V_(e,"blur",Jw)}function zk(e){e.hoverState===Jw&&V_(e,"normal",Lk)}function Aq(e){e.selected=!0}function Mq(e){e.selected=!1}function dA(e,t,r){t(e,r)}function zs(e,t,r){dA(e,t,r),e.isGroup&&e.traverse(function(i){dA(i,t,r)})}function Iq(e,t,r,i){for(var n=e.style,a={},u=0;u<t.length;u++){var o=t[u],f=n[o];a[o]=f??(i&&i[o])}for(var u=0;u<e.animators.length;u++){var p=e.animators[u];p.__fromStateTransition&&p.__fromStateTransition.indexOf(r)<0&&p.targetName==="style"&&p.saveTo(a,t)}return a}function Pq(e,t,r,i){var n=r&&ri(r,"select")>=0,a=!1;if(e instanceof Jr){var u=Dk(e),o=n&&u.selectFill||u.normalFill,f=n&&u.selectStroke||u.normalStroke;if(Jc(o)||Jc(f)){i=i||{};var p=i.style||{};p.fill==="inherit"?(a=!0,i=xt({},i),p=xt({},p),p.fill=o):!Jc(p.fill)&&Jc(o)?(a=!0,i=xt({},i),p=xt({},p),p.fill=fA(o)):!Jc(p.stroke)&&Jc(f)&&(a||(i=xt({},i),p=xt({},p)),p.stroke=fA(f)),i.style=p}}if(i&&i.z2==null){a||(i=xt({},i));var v=e.z2EmphasisLift;i.z2=e.z2+(v??Eq)}return i}function Dq(e,t,r){if(r&&r.z2==null){r=xt({},r);var i=e.z2SelectLift;r.z2=e.z2+(i??Cq)}return r}function Lq(e,t,r){var i=ri(e.currentStates,t)>=0,n=e.style.opacity,a=i?null:Iq(e,["opacity"],t,{opacity:1});r=r||{};var u=r.style||{};return u.opacity==null&&(r=xt({},r),u=xt({opacity:i?n:a.opacity*.1},u),r.style=u),r}function _1(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return Pq(this,e,t,r);if(e==="blur")return Lq(this,e,r);if(e==="select")return Dq(this,e,r)}return r}function kq(e){e.stateProxy=_1;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=_1),r&&(r.stateProxy=_1)}function pA(e,t){!Nk(e,t)&&!e.__highByOuter&&zs(e,kk)}function mA(e,t){!Nk(e,t)&&!e.__highByOuter&&zs(e,Rk)}function mp(e,t){e.__highByOuter|=1<<(t||0),zs(e,kk)}function vp(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&zs(e,Rk)}function Ok(e){zs(e,e2)}function t2(e){zs(e,zk)}function Bk(e){zs(e,Aq)}function Fk(e){zs(e,Mq)}function Nk(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function Vk(e){var t=e.getModel(),r=[],i=[];t.eachComponent(function(n,a){var u=Kw(a),o=n==="series",f=o?e.getViewOfSeriesModel(a):e.getViewOfComponentModel(a);!o&&i.push(f),u.isBlured&&(f.group.traverse(function(p){zk(p)}),o&&r.push(a)),u.isBlured=!1}),Ee(i,function(n){n&&n.toggleBlurSeries&&n.toggleBlurSeries(r,!1,t)})}function Qx(e,t,r,i){var n=i.getModel();r=r||"coordinateSystem";function a(p,v){for(var _=0;_<v.length;_++){var y=p.getItemGraphicEl(v[_]);y&&t2(y)}}if(e!=null&&!(!t||t==="none")){var u=n.getSeriesByIndex(e),o=u.coordinateSystem;o&&o.master&&(o=o.master);var f=[];n.eachSeries(function(p){var v=u===p,_=p.coordinateSystem;_&&_.master&&(_=_.master);var y=_&&o?_===o:v;if(!(r==="series"&&!v||r==="coordinateSystem"&&!y||t==="series"&&v)){var S=i.getViewOfSeriesModel(p);if(S.group.traverse(function(I){e2(I)}),ca(t))a(p.getData(),t);else if(Kt(t))for(var A=$r(t),L=0;L<A.length;L++)a(p.getData(A[L]),t[A[L]]);f.push(p),Kw(p).isBlured=!0}}),n.eachComponent(function(p,v){if(p!=="series"){var _=i.getViewOfComponentModel(v);_&&_.toggleBlurSeries&&_.toggleBlurSeries(f,!0,n)}})}}function eb(e,t,r){if(!(e==null||t==null)){var i=r.getModel().getComponent(e,t);if(i){Kw(i).isBlured=!0;var n=r.getViewOfComponentModel(i);!n||!n.focusBlurEnabled||n.group.traverse(function(a){e2(a)})}}}function Rq(e,t,r){var i=e.seriesIndex,n=e.getData(t.dataType);if(n){var a=qp(n,t);a=(Ft(a)?a[0]:a)||0;var u=n.getItemGraphicEl(a);if(!u)for(var o=n.count(),f=0;!u&&f<o;)u=n.getItemGraphicEl(f++);if(u){var p=fi(u);Qx(i,p.focus,p.blurScope,r)}else{var v=e.get(["emphasis","focus"]),_=e.get(["emphasis","blurScope"]);v!=null&&Qx(i,v,_,r)}}}function r2(e,t,r,i){var n={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return n;var a=i.getModel().getComponent(e,t);if(!a)return n;var u=i.getViewOfComponentModel(a);if(!u||!u.findHighDownDispatchers)return n;for(var o=u.findHighDownDispatchers(r),f,p=0;p<o.length;p++)if(fi(o[p]).focus==="self"){f=!0;break}return{focusSelf:f,dispatchers:o}}function zq(e,t,r){var i=fi(e),n=r2(i.componentMainType,i.componentIndex,i.componentHighDownName,r),a=n.dispatchers,u=n.focusSelf;a?(u&&eb(i.componentMainType,i.componentIndex,r),Ee(a,function(o){return pA(o,t)})):(Qx(i.seriesIndex,i.focus,i.blurScope,r),i.focus==="self"&&eb(i.componentMainType,i.componentIndex,r),pA(e,t))}function Oq(e,t,r){Vk(r);var i=fi(e),n=r2(i.componentMainType,i.componentIndex,i.componentHighDownName,r).dispatchers;n?Ee(n,function(a){return mA(a,t)}):mA(e,t)}function Bq(e,t,r){if(rb(t)){var i=t.dataType,n=e.getData(i),a=qp(n,t);Ft(a)||(a=[a]),e[t.type===Hd?"toggleSelect":t.type===Gd?"select":"unselect"](a,i)}}function vA(e){var t=e.getAllData();Ee(t,function(r){var i=r.data,n=r.type;i.eachItemGraphicEl(function(a,u){e.isSelected(u,n)?Bk(a):Fk(a)})})}function Fq(e){var t=[];return e.eachSeries(function(r){var i=r.getAllData();Ee(i,function(n){n.data;var a=n.type,u=r.getSelectedDataIndices();if(u.length>0){var o={dataIndex:u,seriesIndex:r.seriesIndex};a!=null&&(o.dataType=a),t.push(o)}})}),t}function Nq(e,t,r){$k(e,!0),zs(e,kq),$q(e,t,r)}function Vq(e){$k(e,!1)}function i2(e,t,r,i){i?Vq(e):Nq(e,t,r)}function $q(e,t,r){var i=fi(e);t!=null?(i.focus=t,i.blurScope=r):i.focus&&(i.focus=null)}function $k(e,t){var r=t===!1,i=e;e.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||i.__highDownDispatcher)&&(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!r)}function tb(e){return!!(e&&e.__highDownDispatcher)}function Uq(e){var t=uA[e];return t==null&&lA<=32&&(t=uA[e]=lA++),t}function rb(e){var t=e.type;return t===Gd||t===_g||t===Hd}function gA(e){var t=e.type;return t===tc||t===gg}function Gq(e){var t=Dk(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var Qc=oc.CMD,Hq=[[],[],[]],_A=Math.sqrt,qq=Math.atan2;function jq(e,t){if(t){var r=e.data,i=e.len(),n,a,u,o,f,p,v=Qc.M,_=Qc.C,y=Qc.L,S=Qc.R,A=Qc.A,L=Qc.Q;for(u=0,o=0;u<i;){switch(n=r[u++],o=u,a=0,n){case v:a=1;break;case y:a=1;break;case _:a=3;break;case L:a=2;break;case A:var I=t[4],M=t[5],D=_A(t[0]*t[0]+t[1]*t[1]),O=_A(t[2]*t[2]+t[3]*t[3]),N=qq(-t[1]/O,t[0]/D);r[u]*=D,r[u++]+=I,r[u]*=O,r[u++]+=M,r[u++]*=D,r[u++]*=O,r[u++]+=N,r[u++]+=N,u+=2,o=u;break;case S:p[0]=r[u++],p[1]=r[u++],Za(p,p,t),r[o++]=p[0],r[o++]=p[1],p[0]+=r[u++],p[1]+=r[u++],Za(p,p,t),r[o++]=p[0],r[o++]=p[1]}for(f=0;f<a;f++){var q=Hq[f];q[0]=r[u++],q[1]=r[u++],Za(q,q,t),r[o++]=q[0],r[o++]=q[1]}}e.increaseVersion()}}var y1=Math.sqrt,Pv=Math.sin,Dv=Math.cos,ud=Math.PI;function yA(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function ib(e,t){return(e[0]*t[0]+e[1]*t[1])/(yA(e)*yA(t))}function xA(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(ib(e,t))}function bA(e,t,r,i,n,a,u,o,f,p,v){var _=f*(ud/180),y=Dv(_)*(e-r)/2+Pv(_)*(t-i)/2,S=-1*Pv(_)*(e-r)/2+Dv(_)*(t-i)/2,A=y*y/(u*u)+S*S/(o*o);A>1&&(u*=y1(A),o*=y1(A));var L=(n===a?-1:1)*y1((u*u*(o*o)-u*u*(S*S)-o*o*(y*y))/(u*u*(S*S)+o*o*(y*y)))||0,I=L*u*S/o,M=L*-o*y/u,D=(e+r)/2+Dv(_)*I-Pv(_)*M,O=(t+i)/2+Pv(_)*I+Dv(_)*M,N=xA([1,0],[(y-I)/u,(S-M)/o]),q=[(y-I)/u,(S-M)/o],Z=[(-1*y-I)/u,(-1*S-M)/o],Q=xA(q,Z);if(ib(q,Z)<=-1&&(Q=ud),ib(q,Z)>=1&&(Q=0),Q<0){var j=Math.round(Q/ud*1e6)/1e6;Q=ud*2+j%2*ud}v.addData(p,D,O,u,o,N,Q,_,a)}var Wq=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,Zq=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Xq(e){var t=new oc;if(!e)return t;var r=0,i=0,n=r,a=i,u,o=oc.CMD,f=e.match(Wq);if(!f)return t;for(var p=0;p<f.length;p++){for(var v=f[p],_=v.charAt(0),y=void 0,S=v.match(Zq)||[],A=S.length,L=0;L<A;L++)S[L]=parseFloat(S[L]);for(var I=0;I<A;){var M=void 0,D=void 0,O=void 0,N=void 0,q=void 0,Z=void 0,Q=void 0,j=r,ie=i,ae=void 0,he=void 0;switch(_){case"l":r+=S[I++],i+=S[I++],y=o.L,t.addData(y,r,i);break;case"L":r=S[I++],i=S[I++],y=o.L,t.addData(y,r,i);break;case"m":r+=S[I++],i+=S[I++],y=o.M,t.addData(y,r,i),n=r,a=i,_="l";break;case"M":r=S[I++],i=S[I++],y=o.M,t.addData(y,r,i),n=r,a=i,_="L";break;case"h":r+=S[I++],y=o.L,t.addData(y,r,i);break;case"H":r=S[I++],y=o.L,t.addData(y,r,i);break;case"v":i+=S[I++],y=o.L,t.addData(y,r,i);break;case"V":i=S[I++],y=o.L,t.addData(y,r,i);break;case"C":y=o.C,t.addData(y,S[I++],S[I++],S[I++],S[I++],S[I++],S[I++]),r=S[I-2],i=S[I-1];break;case"c":y=o.C,t.addData(y,S[I++]+r,S[I++]+i,S[I++]+r,S[I++]+i,S[I++]+r,S[I++]+i),r+=S[I-2],i+=S[I-1];break;case"S":M=r,D=i,ae=t.len(),he=t.data,u===o.C&&(M+=r-he[ae-4],D+=i-he[ae-3]),y=o.C,j=S[I++],ie=S[I++],r=S[I++],i=S[I++],t.addData(y,M,D,j,ie,r,i);break;case"s":M=r,D=i,ae=t.len(),he=t.data,u===o.C&&(M+=r-he[ae-4],D+=i-he[ae-3]),y=o.C,j=r+S[I++],ie=i+S[I++],r+=S[I++],i+=S[I++],t.addData(y,M,D,j,ie,r,i);break;case"Q":j=S[I++],ie=S[I++],r=S[I++],i=S[I++],y=o.Q,t.addData(y,j,ie,r,i);break;case"q":j=S[I++]+r,ie=S[I++]+i,r+=S[I++],i+=S[I++],y=o.Q,t.addData(y,j,ie,r,i);break;case"T":M=r,D=i,ae=t.len(),he=t.data,u===o.Q&&(M+=r-he[ae-4],D+=i-he[ae-3]),r=S[I++],i=S[I++],y=o.Q,t.addData(y,M,D,r,i);break;case"t":M=r,D=i,ae=t.len(),he=t.data,u===o.Q&&(M+=r-he[ae-4],D+=i-he[ae-3]),r+=S[I++],i+=S[I++],y=o.Q,t.addData(y,M,D,r,i);break;case"A":O=S[I++],N=S[I++],q=S[I++],Z=S[I++],Q=S[I++],j=r,ie=i,r=S[I++],i=S[I++],y=o.A,bA(j,ie,r,i,Z,Q,O,N,q,y,t);break;case"a":O=S[I++],N=S[I++],q=S[I++],Z=S[I++],Q=S[I++],j=r,ie=i,r+=S[I++],i+=S[I++],y=o.A,bA(j,ie,r,i,Z,Q,O,N,q,y,t);break}}(_==="z"||_==="Z")&&(y=o.Z,t.addData(y),r=n,i=a),u=y}return t.toStatic(),t}var Uk=function(e){It(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(Jr);function Gk(e){return e.setData!=null}function Hk(e,t){var r=Xq(e),i=xt({},t);return i.buildPath=function(n){if(Gk(n)){n.setData(r.data);var a=n.getContext();a&&n.rebuildPath(a,1)}else{var a=n;r.rebuildPath(a,1)}},i.applyTransform=function(n){jq(r,n),this.dirtyShape()},i}function Yq(e,t){return new Uk(Hk(e,t))}function Kq(e,t){var r=Hk(e,t),i=function(n){It(a,n);function a(u){var o=n.call(this,u)||this;return o.applyTransform=r.applyTransform,o.buildPath=r.buildPath,o}return a}(Uk);return i}function Jq(e,t){for(var r=[],i=e.length,n=0;n<i;n++){var a=e[n];r.push(a.getUpdatedPathProxy(!0))}var u=new Jr(t);return u.createPathProxy(),u.buildPath=function(o){if(Gk(o)){o.appendPath(r);var f=o.getContext();f&&o.rebuildPath(f,1)}},u}var Qq=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),qk=function(e){It(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new Qq},t.prototype.buildPath=function(r,i){r.moveTo(i.cx+i.r,i.cy),r.arc(i.cx,i.cy,i.r,0,Math.PI*2)},t}(Jr);qk.prototype.type="circle";const n2=qk;var ej=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),jk=function(e){It(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new ej},t.prototype.buildPath=function(r,i){var n=.5522848,a=i.cx,u=i.cy,o=i.rx,f=i.ry,p=o*n,v=f*n;r.moveTo(a-o,u),r.bezierCurveTo(a-o,u-v,a-p,u-f,a,u-f),r.bezierCurveTo(a+p,u-f,a+o,u-v,a+o,u),r.bezierCurveTo(a+o,u+v,a+p,u+f,a,u+f),r.bezierCurveTo(a-p,u+f,a-o,u+v,a-o,u),r.closePath()},t}(Jr);jk.prototype.type="ellipse";const Wk=jk;var Zk=Math.PI,x1=Zk*2,Pu=Math.sin,eh=Math.cos,tj=Math.acos,En=Math.atan2,wA=Math.abs,qd=Math.sqrt,Ad=Math.max,Bo=Math.min,lo=1e-4;function rj(e,t,r,i,n,a,u,o){var f=r-e,p=i-t,v=u-n,_=o-a,y=_*f-v*p;if(!(y*y<lo))return y=(v*(t-a)-_*(e-n))/y,[e+y*f,t+y*p]}function Lv(e,t,r,i,n,a,u){var o=e-r,f=t-i,p=(u?a:-a)/qd(o*o+f*f),v=p*f,_=-p*o,y=e+v,S=t+_,A=r+v,L=i+_,I=(y+A)/2,M=(S+L)/2,D=A-y,O=L-S,N=D*D+O*O,q=n-a,Z=y*L-A*S,Q=(O<0?-1:1)*qd(Ad(0,q*q*N-Z*Z)),j=(Z*O-D*Q)/N,ie=(-Z*D-O*Q)/N,ae=(Z*O+D*Q)/N,he=(-Z*D+O*Q)/N,ue=j-I,fe=ie-M,ye=ae-I,He=he-M;return ue*ue+fe*fe>ye*ye+He*He&&(j=ae,ie=he),{cx:j,cy:ie,x0:-v,y0:-_,x1:j*(n/q-1),y1:ie*(n/q-1)}}function ij(e){var t;if(Ft(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function nj(e,t){var r,i=Ad(t.r,0),n=Ad(t.r0||0,0),a=i>0,u=n>0;if(!(!a&&!u)){if(a||(i=n,n=0),n>i){var o=i;i=n,n=o}var f=t.startAngle,p=t.endAngle;if(!(isNaN(f)||isNaN(p))){var v=t.cx,_=t.cy,y=!!t.clockwise,S=wA(p-f),A=S>x1&&S%x1;if(A>lo&&(S=A),!(i>lo))e.moveTo(v,_);else if(S>x1-lo)e.moveTo(v+i*eh(f),_+i*Pu(f)),e.arc(v,_,i,f,p,!y),n>lo&&(e.moveTo(v+n*eh(p),_+n*Pu(p)),e.arc(v,_,n,p,f,y));else{var L=void 0,I=void 0,M=void 0,D=void 0,O=void 0,N=void 0,q=void 0,Z=void 0,Q=void 0,j=void 0,ie=void 0,ae=void 0,he=void 0,ue=void 0,fe=void 0,ye=void 0,He=i*eh(f),we=i*Pu(f),it=n*eh(p),et=n*Pu(p),Ct=S>lo;if(Ct){var zt=t.cornerRadius;zt&&(r=ij(zt),L=r[0],I=r[1],M=r[2],D=r[3]);var tr=wA(i-n)/2;if(O=Bo(tr,M),N=Bo(tr,D),q=Bo(tr,L),Z=Bo(tr,I),ie=Q=Ad(O,N),ae=j=Ad(q,Z),(Q>lo||j>lo)&&(he=i*eh(p),ue=i*Pu(p),fe=n*eh(f),ye=n*Pu(f),S<Zk)){var $t=rj(He,we,fe,ye,he,ue,it,et);if($t){var Lr=He-$t[0],Ir=we-$t[1],Cr=he-$t[0],dr=ue-$t[1],Ge=1/Pu(tj((Lr*Cr+Ir*dr)/(qd(Lr*Lr+Ir*Ir)*qd(Cr*Cr+dr*dr)))/2),nt=qd($t[0]*$t[0]+$t[1]*$t[1]);ie=Bo(Q,(i-nt)/(Ge+1)),ae=Bo(j,(n-nt)/(Ge-1))}}}if(!Ct)e.moveTo(v+He,_+we);else if(ie>lo){var Ye=Bo(M,ie),ft=Bo(D,ie),ut=Lv(fe,ye,He,we,i,Ye,y),se=Lv(he,ue,it,et,i,ft,y);e.moveTo(v+ut.cx+ut.x0,_+ut.cy+ut.y0),ie<Q&&Ye===ft?e.arc(v+ut.cx,_+ut.cy,ie,En(ut.y0,ut.x0),En(se.y0,se.x0),!y):(Ye>0&&e.arc(v+ut.cx,_+ut.cy,Ye,En(ut.y0,ut.x0),En(ut.y1,ut.x1),!y),e.arc(v,_,i,En(ut.cy+ut.y1,ut.cx+ut.x1),En(se.cy+se.y1,se.cx+se.x1),!y),ft>0&&e.arc(v+se.cx,_+se.cy,ft,En(se.y1,se.x1),En(se.y0,se.x0),!y))}else e.moveTo(v+He,_+we),e.arc(v,_,i,f,p,!y);if(!(n>lo)||!Ct)e.lineTo(v+it,_+et);else if(ae>lo){var Ye=Bo(L,ae),ft=Bo(I,ae),ut=Lv(it,et,he,ue,n,-ft,y),se=Lv(He,we,fe,ye,n,-Ye,y);e.lineTo(v+ut.cx+ut.x0,_+ut.cy+ut.y0),ae<j&&Ye===ft?e.arc(v+ut.cx,_+ut.cy,ae,En(ut.y0,ut.x0),En(se.y0,se.x0),!y):(ft>0&&e.arc(v+ut.cx,_+ut.cy,ft,En(ut.y0,ut.x0),En(ut.y1,ut.x1),!y),e.arc(v,_,n,En(ut.cy+ut.y1,ut.cx+ut.x1),En(se.cy+se.y1,se.cx+se.x1),y),Ye>0&&e.arc(v+se.cx,_+se.cy,Ye,En(se.y1,se.x1),En(se.y0,se.x0),!y))}else e.lineTo(v+it,_+et),e.arc(v,_,n,p,f,y)}e.closePath()}}}var aj=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),Xk=function(e){It(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new aj},t.prototype.buildPath=function(r,i){nj(r,i)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Jr);Xk.prototype.type="sector";const a2=Xk;var oj=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),Yk=function(e){It(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new oj},t.prototype.buildPath=function(r,i){var n=i.cx,a=i.cy,u=Math.PI*2;r.moveTo(n+i.r,a),r.arc(n,a,i.r,0,u,!1),r.moveTo(n+i.r0,a),r.arc(n,a,i.r0,0,u,!0)},t}(Jr);Yk.prototype.type="ring";const Kk=Yk;function sj(e,t,r,i){var n=[],a=[],u=[],o=[],f,p,v,_;if(i){v=[1/0,1/0],_=[-1/0,-1/0];for(var y=0,S=e.length;y<S;y++)fh(v,v,e[y]),dh(_,_,e[y]);fh(v,v,i[0]),dh(_,_,i[1])}for(var y=0,S=e.length;y<S;y++){var A=e[y];if(r)f=e[y?y-1:S-1],p=e[(y+1)%S];else if(y===0||y===S-1){n.push(kU(e[y]));continue}else f=e[y-1],p=e[y+1];IL(a,p,f),F0(a,a,t);var L=kx(A,f),I=kx(A,p),M=L+I;M!==0&&(L/=M,I/=M),F0(u,a,-L),F0(o,a,I);var D=fC([],A,u),O=fC([],A,o);i&&(dh(D,D,v),fh(D,D,_),dh(O,O,v),fh(O,O,_)),n.push(D),n.push(O)}return r&&n.push(n.shift()),n}function Jk(e,t,r){var i=t.smooth,n=t.points;if(n&&n.length>=2){if(i){var a=sj(n,i,r,t.smoothConstraint);e.moveTo(n[0][0],n[0][1]);for(var u=n.length,o=0;o<(r?u:u-1);o++){var f=a[o*2],p=a[o*2+1],v=n[(o+1)%u];e.bezierCurveTo(f[0],f[1],p[0],p[1],v[0],v[1])}}else{e.moveTo(n[0][0],n[0][1]);for(var o=1,_=n.length;o<_;o++)e.lineTo(n[o][0],n[o][1])}r&&e.closePath()}}var lj=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),Qk=function(e){It(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new lj},t.prototype.buildPath=function(r,i){Jk(r,i,!0)},t}(Jr);Qk.prototype.type="polygon";const e5=Qk;var uj=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),t5=function(e){It(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new uj},t.prototype.buildPath=function(r,i){Jk(r,i,!1)},t}(Jr);t5.prototype.type="polyline";const o2=t5;var cj={},hj=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),r5=function(e){It(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new hj},t.prototype.buildPath=function(r,i){var n,a,u,o;if(this.subPixelOptimize){var f=Ek(cj,i,this.style);n=f.x1,a=f.y1,u=f.x2,o=f.y2}else n=i.x1,a=i.y1,u=i.x2,o=i.y2;var p=i.percent;p!==0&&(r.moveTo(n,a),p<1&&(u=n*(1-p)+u*p,o=a*(1-p)+o*p),r.lineTo(u,o))},t.prototype.pointAt=function(r){var i=this.shape;return[i.x1*(1-r)+i.x2*r,i.y1*(1-r)+i.y2*r]},t}(Jr);r5.prototype.type="line";const zl=r5;var ra=[],fj=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function SA(e,t,r){var i=e.cpx2,n=e.cpy2;return i!=null||n!=null?[(r?TC:dn)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?TC:dn)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?Fx:pn)(e.x1,e.cpx1,e.x2,t),(r?Fx:pn)(e.y1,e.cpy1,e.y2,t)]}var i5=function(e){It(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new fj},t.prototype.buildPath=function(r,i){var n=i.x1,a=i.y1,u=i.x2,o=i.y2,f=i.cpx1,p=i.cpy1,v=i.cpx2,_=i.cpy2,y=i.percent;y!==0&&(r.moveTo(n,a),v==null||_==null?(y<1&&(Hg(n,f,u,y,ra),f=ra[1],u=ra[2],Hg(a,p,o,y,ra),p=ra[1],o=ra[2]),r.quadraticCurveTo(f,p,u,o)):(y<1&&(Gg(n,f,v,u,y,ra),f=ra[1],v=ra[2],u=ra[3],Gg(a,p,_,o,y,ra),p=ra[1],_=ra[2],o=ra[3]),r.bezierCurveTo(f,p,v,_,u,o)))},t.prototype.pointAt=function(r){return SA(this.shape,r,!1)},t.prototype.tangentAt=function(r){var i=SA(this.shape,r,!0);return Ow(i,i)},t}(Jr);i5.prototype.type="bezier-curve";const s2=i5;var dj=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),n5=function(e){It(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new dj},t.prototype.buildPath=function(r,i){var n=i.cx,a=i.cy,u=Math.max(i.r,0),o=i.startAngle,f=i.endAngle,p=i.clockwise,v=Math.cos(o),_=Math.sin(o);r.moveTo(v*u+n,_*u+a),r.arc(n,a,u,o,f,!p)},t}(Jr);n5.prototype.type="arc";const l2=n5;var pj=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,i=this.shapeChanged(),n=0;n<r.length;n++)i=i||r[n].shapeChanged();i&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],i=this.getGlobalScale(),n=0;n<r.length;n++)r[n].path||r[n].createPathProxy(),r[n].path.setScale(i[0],i[1],r[n].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,i){for(var n=i.paths||[],a=0;a<n.length;a++)n[a].buildPath(r,n[a].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],i=0;i<r.length;i++)r[i].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Jr.prototype.getBoundingRect.call(this)},t}(Jr);const a5=pj;var mj=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const o5=mj;var vj=function(e){It(t,e);function t(r,i,n,a,u,o){var f=e.call(this,u)||this;return f.x=r??0,f.y=i??0,f.x2=n??1,f.y2=a??0,f.type="linear",f.global=o||!1,f}return t}(o5);const gj=vj;var _j=function(e){It(t,e);function t(r,i,n,a,u){var o=e.call(this,a)||this;return o.x=r??.5,o.y=i??.5,o.r=n??.5,o.type="radial",o.global=u||!1,o}return t}(o5);const yj=_j;var Du=[0,0],Lu=[0,0],kv=new ci,Rv=new ci,xj=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var i=0;i<4;i++)this._corners[i]=new ci;for(var i=0;i<2;i++)this._axes[i]=new ci;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var i=this._corners,n=this._axes,a=t.x,u=t.y,o=a+t.width,f=u+t.height;if(i[0].set(a,u),i[1].set(o,u),i[2].set(o,f),i[3].set(a,f),r)for(var p=0;p<4;p++)i[p].transform(r);ci.sub(n[0],i[1],i[0]),ci.sub(n[1],i[3],i[0]),n[0].normalize(),n[1].normalize();for(var p=0;p<2;p++)this._origin[p]=n[p].dot(i[0])},e.prototype.intersect=function(t,r){var i=!0,n=!r;return kv.set(1/0,1/0),Rv.set(0,0),!this._intersectCheckOneSide(this,t,kv,Rv,n,1)&&(i=!1,n)||!this._intersectCheckOneSide(t,this,kv,Rv,n,-1)&&(i=!1,n)||n||ci.copy(r,i?kv:Rv),i},e.prototype._intersectCheckOneSide=function(t,r,i,n,a,u){for(var o=!0,f=0;f<2;f++){var p=this._axes[f];if(this._getProjMinMaxOnAxis(f,t._corners,Du),this._getProjMinMaxOnAxis(f,r._corners,Lu),Du[1]<Lu[0]||Du[0]>Lu[1]){if(o=!1,a)return o;var v=Math.abs(Lu[0]-Du[1]),_=Math.abs(Du[0]-Lu[1]);Math.min(v,_)>n.len()&&(v<_?ci.scale(n,p,-v*u):ci.scale(n,p,_*u))}else if(i){var v=Math.abs(Lu[0]-Du[1]),_=Math.abs(Du[0]-Lu[1]);Math.min(v,_)<i.len()&&(v<_?ci.scale(i,p,v*u):ci.scale(i,p,-_*u))}}return o},e.prototype._getProjMinMaxOnAxis=function(t,r,i){for(var n=this._axes[t],a=this._origin,u=r[0].dot(n)+a[t],o=u,f=u,p=1;p<r.length;p++){var v=r[p].dot(n)+a[t];o=Math.min(v,o),f=Math.max(v,f)}i[0]=o,i[1]=f},e}();const Kg=xj;var bj=[],wj=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,i){r.call(i,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,i){i?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,i){i=i||!1;for(var n=0;n<r.length;n++)this.addDisplayable(r[n],i)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var i=this._cursor;i<this._displayables.length;i++)r&&r(this._displayables[i]);for(var i=0;i<this._temporaryDisplayables.length;i++)r&&r(this._temporaryDisplayables[i])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var i=this._displayables[r];i.parent=this,i.update(),i.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var i=this._temporaryDisplayables[r];i.parent=this,i.update(),i.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new ii(1/0,1/0,-1/0,-1/0),i=0;i<this._displayables.length;i++){var n=this._displayables[i],a=n.getBoundingRect().clone();n.needLocalTransform()&&a.applyTransform(n.getLocalTransform(bj)),r.union(a)}this._rect=r}return this._rect},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect();if(a.contain(n[0],n[1]))for(var u=0;u<this._displayables.length;u++){var o=this._displayables[u];if(o.contain(r,i))return!0}return!1},t}(Wp);const Sj=wj;var Tj=zi();function Ej(e,t,r,i,n){var a;if(t&&t.ecModel){var u=t.ecModel.getUpdatePayload();a=u&&u.animation}var o=t&&t.isAnimationEnabled(),f=e==="update";if(o){var p=void 0,v=void 0,_=void 0;i?(p=br(i.duration,200),v=br(i.easing,"cubicOut"),_=0):(p=t.getShallow(f?"animationDurationUpdate":"animationDuration"),v=t.getShallow(f?"animationEasingUpdate":"animationEasing"),_=t.getShallow(f?"animationDelayUpdate":"animationDelay")),a&&(a.duration!=null&&(p=a.duration),a.easing!=null&&(v=a.easing),a.delay!=null&&(_=a.delay)),lr(_)&&(_=_(r,n)),lr(p)&&(p=p(r));var y={duration:p||0,delay:_,easing:v};return y}else return null}function u2(e,t,r,i,n,a,u){var o=!1,f;lr(n)?(u=a,a=n,n=null):Kt(n)&&(a=n.cb,u=n.during,o=n.isFrom,f=n.removeOpt,n=n.dataIndex);var p=e==="leave";p||t.stopAnimation("leave");var v=Ej(e,i,n,p?f||{}:null,i&&i.getAnimationDelayParams?i.getAnimationDelayParams(t,n):null);if(v&&v.duration>0){var _=v.duration,y=v.delay,S=v.easing,A={duration:_,delay:y||0,easing:S,done:a,force:!!a||!!u,setToFinal:!p,scope:e,during:u};o?t.animateFrom(r,A):t.animateTo(r,A)}else t.stopAnimation(),!o&&t.attr(r),u&&u(1),a&&a()}function cc(e,t,r,i,n,a){u2("update",e,t,r,i,n,a)}function Zp(e,t,r,i,n,a){u2("enter",e,t,r,i,n,a)}function jd(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function Jg(e,t,r,i,n,a){jd(e)||u2("leave",e,t,r,i,n,a)}function TA(e,t,r,i){e.removeTextContent(),e.removeTextGuideLine(),Jg(e,{style:{opacity:0}},t,r,i)}function Cj(e,t,r){function i(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(n){n.isGroup||TA(n,t,r,i)}):TA(e,t,r,i)}function Aj(e){Tj(e).oldStyle=e.style}var Qg=Math.max,e_=Math.min,nb={};function Mj(e){return Jr.extend(e)}var Ij=Kq;function Pj(e,t){return Ij(e,t)}function wo(e,t){nb[e]=t}function Dj(e){if(nb.hasOwnProperty(e))return nb[e]}function c2(e,t,r,i){var n=Yq(e,t);return r&&(i==="center"&&(r=l5(r,n.getBoundingRect())),u5(n,r)),n}function s5(e,t,r){var i=new Rs({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(n){if(r==="center"){var a={width:n.width,height:n.height};i.setStyle(l5(t,a))}}});return i}function l5(e,t){var r=t.width/t.height,i=e.height*r,n;i<=e.width?n=e.height:(i=e.width,n=i/r);var a=e.x+e.width/2,u=e.y+e.height/2;return{x:a-i/2,y:u-n/2,width:i,height:n}}var Lj=Jq;function u5(e,t){if(e.applyTransform){var r=e.getBoundingRect(),i=r.calculateTransform(t);e.applyTransform(i)}}function gp(e,t){return Ek(e,e,{lineWidth:t}),e}function kj(e){return Ck(e.shape,e.shape,e.style),e}var Rj=Xu;function zj(e,t){for(var r=Fw([]);e&&e!==t;)bh(r,e.getLocalTransform(),r),e=e.parent;return r}function h2(e,t,r){return t&&!ca(t)&&(t=Hw.getLocalTransform(t)),r&&(t=Vw([],t)),Za([],e,t)}function Oj(e,t,r){var i=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),n=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),a=[e==="left"?-i:e==="right"?i:0,e==="top"?-n:e==="bottom"?n:0];return a=h2(a,t,r),Math.abs(a[0])>Math.abs(a[1])?a[0]>0?"right":"left":a[1]>0?"bottom":"top"}function EA(e){return!e.isGroup}function Bj(e){return e.shape!=null}function c5(e,t,r){if(!e||!t)return;function i(u){var o={};return u.traverse(function(f){EA(f)&&f.anid&&(o[f.anid]=f)}),o}function n(u){var o={x:u.x,y:u.y,rotation:u.rotation};return Bj(u)&&(o.shape=xt({},u.shape)),o}var a=i(e);t.traverse(function(u){if(EA(u)&&u.anid){var o=a[u.anid];if(o){var f=n(u);u.attr(n(o)),cc(u,f,r,fi(u).dataIndex)}}})}function Fj(e,t){return Zt(e,function(r){var i=r[0];i=Qg(i,t.x),i=e_(i,t.x+t.width);var n=r[1];return n=Qg(n,t.y),n=e_(n,t.y+t.height),[i,n]})}function Nj(e,t){var r=Qg(e.x,t.x),i=e_(e.x+e.width,t.x+t.width),n=Qg(e.y,t.y),a=e_(e.y+e.height,t.y+t.height);if(i>=r&&a>=n)return{x:r,y:n,width:i-r,height:a-n}}function h5(e,t,r){var i=xt({rectHover:!0},t),n=i.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(n.image=e.slice(8),pi(n,r),new Rs(i)):c2(e.replace("path://",""),i,r,"center")}function Vj(e,t,r,i,n){for(var a=0,u=n[n.length-1];a<n.length;a++){var o=n[a];if(f5(e,t,r,i,o[0],o[1],u[0],u[1]))return!0;u=o}}function f5(e,t,r,i,n,a,u,o){var f=r-e,p=i-t,v=u-n,_=o-a,y=b1(v,_,f,p);if($j(y))return!1;var S=e-n,A=t-a,L=b1(S,A,f,p)/y;if(L<0||L>1)return!1;var I=b1(S,A,v,_)/y;return!(I<0||I>1)}function b1(e,t,r,i){return e*i-r*t}function $j(e){return e<=1e-6&&e>=-1e-6}function d5(e){var t=e.itemTooltipOption,r=e.componentModel,i=e.itemName,n=Wt(t)?{formatter:t}:t,a=r.mainType,u=r.componentIndex,o={componentType:a,name:i,$vars:["name"]};o[a+"Index"]=u;var f=e.formatterParamsExtra;f&&Ee($r(f),function(v){Oh(o,v)||(o[v]=f[v],o.$vars.push(v))});var p=fi(e.el);p.componentMainType=a,p.componentIndex=u,p.tooltipConfig={name:i,option:pi({content:i,formatterParams:o},n)}}function CA(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function $_(e,t){if(e)if(Ft(e))for(var r=0;r<e.length;r++)CA(e[r],t);else CA(e,t)}wo("circle",n2);wo("ellipse",Wk);wo("sector",a2);wo("ring",Kk);wo("polygon",e5);wo("polyline",o2);wo("rect",sa);wo("line",zl);wo("bezierCurve",s2);wo("arc",l2);const Uj=Object.freeze(Object.defineProperty({__proto__:null,Arc:l2,BezierCurve:s2,BoundingRect:ii,Circle:n2,CompoundPath:a5,Ellipse:Wk,Group:_n,Image:Rs,IncrementalDisplayable:Sj,Line:zl,LinearGradient:gj,OrientedBoundingRect:Kg,Path:Jr,Point:ci,Polygon:e5,Polyline:o2,RadialGradient:yj,Rect:sa,Ring:Kk,Sector:a2,Text:yo,applyTransform:h2,clipPointsByRect:Fj,clipRectByRect:Nj,createIcon:h5,extendPath:Pj,extendShape:Mj,getShapeClass:Dj,getTransform:zj,groupTransition:c5,initProps:Zp,isElementRemoved:jd,lineLineIntersect:f5,linePolygonIntersect:Vj,makeImage:s5,makePath:c2,mergePath:Lj,registerShape:wo,removeElement:Jg,removeElementWithFadeOut:Cj,resizePath:u5,setTooltipConfig:d5,subPixelOptimize:Rj,subPixelOptimizeLine:gp,subPixelOptimizeRect:kj,transformDirection:Oj,traverseElements:$_,updateProps:cc},Symbol.toStringTag,{value:"Module"}));var U_={};function Gj(e,t){for(var r=0;r<Xo.length;r++){var i=Xo[r],n=t[i],a=e.ensureState(i);a.style=a.style||{},a.style.text=n}var u=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(u,!0)}function AA(e,t,r){var i=e.labelFetcher,n=e.labelDataIndex,a=e.labelDimIndex,u=t.normal,o;i&&(o=i.getFormattedLabel(n,"normal",null,a,u&&u.get("formatter"),r!=null?{interpolatedValue:r}:null)),o==null&&(o=lr(e.defaultText)?e.defaultText(n,e,r):e.defaultText);for(var f={normal:o},p=0;p<Xo.length;p++){var v=Xo[p],_=t[v];f[v]=br(i?i.getFormattedLabel(n,v,null,a,_&&_.get("formatter")):null,o)}return f}function p5(e,t,r,i){r=r||U_;for(var n=e instanceof yo,a=!1,u=0;u<cA.length;u++){var o=t[cA[u]];if(o&&o.getShallow("show")){a=!0;break}}var f=n?e:e.getTextContent();if(a){n||(f||(f=new yo,e.setTextContent(f)),e.stateProxy&&(f.stateProxy=e.stateProxy));var p=AA(r,t),v=t.normal,_=!!v.getShallow("show"),y=sc(v,i&&i.normal,r,!1,!n);y.text=p.normal,n||e.setTextConfig(MA(v,r,!1));for(var u=0;u<Xo.length;u++){var S=Xo[u],o=t[S];if(o){var A=f.ensureState(S),L=!!br(o.getShallow("show"),_);if(L!==_&&(A.ignore=!L),A.style=sc(o,i&&i[S],r,!0,!n),A.style.text=p[S],!n){var I=e.ensureState(S);I.textConfig=MA(o,r,!0)}}}f.silent=!!v.getShallow("silent"),f.style.x!=null&&(y.x=f.style.x),f.style.y!=null&&(y.y=f.style.y),f.ignore=!_,f.useStyle(y),f.dirty(),r.enableTextSetter&&(Wj(f).setLabelText=function(M){var D=AA(r,t,M);Gj(f,D)})}else f&&(f.ignore=!0);e.dirty()}function G_(e,t){t=t||"label";for(var r={normal:e.getModel(t)},i=0;i<Xo.length;i++){var n=Xo[i];r[n]=e.getModel([n,t])}return r}function sc(e,t,r,i,n){var a={};return Hj(a,e,r,i,n),t&&xt(a,t),a}function MA(e,t,r){t=t||{};var i={},n,a=e.getShallow("rotate"),u=br(e.getShallow("distance"),r?null:5),o=e.getShallow("offset");return n=e.getShallow("position")||(r?null:"inside"),n==="outside"&&(n=t.defaultOutsidePosition||"top"),n!=null&&(i.position=n),o!=null&&(i.offset=o),a!=null&&(a*=Math.PI/180,i.rotation=a),u!=null&&(i.distance=u),i.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",i}function Hj(e,t,r,i,n){r=r||U_;var a=t.ecModel,u=a&&a.option.textStyle,o=qj(t),f;if(o){f={};for(var p in o)if(o.hasOwnProperty(p)){var v=t.getModel(["rich",p]);LA(f[p]={},v,u,r,i,n,!1,!0)}}f&&(e.rich=f);var _=t.get("overflow");_&&(e.overflow=_);var y=t.get("minMargin");y!=null&&(e.margin=y),LA(e,t,u,r,i,n,!0,!1)}function qj(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||U_).rich;if(r){t=t||{};for(var i=$r(r),n=0;n<i.length;n++){var a=i[n];t[a]=1}}e=e.parentModel}return t}var IA=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],PA=["align","lineHeight","width","height","tag","verticalAlign"],DA=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function LA(e,t,r,i,n,a,u,o){r=!n&&r||U_;var f=i&&i.inheritColor,p=t.getShallow("color"),v=t.getShallow("textBorderColor"),_=br(t.getShallow("opacity"),r.opacity);(p==="inherit"||p==="auto")&&(f?p=f:p=null),(v==="inherit"||v==="auto")&&(f?v=f:v=null),a||(p=p||r.color,v=v||r.textBorderColor),p!=null&&(e.fill=p),v!=null&&(e.stroke=v);var y=br(t.getShallow("textBorderWidth"),r.textBorderWidth);y!=null&&(e.lineWidth=y);var S=br(t.getShallow("textBorderType"),r.textBorderType);S!=null&&(e.lineDash=S);var A=br(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);A!=null&&(e.lineDashOffset=A),!n&&_==null&&!o&&(_=i&&i.defaultOpacity),_!=null&&(e.opacity=_),!n&&!a&&e.fill==null&&i.inheritColor&&(e.fill=i.inheritColor);for(var L=0;L<IA.length;L++){var I=IA[L],M=br(t.getShallow(I),r[I]);M!=null&&(e[I]=M)}for(var L=0;L<PA.length;L++){var I=PA[L],M=t.getShallow(I);M!=null&&(e[I]=M)}if(e.verticalAlign==null){var D=t.getShallow("baseline");D!=null&&(e.verticalAlign=D)}if(!u||!i.disableBox){for(var L=0;L<DA.length;L++){var I=DA[L],M=t.getShallow(I);M!=null&&(e[I]=M)}var O=t.getShallow("borderType");O!=null&&(e.borderDash=O),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&f&&(e.backgroundColor=f),(e.borderColor==="auto"||e.borderColor==="inherit")&&f&&(e.borderColor=f)}}function jj(e,t){var r=t&&t.getModel("textStyle");return Go([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var Wj=zi(),Zj=["textStyle","color"],w1=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],S1=new yo,Xj=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(Zj):null)},e.prototype.getFont=function(){return jj({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},i=0;i<w1.length;i++)r[w1[i]]=this.getShallow(w1[i]);return S1.useStyle(r),S1.update(),S1.getBoundingRect()},e}();const Yj=Xj;var m5=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Kj=pp(m5),Jj=function(){function e(){}return e.prototype.getLineStyle=function(t){return Kj(this,t)},e}(),v5=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Qj=pp(v5),eW=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return Qj(this,t,r)},e}(),hc=function(){function e(t,r,i){this.parentModel=r,this.ecModel=i,this.option=t}return e.prototype.init=function(t,r,i){},e.prototype.mergeOption=function(t,r){xi(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var i=this.option,n=i==null?i:i[t];if(n==null&&!r){var a=this.parentModel;a&&(n=a.getShallow(t))}return n},e.prototype.getModel=function(t,r){var i=t!=null,n=i?this.parsePath(t):null,a=i?this._doGet(n):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(n)),new e(a,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(Dr(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!xr.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var i=this.option;if(!t)return i;for(var n=0;n<t.length&&!(t[n]&&(i=i&&typeof i=="object"?i[t[n]]:null,i==null));n++);return i==null&&r&&(i=r._doGet(this.resolveParentPath(t),r.parentModel)),i},e}();Xw(hc);DH(hc);bo(hc,Jj);bo(hc,eW);bo(hc,OH);bo(hc,Yj);const Wn=hc;var tW=Math.round(Math.random()*10);function H_(e){return[e||"",tW++].join("_")}function rW(e){var t={};e.registerSubTypeDefaulter=function(r,i){var n=Ho(r);t[n.main]=i},e.determineSubType=function(r,i){var n=i.type;if(!n){var a=Ho(r).main;e.hasSubTypes(r)&&t[a]&&(n=t[a](i))}return n}}function iW(e,t){e.topologicalTravel=function(a,u,o,f){if(!a.length)return;var p=r(u),v=p.graph,_=p.noEntryList,y={};for(Ee(a,function(D){y[D]=!0});_.length;){var S=_.pop(),A=v[S],L=!!y[S];L&&(o.call(f,S,A.originalDeps.slice()),delete y[S]),Ee(A.successor,L?M:I)}Ee(y,function(){var D="";throw new Error(D)});function I(D){v[D].entryCount--,v[D].entryCount===0&&_.push(D)}function M(D){y[D]=!0,I(D)}};function r(a){var u={},o=[];return Ee(a,function(f){var p=i(u,f),v=p.originalDeps=t(f),_=n(v,a);p.entryCount=_.length,p.entryCount===0&&o.push(f),Ee(_,function(y){ri(p.predecessor,y)<0&&p.predecessor.push(y);var S=i(u,y);ri(S.successor,y)<0&&S.successor.push(f)})}),{graph:u,noEntryList:o}}function i(a,u){return a[u]||(a[u]={predecessor:[],successor:[]}),a[u]}function n(a,u){var o=[];return Ee(a,function(f){ri(u,f)>=0&&o.push(f)}),o}}const nW={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},aW={time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}};var t_="ZH",f2="EN",_p=f2,yg={},d2={},g5=xr.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(t_)>-1?t_:_p}():_p;function _5(e,t){e=e.toUpperCase(),d2[e]=new Wn(t),yg[e]=t}function oW(e){if(Wt(e)){var t=yg[e.toUpperCase()]||{};return e===t_||e===f2?Dr(t):xi(Dr(t),Dr(yg[_p]),!1)}else return xi(Dr(e),Dr(yg[_p]),!1)}function sW(e){return d2[e]}function lW(){return d2[_p]}_5(f2,nW);_5(t_,aW);var p2=1e3,m2=p2*60,Wd=m2*60,Ha=Wd*24,kA=Ha*365,Md={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},zv="{yyyy}-{MM}-{dd}",RA={year:"{yyyy}",month:"{yyyy}-{MM}",day:zv,hour:zv+" "+Md.hour,minute:zv+" "+Md.minute,second:zv+" "+Md.second,millisecond:Md.none},T1=["year","month","day","hour","minute","second","millisecond"],y5=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function ku(e,t){return e+="","0000".substr(0,t-e.length)+e}function Sh(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function uW(e){return e===Sh(e)}function cW(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function q_(e,t,r,i){var n=Ps(e),a=n[v2(r)](),u=n[Th(r)]()+1,o=Math.floor((u-1)/3)+1,f=n[j_(r)](),p=n["get"+(r?"UTC":"")+"Day"](),v=n[yp(r)](),_=(v-1)%12+1,y=n[W_(r)](),S=n[Z_(r)](),A=n[X_(r)](),L=i instanceof Wn?i:sW(i||g5)||lW(),I=L.getModel("time"),M=I.get("month"),D=I.get("monthAbbr"),O=I.get("dayOfWeek"),N=I.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,a+"").replace(/{yy}/g,a%100+"").replace(/{Q}/g,o+"").replace(/{MMMM}/g,M[u-1]).replace(/{MMM}/g,D[u-1]).replace(/{MM}/g,ku(u,2)).replace(/{M}/g,u+"").replace(/{dd}/g,ku(f,2)).replace(/{d}/g,f+"").replace(/{eeee}/g,O[p]).replace(/{ee}/g,N[p]).replace(/{e}/g,p+"").replace(/{HH}/g,ku(v,2)).replace(/{H}/g,v+"").replace(/{hh}/g,ku(_+"",2)).replace(/{h}/g,_+"").replace(/{mm}/g,ku(y,2)).replace(/{m}/g,y+"").replace(/{ss}/g,ku(S,2)).replace(/{s}/g,S+"").replace(/{SSS}/g,ku(A,3)).replace(/{S}/g,A+"")}function hW(e,t,r,i,n){var a=null;if(Wt(r))a=r;else if(lr(r))a=r(e.value,t,{level:e.level});else{var u=xt({},Md);if(e.level>0)for(var o=0;o<T1.length;++o)u[T1[o]]="{primary|"+u[T1[o]]+"}";var f=r?r.inherit===!1?r:pi(r,u):u,p=x5(e.value,n);if(f[p])a=f[p];else if(f.inherit){for(var v=y5.indexOf(p),o=v-1;o>=0;--o)if(f[p]){a=f[p];break}a=a||u.none}if(Ft(a)){var _=e.level==null?0:e.level>=0?e.level:a.length+e.level;_=Math.min(_,a.length-1),a=a[_]}}return q_(new Date(e.value),a,n,i)}function x5(e,t){var r=Ps(e),i=r[Th(t)]()+1,n=r[j_(t)](),a=r[yp(t)](),u=r[W_(t)](),o=r[Z_(t)](),f=r[X_(t)](),p=f===0,v=p&&o===0,_=v&&u===0,y=_&&a===0,S=y&&n===1,A=S&&i===1;return A?"year":S?"month":y?"day":_?"hour":v?"minute":p?"second":"millisecond"}function zA(e,t,r){var i=Mi(e)?Ps(e):e;switch(t=t||x5(e,r),t){case"year":return i[v2(r)]();case"half-year":return i[Th(r)]()>=6?1:0;case"quarter":return Math.floor((i[Th(r)]()+1)/4);case"month":return i[Th(r)]();case"day":return i[j_(r)]();case"half-day":return i[yp(r)]()/24;case"hour":return i[yp(r)]();case"minute":return i[W_(r)]();case"second":return i[Z_(r)]();case"millisecond":return i[X_(r)]()}}function v2(e){return e?"getUTCFullYear":"getFullYear"}function Th(e){return e?"getUTCMonth":"getMonth"}function j_(e){return e?"getUTCDate":"getDate"}function yp(e){return e?"getUTCHours":"getHours"}function W_(e){return e?"getUTCMinutes":"getMinutes"}function Z_(e){return e?"getUTCSeconds":"getSeconds"}function X_(e){return e?"getUTCMilliseconds":"getMilliseconds"}function fW(e){return e?"setUTCFullYear":"setFullYear"}function b5(e){return e?"setUTCMonth":"setMonth"}function w5(e){return e?"setUTCDate":"setDate"}function S5(e){return e?"setUTCHours":"setHours"}function T5(e){return e?"setUTCMinutes":"setMinutes"}function E5(e){return e?"setUTCSeconds":"setSeconds"}function C5(e){return e?"setUTCMilliseconds":"setMilliseconds"}function A5(e){if(!hH(e))return Wt(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function M5(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,i){return i.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var g2=CL;function ab(e,t,r){var i="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function n(v){return v&&Go(v)?v:"-"}function a(v){return!!(v!=null&&!isNaN(v)&&isFinite(v))}var u=t==="time",o=e instanceof Date;if(u||o){var f=u?Ps(e):e;if(isNaN(+f)){if(o)return"-"}else return q_(f,i,r)}if(t==="ordinal")return Px(e)?n(e):Mi(e)&&a(e)?e+"":"-";var p=Zg(e);return a(p)?A5(p):Px(e)?n(e):typeof e=="boolean"?e+"":"-"}var OA=["a","b","c","d","e","f","g"],E1=function(e,t){return"{"+e+(t??"")+"}"};function I5(e,t,r){Ft(t)||(t=[t]);var i=t.length;if(!i)return"";for(var n=t[0].$vars||[],a=0;a<n.length;a++){var u=OA[a];e=e.replace(E1(u),E1(u,0))}for(var o=0;o<i;o++)for(var f=0;f<n.length;f++){var p=t[o][n[f]];e=e.replace(E1(OA[f],o),r?wa(p):p)}return e}function dW(e,t){var r=Wt(e)?{color:e,extraCssText:t}:e||{},i=r.color,n=r.type;t=r.extraCssText;var a=r.renderMode||"html";if(!i)return"";if(a==="html")return n==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+wa(i)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+wa(i)+";"+(t||"")+'"></span>';var u=r.markerId||"markerX";return{renderMode:a,content:"{"+u+"|}  ",style:n==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:i}:{width:10,height:10,borderRadius:5,backgroundColor:i}}}function xp(e,t){return t=t||"transparent",Wt(e)?e:Kt(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function BA(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var xg=Ee,pW=["left","right","top","bottom","width","height"],Ov=[["width","left","right"],["height","top","bottom"]];function P5(e,t,r,i,n){var a=0,u=0;i==null&&(i=1/0),n==null&&(n=1/0);var o=0;t.eachChild(function(f,p){var v=f.getBoundingRect(),_=t.childAt(p+1),y=_&&_.getBoundingRect(),S,A;if(e==="horizontal"){var L=v.width+(y?-y.x+v.x:0);S=a+L,S>i||f.newline?(a=0,S=L,u+=o+r,o=v.height):o=Math.max(o,v.height)}else{var I=v.height+(y?-y.y+v.y:0);A=u+I,A>n||f.newline?(a+=o+r,u=0,A=I,o=v.width):o=Math.max(o,v.width)}f.newline||(f.x=a,f.y=u,f.markRedraw(),e==="horizontal"?a=S+r:u=A+r)})}ln(P5,"vertical");ln(P5,"horizontal");function _2(e,t,r){r=g2(r||0);var i=t.width,n=t.height,a=mn(e.left,i),u=mn(e.top,n),o=mn(e.right,i),f=mn(e.bottom,n),p=mn(e.width,i),v=mn(e.height,n),_=r[2]+r[0],y=r[1]+r[3],S=e.aspect;switch(isNaN(p)&&(p=i-o-y-a),isNaN(v)&&(v=n-f-_-u),S!=null&&(isNaN(p)&&isNaN(v)&&(S>i/n?p=i*.8:v=n*.8),isNaN(p)&&(p=S*v),isNaN(v)&&(v=p/S)),isNaN(a)&&(a=i-o-p-y),isNaN(u)&&(u=n-f-v-_),e.left||e.right){case"center":a=i/2-p/2-r[3];break;case"right":a=i-p-y;break}switch(e.top||e.bottom){case"middle":case"center":u=n/2-v/2-r[0];break;case"bottom":u=n-v-_;break}a=a||0,u=u||0,isNaN(p)&&(p=i-y-a-(o||0)),isNaN(v)&&(v=n-_-u-(f||0));var A=new ii(a+r[3],u+r[0],p,v);return A.margin=r,A}function bp(e){var t=e.layoutMode||e.constructor.layoutMode;return Kt(t)?t:t?{type:t}:null}function wp(e,t,r){var i=r&&r.ignoreSize;!Ft(i)&&(i=[i,i]);var n=u(Ov[0],0),a=u(Ov[1],1);p(Ov[0],e,n),p(Ov[1],e,a);function u(v,_){var y={},S=0,A={},L=0,I=2;if(xg(v,function(O){A[O]=e[O]}),xg(v,function(O){o(t,O)&&(y[O]=A[O]=t[O]),f(y,O)&&S++,f(A,O)&&L++}),i[_])return f(t,v[1])?A[v[2]]=null:f(t,v[2])&&(A[v[1]]=null),A;if(L===I||!S)return A;if(S>=I)return y;for(var M=0;M<v.length;M++){var D=v[M];if(!o(y,D)&&o(e,D)){y[D]=e[D];break}}return y}function o(v,_){return v.hasOwnProperty(_)}function f(v,_){return v[_]!=null&&v[_]!=="auto"}function p(v,_,y){xg(v,function(S){_[S]=y[S]})}}function y2(e){return mW({},e)}function mW(e,t){return t&&e&&xg(pW,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var vW=zi(),Yh=function(e){It(t,e);function t(r,i,n){var a=e.call(this,r,i,n)||this;return a.uid=H_("ec_cpt_model"),a}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n)},t.prototype.mergeDefaultAndTheme=function(r,i){var n=bp(this),a=n?y2(r):{},u=i.getTheme();xi(r,u.get(this.mainType)),xi(r,this.getDefaultOption()),n&&wp(r,a,n)},t.prototype.mergeOption=function(r,i){xi(this.option,r,!0);var n=bp(this);n&&wp(this.option,r,n)},t.prototype.optionUpdated=function(r,i){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!MH(r))return r.defaultOption;var i=vW(this);if(!i.defaultOption){for(var n=[],a=r;a;){var u=a.prototype.defaultOption;u&&n.push(u),a=a.superClass}for(var o={},f=n.length-1;f>=0;f--)o=xi(o,n[f],!0);i.defaultOption=o}return i.defaultOption},t.prototype.getReferringComponents=function(r,i){var n=r+"Index",a=r+"Id";return jp(this.ecModel,r,{index:this.get(n,!0),id:this.get(a,!0)},i)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(Wn);gk(Yh,Wn);B_(Yh);rW(Yh);iW(Yh,gW);function gW(e){var t=[];return Ee(Yh.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=Zt(t,function(r){return Ho(r).main}),e!=="dataset"&&ri(t,"dataset")<=0&&t.unshift("dataset"),t}const _i=Yh;var D5="";typeof navigator<"u"&&(D5=navigator.platform||"");var th="rgba(0, 0, 0, 0.2)";const _W={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:th,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:th,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:th,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:th,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:th,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:th,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:D5.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var L5=wr(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),Ya="original",ha="arrayRows",Yo="objectRows",Os="keyedColumns",Pl="typedArray",k5="unknown",Ms="column",Kh="row",ya={Must:1,Might:2,Not:3},R5=zi();function yW(e){R5(e).datasetMap=wr()}function xW(e,t,r){var i={},n=z5(t);if(!n||!e)return i;var a=[],u=[],o=t.ecModel,f=R5(o).datasetMap,p=n.uid+"_"+r.seriesLayoutBy,v,_;e=e.slice(),Ee(e,function(L,I){var M=Kt(L)?L:e[I]={name:L};M.type==="ordinal"&&v==null&&(v=I,_=A(M)),i[M.name]=[]});var y=f.get(p)||f.set(p,{categoryWayDim:_,valueWayDim:0});Ee(e,function(L,I){var M=L.name,D=A(L);if(v==null){var O=y.valueWayDim;S(i[M],O,D),S(u,O,D),y.valueWayDim+=D}else if(v===I)S(i[M],0,D),S(a,0,D);else{var O=y.categoryWayDim;S(i[M],O,D),S(u,O,D),y.categoryWayDim+=D}});function S(L,I,M){for(var D=0;D<M;D++)L.push(I+D)}function A(L){var I=L.dimsDef;return I?I.length:1}return a.length&&(i.itemName=a),u.length&&(i.seriesName=u),i}function z5(e){var t=e.get("data",!0);if(!t)return jp(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},mo).models[0]}function bW(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:jp(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},mo).models}function O5(e,t){return wW(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function wW(e,t,r,i,n,a){var u,o=5;if(Ea(e))return ya.Not;var f,p;if(i){var v=i[a];Kt(v)?(f=v.name,p=v.type):Wt(v)&&(f=v)}if(p!=null)return p==="ordinal"?ya.Must:ya.Not;if(t===ha){var _=e;if(r===Kh){for(var y=_[a],S=0;S<(y||[]).length&&S<o;S++)if((u=N(y[n+S]))!=null)return u}else for(var S=0;S<_.length&&S<o;S++){var A=_[n+S];if(A&&(u=N(A[a]))!=null)return u}}else if(t===Yo){var L=e;if(!f)return ya.Not;for(var S=0;S<L.length&&S<o;S++){var I=L[S];if(I&&(u=N(I[f]))!=null)return u}}else if(t===Os){var M=e;if(!f)return ya.Not;var y=M[f];if(!y||Ea(y))return ya.Not;for(var S=0;S<y.length&&S<o;S++)if((u=N(y[S]))!=null)return u}else if(t===Ya)for(var D=e,S=0;S<D.length&&S<o;S++){var I=D[S],O=Hp(I);if(!Ft(O))return ya.Not;if((u=N(O[a]))!=null)return u}function N(q){var Z=Wt(q);if(q!=null&&isFinite(q)&&q!=="")return Z?ya.Might:ya.Not;if(Z&&q!=="-")return ya.Must}return ya.Not}var SW=wr();function TW(e,t,r){var i=SW.get(t);if(!i)return r;var n=i(e);return n?r.concat(n):r}var FA=zi();zi();var x2=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,i){var n=Xn(this.get("color",!0)),a=this.get("colorLayer",!0);return CW(this,FA,n,a,t,r,i)},e.prototype.clearColorPalette=function(){AW(this,FA)},e}();function EW(e,t){for(var r=e.length,i=0;i<r;i++)if(e[i].length>t)return e[i];return e[r-1]}function CW(e,t,r,i,n,a,u){a=a||e;var o=t(a),f=o.paletteIdx||0,p=o.paletteNameMap=o.paletteNameMap||{};if(p.hasOwnProperty(n))return p[n];var v=u==null||!i?r:EW(i,u);if(v=v||r,!(!v||!v.length)){var _=v[f];return n&&(p[n]=_),o.paletteIdx=(f+1)%v.length,_}}function AW(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var Bv,cd,NA,VA="\0_ec_inner",MW=1,B5=function(e){It(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,i,n,a,u,o){a=a||{},this.option=null,this._theme=new Wn(a),this._locale=new Wn(u),this._optionManager=o},t.prototype.setOption=function(r,i,n){var a=GA(i);this._optionManager.setOption(r,n,a),this._resetOption(null,a)},t.prototype.resetOption=function(r,i){return this._resetOption(r,GA(i))},t.prototype._resetOption=function(r,i){var n=!1,a=this._optionManager;if(!r||r==="recreate"){var u=a.mountOption(r==="recreate");!this.option||r==="recreate"?NA(this,u):(this.restoreData(),this._mergeOption(u,i)),n=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var o=a.getTimelineOption(this);o&&(n=!0,this._mergeOption(o,i))}if(!r||r==="recreate"||r==="media"){var f=a.getMediaOption(this);f.length&&Ee(f,function(p){n=!0,this._mergeOption(p,i)},this)}return n},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,i){var n=this.option,a=this._componentsMap,u=this._componentsCount,o=[],f=wr(),p=i&&i.replaceMergeMainTypeMap;yW(this),Ee(r,function(_,y){_!=null&&(_i.hasClass(y)?y&&(o.push(y),f.set(y,!0)):n[y]=n[y]==null?Dr(_):xi(n[y],_,!0))}),p&&p.each(function(_,y){_i.hasClass(y)&&!f.get(y)&&(o.push(y),f.set(y,!0))}),_i.topologicalTravel(o,_i.getAllClassMainTypes(),v,this);function v(_){var y=TW(this,_,Xn(r[_])),S=a.get(_),A=S?p&&p.get(_)?"replaceMerge":"normalMerge":"replaceAll",L=pH(S,y,A);bH(L,_,_i),n[_]=null,a.set(_,null),u.set(_,0);var I=[],M=[],D=0,O;Ee(L,function(N,q){var Z=N.existing,Q=N.newOption;if(!Q)Z&&(Z.mergeOption({},this),Z.optionUpdated({},!1));else{var j=_==="series",ie=_i.getClass(_,N.keyInfo.subType,!j);if(!ie)return;if(_==="tooltip"){if(O)return;O=!0}if(Z&&Z.constructor===ie)Z.name=N.keyInfo.name,Z.mergeOption(Q,this),Z.optionUpdated(Q,!1);else{var ae=xt({componentIndex:q},N.keyInfo);Z=new ie(Q,this,this,ae),xt(Z,ae),N.brandNew&&(Z.__requireNewView=!0),Z.init(Q,this,this),Z.optionUpdated(null,!0)}}Z?(I.push(Z.option),M.push(Z),D++):(I.push(void 0),M.push(void 0))},this),n[_]=I,a.set(_,M),u.set(_,D),_==="series"&&Bv(this)}this._seriesIndices||Bv(this)},t.prototype.getOption=function(){var r=Dr(this.option);return Ee(r,function(i,n){if(_i.hasClass(n)){for(var a=Xn(i),u=a.length,o=!1,f=u-1;f>=0;f--)a[f]&&!dp(a[f])?o=!0:(a[f]=null,!o&&u--);a.length=u,r[n]=a}}),delete r[VA],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,i){var n=this._componentsMap.get(r);if(n){var a=n[i||0];if(a)return a;if(i==null){for(var u=0;u<n.length;u++)if(n[u])return n[u]}}},t.prototype.queryComponents=function(r){var i=r.mainType;if(!i)return[];var n=r.index,a=r.id,u=r.name,o=this._componentsMap.get(i);if(!o||!o.length)return[];var f;return n!=null?(f=[],Ee(Xn(n),function(p){o[p]&&f.push(o[p])})):a!=null?f=$A("id",a,o):u!=null?f=$A("name",u,o):f=Pn(o,function(p){return!!p}),UA(f,r)},t.prototype.findComponents=function(r){var i=r.query,n=r.mainType,a=o(i),u=a?this.queryComponents(a):Pn(this._componentsMap.get(n),function(p){return!!p});return f(UA(u,r));function o(p){var v=n+"Index",_=n+"Id",y=n+"Name";return p&&(p[v]!=null||p[_]!=null||p[y]!=null)?{mainType:n,index:p[v],id:p[_],name:p[y]}:null}function f(p){return r.filter?Pn(p,r.filter):p}},t.prototype.eachComponent=function(r,i,n){var a=this._componentsMap;if(lr(r)){var u=i,o=r;a.each(function(_,y){for(var S=0;_&&S<_.length;S++){var A=_[S];A&&o.call(u,y,A,A.componentIndex)}})}else for(var f=Wt(r)?a.get(r):Kt(r)?this.findComponents(r):null,p=0;f&&p<f.length;p++){var v=f[p];v&&i.call(n,v,v.componentIndex)}},t.prototype.getSeriesByName=function(r){var i=Wo(r,null);return Pn(this._componentsMap.get("series"),function(n){return!!n&&i!=null&&n.name===i})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return Pn(this._componentsMap.get("series"),function(i){return!!i&&i.subType===r})},t.prototype.getSeries=function(){return Pn(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,i){cd(this),Ee(this._seriesIndices,function(n){var a=this._componentsMap.get("series")[n];r.call(i,a,n)},this)},t.prototype.eachRawSeries=function(r,i){Ee(this._componentsMap.get("series"),function(n){n&&r.call(i,n,n.componentIndex)})},t.prototype.eachSeriesByType=function(r,i,n){cd(this),Ee(this._seriesIndices,function(a){var u=this._componentsMap.get("series")[a];u.subType===r&&i.call(n,u,a)},this)},t.prototype.eachRawSeriesByType=function(r,i,n){return Ee(this.getSeriesByType(r),i,n)},t.prototype.isSeriesFiltered=function(r){return cd(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,i){cd(this);var n=[];Ee(this._seriesIndices,function(a){var u=this._componentsMap.get("series")[a];r.call(i,u,a)&&n.push(a)},this),this._seriesIndices=n,this._seriesIndicesMap=wr(n)},t.prototype.restoreData=function(r){Bv(this);var i=this._componentsMap,n=[];i.each(function(a,u){_i.hasClass(u)&&n.push(u)}),_i.topologicalTravel(n,_i.getAllClassMainTypes(),function(a){Ee(i.get(a),function(u){u&&(a!=="series"||!IW(u,r))&&u.restoreData()})})},t.internalField=function(){Bv=function(r){var i=r._seriesIndices=[];Ee(r._componentsMap.get("series"),function(n){n&&i.push(n.componentIndex)}),r._seriesIndicesMap=wr(i)},cd=function(r){},NA=function(r,i){r.option={},r.option[VA]=MW,r._componentsMap=wr({series:[]}),r._componentsCount=wr();var n=i.aria;Kt(n)&&n.enabled==null&&(n.enabled=!0),PW(i,r._theme.option),xi(i,_W,!1),r._mergeOption(i,null)}}(),t}(Wn);function IW(e,t){if(t){var r=t.seriesIndex,i=t.seriesId,n=t.seriesName;return r!=null&&e.componentIndex!==r||i!=null&&e.id!==i||n!=null&&e.name!==n}}function PW(e,t){var r=e.color&&!e.colorLayer;Ee(t,function(i,n){n==="colorLayer"&&r||_i.hasClass(n)||(typeof i=="object"?e[n]=e[n]?xi(e[n],i,!1):Dr(i):e[n]==null&&(e[n]=i))})}function $A(e,t,r){if(Ft(t)){var i=wr();return Ee(t,function(a){if(a!=null){var u=Wo(a,null);u!=null&&i.set(a,!0)}}),Pn(r,function(a){return a&&i.get(a[e])})}else{var n=Wo(t,null);return Pn(r,function(a){return a&&n!=null&&a[e]===n})}}function UA(e,t){return t.hasOwnProperty("subType")?Pn(e,function(r){return r&&r.subType===t.subType}):e}function GA(e){var t=wr();return e&&Ee(Xn(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}bo(B5,x2);const F5=B5;var DW=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],LW=function(){function e(t){Ee(DW,function(r){this[r]=Ai(t[r],t)},this)}return e}();const N5=LW;var C1={},kW=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var i=[];Ee(C1,function(n,a){var u=n.create(t,r);i=i.concat(u||[])}),this._coordinateSystems=i},e.prototype.update=function(t,r){Ee(this._coordinateSystems,function(i){i.update&&i.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){C1[t]=r},e.get=function(t){return C1[t]},e}();const b2=kW;var RW=/^(min|max)?(.+)$/,zW=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,i){t&&(Ee(Xn(t.series),function(u){u&&u.data&&Ea(u.data)&&Dx(u.data)}),Ee(Xn(t.dataset),function(u){u&&u.source&&Ea(u.source)&&Dx(u.source)})),t=Dr(t);var n=this._optionBackup,a=OW(t,r,!n);this._newBaseOption=a.baseOption,n?(a.timelineOptions.length&&(n.timelineOptions=a.timelineOptions),a.mediaList.length&&(n.mediaList=a.mediaList),a.mediaDefault&&(n.mediaDefault=a.mediaDefault)):this._optionBackup=a},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],Dr(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,i=this._timelineOptions;if(i.length){var n=t.getComponent("timeline");n&&(r=Dr(i[n.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),i=this._api.getHeight(),n=this._mediaList,a=this._mediaDefault,u=[],o=[];if(!n.length&&!a)return o;for(var f=0,p=n.length;f<p;f++)BW(n[f].query,r,i)&&u.push(f);return!u.length&&a&&(u=[-1]),u.length&&!NW(u,this._currentMediaIndices)&&(o=Zt(u,function(v){return Dr(v===-1?a.option:n[v].option)})),this._currentMediaIndices=u,o},e}();function OW(e,t,r){var i=[],n,a,u=e.baseOption,o=e.timeline,f=e.options,p=e.media,v=!!e.media,_=!!(f||o||u&&u.timeline);u?(a=u,a.timeline||(a.timeline=o)):((_||v)&&(e.options=e.media=null),a=e),v&&Ft(p)&&Ee(p,function(S){S&&S.option&&(S.query?i.push(S):n||(n=S))}),y(a),Ee(f,function(S){return y(S)}),Ee(i,function(S){return y(S.option)});function y(S){Ee(t,function(A){A(S,r)})}return{baseOption:a,timelineOptions:f||[],mediaDefault:n,mediaList:i}}function BW(e,t,r){var i={width:t,height:r,aspectratio:t/r},n=!0;return Ee(e,function(a,u){var o=u.match(RW);if(!(!o||!o[1]||!o[2])){var f=o[1],p=o[2].toLowerCase();FW(i[p],a,f)||(n=!1)}}),n}function FW(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function NW(e,t){return e.join(",")===t.join(",")}const VW=zW;var oo=Ee,Sp=Kt,HA=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function A1(e){var t=e&&e.itemStyle;if(t)for(var r=0,i=HA.length;r<i;r++){var n=HA[r],a=t.normal,u=t.emphasis;a&&a[n]&&(e[n]=e[n]||{},e[n].normal?xi(e[n].normal,a[n]):e[n].normal=a[n],a[n]=null),u&&u[n]&&(e[n]=e[n]||{},e[n].emphasis?xi(e[n].emphasis,u[n]):e[n].emphasis=u[n],u[n]=null)}}function Mn(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var i=e[t].normal,n=e[t].emphasis;i&&(r?(e[t].normal=e[t].emphasis=null,pi(e[t],i)):e[t]=i),n&&(e.emphasis=e.emphasis||{},e.emphasis[t]=n,n.focus&&(e.emphasis.focus=n.focus),n.blurScope&&(e.emphasis.blurScope=n.blurScope))}}function Id(e){Mn(e,"itemStyle"),Mn(e,"lineStyle"),Mn(e,"areaStyle"),Mn(e,"label"),Mn(e,"labelLine"),Mn(e,"upperLabel"),Mn(e,"edgeLabel")}function Ri(e,t){var r=Sp(e)&&e[t],i=Sp(r)&&r.textStyle;if(i)for(var n=0,a=qC.length;n<a;n++){var u=qC[n];i.hasOwnProperty(u)&&(r[u]=i[u])}}function Na(e){e&&(Id(e),Ri(e,"label"),e.emphasis&&Ri(e.emphasis,"label"))}function $W(e){if(Sp(e)){A1(e),Id(e),Ri(e,"label"),Ri(e,"upperLabel"),Ri(e,"edgeLabel"),e.emphasis&&(Ri(e.emphasis,"label"),Ri(e.emphasis,"upperLabel"),Ri(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(A1(t),Na(t));var r=e.markLine;r&&(A1(r),Na(r));var i=e.markArea;i&&Na(i);var n=e.data;if(e.type==="graph"){n=n||e.nodes;var a=e.links||e.edges;if(a&&!Ea(a))for(var u=0;u<a.length;u++)Na(a[u]);Ee(e.categories,function(p){Id(p)})}if(n&&!Ea(n))for(var u=0;u<n.length;u++)Na(n[u]);if(t=e.markPoint,t&&t.data)for(var o=t.data,u=0;u<o.length;u++)Na(o[u]);if(r=e.markLine,r&&r.data)for(var f=r.data,u=0;u<f.length;u++)Ft(f[u])?(Na(f[u][0]),Na(f[u][1])):Na(f[u]);e.type==="gauge"?(Ri(e,"axisLabel"),Ri(e,"title"),Ri(e,"detail")):e.type==="treemap"?(Mn(e.breadcrumb,"itemStyle"),Ee(e.levels,function(p){Id(p)})):e.type==="tree"&&Id(e.leaves)}}function _s(e){return Ft(e)?e:e?[e]:[]}function qA(e){return(Ft(e)?e[0]:e)||{}}function UW(e,t){oo(_s(e.series),function(i){Sp(i)&&$W(i)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),oo(r,function(i){oo(_s(e[i]),function(n){n&&(Ri(n,"axisLabel"),Ri(n.axisPointer,"label"))})}),oo(_s(e.parallel),function(i){var n=i&&i.parallelAxisDefault;Ri(n,"axisLabel"),Ri(n&&n.axisPointer,"label")}),oo(_s(e.calendar),function(i){Mn(i,"itemStyle"),Ri(i,"dayLabel"),Ri(i,"monthLabel"),Ri(i,"yearLabel")}),oo(_s(e.radar),function(i){Ri(i,"name"),i.name&&i.axisName==null&&(i.axisName=i.name,delete i.name),i.nameGap!=null&&i.axisNameGap==null&&(i.axisNameGap=i.nameGap,delete i.nameGap)}),oo(_s(e.geo),function(i){Sp(i)&&(Na(i),oo(_s(i.regions),function(n){Na(n)}))}),oo(_s(e.timeline),function(i){Na(i),Mn(i,"label"),Mn(i,"itemStyle"),Mn(i,"controlStyle",!0);var n=i.data;Ft(n)&&Ee(n,function(a){Kt(a)&&(Mn(a,"label"),Mn(a,"itemStyle"))})}),oo(_s(e.toolbox),function(i){Mn(i,"iconStyle"),oo(i.feature,function(n){Mn(n,"iconStyle")})}),Ri(qA(e.axisPointer),"label"),Ri(qA(e.tooltip).axisPointer,"label")}function GW(e,t){for(var r=t.split(","),i=e,n=0;n<r.length&&(i=i&&i[r[n]],i!=null);n++);return i}function HW(e,t,r,i){for(var n=t.split(","),a=e,u,o=0;o<n.length-1;o++)u=n[o],a[u]==null&&(a[u]={}),a=a[u];(i||a[n[o]]==null)&&(a[n[o]]=r)}function jA(e){e&&Ee(qW,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var qW=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],jW=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],M1=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function hd(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<M1.length;r++){var i=M1[r][1],n=M1[r][0];t[i]!=null&&(t[n]=t[i])}}function WA(e){e&&e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function ZA(e){e&&e.downplay&&!e.blur&&(e.blur=e.downplay)}function WW(e){e&&e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function V5(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&V5(e[r].children,t)}function $5(e,t){UW(e,t),e.series=Xn(e.series),Ee(e.series,function(r){if(Kt(r)){var i=r.type;if(i==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(i==="pie"||i==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),WA(r.label);var n=r.data;if(n&&!Ea(n))for(var a=0;a<n.length;a++)WA(n[a]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(i==="gauge"){var u=GW(r,"pointer.color");u!=null&&HW(r,"itemStyle.color",u)}else if(i==="bar"){hd(r),hd(r.backgroundStyle),hd(r.emphasis);var n=r.data;if(n&&!Ea(n))for(var a=0;a<n.length;a++)typeof n[a]=="object"&&(hd(n[a]),hd(n[a]&&n[a].emphasis))}else if(i==="sunburst"){var o=r.highlightPolicy;o&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=o)),ZA(r),V5(r.data,ZA)}else i==="graph"||i==="sankey"?WW(r):i==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&pi(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),jA(r)}}),e.dataRange&&(e.visualMap=e.dataRange),Ee(jW,function(r){var i=e[r];i&&(Ft(i)||(i=[i]),Ee(i,function(n){jA(n)}))})}function ZW(e){var t=wr();e.eachSeries(function(r){var i=r.get("stack");if(i){var n=t.get(i)||t.set(i,[]),a=r.getData(),u={stackResultDimension:a.getCalculationInfo("stackResultDimension"),stackedOverDimension:a.getCalculationInfo("stackedOverDimension"),stackedDimension:a.getCalculationInfo("stackedDimension"),stackedByDimension:a.getCalculationInfo("stackedByDimension"),isStackedByIndex:a.getCalculationInfo("isStackedByIndex"),data:a,seriesModel:r};if(!u.stackedDimension||!(u.isStackedByIndex||u.stackedByDimension))return;n.length&&a.setCalculationInfo("stackedOnSeries",n[n.length-1].seriesModel),n.push(u)}}),t.each(XW)}function XW(e){Ee(e,function(t,r){var i=[],n=[NaN,NaN],a=[t.stackResultDimension,t.stackedOverDimension],u=t.data,o=t.isStackedByIndex,f=t.seriesModel.get("stackStrategy")||"samesign";u.modify(a,function(p,v,_){var y=u.get(t.stackedDimension,_);if(isNaN(y))return n;var S,A;o?A=u.getRawIndex(_):S=u.get(t.stackedByDimension,_);for(var L=NaN,I=r-1;I>=0;I--){var M=e[I];if(o||(A=M.data.rawIndexOf(M.stackedByDimension,S)),A>=0){var D=M.data.getByRawIndex(M.stackResultDimension,A);if(f==="all"||f==="positive"&&D>0||f==="negative"&&D<0||f==="samesign"&&y>=0&&D>0||f==="samesign"&&y<=0&&D<0){y=lH(y,D),L=D;break}}}return i[0]=y,i[1]=L,i})})}var Y_=function(){function e(t){this.data=t.data||(t.sourceFormat===Os?{}:[]),this.sourceFormat=t.sourceFormat||k5,this.seriesLayoutBy=t.seriesLayoutBy||Ms,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var i=0;i<r.length;i++){var n=r[i];n.type==null&&O5(this,i)===ya.Must&&(n.type="ordinal")}}return e}();function w2(e){return e instanceof Y_}function ob(e,t,r){r=r||U5(e);var i=t.seriesLayoutBy,n=KW(e,r,i,t.sourceHeader,t.dimensions),a=new Y_({data:e,sourceFormat:r,seriesLayoutBy:i,dimensionsDefine:n.dimensionsDefine,startIndex:n.startIndex,dimensionsDetectedCount:n.dimensionsDetectedCount,metaRawOption:Dr(t)});return a}function S2(e){return new Y_({data:e,sourceFormat:Ea(e)?Pl:Ya})}function YW(e){return new Y_({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:Dr(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function U5(e){var t=k5;if(Ea(e))t=Pl;else if(Ft(e)){e.length===0&&(t=ha);for(var r=0,i=e.length;r<i;r++){var n=e[r];if(n!=null){if(Ft(n)){t=ha;break}else if(Kt(n)){t=Yo;break}}}}else if(Kt(e)){for(var a in e)if(Oh(e,a)&&ca(e[a])){t=Os;break}}return t}function KW(e,t,r,i,n){var a,u;if(!e)return{dimensionsDefine:XA(n),startIndex:u,dimensionsDetectedCount:a};if(t===ha){var o=e;i==="auto"||i==null?YA(function(p){p!=null&&p!=="-"&&(Wt(p)?u==null&&(u=1):u=0)},r,o,10):u=Mi(i)?i:i?1:0,!n&&u===1&&(n=[],YA(function(p,v){n[v]=p!=null?p+"":""},r,o,1/0)),a=n?n.length:r===Kh?o.length:o[0]?o[0].length:null}else if(t===Yo)n||(n=JW(e));else if(t===Os)n||(n=[],Ee(e,function(p,v){n.push(v)}));else if(t===Ya){var f=Hp(e[0]);a=Ft(f)&&f.length||1}return{startIndex:u,dimensionsDefine:XA(n),dimensionsDetectedCount:a}}function JW(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r){var i=[];return Ee(r,function(n,a){i.push(a)}),i}}function XA(e){if(e){var t=wr();return Zt(e,function(r,i){r=Kt(r)?r:{name:r};var n={name:r.name,displayName:r.displayName,type:r.type};if(n.name==null)return n;n.name+="",n.displayName==null&&(n.displayName=n.name);var a=t.get(n.name);return a?n.name+="-"+a.count++:t.set(n.name,{count:1}),n})}}function YA(e,t,r,i){if(t===Kh)for(var n=0;n<r.length&&n<i;n++)e(r[n]?r[n][0]:null,n);else for(var a=r[0]||[],n=0;n<a.length&&n<i;n++)e(a[n],n)}function G5(e){var t=e.sourceFormat;return t===Yo||t===Os}var Ru,zu,Ou,KA,JA,H5=function(){function e(t,r){var i=w2(t)?t:S2(t);this._source=i;var n=this._data=i.data;i.sourceFormat===Pl&&(this._offset=0,this._dimSize=r,this._data=n),JA(this,n,i)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;JA=function(u,o,f){var p=f.sourceFormat,v=f.seriesLayoutBy,_=f.startIndex,y=f.dimensionsDefine,S=KA[T2(p,v)];if(xt(u,S),p===Pl)u.getItem=r,u.count=n,u.fillStorage=i;else{var A=q5(p,v);u.getItem=Ai(A,null,o,_,y);var L=j5(p,v);u.count=Ai(L,null,o,_,y)}};var r=function(u,o){u=u-this._offset,o=o||[];for(var f=this._data,p=this._dimSize,v=p*u,_=0;_<p;_++)o[_]=f[v+_];return o},i=function(u,o,f,p){for(var v=this._data,_=this._dimSize,y=0;y<_;y++){for(var S=p[y],A=S[0]==null?1/0:S[0],L=S[1]==null?-1/0:S[1],I=o-u,M=f[y],D=0;D<I;D++){var O=v[D*_+y];M[u+D]=O,O<A&&(A=O),O>L&&(L=O)}S[0]=A,S[1]=L}},n=function(){return this._data?this._data.length/this._dimSize:0};KA=(t={},t[ha+"_"+Ms]={pure:!0,appendData:a},t[ha+"_"+Kh]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Yo]={pure:!0,appendData:a},t[Os]={pure:!0,appendData:function(u){var o=this._data;Ee(u,function(f,p){for(var v=o[p]||(o[p]=[]),_=0;_<(f||[]).length;_++)v.push(f[_])})}},t[Ya]={appendData:a},t[Pl]={persistent:!1,pure:!0,appendData:function(u){this._data=u},clean:function(){this._offset+=this.count(),this._data=null}},t);function a(u){for(var o=0;o<u.length;o++)this._data.push(u[o])}}(),e}(),QA=function(e,t,r,i){return e[i]},QW=(Ru={},Ru[ha+"_"+Ms]=function(e,t,r,i){return e[i+t]},Ru[ha+"_"+Kh]=function(e,t,r,i,n){i+=t;for(var a=n||[],u=e,o=0;o<u.length;o++){var f=u[o];a[o]=f?f[i]:null}return a},Ru[Yo]=QA,Ru[Os]=function(e,t,r,i,n){for(var a=n||[],u=0;u<r.length;u++){var o=r[u].name,f=e[o];a[u]=f?f[i]:null}return a},Ru[Ya]=QA,Ru);function q5(e,t){var r=QW[T2(e,t)];return r}var eM=function(e,t,r){return e.length},eZ=(zu={},zu[ha+"_"+Ms]=function(e,t,r){return Math.max(0,e.length-t)},zu[ha+"_"+Kh]=function(e,t,r){var i=e[0];return i?Math.max(0,i.length-t):0},zu[Yo]=eM,zu[Os]=function(e,t,r){var i=r[0].name,n=e[i];return n?n.length:0},zu[Ya]=eM,zu);function j5(e,t){var r=eZ[T2(e,t)];return r}var I1=function(e,t,r){return e[t]},tZ=(Ou={},Ou[ha]=I1,Ou[Yo]=function(e,t,r){return e[r]},Ou[Os]=I1,Ou[Ya]=function(e,t,r){var i=Hp(e);return i instanceof Array?i[t]:i},Ou[Pl]=I1,Ou);function W5(e){var t=tZ[e];return t}function T2(e,t){return e===ha?e+"_"+t:e}function Fh(e,t,r){if(e){var i=e.getRawDataItem(t);if(i!=null){var n=e.getStore(),a=n.getSource().sourceFormat;if(r!=null){var u=e.getDimensionIndex(r),o=n.getDimensionProperty(u);return W5(a)(i,u,o)}else{var f=i;return a===Ya&&(f=Hp(i)),f}}}}var rZ=/\{@(.+?)\}/g,Z5=function(){function e(){}return e.prototype.getDataParams=function(t,r){var i=this.getData(r),n=this.getRawValue(t,r),a=i.getRawIndex(t),u=i.getName(t),o=i.getRawDataItem(t),f=i.getItemVisual(t,"style"),p=f&&f[i.getItemVisual(t,"drawType")||"fill"],v=f&&f.stroke,_=this.mainType,y=_==="series",S=i.userOutput&&i.userOutput.get();return{componentType:_,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:y?this.subType:null,seriesIndex:this.seriesIndex,seriesId:y?this.id:null,seriesName:y?this.name:null,name:u,dataIndex:a,data:o,dataType:r,value:n,color:p,borderColor:v,dimensionNames:S?S.fullDimensions:null,encode:S?S.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,i,n,a,u){r=r||"normal";var o=this.getData(i),f=this.getDataParams(t,i);if(u&&(f.value=u.interpolatedValue),n!=null&&Ft(f.value)&&(f.value=f.value[n]),!a){var p=o.getItemModel(t);a=p.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(lr(a))return f.status=r,f.dimensionIndex=n,a(f);if(Wt(a)){var v=I5(a,f);return v.replace(rZ,function(_,y){var S=y.length,A=y;A.charAt(0)==="["&&A.charAt(S-1)==="]"&&(A=+A.slice(1,S-1));var L=Fh(o,t,A);if(u&&Ft(u.interpolatedValue)){var I=o.getDimensionIndex(A);I>=0&&(L=u.interpolatedValue[I])}return L!=null?L+"":""})}},e.prototype.getRawValue=function(t,r){return Fh(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,i){},e}();function tM(e){var t,r;return Kt(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function Zd(e){return new iZ(e)}var iZ=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,i=t&&t.skip;if(this._dirty&&r){var n=this.context;n.data=n.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var a;this._plan&&!i&&(a=this._plan(this.context));var u=v(this._modBy),o=this._modDataCount||0,f=v(t&&t.modBy),p=t&&t.modDataCount||0;(u!==f||o!==p)&&(a="reset");function v(D){return!(D>=1)&&(D=1),D}var _;(this._dirty||a==="reset")&&(this._dirty=!1,_=this._doReset(i)),this._modBy=f,this._modDataCount=p;var y=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var S=this._dueIndex,A=Math.min(y!=null?this._dueIndex+y:1/0,this._dueEnd);if(!i&&(_||S<A)){var L=this._progress;if(Ft(L))for(var I=0;I<L.length;I++)this._doProgress(L[I],S,A,f,p);else this._doProgress(L,S,A,f,p)}this._dueIndex=A;var M=this._settedOutputEnd!=null?this._settedOutputEnd:A;this._outputDueEnd=M}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,i,n,a){rM.reset(r,i,n,a),this._callingProgress=t,this._callingProgress({start:r,end:i,count:i-r,next:rM.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,i;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(i=r.forceFirstProgress,r=r.progress),Ft(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var n=this._downstream;return n&&n.dirty(),i},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),rM=function(){var e,t,r,i,n,a={reset:function(f,p,v,_){t=f,e=p,r=v,i=_,n=Math.ceil(i/r),a.next=r>1&&i>0?o:u}};return a;function u(){return t<e?t++:null}function o(){var f=t%n*r+Math.ceil(t/n),p=t>=e?null:f<i?f:t;return t++,p}}();function Eh(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!Mi(e)&&e!=null&&e!=="-"&&(e=+Ps(e)),e==null||e===""?NaN:+e)}wr({number:function(e){return parseFloat(e)},time:function(e){return+Ps(e)},trim:function(e){return Wt(e)?Go(e):e}});var nZ=function(){function e(t,r){var i=t==="desc";this._resultLT=i?1:-1,r==null&&(r=i?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var i=Mi(t)?t:Zg(t),n=Mi(r)?r:Zg(r),a=isNaN(i),u=isNaN(n);if(a&&(i=this._incomparable),u&&(n=this._incomparable),a&&u){var o=Wt(t),f=Wt(r);o&&(i=f?t:0),f&&(n=o?r:0)}return i<n?this._resultLT:i>n?-this._resultLT:0},e}(),aZ=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return Eh(t,r)},e}();function oZ(e,t){var r=new aZ,i=e.data,n=r.sourceFormat=e.sourceFormat,a=e.startIndex,u="";e.seriesLayoutBy!==Ms&&aa(u);var o=[],f={},p=e.dimensionsDefine;if(p)Ee(p,function(L,I){var M=L.name,D={index:I,name:M,displayName:L.displayName};if(o.push(D),M!=null){var O="";Oh(f,M)&&aa(O),f[M]=D}});else for(var v=0;v<e.dimensionsDetectedCount;v++)o.push({index:v});var _=q5(n,Ms);t.__isBuiltIn&&(r.getRawDataItem=function(L){return _(i,a,o,L)},r.getRawData=Ai(sZ,null,e)),r.cloneRawData=Ai(lZ,null,e);var y=j5(n,Ms);r.count=Ai(y,null,i,a,o);var S=W5(n);r.retrieveValue=function(L,I){var M=_(i,a,o,L);return A(M,I)};var A=r.retrieveValueFromItem=function(L,I){if(L!=null){var M=o[I];if(M)return S(L,I,M.name)}};return r.getDimensionInfo=Ai(uZ,null,o,f),r.cloneAllDimensionInfo=Ai(cZ,null,o),r}function sZ(e){var t=e.sourceFormat;if(!E2(t)){var r="";aa(r)}return e.data}function lZ(e){var t=e.sourceFormat,r=e.data;if(!E2(t)){var i="";aa(i)}if(t===ha){for(var n=[],a=0,u=r.length;a<u;a++)n.push(r[a].slice());return n}else if(t===Yo){for(var n=[],a=0,u=r.length;a<u;a++)n.push(xt({},r[a]));return n}}function uZ(e,t,r){if(r!=null){if(Mi(r)||!isNaN(r)&&!Oh(t,r))return e[r];if(Oh(t,r))return t[r]}}function cZ(e){return Dr(e)}var X5=wr();function hZ(e){e=Dr(e);var t=e.type,r="";t||aa(r);var i=t.split(":");i.length!==2&&aa(r);var n=!1;i[0]==="echarts"&&(t=i[1],n=!0),e.__isBuiltIn=n,X5.set(t,e)}function fZ(e,t,r){var i=Xn(e),n=i.length,a="";n||aa(a);for(var u=0,o=n;u<o;u++){var f=i[u];t=dZ(f,t),u!==o-1&&(t.length=Math.max(t.length,1))}return t}function dZ(e,t,r,i){var n="";t.length||aa(n),Kt(e)||aa(n);var a=e.type,u=X5.get(a);u||aa(n);var o=Zt(t,function(p){return oZ(p,u)}),f=Xn(u.transform({upstream:o[0],upstreamList:o,config:Dr(e.config)}));return Zt(f,function(p,v){var _="";Kt(p)||aa(_),p.data||aa(_);var y=U5(p.data);E2(y)||aa(_);var S,A=t[0];if(A&&v===0&&!p.dimensions){var L=A.startIndex;L&&(p.data=A.data.slice(0,L).concat(p.data)),S={seriesLayoutBy:Ms,sourceHeader:L,dimensions:A.metaRawOption.dimensions}}else S={seriesLayoutBy:Ms,sourceHeader:0,dimensions:p.dimensions};return ob(p.data,S,null)})}function E2(e){return e===ha||e===Yo}var K_="undefined",pZ=typeof Uint32Array===K_?Array:Uint32Array,mZ=typeof Uint16Array===K_?Array:Uint16Array,Y5=typeof Int32Array===K_?Array:Int32Array,iM=typeof Float64Array===K_?Array:Float64Array,K5={float:iM,int:Y5,ordinal:Array,number:Array,time:iM},P1;function fd(e){return e>65535?pZ:mZ}function rh(){return[1/0,-1/0]}function vZ(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function nM(e,t,r,i,n){var a=K5[r||"float"];if(n){var u=e[t],o=u&&u.length;if(o!==i){for(var f=new a(i),p=0;p<o;p++)f[p]=u[p];e[t]=f}}else e[t]=new a(i)}var sb=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=wr()}return e.prototype.initData=function(t,r,i){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var n=t.getSource(),a=this.defaultDimValueGetter=P1[n.sourceFormat];this._dimValueGetter=i||a,this._rawExtent=[],G5(n),this._dimensions=Zt(r,function(u){return{type:u.type,property:u.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var i=this._calcDimNameToIdx,n=this._dimensions,a=i.get(t);if(a!=null){if(n[a].type===r)return a}else a=n.length;return n[a]={type:r},i.set(t,a),this._chunks[a]=new K5[r||"float"](this._rawCount),this._rawExtent[a]=rh(),a},e.prototype.collectOrdinalMeta=function(t,r){var i=this._chunks[t],n=this._dimensions[t],a=this._rawExtent,u=n.ordinalOffset||0,o=i.length;u===0&&(a[t]=rh());for(var f=a[t],p=u;p<o;p++){var v=i[p]=r.parseAndCollect(i[p]);isNaN(v)||(f[0]=Math.min(v,f[0]),f[1]=Math.max(v,f[1]))}n.ordinalMeta=r,n.ordinalOffset=o,n.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],i=r.ordinalMeta;return i},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,i=this.count();r.appendData(t);var n=r.count();return r.persistent||(n+=i),i<n&&this._initDataFromProvider(i,n,!0),[i,n]},e.prototype.appendValues=function(t,r){for(var i=this._chunks,n=this._dimensions,a=n.length,u=this._rawExtent,o=this.count(),f=o+Math.max(t.length,r||0),p=0;p<a;p++){var v=n[p];nM(i,p,v.type,f,!0)}for(var _=[],y=o;y<f;y++)for(var S=y-o,A=0;A<a;A++){var v=n[A],L=P1.arrayRows.call(this,t[S]||_,v.property,S,A);i[A][y]=L;var I=u[A];L<I[0]&&(I[0]=L),L>I[1]&&(I[1]=L)}return this._rawCount=this._count=f,{start:o,end:f}},e.prototype._initDataFromProvider=function(t,r,i){for(var n=this._provider,a=this._chunks,u=this._dimensions,o=u.length,f=this._rawExtent,p=Zt(u,function(D){return D.property}),v=0;v<o;v++){var _=u[v];f[v]||(f[v]=rh()),nM(a,v,_.type,r,i)}if(n.fillStorage)n.fillStorage(t,r,a,f);else for(var y=[],S=t;S<r;S++){y=n.getItem(S,y);for(var A=0;A<o;A++){var L=a[A],I=this._dimValueGetter(y,p[A],S,A);L[S]=I;var M=f[A];I<M[0]&&(M[0]=I),I>M[1]&&(M[1]=I)}}!n.persistent&&n.clean&&n.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var i=this._chunks[t];return i?i[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var i=[],n=[];if(r==null){r=t,t=[];for(var a=0;a<this._dimensions.length;a++)n.push(a)}else n=t;for(var a=0,u=n.length;a<u;a++)i.push(this.get(n[a],r));return i},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var i=this._chunks[t];return i?i[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],i=0;if(r)for(var n=0,a=this.count();n<a;n++){var u=this.get(t,n);isNaN(u)||(i+=u)}return i},e.prototype.getMedian=function(t){var r=[];this.each([t],function(a){isNaN(a)||r.push(a)});var i=r.sort(function(a,u){return a-u}),n=this.count();return n===0?0:n%2===1?i[(n-1)/2]:(i[n/2]+i[n/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,i=r[t];if(i!=null&&i<this._count&&i===t)return t;for(var n=0,a=this._count-1;n<=a;){var u=(n+a)/2|0;if(r[u]<t)n=u+1;else if(r[u]>t)a=u-1;else return u}return-1},e.prototype.indicesOfNearest=function(t,r,i){var n=this._chunks,a=n[t],u=[];if(!a)return u;i==null&&(i=1/0);for(var o=1/0,f=-1,p=0,v=0,_=this.count();v<_;v++){var y=this.getRawIndex(v),S=r-a[y],A=Math.abs(S);A<=i&&((A<o||A===o&&S>=0&&f<0)&&(o=A,f=S,p=0),S===f&&(u[p++]=v))}return u.length=p,u},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var i=r.constructor,n=this._count;if(i===Array){t=new i(n);for(var a=0;a<n;a++)t[a]=r[a]}else t=new i(r.buffer,0,n)}else{var i=fd(this._rawCount);t=new i(this.count());for(var a=0;a<t.length;a++)t[a]=a}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var i=this.clone(),n=i.count(),a=fd(i._rawCount),u=new a(n),o=[],f=t.length,p=0,v=t[0],_=i._chunks,y=0;y<n;y++){var S=void 0,A=i.getRawIndex(y);if(f===0)S=r(y);else if(f===1){var L=_[v][A];S=r(L,y)}else{for(var I=0;I<f;I++)o[I]=_[t[I]][A];o[I]=y,S=r.apply(null,o)}S&&(u[p++]=A)}return p<n&&(i._indices=u),i._count=p,i._extent=[],i._updateGetRawIdx(),i},e.prototype.selectRange=function(t){var r=this.clone(),i=r._count;if(!i)return this;var n=$r(t),a=n.length;if(!a)return this;var u=r.count(),o=fd(r._rawCount),f=new o(u),p=0,v=n[0],_=t[v][0],y=t[v][1],S=r._chunks,A=!1;if(!r._indices){var L=0;if(a===1){for(var I=S[n[0]],M=0;M<i;M++){var D=I[M];(D>=_&&D<=y||isNaN(D))&&(f[p++]=L),L++}A=!0}else if(a===2){for(var I=S[n[0]],O=S[n[1]],N=t[n[1]][0],q=t[n[1]][1],M=0;M<i;M++){var D=I[M],Z=O[M];(D>=_&&D<=y||isNaN(D))&&(Z>=N&&Z<=q||isNaN(Z))&&(f[p++]=L),L++}A=!0}}if(!A)if(a===1)for(var M=0;M<u;M++){var Q=r.getRawIndex(M),D=S[n[0]][Q];(D>=_&&D<=y||isNaN(D))&&(f[p++]=Q)}else for(var M=0;M<u;M++){for(var j=!0,Q=r.getRawIndex(M),ie=0;ie<a;ie++){var ae=n[ie],D=S[ae][Q];(D<t[ae][0]||D>t[ae][1])&&(j=!1)}j&&(f[p++]=r.getRawIndex(M))}return p<u&&(r._indices=f),r._count=p,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var i=this.clone(t);return this._updateDims(i,t,r),i},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,i){for(var n=t._chunks,a=[],u=r.length,o=t.count(),f=[],p=t._rawExtent,v=0;v<r.length;v++)p[r[v]]=rh();for(var _=0;_<o;_++){for(var y=t.getRawIndex(_),S=0;S<u;S++)f[S]=n[r[S]][y];f[u]=_;var A=i&&i.apply(null,f);if(A!=null){typeof A!="object"&&(a[0]=A,A=a);for(var v=0;v<A.length;v++){var L=r[v],I=A[v],M=p[L],D=n[L];D&&(D[y]=I),I<M[0]&&(M[0]=I),I>M[1]&&(M[1]=I)}}}},e.prototype.lttbDownSample=function(t,r){var i=this.clone([t],!0),n=i._chunks,a=n[t],u=this.count(),o=0,f=Math.floor(1/r),p=this.getRawIndex(0),v,_,y,S=new(fd(this._rawCount))(Math.min((Math.ceil(u/f)+2)*2,u));S[o++]=p;for(var A=1;A<u-1;A+=f){for(var L=Math.min(A+f,u-1),I=Math.min(A+f*2,u),M=(I+L)/2,D=0,O=L;O<I;O++){var N=this.getRawIndex(O),q=a[N];isNaN(q)||(D+=q)}D/=I-L;var Z=A,Q=Math.min(A+f,u),j=A-1,ie=a[p];v=-1,y=Z;for(var ae=-1,he=0,O=Z;O<Q;O++){var N=this.getRawIndex(O),q=a[N];if(isNaN(q)){he++,ae<0&&(ae=N);continue}_=Math.abs((j-M)*(q-ie)-(j-O)*(D-ie)),_>v&&(v=_,y=N)}he>0&&he<Q-Z&&(S[o++]=Math.min(ae,y),y=Math.max(ae,y)),S[o++]=y,p=y}return S[o++]=this.getRawIndex(u-1),i._count=o,i._indices=S,i.getRawIndex=this._getRawIdx,i},e.prototype.downSample=function(t,r,i,n){for(var a=this.clone([t],!0),u=a._chunks,o=[],f=Math.floor(1/r),p=u[t],v=this.count(),_=a._rawExtent[t]=rh(),y=new(fd(this._rawCount))(Math.ceil(v/f)),S=0,A=0;A<v;A+=f){f>v-A&&(f=v-A,o.length=f);for(var L=0;L<f;L++){var I=this.getRawIndex(A+L);o[L]=p[I]}var M=i(o),D=this.getRawIndex(Math.min(A+n(o,M)||0,v-1));p[D]=M,M<_[0]&&(_[0]=M),M>_[1]&&(_[1]=M),y[S++]=D}return a._count=S,a._indices=y,a._updateGetRawIdx(),a},e.prototype.each=function(t,r){if(this._count)for(var i=t.length,n=this._chunks,a=0,u=this.count();a<u;a++){var o=this.getRawIndex(a);switch(i){case 0:r(a);break;case 1:r(n[t[0]][o],a);break;case 2:r(n[t[0]][o],n[t[1]][o],a);break;default:for(var f=0,p=[];f<i;f++)p[f]=n[t[f]][o];p[f]=a,r.apply(null,p)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],i=rh();if(!r)return i;var n=this.count(),a=!this._indices,u;if(a)return this._rawExtent[t].slice();if(u=this._extent[t],u)return u.slice();u=i;for(var o=u[0],f=u[1],p=0;p<n;p++){var v=this.getRawIndex(p),_=r[v];_<o&&(o=_),_>f&&(f=_)}return u=[o,f],this._extent[t]=u,u},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var i=[],n=this._chunks,a=0;a<n.length;a++)i.push(n[a][r]);return i},e.prototype.clone=function(t,r){var i=new e,n=this._chunks,a=t&&Zh(t,function(o,f){return o[f]=!0,o},{});if(a)for(var u=0;u<n.length;u++)i._chunks[u]=a[u]?vZ(n[u]):n[u];else i._chunks=n;return this._copyCommonProps(i),r||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=Dr(this._extent),t._rawExtent=Dr(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var i=this._indices.length;r=new t(i);for(var n=0;n<i;n++)r[n]=this._indices[n]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,i,n,a){return Eh(r[a],this._dimensions[a])}P1={arrayRows:t,objectRows:function(r,i,n,a){return Eh(r[i],this._dimensions[a])},keyedColumns:t,original:function(r,i,n,a){var u=r&&(r.value==null?r:r.value);return Eh(u instanceof Array?u[a]:u,this._dimensions[a])},typedArray:function(r,i,n,a){return r[a]}}}(),e}(),gZ=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),i=!!r.length,n,a;if(Fv(t)){var u=t,o=void 0,f=void 0,p=void 0;if(i){var v=r[0];v.prepareSource(),p=v.getSource(),o=p.data,f=p.sourceFormat,a=[v._getVersionSign()]}else o=u.get("data",!0),f=Ea(o)?Pl:Ya,a=[];var _=this._getSourceMetaRawOption()||{},y=p&&p.metaRawOption||{},S=br(_.seriesLayoutBy,y.seriesLayoutBy)||null,A=br(_.sourceHeader,y.sourceHeader),L=br(_.dimensions,y.dimensions),I=S!==y.seriesLayoutBy||!!A!=!!y.sourceHeader||L;n=I?[ob(o,{seriesLayoutBy:S,sourceHeader:A,dimensions:L},f)]:[]}else{var M=t;if(i){var D=this._applyTransform(r);n=D.sourceList,a=D.upstreamSignList}else{var O=M.get("source",!0);n=[ob(O,this._getSourceMetaRawOption(),null)],a=[]}}this._setLocalSource(n,a)},e.prototype._applyTransform=function(t){var r=this._sourceHost,i=r.get("transform",!0),n=r.get("fromTransformResult",!0);if(n!=null){var a="";t.length!==1&&aM(a)}var u,o=[],f=[];return Ee(t,function(p){p.prepareSource();var v=p.getSource(n||0),_="";n!=null&&!v&&aM(_),o.push(v),f.push(p._getVersionSign())}),i?u=fZ(i,o,{datasetIndex:r.componentIndex}):n!=null&&(u=[YW(o[0])]),{sourceList:u,upstreamSignList:f}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var i=t[r];if(i._isDirty()||this._upstreamSignList[r]!==i._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var i=this._getUpstreamSourceManagers();return i[0]&&i[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,i){var n=0,a=this._storeList,u=a[n];u||(u=a[n]={});var o=u[i];if(!o){var f=this._getUpstreamSourceManagers()[0];Fv(this._sourceHost)&&f?o=f._innerGetDataStore(t,r,i):(o=new sb,o.initData(new H5(r,t.length),t)),u[i]=o}return o},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(Fv(t)){var r=z5(t);return r?[r.getSourceManager()]:[]}else return Zt(bW(t),function(i){return i.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,i,n;if(Fv(t))r=t.get("seriesLayoutBy",!0),i=t.get("sourceHeader",!0),n=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var a=t;r=a.get("seriesLayoutBy",!0),i=a.get("sourceHeader",!0),n=a.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:i,dimensions:n}},e}();function Fv(e){return e.mainType==="series"}function aM(e){throw new Error(e)}var J5="line-height:1";function Q5(e,t){var r=e.color||"#6e7079",i=e.fontSize||12,n=e.fontWeight||"400",a=e.color||"#464646",u=e.fontSize||14,o=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+wa(i+"")+"px;color:"+wa(r)+";font-weight:"+wa(n+""),valueStyle:"font-size:"+wa(u+"")+"px;color:"+wa(a)+";font-weight:"+wa(o+"")}:{nameStyle:{fontSize:i,fill:r,fontWeight:n},valueStyle:{fontSize:u,fill:a,fontWeight:o}}}var _Z=[0,10,20,30],yZ=["",`
`,`

`,`


`];function Ol(e,t){return t.type=e,t}function lb(e){return e.type==="section"}function e3(e){return lb(e)?xZ:bZ}function t3(e){if(lb(e)){var t=0,r=e.blocks.length,i=r>1||r>0&&!e.noHeader;return Ee(e.blocks,function(n){var a=t3(n);a>=t&&(t=a+ +(i&&(!a||lb(n)&&!n.noHeader)))}),t}return 0}function xZ(e,t,r,i){var n=t.noHeader,a=wZ(t3(t)),u=[],o=t.blocks||[];_o(!o||Ft(o)),o=o||[];var f=e.orderMode;if(t.sortBlocks&&f){o=o.slice();var p={valueAsc:"asc",valueDesc:"desc"};if(Oh(p,f)){var v=new nZ(p[f],null);o.sort(function(A,L){return v.evaluate(A.sortParam,L.sortParam)})}else f==="seriesDesc"&&o.reverse()}Ee(o,function(A,L){var I=t.valueFormatter,M=e3(A)(I?xt(xt({},e),{valueFormatter:I}):e,A,L>0?a.html:0,i);M!=null&&u.push(M)});var _=e.renderMode==="richText"?u.join(a.richText):ub(u.join(""),n?r:a.html);if(n)return _;var y=ab(t.header,"ordinal",e.useUTC),S=Q5(i,e.renderMode).nameStyle;return e.renderMode==="richText"?r3(e,y,S)+a.richText+_:ub('<div style="'+S+";"+J5+';">'+wa(y)+"</div>"+_,r)}function bZ(e,t,r,i){var n=e.renderMode,a=t.noName,u=t.noValue,o=!t.markerType,f=t.name,p=e.useUTC,v=t.valueFormatter||e.valueFormatter||function(N){return N=Ft(N)?N:[N],Zt(N,function(q,Z){return ab(q,Ft(S)?S[Z]:S,p)})};if(!(a&&u)){var _=o?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",n),y=a?"":ab(f,"ordinal",p),S=t.valueType,A=u?[]:v(t.value),L=!o||!a,I=!o&&a,M=Q5(i,n),D=M.nameStyle,O=M.valueStyle;return n==="richText"?(o?"":_)+(a?"":r3(e,y,D))+(u?"":EZ(e,A,L,I,O)):ub((o?"":_)+(a?"":SZ(y,!o,D))+(u?"":TZ(A,L,I,O)),r)}}function oM(e,t,r,i,n,a){if(e){var u=e3(e),o={useUTC:n,renderMode:r,orderMode:i,markupStyleCreator:t,valueFormatter:e.valueFormatter};return u(o,e,0,a)}}function wZ(e){return{html:_Z[e],richText:yZ[e]}}function ub(e,t){var r='<div style="clear:both"></div>',i="margin: "+t+"px 0 0";return'<div style="'+i+";"+J5+';">'+e+r+"</div>"}function SZ(e,t,r){var i=t?"margin-left:2px":"";return'<span style="'+r+";"+i+'">'+wa(e)+"</span>"}function TZ(e,t,r,i){var n=r?"10px":"20px",a=t?"float:right;margin-left:"+n:"";return e=Ft(e)?e:[e],'<span style="'+a+";"+i+'">'+Zt(e,function(u){return wa(u)}).join("&nbsp;&nbsp;")+"</span>"}function r3(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function EZ(e,t,r,i,n){var a=[n],u=i?10:20;return r&&a.push({padding:[0,0,0,u],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(Ft(t)?t.join("  "):t,a)}function CZ(e,t){var r=e.getData().getItemVisual(t,"style"),i=r[e.visualDrawType];return xp(i)}function i3(e,t){var r=e.get("padding");return r??(t==="richText"?[8,10]:10)}var D1=function(){function e(){this.richTextStyles={},this._nextStyleNameId=ck()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,i){var n=i==="richText"?this._generateStyleName():null,a=dW({color:r,type:t,renderMode:i,markerId:n});return Wt(a)?a:(this.richTextStyles[n]=a.style,a.content)},e.prototype.wrapRichTextStyle=function(t,r){var i={};Ft(r)?Ee(r,function(a){return xt(i,a)}):xt(i,r);var n=this._generateStyleName();return this.richTextStyles[n]=i,"{"+n+"|"+t+"}"},e}();function AZ(e){var t=e.series,r=e.dataIndex,i=e.multipleSeries,n=t.getData(),a=n.mapDimensionsAll("defaultedTooltip"),u=a.length,o=t.getRawValue(r),f=Ft(o),p=CZ(t,r),v,_,y,S;if(u>1||f&&!u){var A=MZ(o,t,r,a,p);v=A.inlineValues,_=A.inlineValueTypes,y=A.blocks,S=A.inlineValues[0]}else if(u){var L=n.getDimensionInfo(a[0]);S=v=Fh(n,r,a[0]),_=L.type}else S=v=f?o[0]:o;var I=pk(t),M=I&&t.name||"",D=n.getName(r),O=i?M:D;return Ol("section",{header:M,noHeader:i||!I,sortParam:S,blocks:[Ol("nameValue",{markerType:"item",markerColor:p,name:O,noName:!Go(O),value:v,valueType:_})].concat(y||[])})}function MZ(e,t,r,i,n){var a=t.getData(),u=Zh(e,function(_,y,S){var A=a.getDimensionInfo(S);return _=_||A&&A.tooltip!==!1&&A.displayName!=null},!1),o=[],f=[],p=[];i.length?Ee(i,function(_){v(Fh(a,r,_),_)}):Ee(e,v);function v(_,y){var S=a.getDimensionInfo(y);!S||S.otherDims.tooltip===!1||(u?p.push(Ol("nameValue",{markerType:"subItem",markerColor:n,name:S.displayName,value:_,valueType:S.type})):(o.push(_),f.push(S.type)))}return{inlineValues:o,inlineValueTypes:f,blocks:p}}var fl=zi();function Nv(e,t){return e.getName(t)||e.getId(t)}var IZ="__universalTransitionEnabled",J_=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,i,n){this.seriesIndex=this.componentIndex,this.dataTask=Zd({count:DZ,reset:LZ}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,n);var a=fl(this).sourceManager=new gZ(this);a.prepareSource();var u=this.getInitialData(r,n);lM(u,this),this.dataTask.context.data=u,fl(this).dataBeforeProcessed=u,sM(this),this._initSelectedMapFromData(u)},t.prototype.mergeDefaultAndTheme=function(r,i){var n=bp(this),a=n?y2(r):{},u=this.subType;_i.hasClass(u)&&(u+="Series"),xi(r,i.getTheme().get(this.subType)),xi(r,this.getDefaultOption()),Xx(r,"label",["show"]),this.fillDataTextStyle(r.data),n&&wp(r,a,n)},t.prototype.mergeOption=function(r,i){r=xi(this.option,r,!0),this.fillDataTextStyle(r.data);var n=bp(this);n&&wp(this.option,r,n);var a=fl(this).sourceManager;a.dirty(),a.prepareSource();var u=this.getInitialData(r,i);lM(u,this),this.dataTask.dirty(),this.dataTask.context.data=u,fl(this).dataBeforeProcessed=u,sM(this),this._initSelectedMapFromData(u)},t.prototype.fillDataTextStyle=function(r){if(r&&!Ea(r))for(var i=["show"],n=0;n<r.length;n++)r[n]&&r[n].label&&Xx(r[n],"label",i)},t.prototype.getInitialData=function(r,i){},t.prototype.appendData=function(r){var i=this.getRawData();i.appendData(r.data)},t.prototype.getData=function(r){var i=cb(this);if(i){var n=i.context.data;return r==null?n:n.getLinkedData(r)}else return fl(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var i=cb(this);if(i){var n=i.context;n.outputData=r,i!==this.dataTask&&(n.data=r)}fl(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return wr(r)},t.prototype.getSourceManager=function(){return fl(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return fl(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,i,n){return AZ({series:this,dataIndex:r,multipleSeries:i})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(xr.node&&!(r&&r.ssr))return!1;var i=this.getShallow("animation");return i&&this.getData().count()>this.getShallow("animationThreshold")&&(i=!1),!!i},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,i,n){var a=this.ecModel,u=x2.prototype.getColorFromPalette.call(this,r,i,n);return u||(u=a.getColorFromPalette(r,i,n)),u},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,i){this._innerSelect(this.getData(i),r)},t.prototype.unselect=function(r,i){var n=this.option.selectedMap;if(n){var a=this.option.selectedMode,u=this.getData(i);if(a==="series"||n==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var o=0;o<r.length;o++){var f=r[o],p=Nv(u,f);n[p]=!1,this._selectedDataIndicesMap[p]=-1}}},t.prototype.toggleSelect=function(r,i){for(var n=[],a=0;a<r.length;a++)n[0]=r[a],this.isSelected(r[a],i)?this.unselect(n,i):this.select(n,i)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,i=$r(r),n=[],a=0;a<i.length;a++){var u=r[i[a]];u>=0&&n.push(u)}return n},t.prototype.isSelected=function(r,i){var n=this.option.selectedMap;if(!n)return!1;var a=this.getData(i);return(n==="all"||n[Nv(a,r)])&&!a.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[IZ])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,i){var n,a,u=this.option,o=u.selectedMode,f=i.length;if(!(!o||!f)){if(o==="series")u.selectedMap="all";else if(o==="multiple"){Kt(u.selectedMap)||(u.selectedMap={});for(var p=u.selectedMap,v=0;v<f;v++){var _=i[v],y=Nv(r,_);p[y]=!0,this._selectedDataIndicesMap[y]=r.getRawIndex(_)}}else if(o==="single"||o===!0){var S=i[f-1],y=Nv(r,S);u.selectedMap=(n={},n[y]=!0,n),this._selectedDataIndicesMap=(a={},a[y]=r.getRawIndex(S),a)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var i=[];r.hasItemOption&&r.each(function(n){var a=r.getRawDataItem(n);a&&a.selected&&i.push(n)}),i.length>0&&this._innerSelect(r,i)}},t.registerClass=function(r){return _i.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(_i);bo(J_,Z5);bo(J_,x2);gk(J_,_i);function sM(e){var t=e.name;pk(e)||(e.name=PZ(e)||t)}function PZ(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),i=[];return Ee(r,function(n){var a=t.getDimensionInfo(n);a.displayName&&i.push(a.displayName)}),i.join(" ")}function DZ(e){return e.model.getRawData().count()}function LZ(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),kZ}function kZ(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function lM(e,t){Ee(Lx(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,ln(RZ,t))})}function RZ(e,t){var r=cb(e);return r&&r.setOutputEnd((t||this).count()),t}function cb(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var i=r.currentTask;if(i){var n=i.agentStubMap;n&&(i=n.get(e.uid))}return i}}const Nh=J_;var C2=function(){function e(){this.group=new _n,this.uid=H_("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,i,n){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,i,n){},e.prototype.updateLayout=function(t,r,i,n){},e.prototype.updateVisual=function(t,r,i,n){},e.prototype.toggleBlurSeries=function(t,r,i){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();Xw(C2);B_(C2);const Ds=C2;function A2(){var e=zi();return function(t){var r=e(t),i=t.pipelineContext,n=!!r.large,a=!!r.progressiveRender,u=r.large=!!(i&&i.large),o=r.progressiveRender=!!(i&&i.progressiveRender);return(n!==u||a!==o)&&"reset"}}var n3=zi(),zZ=A2(),M2=function(){function e(){this.group=new _n,this.uid=H_("viewChart"),this.renderTask=Zd({plan:OZ,reset:BZ}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,i,n){},e.prototype.highlight=function(t,r,i,n){var a=t.getData(n&&n.dataType);a&&cM(a,n,"emphasis")},e.prototype.downplay=function(t,r,i,n){var a=t.getData(n&&n.dataType);a&&cM(a,n,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,i,n){this.render(t,r,i,n)},e.prototype.updateLayout=function(t,r,i,n){this.render(t,r,i,n)},e.prototype.updateVisual=function(t,r,i,n){this.render(t,r,i,n)},e.prototype.eachRendered=function(t){$_(this.group,t)},e.markUpdateMethod=function(t,r){n3(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function uM(e,t,r){e&&tb(e)&&(t==="emphasis"?mp:vp)(e,r)}function cM(e,t,r){var i=qp(e,t),n=t&&t.highlightKey!=null?Uq(t.highlightKey):null;i!=null?Ee(Xn(i),function(a){uM(e.getItemGraphicEl(a),r,n)}):e.eachItemGraphicEl(function(a){uM(a,r,n)})}Xw(M2);B_(M2);function OZ(e){return zZ(e.model)}function BZ(e){var t=e.model,r=e.ecModel,i=e.api,n=e.payload,a=t.pipelineContext.progressiveRender,u=e.view,o=n&&n3(n).updateMethod,f=a?"incrementalPrepareRender":o&&u[o]?o:"render";return f!=="render"&&u[f](t,r,i,n),FZ[f]}var FZ={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const rc=M2;var r_="\0__throttleOriginMethod",hM="\0__throttleRate",fM="\0__throttleType";function I2(e,t,r){var i,n=0,a=0,u=null,o,f,p,v;t=t||0;function _(){a=new Date().getTime(),u=null,e.apply(f,p||[])}var y=function(){for(var S=[],A=0;A<arguments.length;A++)S[A]=arguments[A];i=new Date().getTime(),f=this,p=S;var L=v||t,I=v||r;v=null,o=i-(I?n:a)-L,clearTimeout(u),I?u=setTimeout(_,L):o>=0?_():u=setTimeout(_,-o),n=i};return y.clear=function(){u&&(clearTimeout(u),u=null)},y.debounceNextCall=function(S){v=S},y}function a3(e,t,r,i){var n=e[t];if(n){var a=n[r_]||n,u=n[fM],o=n[hM];if(o!==r||u!==i){if(r==null||!i)return e[t]=a;n=e[t]=I2(a,r,i==="debounce"),n[r_]=a,n[fM]=i,n[hM]=r}return n}}function hb(e,t){var r=e[t];r&&r[r_]&&(r.clear&&r.clear(),e[t]=r[r_])}var dM=zi(),pM={itemStyle:pp(v5,!0),lineStyle:pp(m5,!0)},NZ={lineStyle:"stroke",itemStyle:"fill"};function o3(e,t){var r=e.visualStyleMapper||pM[t];return r||(console.warn("Unknown style type '"+t+"'."),pM.itemStyle)}function s3(e,t){var r=e.visualDrawType||NZ[t];return r||(console.warn("Unknown style type '"+t+"'."),"fill")}var VZ={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),i=e.visualStyleAccessPath||"itemStyle",n=e.getModel(i),a=o3(e,i),u=a(n),o=n.getShallow("decal");o&&(r.setVisual("decal",o),o.dirty=!0);var f=s3(e,i),p=u[f],v=lr(p)?p:null,_=u.fill==="auto"||u.stroke==="auto";if(!u[f]||v||_){var y=e.getColorFromPalette(e.name,null,t.getSeriesCount());u[f]||(u[f]=y,r.setVisual("colorFromPalette",!0)),u.fill=u.fill==="auto"||lr(u.fill)?y:u.fill,u.stroke=u.stroke==="auto"||lr(u.stroke)?y:u.stroke}if(r.setVisual("style",u),r.setVisual("drawType",f),!t.isSeriesFiltered(e)&&v)return r.setVisual("colorFromPalette",!1),{dataEach:function(S,A){var L=e.getDataParams(A),I=xt({},u);I[f]=v(L),S.setItemVisual(A,"style",I)}}}},dd=new Wn,$Z={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),i=e.visualStyleAccessPath||"itemStyle",n=o3(e,i),a=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(u,o){var f=u.getRawDataItem(o);if(f&&f[i]){dd.option=f[i];var p=n(dd),v=u.ensureUniqueItemVisual(o,"style");xt(v,p),dd.option.decal&&(u.setItemVisual(o,"decal",dd.option.decal),dd.option.decal.dirty=!0),a in p&&u.setItemVisual(o,"colorFromPalette",!1)}}:null}}}},UZ={performRawSeries:!0,overallReset:function(e){var t=wr();e.eachSeries(function(r){var i=r.getColorBy();if(!r.isColorBySeries()){var n=r.type+"-"+i,a=t.get(n);a||(a={},t.set(n,a)),dM(r).scope=a}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var i=r.getRawData(),n={},a=r.getData(),u=dM(r).scope,o=r.visualStyleAccessPath||"itemStyle",f=s3(r,o);a.each(function(p){var v=a.getRawIndex(p);n[v]=p}),i.each(function(p){var v=n[p],_=a.getItemVisual(v,"colorFromPalette");if(_){var y=a.ensureUniqueItemVisual(v,"style"),S=i.getName(p)||p+"",A=i.count();y[f]=r.getColorFromPalette(S,u,A)}})}})}},Vv=Math.PI;function GZ(e,t){t=t||{},pi(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new _n,i=new sa({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(i);var n=new yo({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),a=new sa({style:{fill:"none"},textContent:n,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(a);var u;return t.showSpinner&&(u=new l2({shape:{startAngle:-Vv/2,endAngle:-Vv/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),u.animateShape(!0).when(1e3,{endAngle:Vv*3/2}).start("circularInOut"),u.animateShape(!0).when(1e3,{startAngle:Vv*3/2}).delay(300).start("circularInOut"),r.add(u)),r.resize=function(){var o=n.getBoundingRect().width,f=t.showSpinner?t.spinnerRadius:0,p=(e.getWidth()-f*2-(t.showSpinner&&o?10:0)-o)/2-(t.showSpinner&&o?0:5+o/2)+(t.showSpinner?0:o/2)+(o?0:f),v=e.getHeight()/2;t.showSpinner&&u.setShape({cx:p,cy:v}),a.setShape({x:p-f,y:v-f,width:f*2,height:f*2}),i.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var HZ=function(){function e(t,r,i,n){this._stageTaskMap=wr(),this.ecInstance=t,this.api=r,i=this._dataProcessorHandlers=i.slice(),n=this._visualHandlers=n.slice(),this._allHandlers=i.concat(n)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(i){var n=i.overallTask;n&&n.dirty()})},e.prototype.getPerformArgs=function(t,r){if(t.__pipeline){var i=this._pipelineMap.get(t.__pipeline.id),n=i.context,a=!r&&i.progressiveEnabled&&(!n||n.progressiveRender)&&t.__idxInPipeline>i.blockIndex,u=a?i.step:null,o=n&&n.modDataCount,f=o!=null?Math.ceil(o/u):null;return{step:u,modBy:f,modDataCount:o}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var i=this._pipelineMap.get(t.uid),n=t.getData(),a=n.count(),u=i.progressiveEnabled&&r.incrementalPrepareRender&&a>=i.threshold,o=t.get("large")&&a>=t.get("largeThreshold"),f=t.get("progressiveChunkMode")==="mod"?a:null;t.pipelineContext=i.context={progressiveRender:u,modDataCount:f,large:o}},e.prototype.restorePipelines=function(t){var r=this,i=r._pipelineMap=wr();t.eachSeries(function(n){var a=n.getProgressive(),u=n.uid;i.set(u,{id:u,head:null,tail:null,threshold:n.getProgressiveThreshold(),progressiveEnabled:a&&!(n.preventIncremental&&n.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),r._pipe(n,n.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),i=this.api;Ee(this._allHandlers,function(n){var a=t.get(n.uid)||t.set(n.uid,{}),u="";_o(!(n.reset&&n.overallReset),u),n.reset&&this._createSeriesStageTask(n,a,r,i),n.overallReset&&this._createOverallStageTask(n,a,r,i)},this)},e.prototype.prepareView=function(t,r,i,n){var a=t.renderTask,u=a.context;u.model=r,u.ecModel=i,u.api=n,a.__block=!t.incrementalPrepareRender,this._pipe(r,a)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,i){this._performStageTasks(this._visualHandlers,t,r,i)},e.prototype._performStageTasks=function(t,r,i,n){n=n||{};var a=!1,u=this;Ee(t,function(f,p){if(!(n.visualType&&n.visualType!==f.visualType)){var v=u._stageTaskMap.get(f.uid),_=v.seriesTaskMap,y=v.overallTask;if(y){var S,A=y.agentStubMap;A.each(function(I){o(n,I)&&(I.dirty(),S=!0)}),S&&y.dirty(),u.updatePayload(y,i);var L=u.getPerformArgs(y,n.block);A.each(function(I){I.perform(L)}),y.perform(L)&&(a=!0)}else _&&_.each(function(I,M){o(n,I)&&I.dirty();var D=u.getPerformArgs(I,n.block);D.skip=!f.performRawSeries&&r.isSeriesFiltered(I.context.model),u.updatePayload(I,i),I.perform(D)&&(a=!0)})}});function o(f,p){return f.setDirty&&(!f.dirtyMap||f.dirtyMap.get(p.__pipeline.id))}this.unfinished=a||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(i){r=i.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,i,n){var a=this,u=r.seriesTaskMap,o=r.seriesTaskMap=wr(),f=t.seriesType,p=t.getTargetSeries;t.createOnAllSeries?i.eachRawSeries(v):f?i.eachRawSeriesByType(f,v):p&&p(i,n).each(v);function v(_){var y=_.uid,S=o.set(y,u&&u.get(y)||Zd({plan:XZ,reset:YZ,count:JZ}));S.context={model:_,ecModel:i,api:n,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:a},a._pipe(_,S)}},e.prototype._createOverallStageTask=function(t,r,i,n){var a=this,u=r.overallTask=r.overallTask||Zd({reset:qZ});u.context={ecModel:i,api:n,overallReset:t.overallReset,scheduler:a};var o=u.agentStubMap,f=u.agentStubMap=wr(),p=t.seriesType,v=t.getTargetSeries,_=!0,y=!1,S="";_o(!t.createOnAllSeries,S),p?i.eachRawSeriesByType(p,A):v?v(i,n).each(A):(_=!1,Ee(i.getSeries(),A));function A(L){var I=L.uid,M=f.set(I,o&&o.get(I)||(y=!0,Zd({reset:jZ,onDirty:ZZ})));M.context={model:L,overallProgress:_},M.agent=u,M.__block=_,a._pipe(L,M)}y&&u.dirty()},e.prototype._pipe=function(t,r){var i=t.uid,n=this._pipelineMap.get(i);!n.head&&(n.head=r),n.tail&&n.tail.pipe(r),n.tail=r,r.__idxInPipeline=n.count++,r.__pipeline=n},e.wrapStageHandler=function(t,r){return lr(t)&&(t={overallReset:t,seriesType:QZ(t)}),t.uid=H_("stageHandler"),r&&(t.visualType=r),t},e}();function qZ(e){e.overallReset(e.ecModel,e.api,e.payload)}function jZ(e){return e.overallProgress&&WZ}function WZ(){this.agent.dirty(),this.getDownstream().dirty()}function ZZ(){this.agent&&this.agent.dirty()}function XZ(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function YZ(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Xn(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?Zt(t,function(r,i){return l3(i)}):KZ}var KZ=l3(0);function l3(e){return function(t,r){var i=r.data,n=r.resetDefines[e];if(n&&n.dataEach)for(var a=t.start;a<t.end;a++)n.dataEach(i,a);else n&&n.progress&&n.progress(t,i)}}function JZ(e){return e.data.count()}function QZ(e){i_=null;try{e(Tp,u3)}catch{}return i_}var Tp={},u3={},i_;c3(Tp,F5);c3(u3,N5);Tp.eachSeriesByType=Tp.eachRawSeriesByType=function(e){i_=e};Tp.eachComponent=function(e){e.mainType==="series"&&e.subType&&(i_=e.subType)};function c3(e,t){for(var r in t.prototype)e[r]=Zn}const h3=HZ;var mM=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const eX={color:mM,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],mM]};var Gn="#B9B8CE",vM="#100C2A",$v=function(){return{axisLine:{lineStyle:{color:Gn}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},gM=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],f3={darkMode:!0,color:gM,backgroundColor:vM,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Gn}},textStyle:{color:Gn},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Gn}},dataZoom:{borderColor:"#71708A",textStyle:{color:Gn},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Gn}},timeline:{lineStyle:{color:Gn},label:{color:Gn},controlStyle:{color:Gn,borderColor:Gn}},calendar:{itemStyle:{color:vM},dayLabel:{color:Gn},monthLabel:{color:Gn},yearLabel:{color:Gn}},timeAxis:$v(),logAxis:$v(),valueAxis:$v(),categoryAxis:$v(),line:{symbol:"circle"},graph:{color:gM},gauge:{title:{color:Gn},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Gn},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};f3.categoryAxis.splitLine.show=!1;const tX=f3;var rX=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},i={},n={};if(Wt(t)){var a=Ho(t);r.mainType=a.main||null,r.subType=a.sub||null}else{var u=["Index","Name","Id"],o={name:1,dataIndex:1,dataType:1};Ee(t,function(f,p){for(var v=!1,_=0;_<u.length;_++){var y=u[_],S=p.lastIndexOf(y);if(S>0&&S===p.length-y.length){var A=p.slice(0,S);A!=="data"&&(r.mainType=A,r[y.toLowerCase()]=f,v=!0)}}o.hasOwnProperty(p)&&(i[p]=f,v=!0),v||(n[p]=f)})}return{cptQuery:r,dataQuery:i,otherQuery:n}},e.prototype.filter=function(t,r){var i=this.eventInfo;if(!i)return!0;var n=i.targetEl,a=i.packedEvent,u=i.model,o=i.view;if(!u||!o)return!0;var f=r.cptQuery,p=r.dataQuery;return v(f,u,"mainType")&&v(f,u,"subType")&&v(f,u,"index","componentIndex")&&v(f,u,"name")&&v(f,u,"id")&&v(p,a,"name")&&v(p,a,"dataIndex")&&v(p,a,"dataType")&&(!o.filterForExposedEvent||o.filterForExposedEvent(t,r.otherQuery,n,a));function v(_,y,S,A){return _[S]==null||y[A||S]===_[S]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),fb=["symbol","symbolSize","symbolRotate","symbolOffset"],_M=fb.concat(["symbolKeepAspect"]),iX={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var i={},n={},a=!1,u=0;u<fb.length;u++){var o=fb[u],f=e.get(o);lr(f)?(a=!0,n[o]=f):i[o]=f}if(i.symbol=i.symbol||e.defaultSymbol,r.setVisual(xt({legendIcon:e.legendIcon||i.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},i)),t.isSeriesFiltered(e))return;var p=$r(n);function v(_,y){for(var S=e.getRawValue(y),A=e.getDataParams(y),L=0;L<p.length;L++){var I=p[L];_.setItemVisual(y,I,n[I](S,A))}}return{dataEach:a?v:null}}},nX={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function i(n,a){for(var u=n.getItemModel(a),o=0;o<_M.length;o++){var f=_M[o],p=u.getShallow(f,!0);p!=null&&n.setItemVisual(a,f,p)}}return{dataEach:r.hasItemOption?i:null}}};function aX(e,t,r){switch(r){case"color":var i=e.getItemVisual(t,"style");return i[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function d3(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function ih(e,t,r,i,n){var a=e+t;r.isSilent(a)||i.eachComponent({mainType:"series",subType:"pie"},function(u){for(var o=u.seriesIndex,f=u.option.selectedMap,p=n.selected,v=0;v<p.length;v++)if(p[v].seriesIndex===o){var _=u.getData(),y=qp(_,n.fromActionPayload);r.trigger(a,{type:a,seriesId:u.id,name:Ft(y)?_.getName(y[0]):_.getName(y),selected:Wt(f)?f:xt({},f)})}})}function oX(e,t,r){e.on("selectchanged",function(i){var n=r.getModel();i.isFromClick?(ih("map","selectchanged",t,n,i),ih("pie","selectchanged",t,n,i)):i.fromAction==="select"?(ih("map","selected",t,n,i),ih("pie","selected",t,n,i)):i.fromAction==="unselect"&&(ih("map","unselected",t,n,i),ih("pie","unselected",t,n,i))})}function Pd(e,t,r){for(var i;e&&!(t(e)&&(i=e,r));)e=e.__hostTarget||e.parent;return i}var sX=Math.round(Math.random()*9),lX=typeof Object.defineProperty=="function",uX=function(){function e(){this._id="__ec_inner_"+sX++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var i=this._guard(t);return lX?Object.defineProperty(i,this._id,{value:r,enumerable:!1,configurable:!0}):i[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const cX=uX;var hX=Jr.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,i=t.cy,n=t.width/2,a=t.height/2;e.moveTo(r,i-a),e.lineTo(r+n,i+a),e.lineTo(r-n,i+a),e.closePath()}}),fX=Jr.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,i=t.cy,n=t.width/2,a=t.height/2;e.moveTo(r,i-a),e.lineTo(r+n,i),e.lineTo(r,i+a),e.lineTo(r-n,i),e.closePath()}}),dX=Jr.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,i=t.y,n=t.width/5*3,a=Math.max(n,t.height),u=n/2,o=u*u/(a-u),f=i-a+u+o,p=Math.asin(o/u),v=Math.cos(p)*u,_=Math.sin(p),y=Math.cos(p),S=u*.6,A=u*.7;e.moveTo(r-v,f+o),e.arc(r,f,u,Math.PI-p,Math.PI*2+p),e.bezierCurveTo(r+v-_*S,f+o+y*S,r,i-A,r,i),e.bezierCurveTo(r,i-A,r-v+_*S,f+o+y*S,r-v,f+o),e.closePath()}}),pX=Jr.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,i=t.width,n=t.x,a=t.y,u=i/3*2;e.moveTo(n,a),e.lineTo(n+u,a+r),e.lineTo(n,a+r/4*3),e.lineTo(n-u,a+r),e.lineTo(n,a),e.closePath()}}),mX={line:zl,rect:sa,roundRect:sa,square:sa,circle:n2,diamond:fX,pin:dX,arrow:pX,triangle:hX},vX={line:function(e,t,r,i,n){n.x1=e,n.y1=t+i/2,n.x2=e+r,n.y2=t+i/2},rect:function(e,t,r,i,n){n.x=e,n.y=t,n.width=r,n.height=i},roundRect:function(e,t,r,i,n){n.x=e,n.y=t,n.width=r,n.height=i,n.r=Math.min(r,i)/4},square:function(e,t,r,i,n){var a=Math.min(r,i);n.x=e,n.y=t,n.width=a,n.height=a},circle:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.r=Math.min(r,i)/2},diamond:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.width=r,n.height=i},pin:function(e,t,r,i,n){n.x=e+r/2,n.y=t+i/2,n.width=r,n.height=i},arrow:function(e,t,r,i,n){n.x=e+r/2,n.y=t+i/2,n.width=r,n.height=i},triangle:function(e,t,r,i,n){n.cx=e+r/2,n.cy=t+i/2,n.width=r,n.height=i}},db={};Ee(mX,function(e,t){db[t]=new e});var gX=Jr.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var i=rk(e,t,r),n=this.shape;return n&&n.symbolType==="pin"&&t.position==="inside"&&(i.y=r.y+r.height*.4),i},buildPath:function(e,t,r){var i=t.symbolType;if(i!=="none"){var n=db[i];n||(i="rect",n=db[i]),vX[i](t.x,t.y,t.width,t.height,n.shape),n.buildPath(e,n.shape,r)}}});function _X(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function Jh(e,t,r,i,n,a,u){var o=e.indexOf("empty")===0;o&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var f;return e.indexOf("image://")===0?f=s5(e.slice(8),new ii(t,r,i,n),u?"center":"cover"):e.indexOf("path://")===0?f=c2(e.slice(7),{},new ii(t,r,i,n),u?"center":"cover"):f=new gX({shape:{symbolType:e,x:t,y:r,width:i,height:n}}),f.__isEmptyBrush=o,f.setColor=_X,a&&f.setColor(a),f}function p3(e){return Ft(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function P2(e,t){if(e!=null)return Ft(e)||(e=[e,e]),[mn(e[0],t[0])||0,mn(br(e[1],e[0]),t[1])||0]}function Yu(e){return isFinite(e)}function yX(e,t,r){var i=t.x==null?0:t.x,n=t.x2==null?1:t.x2,a=t.y==null?0:t.y,u=t.y2==null?0:t.y2;t.global||(i=i*r.width+r.x,n=n*r.width+r.x,a=a*r.height+r.y,u=u*r.height+r.y),i=Yu(i)?i:0,n=Yu(n)?n:1,a=Yu(a)?a:0,u=Yu(u)?u:0;var o=e.createLinearGradient(i,a,n,u);return o}function xX(e,t,r){var i=r.width,n=r.height,a=Math.min(i,n),u=t.x==null?.5:t.x,o=t.y==null?.5:t.y,f=t.r==null?.5:t.r;t.global||(u=u*i+r.x,o=o*n+r.y,f=f*a),u=Yu(u)?u:.5,o=Yu(o)?o:.5,f=f>=0&&Yu(f)?f:.5;var p=e.createRadialGradient(u,o,0,u,o,f);return p}function yM(e,t,r){for(var i=t.type==="radial"?xX(e,t,r):yX(e,t,r),n=t.colorStops,a=0;a<n.length;a++)i.addColorStop(n[a].offset,n[a].color);return i}function bX(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function Uv(e){return parseInt(e,10)}function xM(e,t,r){var i=["width","height"][t],n=["clientWidth","clientHeight"][t],a=["paddingLeft","paddingTop"][t],u=["paddingRight","paddingBottom"][t];if(r[i]!=null&&r[i]!=="auto")return parseFloat(r[i]);var o=document.defaultView.getComputedStyle(e);return(e[n]||Uv(o[i])||Uv(e.style[i]))-(Uv(o[a])||0)-(Uv(o[u])||0)|0}function wX(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:Mi(e)?[e]:Ft(e)?e:null}function D2(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&wX(t.lineDash,t.lineWidth),i=t.lineDashOffset;if(r){var n=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;n&&n!==1&&(r=Zt(r,function(a){return a/n}),i/=n)}return[r,i]}var SX=new oc(!0);function n_(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function bM(e){return typeof e=="string"&&e!=="none"}function a_(e){var t=e.fill;return t!=null&&t!=="none"}function wM(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function SM(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function TM(e,t,r){var i=Yw(t.image,t.__image,r);if(F_(i)){var n=e.createPattern(i,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&n&&n.setTransform){var a=new DOMMatrix;a.translateSelf(t.x||0,t.y||0),a.rotateSelf(0,0,(t.rotation||0)*ug),a.scaleSelf(t.scaleX||1,t.scaleY||1),n.setTransform(a)}return n}}function TX(e,t,r,i){var n,a=n_(r),u=a_(r),o=r.strokePercent,f=o<1,p=!t.path;(!t.silent||f)&&p&&t.createPathProxy();var v=t.path||SX,_=t.__dirty;if(!i){var y=r.fill,S=r.stroke,A=u&&!!y.colorStops,L=a&&!!S.colorStops,I=u&&!!y.image,M=a&&!!S.image,D=void 0,O=void 0,N=void 0,q=void 0,Z=void 0;(A||L)&&(Z=t.getBoundingRect()),A&&(D=_?yM(e,y,Z):t.__canvasFillGradient,t.__canvasFillGradient=D),L&&(O=_?yM(e,S,Z):t.__canvasStrokeGradient,t.__canvasStrokeGradient=O),I&&(N=_||!t.__canvasFillPattern?TM(e,y,t):t.__canvasFillPattern,t.__canvasFillPattern=N),M&&(q=_||!t.__canvasStrokePattern?TM(e,S,t):t.__canvasStrokePattern,t.__canvasStrokePattern=N),A?e.fillStyle=D:I&&(N?e.fillStyle=N:u=!1),L?e.strokeStyle=O:M&&(q?e.strokeStyle=q:a=!1)}var Q=t.getGlobalScale();v.setScale(Q[0],Q[1],t.segmentIgnoreThreshold);var j,ie;e.setLineDash&&r.lineDash&&(n=D2(t),j=n[0],ie=n[1]);var ae=!0;(p||_&sh)&&(v.setDPR(e.dpr),f?v.setContext(null):(v.setContext(e),ae=!1),v.reset(),t.buildPath(v,t.shape,i),v.toStatic(),t.pathUpdated()),ae&&v.rebuildPath(e,f?o:1),j&&(e.setLineDash(j),e.lineDashOffset=ie),i||(r.strokeFirst?(a&&SM(e,r),u&&wM(e,r)):(u&&wM(e,r),a&&SM(e,r))),j&&e.setLineDash([])}function EX(e,t,r){var i=t.__image=Yw(r.image,t.__image,t,t.onload);if(!(!i||!F_(i))){var n=r.x||0,a=r.y||0,u=t.getWidth(),o=t.getHeight(),f=i.width/i.height;if(u==null&&o!=null?u=o*f:o==null&&u!=null?o=u/f:u==null&&o==null&&(u=i.width,o=i.height),r.sWidth&&r.sHeight){var p=r.sx||0,v=r.sy||0;e.drawImage(i,p,v,r.sWidth,r.sHeight,n,a,u,o)}else if(r.sx&&r.sy){var p=r.sx,v=r.sy,_=u-p,y=o-v;e.drawImage(i,p,v,_,y,n,a,u,o)}else e.drawImage(i,n,a,u,o)}}function CX(e,t,r){var i,n=r.text;if(n!=null&&(n+=""),n){e.font=r.font||Rl,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var a=void 0,u=void 0;e.setLineDash&&r.lineDash&&(i=D2(t),a=i[0],u=i[1]),a&&(e.setLineDash(a),e.lineDashOffset=u),r.strokeFirst?(n_(r)&&e.strokeText(n,r.x,r.y),a_(r)&&e.fillText(n,r.x,r.y)):(a_(r)&&e.fillText(n,r.x,r.y),n_(r)&&e.strokeText(n,r.x,r.y)),a&&e.setLineDash([])}}var EM=["shadowBlur","shadowOffsetX","shadowOffsetY"],CM=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function m3(e,t,r,i,n){var a=!1;if(!i&&(r=r||{},t===r))return!1;if(i||t.opacity!==r.opacity){oa(e,n),a=!0;var u=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(u)?ec.opacity:u}(i||t.blend!==r.blend)&&(a||(oa(e,n),a=!0),e.globalCompositeOperation=t.blend||ec.blend);for(var o=0;o<EM.length;o++){var f=EM[o];(i||t[f]!==r[f])&&(a||(oa(e,n),a=!0),e[f]=e.dpr*(t[f]||0))}return(i||t.shadowColor!==r.shadowColor)&&(a||(oa(e,n),a=!0),e.shadowColor=t.shadowColor||ec.shadowColor),a}function AM(e,t,r,i,n){var a=Ep(t,n.inHover),u=i?null:r&&Ep(r,n.inHover)||{};if(a===u)return!1;var o=m3(e,a,u,i,n);if((i||a.fill!==u.fill)&&(o||(oa(e,n),o=!0),bM(a.fill)&&(e.fillStyle=a.fill)),(i||a.stroke!==u.stroke)&&(o||(oa(e,n),o=!0),bM(a.stroke)&&(e.strokeStyle=a.stroke)),(i||a.opacity!==u.opacity)&&(o||(oa(e,n),o=!0),e.globalAlpha=a.opacity==null?1:a.opacity),t.hasStroke()){var f=a.lineWidth,p=f/(a.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==p&&(o||(oa(e,n),o=!0),e.lineWidth=p)}for(var v=0;v<CM.length;v++){var _=CM[v],y=_[0];(i||a[y]!==u[y])&&(o||(oa(e,n),o=!0),e[y]=a[y]||_[1])}return o}function AX(e,t,r,i,n){return m3(e,Ep(t,n.inHover),r&&Ep(r,n.inHover),i,n)}function v3(e,t){var r=t.transform,i=e.dpr||1;r?e.setTransform(i*r[0],i*r[1],i*r[2],i*r[3],i*r[4],i*r[5]):e.setTransform(i,0,0,i,0,0)}function MX(e,t,r){for(var i=!1,n=0;n<e.length;n++){var a=e[n];i=i||a.isZeroArea(),v3(t,a),t.beginPath(),a.buildPath(t,a.shape),t.clip()}r.allClipped=i}function IX(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var MM=1,IM=2,PM=3,DM=4;function PX(e){var t=a_(e),r=n_(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function oa(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function Ep(e,t){return t&&e.__hoverStyle||e.style}function DX(e,t){pb(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function pb(e,t,r,i){var n=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~$o,t.__isRendered=!1;return}var a=t.__clipPaths,u=r.prevElClipPaths,o=!1,f=!1;if((!u||bX(a,u))&&(u&&u.length&&(oa(e,r),e.restore(),f=o=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),a&&a.length&&(oa(e,r),e.save(),MX(a,e,r),o=!0),r.prevElClipPaths=a),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var p=r.prevEl;p||(f=o=!0);var v=t instanceof Jr&&t.autoBatch&&PX(t.style);o||IX(n,p.transform)?(oa(e,r),v3(e,t)):v||oa(e,r);var _=Ep(t,r.inHover);t instanceof Jr?(r.lastDrawType!==MM&&(f=!0,r.lastDrawType=MM),AM(e,t,p,f,r),(!v||!r.batchFill&&!r.batchStroke)&&e.beginPath(),TX(e,t,_,v),v&&(r.batchFill=_.fill||"",r.batchStroke=_.stroke||"")):t instanceof Yg?(r.lastDrawType!==PM&&(f=!0,r.lastDrawType=PM),AM(e,t,p,f,r),CX(e,t,_)):t instanceof Rs?(r.lastDrawType!==IM&&(f=!0,r.lastDrawType=IM),AX(e,t,p,f,r),EX(e,t,_)):t.getTemporalDisplayables&&(r.lastDrawType!==DM&&(f=!0,r.lastDrawType=DM),LX(e,t,r)),v&&i&&oa(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function LX(e,t,r){var i=t.getDisplayables(),n=t.getTemporalDisplayables();e.save();var a={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},u,o;for(u=t.getCursor(),o=i.length;u<o;u++){var f=i[u];f.beforeBrush&&f.beforeBrush(),f.innerBeforeBrush(),pb(e,f,a,u===o-1),f.innerAfterBrush(),f.afterBrush&&f.afterBrush(),a.prevEl=f}for(var p=0,v=n.length;p<v;p++){var f=n[p];f.beforeBrush&&f.beforeBrush(),f.innerBeforeBrush(),pb(e,f,a,p===v-1),f.innerAfterBrush(),f.afterBrush&&f.afterBrush(),a.prevEl=f}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var L1=new cX,LM=new Gp(100),kM=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function RM(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),i=t.getZr(),n=i.painter.type==="svg";e.dirty&&L1.delete(e);var a=L1.get(e);if(a)return a;var u=pi(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});u.backgroundColor==="none"&&(u.backgroundColor=null);var o={repeat:"repeat"};return f(o),o.rotation=u.rotation,o.scaleX=o.scaleY=n?1:1/r,L1.set(e,o),e.dirty=!1,o;function f(p){for(var v=[r],_=!0,y=0;y<kM.length;++y){var S=u[kM[y]];if(S!=null&&!Ft(S)&&!Wt(S)&&!Mi(S)&&typeof S!="boolean"){_=!1;break}v.push(S)}var A;if(_){A=v.join(",")+(n?"-svg":"");var L=LM.get(A);L&&(n?p.svgElement=L:p.image=L)}var I=_3(u.dashArrayX),M=kX(u.dashArrayY),D=g3(u.symbol),O=RX(I),N=y3(M),q=!n&&$p.createCanvas(),Z=n&&{tag:"g",attrs:{},key:"dcl",children:[]},Q=ie(),j;q&&(q.width=Q.width*r,q.height=Q.height*r,j=q.getContext("2d")),ae(),_&&LM.put(A,q||Z),p.image=q,p.svgElement=Z,p.svgWidth=Q.width,p.svgHeight=Q.height;function ie(){for(var he=1,ue=0,fe=O.length;ue<fe;++ue)he=HC(he,O[ue]);for(var ye=1,ue=0,fe=D.length;ue<fe;++ue)ye=HC(ye,D[ue].length);he*=ye;var He=N*O.length*D.length;return{width:Math.max(1,Math.min(he,u.maxTileWidth)),height:Math.max(1,Math.min(He,u.maxTileHeight))}}function ae(){j&&(j.clearRect(0,0,q.width,q.height),u.backgroundColor&&(j.fillStyle=u.backgroundColor,j.fillRect(0,0,q.width,q.height)));for(var he=0,ue=0;ue<M.length;++ue)he+=M[ue];if(he<=0)return;for(var fe=-N,ye=0,He=0,we=0;fe<Q.height;){if(ye%2===0){for(var it=He/2%D.length,et=0,Ct=0,zt=0;et<Q.width*2;){for(var tr=0,ue=0;ue<I[we].length;++ue)tr+=I[we][ue];if(tr<=0)break;if(Ct%2===0){var $t=(1-u.symbolSize)*.5,Lr=et+I[we][Ct]*$t,Ir=fe+M[ye]*$t,Cr=I[we][Ct]*u.symbolSize,dr=M[ye]*u.symbolSize,Ge=zt/2%D[it].length;nt(Lr,Ir,Cr,dr,D[it][Ge])}et+=I[we][Ct],++zt,++Ct,Ct===I[we].length&&(Ct=0)}++we,we===I.length&&(we=0)}fe+=M[ye],++He,++ye,ye===M.length&&(ye=0)}function nt(Ye,ft,ut,se,me){var Ae=n?1:r,Ve=Jh(me,Ye*Ae,ft*Ae,ut*Ae,se*Ae,u.color,u.symbolKeepAspect);if(n){var We=i.painter.renderOneToVNode(Ve);We&&Z.children.push(We)}else DX(j,Ve)}}}}function g3(e){if(!e||e.length===0)return[["rect"]];if(Wt(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!Wt(e[r])){t=!1;break}if(t)return g3([e]);for(var i=[],r=0;r<e.length;++r)Wt(e[r])?i.push([e[r]]):i.push(e[r]);return i}function _3(e){if(!e||e.length===0)return[[0,0]];if(Mi(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,i=0;i<e.length;++i)if(!Mi(e[i])){r=!1;break}if(r)return _3([e]);for(var n=[],i=0;i<e.length;++i)if(Mi(e[i])){var t=Math.ceil(e[i]);n.push([t,t])}else{var t=Zt(e[i],function(o){return Math.ceil(o)});t.length%2===1?n.push(t.concat(t)):n.push(t)}return n}function kX(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(Mi(e)){var t=Math.ceil(e);return[t,t]}var r=Zt(e,function(i){return Math.ceil(i)});return e.length%2?r.concat(r):r}function RX(e){return Zt(e,function(t){return y3(t)})}function y3(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function zX(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var i=r.getData();i.hasItemVisual()&&i.each(function(u){var o=i.getItemVisual(u,"decal");if(o){var f=i.ensureUniqueItemVisual(u,"style");f.decal=RM(o,t)}});var n=i.getVisual("decal");if(n){var a=i.getVisual("style");a.decal=RM(n,t)}}})}var OX=new ks;const co=OX;var x3={};function BX(e,t){x3[e]=t}function FX(e){return x3[e]}var NX=1,VX=800,$X=900,UX=1e3,GX=2e3,HX=5e3,b3=1e3,qX=1100,L2=2e3,w3=3e3,jX=4e3,Q_=4500,WX=4600,ZX=5e3,XX=6e3,S3=7e3,YX={PROCESSOR:{FILTER:UX,SERIES_FILTER:VX,STATISTIC:HX},VISUAL:{LAYOUT:b3,PROGRESSIVE_LAYOUT:qX,GLOBAL:L2,CHART:w3,POST_CHART_LAYOUT:WX,COMPONENT:jX,BRUSH:ZX,CHART_ITEM:Q_,ARIA:XX,DECAL:S3}},Cn="__flagInMainProcess",ia="__pendingUpdate",k1="__needsUpdateStatus",zM=/^[a-zA-Z0-9_]+$/,R1="__connectUpdateStatus",OM=0,KX=1,JX=2;function T3(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return C3(this,e,t)}}function E3(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return C3(this,e,t)}}function C3(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),ks.prototype[t].apply(e,r)}var A3=function(e){It(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(ks),M3=A3.prototype;M3.on=E3("on");M3.off=E3("off");var nh,z1,Gv,dl,O1,B1,F1,pd,md,BM,FM,N1,NM,Hv,VM,I3,Ra,$M,P3=function(e){It(t,e);function t(r,i,n){var a=e.call(this,new rX)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],n=n||{},Wt(i)&&(i=D3[i]),a._dom=r;var u="canvas",o="auto",f=!1,p=a._zr=$C(r,{renderer:n.renderer||u,devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height,ssr:n.ssr,useDirtyRect:br(n.useDirtyRect,f),useCoarsePointer:br(n.useCoarsePointer,o),pointerSize:n.pointerSize});a._ssr=n.ssr,a._throttledZrFlush=I2(Ai(p.flush,p),17),i=Dr(i),i&&$5(i,!0),a._theme=i,a._locale=oW(n.locale||g5),a._coordSysMgr=new b2;var v=a._api=VM(a);function _(y,S){return y.__prio-S.__prio}return cg(s_,_),cg(mb,_),a._scheduler=new h3(a,v,mb,s_),a._messageCenter=new A3,a._initEvents(),a.resize=Ai(a.resize,a),p.animation.on("frame",a._onframe,a),BM(p,a),FM(p,a),Dx(a),a}return t.prototype._onframe=function(){if(!this._disposed){$M(this);var r=this._scheduler;if(this[ia]){var i=this[ia].silent;this[Cn]=!0;try{nh(this),dl.update.call(this,null,this[ia].updateParams)}catch(f){throw this[Cn]=!1,this[ia]=null,f}this._zr.flush(),this[Cn]=!1,this[ia]=null,pd.call(this,i),md.call(this,i)}else if(r.unfinished){var n=NX,a=this._model,u=this._api;r.unfinished=!1;do{var o=+new Date;r.performSeriesTasks(a),r.performDataProcessorTasks(a),B1(this,a),r.performVisualTasks(a),Hv(this,this._model,u,"remain",{}),n-=+new Date-o}while(n>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,i,n){if(!this[Cn]){if(this._disposed){this.id;return}var a,u,o;if(Kt(i)&&(n=i.lazyUpdate,a=i.silent,u=i.replaceMerge,o=i.transition,i=i.notMerge),this[Cn]=!0,!this._model||i){var f=new VW(this._api),p=this._theme,v=this._model=new F5;v.scheduler=this._scheduler,v.ssr=this._ssr,v.init(null,null,null,p,this._locale,f)}this._model.setOption(r,{replaceMerge:u},vb);var _={seriesTransition:o,optionChanged:!0};if(n)this[ia]={silent:a,updateParams:_},this[Cn]=!1,this.getZr().wakeUp();else{try{nh(this),dl.update.call(this,null,_)}catch(y){throw this[ia]=null,this[Cn]=!1,y}this._ssr||this._zr.flush(),this[ia]=null,this[Cn]=!1,pd.call(this,a),md.call(this,a)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||xr.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var i=this._zr.painter;return i.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var i=this._zr.painter;return i.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(xr.svgSupported){var r=this._zr,i=r.storage.getDisplayList();return Ee(i,function(n){n.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var i=r.excludeComponents,n=this._model,a=[],u=this;Ee(i,function(f){n.eachComponent({mainType:f},function(p){var v=u._componentsMap[p.__viewId];v.group.ignore||(a.push(v),v.group.ignore=!0)})});var o=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return Ee(a,function(f){f.group.ignore=!1}),o},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var i=r.type==="svg",n=this.group,a=Math.min,u=Math.max,o=1/0;if(UM[n]){var f=o,p=o,v=-o,_=-o,y=[],S=r&&r.pixelRatio||this.getDevicePixelRatio();Ee(Yd,function(O,N){if(O.group===n){var q=i?O.getZr().painter.getSvgDom().innerHTML:O.renderToCanvas(Dr(r)),Z=O.getDom().getBoundingClientRect();f=a(Z.left,f),p=a(Z.top,p),v=u(Z.right,v),_=u(Z.bottom,_),y.push({dom:q,left:Z.left,top:Z.top})}}),f*=S,p*=S,v*=S,_*=S;var A=v-f,L=_-p,I=$p.createCanvas(),M=$C(I,{renderer:i?"svg":"canvas"});if(M.resize({width:A,height:L}),i){var D="";return Ee(y,function(O){var N=O.left-f,q=O.top-p;D+='<g transform="translate('+N+","+q+')">'+O.dom+"</g>"}),M.painter.getSvgRoot().innerHTML=D,r.connectedBackgroundColor&&M.painter.setBackgroundColor(r.connectedBackgroundColor),M.refreshImmediately(),M.painter.toDataURL()}else return r.connectedBackgroundColor&&M.add(new sa({shape:{x:0,y:0,width:A,height:L},style:{fill:r.connectedBackgroundColor}})),Ee(y,function(O){var N=new Rs({style:{x:O.left*S-f,y:O.top*S-p,image:O.dom}});M.add(N)}),M.refreshImmediately(),I.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,i){return O1(this,"convertToPixel",r,i)},t.prototype.convertFromPixel=function(r,i){return O1(this,"convertFromPixel",r,i)},t.prototype.containPixel=function(r,i){if(this._disposed){this.id;return}var n=this._model,a,u=a1(n,r);return Ee(u,function(o,f){f.indexOf("Models")>=0&&Ee(o,function(p){var v=p.coordinateSystem;if(v&&v.containPoint)a=a||!!v.containPoint(i);else if(f==="seriesModels"){var _=this._chartsMap[p.__viewId];_&&_.containPoint&&(a=a||_.containPoint(i,p))}},this)},this),!!a},t.prototype.getVisual=function(r,i){var n=this._model,a=a1(n,r,{defaultMainType:"series"}),u=a.seriesModel,o=u.getData(),f=a.hasOwnProperty("dataIndexInside")?a.dataIndexInside:a.hasOwnProperty("dataIndex")?o.indexOfRawIndex(a.dataIndex):null;return f!=null?aX(o,f,i):d3(o,i)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;Ee(QX,function(i){var n=function(a){var u=r.getModel(),o=a.target,f,p=i==="globalout";if(p?f={}:o&&Pd(o,function(A){var L=fi(A);if(L&&L.dataIndex!=null){var I=L.dataModel||u.getSeriesByIndex(L.seriesIndex);return f=I&&I.getDataParams(L.dataIndex,L.dataType)||{},!0}else if(L.eventData)return f=xt({},L.eventData),!0},!0),f){var v=f.componentType,_=f.componentIndex;(v==="markLine"||v==="markPoint"||v==="markArea")&&(v="series",_=f.seriesIndex);var y=v&&_!=null&&u.getComponent(v,_),S=y&&r[y.mainType==="series"?"_chartsMap":"_componentsMap"][y.__viewId];f.event=a,f.type=i,r._$eventProcessor.eventInfo={targetEl:o,packedEvent:f,model:y,view:S},r.trigger(i,f)}};n.zrEventfulCallAtLast=!0,r._zr.on(i,n,r)}),Ee(Xd,function(i,n){r._messageCenter.on(n,function(a){this.trigger(n,a)},r)}),Ee(["selectchanged"],function(i){r._messageCenter.on(i,function(n){this.trigger(i,n)},r)}),oX(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&mk(this.getDom(),R2,"");var i=this,n=i._api,a=i._model;Ee(i._componentsViews,function(u){u.dispose(a,n)}),Ee(i._chartsViews,function(u){u.dispose(a,n)}),i._zr.dispose(),i._dom=i._model=i._chartsMap=i._componentsMap=i._chartsViews=i._componentsViews=i._scheduler=i._api=i._zr=i._throttledZrFlush=i._theme=i._coordSysMgr=i._messageCenter=null,delete Yd[i.id]},t.prototype.resize=function(r){if(!this[Cn]){if(this._disposed){this.id;return}this._zr.resize(r);var i=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!i){var n=i.resetOption("media"),a=r&&r.silent;this[ia]&&(a==null&&(a=this[ia].silent),n=!0,this[ia]=null),this[Cn]=!0;try{n&&nh(this),dl.update.call(this,{type:"resize",animation:xt({duration:0},r&&r.animation)})}catch(u){throw this[Cn]=!1,u}this[Cn]=!1,pd.call(this,a),md.call(this,a)}}},t.prototype.showLoading=function(r,i){if(this._disposed){this.id;return}if(Kt(r)&&(i=r,r=""),r=r||"default",this.hideLoading(),!!gb[r]){var n=gb[r](this._api,i),a=this._zr;this._loadingFX=n,a.add(n)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var i=xt({},r);return i.type=Xd[r.type],i},t.prototype.dispatchAction=function(r,i){if(this._disposed){this.id;return}if(Kt(i)||(i={silent:!!i}),!!o_[r.type]&&this._model){if(this[Cn]){this._pendingActions.push(r);return}var n=i.silent;F1.call(this,r,n);var a=i.flush;a?this._zr.flush():a!==!1&&xr.browser.weChat&&this._throttledZrFlush(),pd.call(this,n),md.call(this,n)}},t.prototype.updateLabelLayout=function(){co.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var i=r.seriesIndex,n=this.getModel(),a=n.getSeriesByIndex(i);a.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){nh=function(_){var y=_._scheduler;y.restorePipelines(_._model),y.prepareStageTasks(),z1(_,!0),z1(_,!1),y.plan()},z1=function(_,y){for(var S=_._model,A=_._scheduler,L=y?_._componentsViews:_._chartsViews,I=y?_._componentsMap:_._chartsMap,M=_._zr,D=_._api,O=0;O<L.length;O++)L[O].__alive=!1;y?S.eachComponent(function(Z,Q){Z!=="series"&&N(Q)}):S.eachSeries(N);function N(Z){var Q=Z.__requireNewView;Z.__requireNewView=!1;var j="_ec_"+Z.id+"_"+Z.type,ie=!Q&&I[j];if(!ie){var ae=Ho(Z.type),he=y?Ds.getClass(ae.main,ae.sub):rc.getClass(ae.sub);ie=new he,ie.init(S,D),I[j]=ie,L.push(ie),M.add(ie.group)}Z.__viewId=ie.__id=j,ie.__alive=!0,ie.__model=Z,ie.group.__ecComponentInfo={mainType:Z.mainType,index:Z.componentIndex},!y&&A.prepareView(ie,Z,S,D)}for(var O=0;O<L.length;){var q=L[O];q.__alive?O++:(!y&&q.renderTask.dispose(),M.remove(q.group),q.dispose(S,D),L.splice(O,1),I[q.__id]===q&&delete I[q.__id],q.__id=q.group.__ecComponentInfo=null)}},Gv=function(_,y,S,A,L){var I=_._model;if(I.setUpdatePayload(S),!A){Ee([].concat(_._componentsViews).concat(_._chartsViews),q);return}var M={};M[A+"Id"]=S[A+"Id"],M[A+"Index"]=S[A+"Index"],M[A+"Name"]=S[A+"Name"];var D={mainType:A,query:M};L&&(D.subType=L);var O=S.excludeSeriesId,N;O!=null&&(N=wr(),Ee(Xn(O),function(Z){var Q=Wo(Z,null);Q!=null&&N.set(Q,!0)})),I&&I.eachComponent(D,function(Z){var Q=N&&N.get(Z.id)!=null;if(!Q)if(gA(S))if(Z instanceof Nh)S.type===tc&&!S.notBlur&&!Z.get(["emphasis","disabled"])&&Rq(Z,S,_._api);else{var j=r2(Z.mainType,Z.componentIndex,S.name,_._api),ie=j.focusSelf,ae=j.dispatchers;S.type===tc&&ie&&!S.notBlur&&eb(Z.mainType,Z.componentIndex,_._api),ae&&Ee(ae,function(he){S.type===tc?mp(he):vp(he)})}else rb(S)&&Z instanceof Nh&&(Bq(Z,S,_._api),vA(Z),Ra(_))},_),I&&I.eachComponent(D,function(Z){var Q=N&&N.get(Z.id)!=null;Q||q(_[A==="series"?"_chartsMap":"_componentsMap"][Z.__viewId])},_);function q(Z){Z&&Z.__alive&&Z[y]&&Z[y](Z.__model,I,_._api,S)}},dl={prepareAndUpdate:function(_){nh(this),dl.update.call(this,_,{optionChanged:_.newOption!=null})},update:function(_,y){var S=this._model,A=this._api,L=this._zr,I=this._coordSysMgr,M=this._scheduler;if(S){S.setUpdatePayload(_),M.restoreData(S,_),M.performSeriesTasks(S),I.create(S,A),M.performDataProcessorTasks(S,_),B1(this,S),I.update(S,A),r(S),M.performVisualTasks(S,_),N1(this,S,A,_,y);var D=S.get("backgroundColor")||"transparent",O=S.get("darkMode");L.setBackgroundColor(D),O!=null&&O!=="auto"&&L.setDarkMode(O),co.trigger("afterupdate",S,A)}},updateTransform:function(_){var y=this,S=this._model,A=this._api;if(S){S.setUpdatePayload(_);var L=[];S.eachComponent(function(M,D){if(M!=="series"){var O=y.getViewOfComponentModel(D);if(O&&O.__alive)if(O.updateTransform){var N=O.updateTransform(D,S,A,_);N&&N.update&&L.push(O)}else L.push(O)}});var I=wr();S.eachSeries(function(M){var D=y._chartsMap[M.__viewId];if(D.updateTransform){var O=D.updateTransform(M,S,A,_);O&&O.update&&I.set(M.uid,1)}else I.set(M.uid,1)}),r(S),this._scheduler.performVisualTasks(S,_,{setDirty:!0,dirtyMap:I}),Hv(this,S,A,_,{},I),co.trigger("afterupdate",S,A)}},updateView:function(_){var y=this._model;y&&(y.setUpdatePayload(_),rc.markUpdateMethod(_,"updateView"),r(y),this._scheduler.performVisualTasks(y,_,{setDirty:!0}),N1(this,y,this._api,_,{}),co.trigger("afterupdate",y,this._api))},updateVisual:function(_){var y=this,S=this._model;S&&(S.setUpdatePayload(_),S.eachSeries(function(A){A.getData().clearAllVisual()}),rc.markUpdateMethod(_,"updateVisual"),r(S),this._scheduler.performVisualTasks(S,_,{visualType:"visual",setDirty:!0}),S.eachComponent(function(A,L){if(A!=="series"){var I=y.getViewOfComponentModel(L);I&&I.__alive&&I.updateVisual(L,S,y._api,_)}}),S.eachSeries(function(A){var L=y._chartsMap[A.__viewId];L.updateVisual(A,S,y._api,_)}),co.trigger("afterupdate",S,this._api))},updateLayout:function(_){dl.update.call(this,_)}},O1=function(_,y,S,A){if(_._disposed){_.id;return}for(var L=_._model,I=_._coordSysMgr.getCoordinateSystems(),M,D=a1(L,S),O=0;O<I.length;O++){var N=I[O];if(N[y]&&(M=N[y](L,D,A))!=null)return M}},B1=function(_,y){var S=_._chartsMap,A=_._scheduler;y.eachSeries(function(L){A.updateStreamModes(L,S[L.__viewId])})},F1=function(_,y){var S=this,A=this.getModel(),L=_.type,I=_.escapeConnect,M=o_[L],D=M.actionInfo,O=(D.update||"update").split(":"),N=O.pop(),q=O[0]!=null&&Ho(O[0]);this[Cn]=!0;var Z=[_],Q=!1;_.batch&&(Q=!0,Z=Zt(_.batch,function(ye){return ye=pi(xt({},ye),_),ye.batch=null,ye}));var j=[],ie,ae=rb(_),he=gA(_);if(he&&Vk(this._api),Ee(Z,function(ye){if(ie=M.action(ye,S._model,S._api),ie=ie||xt({},ye),ie.type=D.event||ie.type,j.push(ie),he){var He=Zw(_),we=He.queryOptionMap,it=He.mainTypeSpecified,et=it?we.keys()[0]:"series";Gv(S,N,ye,et),Ra(S)}else ae?(Gv(S,N,ye,"series"),Ra(S)):q&&Gv(S,N,ye,q.main,q.sub)}),N!=="none"&&!he&&!ae&&!q)try{this[ia]?(nh(this),dl.update.call(this,_),this[ia]=null):dl[N].call(this,_)}catch(ye){throw this[Cn]=!1,ye}if(Q?ie={type:D.event||L,escapeConnect:I,batch:j}:ie=j[0],this[Cn]=!1,!y){var ue=this._messageCenter;if(ue.trigger(ie.type,ie),ae){var fe={type:"selectchanged",escapeConnect:I,selected:Fq(A),isFromClick:_.isFromClick||!1,fromAction:_.type,fromActionPayload:_};ue.trigger(fe.type,fe)}}},pd=function(_){for(var y=this._pendingActions;y.length;){var S=y.shift();F1.call(this,S,_)}},md=function(_){!_&&this.trigger("updated")},BM=function(_,y){_.on("rendered",function(S){y.trigger("rendered",S),_.animation.isFinished()&&!y[ia]&&!y._scheduler.unfinished&&!y._pendingActions.length&&y.trigger("finished")})},FM=function(_,y){_.on("mouseover",function(S){var A=S.target,L=Pd(A,tb);L&&(zq(L,S,y._api),Ra(y))}).on("mouseout",function(S){var A=S.target,L=Pd(A,tb);L&&(Oq(L,S,y._api),Ra(y))}).on("click",function(S){var A=S.target,L=Pd(A,function(D){return fi(D).dataIndex!=null},!0);if(L){var I=L.selected?"unselect":"select",M=fi(L);y._api.dispatchAction({type:I,dataType:M.dataType,dataIndexInside:M.dataIndex,seriesIndex:M.seriesIndex,isFromClick:!0})}})};function r(_){_.clearColorPalette(),_.eachSeries(function(y){y.clearColorPalette()})}function i(_){var y=[],S=[],A=!1;if(_.eachComponent(function(D,O){var N=O.get("zlevel")||0,q=O.get("z")||0,Z=O.getZLevelKey();A=A||!!Z,(D==="series"?S:y).push({zlevel:N,z:q,idx:O.componentIndex,type:D,key:Z})}),A){var L=y.concat(S),I,M;cg(L,function(D,O){return D.zlevel===O.zlevel?D.z-O.z:D.zlevel-O.zlevel}),Ee(L,function(D){var O=_.getComponent(D.type,D.idx),N=D.zlevel,q=D.key;I!=null&&(N=Math.max(I,N)),q?(N===I&&q!==M&&N++,M=q):M&&(N===I&&N++,M=""),I=N,O.setZLevel(N)})}}N1=function(_,y,S,A,L){i(y),NM(_,y,S,A,L),Ee(_._chartsViews,function(I){I.__alive=!1}),Hv(_,y,S,A,L),Ee(_._chartsViews,function(I){I.__alive||I.remove(y,S)})},NM=function(_,y,S,A,L,I){Ee(I||_._componentsViews,function(M){var D=M.__model;p(D,M),M.render(D,y,S,A),o(D,M),v(D,M)})},Hv=function(_,y,S,A,L,I){var M=_._scheduler;L=xt(L||{},{updatedSeries:y.getSeries()}),co.trigger("series:beforeupdate",y,S,L);var D=!1;y.eachSeries(function(O){var N=_._chartsMap[O.__viewId];N.__alive=!0;var q=N.renderTask;M.updatePayload(q,A),p(O,N),I&&I.get(O.uid)&&q.dirty(),q.perform(M.getPerformArgs(q))&&(D=!0),N.group.silent=!!O.get("silent"),u(O,N),vA(O)}),M.unfinished=D||M.unfinished,co.trigger("series:layoutlabels",y,S,L),co.trigger("series:transition",y,S,L),y.eachSeries(function(O){var N=_._chartsMap[O.__viewId];o(O,N),v(O,N)}),a(_,y),co.trigger("series:afterupdate",y,S,L)},Ra=function(_){_[k1]=!0,_.getZr().wakeUp()},$M=function(_){_[k1]&&(_.getZr().storage.traverse(function(y){jd(y)||n(y)}),_[k1]=!1)};function n(_){for(var y=[],S=_.currentStates,A=0;A<S.length;A++){var L=S[A];L==="emphasis"||L==="blur"||L==="select"||y.push(L)}_.selected&&_.states.select&&y.push("select"),_.hoverState===Qw&&_.states.emphasis?y.push("emphasis"):_.hoverState===Jw&&_.states.blur&&y.push("blur"),_.useStates(y)}function a(_,y){var S=_._zr,A=S.storage,L=0;A.traverse(function(I){I.isGroup||L++}),L>y.get("hoverLayerThreshold")&&!xr.node&&!xr.worker&&y.eachSeries(function(I){if(!I.preventUsingHoverLayer){var M=_._chartsMap[I.__viewId];M.__alive&&M.eachRendered(function(D){D.states.emphasis&&(D.states.emphasis.hoverLayer=!0)})}})}function u(_,y){var S=_.get("blendMode")||null;y.eachRendered(function(A){A.isGroup||(A.style.blend=S)})}function o(_,y){if(!_.preventAutoZ){var S=_.get("z")||0,A=_.get("zlevel")||0;y.eachRendered(function(L){return f(L,S,A,-1/0),!0})}}function f(_,y,S,A){var L=_.getTextContent(),I=_.getTextGuideLine(),M=_.isGroup;if(M)for(var D=_.childrenRef(),O=0;O<D.length;O++)A=Math.max(f(D[O],y,S,A),A);else _.z=y,_.zlevel=S,A=Math.max(_.z2,A);if(L&&(L.z=y,L.zlevel=S,isFinite(A)&&(L.z2=A+2)),I){var N=_.textGuideLineConfig;I.z=y,I.zlevel=S,isFinite(A)&&(I.z2=A+(N&&N.showAbove?1:-1))}return A}function p(_,y){y.eachRendered(function(S){if(!jd(S)){var A=S.getTextContent(),L=S.getTextGuideLine();S.stateTransition&&(S.stateTransition=null),A&&A.stateTransition&&(A.stateTransition=null),L&&L.stateTransition&&(L.stateTransition=null),S.hasState()?(S.prevStates=S.currentStates,S.clearStates()):S.prevStates&&(S.prevStates=null)}})}function v(_,y){var S=_.getModel("stateAnimation"),A=_.isAnimationEnabled(),L=S.get("duration"),I=L>0?{duration:L,delay:S.get("delay"),easing:S.get("easing")}:null;y.eachRendered(function(M){if(M.states&&M.states.emphasis){if(jd(M))return;if(M instanceof Jr&&Gq(M),M.__dirty){var D=M.prevStates;D&&M.useStates(D)}if(A){M.stateTransition=I;var O=M.getTextContent(),N=M.getTextGuideLine();O&&(O.stateTransition=I),N&&(N.stateTransition=I)}M.__dirty&&n(M)}})}VM=function(_){return new(function(y){It(S,y);function S(){return y!==null&&y.apply(this,arguments)||this}return S.prototype.getCoordinateSystems=function(){return _._coordSysMgr.getCoordinateSystems()},S.prototype.getComponentByElement=function(A){for(;A;){var L=A.__ecComponentInfo;if(L!=null)return _._model.getComponent(L.mainType,L.index);A=A.parent}},S.prototype.enterEmphasis=function(A,L){mp(A,L),Ra(_)},S.prototype.leaveEmphasis=function(A,L){vp(A,L),Ra(_)},S.prototype.enterBlur=function(A){Ok(A),Ra(_)},S.prototype.leaveBlur=function(A){t2(A),Ra(_)},S.prototype.enterSelect=function(A){Bk(A),Ra(_)},S.prototype.leaveSelect=function(A){Fk(A),Ra(_)},S.prototype.getModel=function(){return _.getModel()},S.prototype.getViewOfComponentModel=function(A){return _.getViewOfComponentModel(A)},S.prototype.getViewOfSeriesModel=function(A){return _.getViewOfSeriesModel(A)},S}(N5))(_)},I3=function(_){function y(S,A){for(var L=0;L<S.length;L++){var I=S[L];I[R1]=A}}Ee(Xd,function(S,A){_._messageCenter.on(A,function(L){if(UM[_.group]&&_[R1]!==OM){if(L&&L.escapeConnect)return;var I=_.makeActionFromEvent(L),M=[];Ee(Yd,function(D){D!==_&&D.group===_.group&&M.push(D)}),y(M,OM),Ee(M,function(D){D[R1]!==KX&&D.dispatchAction(I)}),y(M,JX)}})})}}(),t}(ks),k2=P3.prototype;k2.on=T3("on");k2.off=T3("off");k2.one=function(e,t,r){var i=this;function n(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];t&&t.apply&&t.apply(this,a),i.off(e,n)}this.on.call(this,e,n,r)};var QX=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var o_={},Xd={},mb=[],vb=[],s_=[],D3={},gb={},Yd={},UM={},eY=+new Date-0,R2="_echarts_instance_";function tY(e,t,r){var i=!(r&&r.ssr);if(i){var n=rY(e);if(n)return n}var a=new P3(e,t,r);return a.id="ec_"+eY++,Yd[a.id]=a,i&&mk(e,R2,a.id),I3(a),co.trigger("afterinit",a),a}function rY(e){return Yd[TH(e,R2)]}function L3(e,t){D3[e]=t}function k3(e){ri(vb,e)<0&&vb.push(e)}function R3(e,t){O2(mb,e,t,GX)}function iY(e){z2("afterinit",e)}function nY(e){z2("afterupdate",e)}function z2(e,t){co.on(e,t)}function Qh(e,t,r){lr(t)&&(r=t,t="");var i=Kt(e)?e.type:[e,e={event:t}][0];e.event=(e.event||i).toLowerCase(),t=e.event,!Xd[t]&&(_o(zM.test(i)&&zM.test(t)),o_[i]||(o_[i]={action:r,actionInfo:e}),Xd[t]=i)}function aY(e,t){b2.register(e,t)}function oY(e,t){O2(s_,e,t,b3,"layout")}function fc(e,t){O2(s_,e,t,w3,"visual")}var GM=[];function O2(e,t,r,i,n){if((lr(t)||Kt(t))&&(r=t,t=i),!(ri(GM,r)>=0)){GM.push(r);var a=h3.wrapStageHandler(r,n);a.__prio=t,a.__raw=r,e.push(a)}}function z3(e,t){gb[e]=t}function sY(e,t,r){var i=FX("registerMap");i&&i(e,t,r)}var lY=hZ;fc(L2,VZ);fc(Q_,$Z);fc(Q_,UZ);fc(L2,iX);fc(Q_,nX);fc(S3,zX);k3($5);R3($X,ZW);z3("default",GZ);Qh({type:tc,event:tc,update:tc},Zn);Qh({type:gg,event:gg,update:gg},Zn);Qh({type:Gd,event:Gd,update:Gd},Zn);Qh({type:_g,event:_g,update:_g},Zn);Qh({type:Hd,event:Hd,update:Hd},Zn);L3("light",eX);L3("dark",tX);function vd(e){return e==null?0:e.length||1}function HM(e){return e}var uY=function(){function e(t,r,i,n,a,u){this._old=t,this._new=r,this._oldKeyGetter=i||HM,this._newKeyGetter=n||HM,this.context=a,this._diffModeMultiple=u==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,i={},n=new Array(t.length),a=new Array(r.length);this._initIndexMap(t,null,n,"_oldKeyGetter"),this._initIndexMap(r,i,a,"_newKeyGetter");for(var u=0;u<t.length;u++){var o=n[u],f=i[o],p=vd(f);if(p>1){var v=f.shift();f.length===1&&(i[o]=f[0]),this._update&&this._update(v,u)}else p===1?(i[o]=null,this._update&&this._update(f,u)):this._remove&&this._remove(u)}this._performRestAdd(a,i)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,i={},n={},a=[],u=[];this._initIndexMap(t,i,a,"_oldKeyGetter"),this._initIndexMap(r,n,u,"_newKeyGetter");for(var o=0;o<a.length;o++){var f=a[o],p=i[f],v=n[f],_=vd(p),y=vd(v);if(_>1&&y===1)this._updateManyToOne&&this._updateManyToOne(v,p),n[f]=null;else if(_===1&&y>1)this._updateOneToMany&&this._updateOneToMany(v,p),n[f]=null;else if(_===1&&y===1)this._update&&this._update(v,p),n[f]=null;else if(_>1&&y>1)this._updateManyToMany&&this._updateManyToMany(v,p),n[f]=null;else if(_>1)for(var S=0;S<_;S++)this._remove&&this._remove(p[S]);else this._remove&&this._remove(p)}this._performRestAdd(u,n)},e.prototype._performRestAdd=function(t,r){for(var i=0;i<t.length;i++){var n=t[i],a=r[n],u=vd(a);if(u>1)for(var o=0;o<u;o++)this._add&&this._add(a[o]);else u===1&&this._add&&this._add(a);r[n]=null}},e.prototype._initIndexMap=function(t,r,i,n){for(var a=this._diffModeMultiple,u=0;u<t.length;u++){var o="_ec_"+this[n](t[u],u);if(a||(i[u]=o),!!r){var f=r[o],p=vd(f);p===0?(r[o]=u,a&&i.push(o)):p===1?r[o]=[f,u]:f.push(u)}}},e}();const cY=uY;var hY=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function fY(e,t){var r={},i=r.encode={},n=wr(),a=[],u=[],o={};Ee(e.dimensions,function(y){var S=e.getDimensionInfo(y),A=S.coordDim;if(A){var L=S.coordDimIndex;V1(i,A)[L]=y,S.isExtraCoord||(n.set(A,1),pY(S.type)&&(a[0]=y),V1(o,A)[L]=e.getDimensionIndex(S.name)),S.defaultTooltip&&u.push(y)}L5.each(function(I,M){var D=V1(i,M),O=S.otherDims[M];O!=null&&O!==!1&&(D[O]=S.name)})});var f=[],p={};n.each(function(y,S){var A=i[S];p[S]=A[0],f=f.concat(A)}),r.dataDimsOnCoord=f,r.dataDimIndicesOnCoord=Zt(f,function(y){return e.getDimensionInfo(y).storeDimIndex}),r.encodeFirstDimNotExtra=p;var v=i.label;v&&v.length&&(a=v.slice());var _=i.tooltip;return _&&_.length?u=_.slice():u.length||(u=a.slice()),i.defaultedLabel=a,i.defaultedTooltip=u,r.userOutput=new hY(o,t),r}function V1(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function dY(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function pY(e){return!(e==="ordinal"||e==="time")}var mY=function(){function e(t){this.otherDims={},t!=null&&xt(this,t)}return e}();const bg=mY;var vY=zi(),gY={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},O3=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=N3(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return br(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=G5(this.source),i=!V3(t),n="",a=[],u=0,o=0;u<t;u++){var f=void 0,p=void 0,v=void 0,_=this.dimensions[o];if(_&&_.storeDimIndex===u)f=r?_.name:null,p=_.type,v=_.ordinalMeta,o++;else{var y=this.getSourceDimension(u);y&&(f=r?y.name:null,p=y.type)}a.push({property:f,type:p,ordinalMeta:v}),r&&f!=null&&(!_||!_.isCalculationCoord)&&(n+=i?f.replace(/\`/g,"`1").replace(/\$/g,"`2"):f),n+="$",n+=gY[p]||"f",v&&(n+=v.uid),n+="$"}var S=this.source,A=[S.seriesLayoutBy,S.startIndex,n].join("$$");return{dimensions:a,hash:A}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,i=0;r<this._fullDimCount;r++){var n=void 0,a=this.dimensions[i];if(a&&a.storeDimIndex===r)a.isCalculationCoord||(n=a.name),i++;else{var u=this.getSourceDimension(r);u&&(n=u.name)}t.push(n)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function B3(e){return e instanceof O3}function F3(e){for(var t=wr(),r=0;r<(e||[]).length;r++){var i=e[r],n=Kt(i)?i.name:i;n!=null&&t.get(n)==null&&t.set(n,r)}return t}function N3(e){var t=vY(e);return t.dimNameMap||(t.dimNameMap=F3(e.dimensionsDefine))}function V3(e){return e>30}var gd=Kt,pl=Zt,_Y=typeof Int32Array>"u"?Array:Int32Array,yY="e\0\0",qM=-1,xY=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],bY=["_approximateExtent"],jM,qv,_d,yd,$1,jv,U1,wY=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i,n=!1;B3(t)?(i=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(n=!0,i=t),i=i||["x","y"];for(var a={},u=[],o={},f=!1,p={},v=0;v<i.length;v++){var _=i[v],y=Wt(_)?new bg({name:_}):_ instanceof bg?_:new bg(_),S=y.name;y.type=y.type||"float",y.coordDim||(y.coordDim=S,y.coordDimIndex=0);var A=y.otherDims=y.otherDims||{};u.push(S),a[S]=y,p[S]!=null&&(f=!0),y.createInvertedIndices&&(o[S]=[]),A.itemName===0&&(this._nameDimIdx=v),A.itemId===0&&(this._idDimIdx=v),n&&(y.storeDimIndex=v)}if(this.dimensions=u,this._dimInfos=a,this._initGetDimensionInfo(f),this.hostModel=r,this._invertedIndicesMap=o,this._dimOmitted){var L=this._dimIdxToName=wr();Ee(u,function(I){L.set(a[I].storeDimIndex,I)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var i=this._dimIdxToName.get(r);if(i!=null)return i;var n=this._schema.getSourceDimension(r);if(n)return n.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var i=this._getDimInfo(t);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(Mi(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(i){return r.hasOwnProperty(i)?r[i]:void 0}:function(i){return r[i]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var i=this._dimSummary;if(r==null)return i.encodeFirstDimNotExtra[t];var n=i.encode[t];return n?n[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,i=r.encode[t];return(i||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,i){var n=this,a;if(t instanceof sb&&(a=t),!a){var u=this.dimensions,o=w2(t)||ca(t)?new H5(t,u.length):t;a=new sb;var f=pl(u,function(p){return{type:n._dimInfos[p].type,property:p}});a.initData(o,f,i)}this._store=a,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,a.count()),this._dimSummary=fY(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var i=this._store.appendValues(t,r.length),n=i.start,a=i.end,u=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var o=n;o<a;o++){var f=o-n;this._nameList[o]=r[f],u&&U1(this,o)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,i=0;i<r.length;i++){var n=this._dimInfos[r[i]];n.ordinalMeta&&t.collectOrdinalMeta(n.storeDimIndex,n.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Pl&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var i=this._store,n=i.getProvider();this._updateOrdinalMeta();var a=this._nameList,u=this._idList,o=n.getSource().sourceFormat,f=o===Ya;if(f&&!n.pure)for(var p=[],v=t;v<r;v++){var _=n.getItem(v,p);if(!this.hasItemOption&&dH(_)&&(this.hasItemOption=!0),_){var y=_.name;a[v]==null&&y!=null&&(a[v]=Wo(y,null));var S=_.id;u[v]==null&&S!=null&&(u[v]=Wo(S,null))}}if(this._shouldMakeIdFromName())for(var v=t;v<r;v++)U1(this,v);jM(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){gd(t)?xt(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),i=this._nameList[r];return i==null&&this._nameDimIdx!=null&&(i=_d(this,this._nameDimIdx,r)),i==null&&(i=""),i},e.prototype._getCategory=function(t,r){var i=this._store.get(t,r),n=this._store.getOrdinalMeta(t);return n?n.categories[i]:i},e.prototype.getId=function(t){return qv(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var i=this._store,n=this._dimInfos[t];if(n)return i.get(n.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var i=this._store,n=this._dimInfos[t];if(n)return i.getByRawIndex(n.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var i=this,n=this._store;return Ft(t)?n.getValues(pl(t,function(a){return i._getStoreDimIndex(a)}),r):n.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,i=0,n=r.length;i<n;i++)if(isNaN(this._store.get(r[i],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,i=this._store.count();r<i;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var i=t&&this._invertedIndicesMap[t],n=i[r];return n==null||isNaN(n)?qM:n},e.prototype.indicesOfNearest=function(t,r,i){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,i)},e.prototype.each=function(t,r,i){lr(t)&&(i=r,r=t,t=[]);var n=i||this,a=pl(yd(t),this._getStoreDimIndex,this);this._store.each(a,n?Ai(r,n):r)},e.prototype.filterSelf=function(t,r,i){lr(t)&&(i=r,r=t,t=[]);var n=i||this,a=pl(yd(t),this._getStoreDimIndex,this);return this._store=this._store.filter(a,n?Ai(r,n):r),this},e.prototype.selectRange=function(t){var r=this,i={},n=$r(t);return Ee(n,function(a){var u=r._getStoreDimIndex(a);i[u]=t[a]}),this._store=this._store.selectRange(i),this},e.prototype.mapArray=function(t,r,i){lr(t)&&(i=r,r=t,t=[]),i=i||this;var n=[];return this.each(t,function(){n.push(r&&r.apply(this,arguments))},i),n},e.prototype.map=function(t,r,i,n){var a=i||n||this,u=pl(yd(t),this._getStoreDimIndex,this),o=jv(this);return o._store=this._store.map(u,a?Ai(r,a):r),o},e.prototype.modify=function(t,r,i,n){var a=i||n||this,u=pl(yd(t),this._getStoreDimIndex,this);this._store.modify(u,a?Ai(r,a):r)},e.prototype.downSample=function(t,r,i,n){var a=jv(this);return a._store=this._store.downSample(this._getStoreDimIndex(t),r,i,n),a},e.prototype.lttbDownSample=function(t,r){var i=jv(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),i},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,i=this.getRawDataItem(t);return new Wn(i,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new cY(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(i){return qv(t,i)},function(i){return qv(r,i)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},gd(t)?xt(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var i=this._itemVisuals[t],n=i&&i[r];return n??this.getVisual(r)},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var i=this._itemVisuals,n=i[t];n||(n=i[t]={});var a=n[r];return a==null&&(a=this.getVisual(r),Ft(a)?a=a.slice():gd(a)&&(a=xt({},a)),n[r]=a),a},e.prototype.setItemVisual=function(t,r,i){var n=this._itemVisuals[t]||{};this._itemVisuals[t]=n,gd(r)?xt(n,r):n[r]=i},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){gd(t)?xt(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,i){this._itemLayouts[t]=i?xt(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var i=this.hostModel&&this.hostModel.seriesIndex;Tq(i,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){Ee(this._graphicEls,function(i,n){i&&t&&t.call(r,i,n)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:pl(this.dimensions,this._getDimInfo,this),this.hostModel)),$1(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var i=this[t];lr(i)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var n=i.apply(this,arguments);return r.apply(this,[n].concat(zw(arguments)))})},e.internalField=function(){jM=function(t){var r=t._invertedIndicesMap;Ee(r,function(i,n){var a=t._dimInfos[n],u=a.ordinalMeta,o=t._store;if(u){i=r[n]=new _Y(u.categories.length);for(var f=0;f<i.length;f++)i[f]=qM;for(var f=0;f<o.count();f++)i[o.get(a.storeDimIndex,f)]=f}})},_d=function(t,r,i){return Wo(t._getCategory(r,i),null)},qv=function(t,r){var i=t._idList[r];return i==null&&t._idDimIdx!=null&&(i=_d(t,t._idDimIdx,r)),i==null&&(i=yY+r),i},yd=function(t){return Ft(t)||(t=t!=null?[t]:[]),t},jv=function(t){var r=new e(t._schema?t._schema:pl(t.dimensions,t._getDimInfo,t),t.hostModel);return $1(r,t),r},$1=function(t,r){Ee(xY.concat(r.__wrappedMethods||[]),function(i){r.hasOwnProperty(i)&&(t[i]=r[i])}),t.__wrappedMethods=r.__wrappedMethods,Ee(bY,function(i){t[i]=Dr(r[i])}),t._calculationInfo=xt({},r._calculationInfo)},U1=function(t,r){var i=t._nameList,n=t._idList,a=t._nameDimIdx,u=t._idDimIdx,o=i[r],f=n[r];if(o==null&&a!=null&&(i[r]=o=_d(t,a,r)),f==null&&u!=null&&(n[r]=f=_d(t,u,r)),f==null&&o!=null){var p=t._nameRepeatCount,v=p[o]=(p[o]||0)+1;f=o,v>1&&(f+="__ec__"+v),n[r]=f}}}(),e}();const B2=wY;function SY(e,t){w2(e)||(e=S2(e)),t=t||{};var r=t.coordDimensions||[],i=t.dimensionsDefine||e.dimensionsDefine||[],n=wr(),a=[],u=EY(e,r,i,t.dimensionsCount),o=t.canOmitUnusedDimensions&&V3(u),f=i===e.dimensionsDefine,p=f?N3(e):F3(i),v=t.encodeDefine;!v&&t.encodeDefaulter&&(v=t.encodeDefaulter(e,u));for(var _=wr(v),y=new Y5(u),S=0;S<y.length;S++)y[S]=-1;function A(ie){var ae=y[ie];if(ae<0){var he=i[ie],ue=Kt(he)?he:{name:he},fe=new bg,ye=ue.name;ye!=null&&p.get(ye)!=null&&(fe.name=fe.displayName=ye),ue.type!=null&&(fe.type=ue.type),ue.displayName!=null&&(fe.displayName=ue.displayName);var He=a.length;return y[ie]=He,fe.storeDimIndex=ie,a.push(fe),fe}return a[ae]}if(!o)for(var S=0;S<u;S++)A(S);_.each(function(ie,ae){var he=Xn(ie).slice();if(he.length===1&&!Wt(he[0])&&he[0]<0){_.set(ae,!1);return}var ue=_.set(ae,[]);Ee(he,function(fe,ye){var He=Wt(fe)?p.get(fe):fe;He!=null&&He<u&&(ue[ye]=He,I(A(He),ae,ye))})});var L=0;Ee(r,function(ie){var ae,he,ue,fe;if(Wt(ie))ae=ie,fe={};else{fe=ie,ae=fe.name;var ye=fe.ordinalMeta;fe.ordinalMeta=null,fe=xt({},fe),fe.ordinalMeta=ye,he=fe.dimsDef,ue=fe.otherDims,fe.name=fe.coordDim=fe.coordDimIndex=fe.dimsDef=fe.otherDims=null}var He=_.get(ae);if(He!==!1){if(He=Xn(He),!He.length)for(var we=0;we<(he&&he.length||1);we++){for(;L<u&&A(L).coordDim!=null;)L++;L<u&&He.push(L++)}Ee(He,function(it,et){var Ct=A(it);if(f&&fe.type!=null&&(Ct.type=fe.type),I(pi(Ct,fe),ae,et),Ct.name==null&&he){var zt=he[et];!Kt(zt)&&(zt={name:zt}),Ct.name=Ct.displayName=zt.name,Ct.defaultTooltip=zt.defaultTooltip}ue&&pi(Ct.otherDims,ue)})}});function I(ie,ae,he){L5.get(ae)!=null?ie.otherDims[ae]=he:(ie.coordDim=ae,ie.coordDimIndex=he,n.set(ae,!0))}var M=t.generateCoord,D=t.generateCoordCount,O=D!=null;D=M?D||1:0;var N=M||"value";function q(ie){ie.name==null&&(ie.name=ie.coordDim)}if(o)Ee(a,function(ie){q(ie)}),a.sort(function(ie,ae){return ie.storeDimIndex-ae.storeDimIndex});else for(var Z=0;Z<u;Z++){var Q=A(Z),j=Q.coordDim;j==null&&(Q.coordDim=CY(N,n,O),Q.coordDimIndex=0,(!M||D<=0)&&(Q.isExtraCoord=!0),D--),q(Q),Q.type==null&&(O5(e,Z)===ya.Must||Q.isExtraCoord&&(Q.otherDims.itemName!=null||Q.otherDims.seriesName!=null))&&(Q.type="ordinal")}return TY(a),new O3({source:e,dimensions:a,fullDimensionCount:u,dimensionOmitted:o})}function TY(e){for(var t=wr(),r=0;r<e.length;r++){var i=e[r],n=i.name,a=t.get(n)||0;a>0&&(i.name=n+(a-1)),a++,t.set(n,a)}}function EY(e,t,r,i){var n=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,i||0);return Ee(t,function(a){var u;Kt(a)&&(u=a.dimsDef)&&(n=Math.max(n,u.length))}),n}function CY(e,t,r){if(r||t.hasKey(e)){for(var i=0;t.hasKey(e+i);)i++;e+=i}return t.set(e,!0),e}var AY=function(){function e(t){this.coordSysDims=[],this.axisMap=wr(),this.categoryAxisMap=wr(),this.coordSysName=t}return e}();function MY(e){var t=e.get("coordinateSystem"),r=new AY(t),i=IY[t];if(i)return i(e,r,r.axisMap,r.categoryAxisMap),r}var IY={cartesian2d:function(e,t,r,i){var n=e.getReferringComponents("xAxis",mo).models[0],a=e.getReferringComponents("yAxis",mo).models[0];t.coordSysDims=["x","y"],r.set("x",n),r.set("y",a),ah(n)&&(i.set("x",n),t.firstCategoryDimIndex=0),ah(a)&&(i.set("y",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,i){var n=e.getReferringComponents("singleAxis",mo).models[0];t.coordSysDims=["single"],r.set("single",n),ah(n)&&(i.set("single",n),t.firstCategoryDimIndex=0)},polar:function(e,t,r,i){var n=e.getReferringComponents("polar",mo).models[0],a=n.findAxisModel("radiusAxis"),u=n.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",a),r.set("angle",u),ah(a)&&(i.set("radius",a),t.firstCategoryDimIndex=0),ah(u)&&(i.set("angle",u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,i){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,i){var n=e.ecModel,a=n.getComponent("parallel",e.get("parallelIndex")),u=t.coordSysDims=a.dimensions.slice();Ee(a.parallelAxisIndex,function(o,f){var p=n.getComponent("parallelAxis",o),v=u[f];r.set(v,p),ah(p)&&(i.set(v,p),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=f))})}};function ah(e){return e.get("type")==="category"}function PY(e,t,r){r=r||{};var i=r.byIndex,n=r.stackedCoordDimension,a,u,o;DY(t)?a=t:(u=t.schema,a=u.dimensions,o=t.store);var f=!!(e&&e.get("stack")),p,v,_,y;if(Ee(a,function(D,O){Wt(D)&&(a[O]=D={name:D}),f&&!D.isExtraCoord&&(!i&&!p&&D.ordinalMeta&&(p=D),!v&&D.type!=="ordinal"&&D.type!=="time"&&(!n||n===D.coordDim)&&(v=D))}),v&&!i&&!p&&(i=!0),v){_="__\0ecstackresult_"+e.id,y="__\0ecstackedover_"+e.id,p&&(p.createInvertedIndices=!0);var S=v.coordDim,A=v.type,L=0;Ee(a,function(D){D.coordDim===S&&L++});var I={name:_,coordDim:S,coordDimIndex:L,type:A,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length},M={name:y,coordDim:y,coordDimIndex:L+1,type:A,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:a.length+1};u?(o&&(I.storeDimIndex=o.ensureCalculationDimension(y,A),M.storeDimIndex=o.ensureCalculationDimension(_,A)),u.appendCalculationDimension(I),u.appendCalculationDimension(M)):(a.push(I),a.push(M))}return{stackedDimension:v&&v.name,stackedByDimension:p&&p.name,isStackedByIndex:i,stackedOverDimension:y,stackResultDimension:_}}function DY(e){return!B3(e.schema)}function l_(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function LY(e,t){return l_(e,t)?e.getCalculationInfo("stackResultDimension"):t}function kY(e,t){var r=e.get("coordinateSystem"),i=b2.get(r),n;return t&&t.coordSysDims&&(n=Zt(t.coordSysDims,function(a){var u={name:a},o=t.axisMap.get(a);if(o){var f=o.get("type");u.type=dY(f)}return u})),n||(n=i&&(i.getDimensionsInfo?i.getDimensionsInfo():i.dimensions.slice())||["x","y"]),n}function RY(e,t,r){var i,n;return r&&Ee(e,function(a,u){var o=a.coordDim,f=r.categoryAxisMap.get(o);f&&(i==null&&(i=u),a.ordinalMeta=f.getOrdinalMeta(),t&&(a.createInvertedIndices=!0)),a.otherDims.itemName!=null&&(n=!0)}),!n&&i!=null&&(e[i].otherDims.itemName=0),i}function zY(e,t,r){r=r||{};var i=t.getSourceManager(),n,a=!1;e?(a=!0,n=S2(e)):(n=i.getSource(),a=n.sourceFormat===Ya);var u=MY(t),o=kY(t,u),f=r.useEncodeDefaulter,p=lr(f)?f:f?ln(xW,o,t):null,v={coordDimensions:o,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:p,canOmitUnusedDimensions:!a},_=SY(n,v),y=RY(_.dimensions,r.createInvertedIndices,u),S=a?null:i.getSharedDataStore(_),A=PY(t,{schema:_,store:S}),L=new B2(_,t);L.setCalculationInfo(A);var I=y!=null&&OY(n)?function(M,D,O,N){return N===y?O:this.defaultDimValueGetter(M,D,O,N)}:null;return L.hasItemOption=!1,L.initData(a?n:S,null,I),L}function OY(e){if(e.sourceFormat===Ya){var t=BY(e.data||[]);return!Ft(Hp(t))}}function BY(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var $3=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var i=this._extent;isNaN(t)||(i[0]=t),isNaN(r)||(i[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();B_($3);const Bs=$3;var FY=0,NY=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++FY}return e.createByAxisModel=function(t){var r=t.option,i=r.data,n=i&&Zt(i,VY);return new e({categories:n,needCollect:!n,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,i=this._needCollect;if(!Wt(t)&&!i)return t;if(i&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var n=this._getOrCreateMap();return r=n.get(t),r==null&&(i?(r=this.categories.length,this.categories[r]=t,n.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=wr(this.categories))},e}();function VY(e){return Kt(e)&&e.value!=null?e.value:e+""}const _b=NY;function yb(e){return e.type==="interval"||e.type==="log"}function $Y(e,t,r,i){var n={},a=e[1]-e[0],u=n.interval=uk(a/t,!0);r!=null&&u<r&&(u=n.interval=r),i!=null&&u>i&&(u=n.interval=i);var o=n.intervalPrecision=U3(u),f=n.niceTickExtent=[Ji(Math.ceil(e[0]/u)*u,o),Ji(Math.floor(e[1]/u)*u,o)];return UY(f,e),n}function G1(e){var t=Math.pow(10,Ww(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,Ji(r*t)}function U3(e){return Bh(e)+2}function WM(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function UY(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),WM(e,0,t),WM(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function ey(e,t){return e>=t[0]&&e<=t[1]}function ty(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function ry(e,t){return e*(t[1]-t[0])+t[0]}var G3=function(e){It(t,e);function t(r){var i=e.call(this,r)||this;i.type="ordinal";var n=i.getSetting("ordinalMeta");return n||(n=new _b({})),Ft(n)&&(n=new _b({categories:Zt(n,function(a){return Kt(a)?a.value:a})})),i._ordinalMeta=n,i._extent=i.getSetting("extent")||[0,n.categories.length-1],i}return t.prototype.parse=function(r){return r==null?NaN:Wt(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),ey(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),ty(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(ry(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],i=this._extent,n=i[0];n<=i[1];)r.push({value:n}),n++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var i=r.ordinalNumbers,n=this._ordinalNumbersByTick=[],a=this._ticksByOrdinalNumber=[],u=0,o=this._ordinalMeta.categories.length,f=Math.min(o,i.length);u<f;++u){var p=i[u];n[u]=p,a[p]=u}for(var v=0;u<o;++u){for(;a[v]!=null;)v++;n.push(v),a[v]=u}},t.prototype._getTickNumber=function(r){var i=this._ticksByOrdinalNumber;return i&&r>=0&&r<i.length?i[r]:r},t.prototype.getRawOrdinalNumber=function(r){var i=this._ordinalNumbersByTick;return i&&r>=0&&r<i.length?i[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var i=this.getRawOrdinalNumber(r.value),n=this._ordinalMeta.categories[i];return n==null?"":n+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,i){this.unionExtent(r.getApproximateExtent(i))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Bs);Bs.registerClass(G3);const H3=G3;var Bu=Ji,q3=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return ey(r,this._extent)},t.prototype.normalize=function(r){return ty(r,this._extent)},t.prototype.scale=function(r){return ry(r,this._extent)},t.prototype.setExtent=function(r,i){var n=this._extent;isNaN(r)||(n[0]=parseFloat(r)),isNaN(i)||(n[1]=parseFloat(i))},t.prototype.unionExtent=function(r){var i=this._extent;r[0]<i[0]&&(i[0]=r[0]),r[1]>i[1]&&(i[1]=r[1]),this.setExtent(i[0],i[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=U3(r)},t.prototype.getTicks=function(r){var i=this._interval,n=this._extent,a=this._niceExtent,u=this._intervalPrecision,o=[];if(!i)return o;var f=1e4;n[0]<a[0]&&(r?o.push({value:Bu(a[0]-i,u)}):o.push({value:n[0]}));for(var p=a[0];p<=a[1]&&(o.push({value:p}),p=Bu(p+i,u),p!==o[o.length-1].value);)if(o.length>f)return[];var v=o.length?o[o.length-1].value:a[1];return n[1]>v&&(r?o.push({value:Bu(v+i,u)}):o.push({value:n[1]})),o},t.prototype.getMinorTicks=function(r){for(var i=this.getTicks(!0),n=[],a=this.getExtent(),u=1;u<i.length;u++){for(var o=i[u],f=i[u-1],p=0,v=[],_=o.value-f.value,y=_/r;p<r-1;){var S=Bu(f.value+(p+1)*y);S>a[0]&&S<a[1]&&v.push(S),p++}n.push(v)}return n},t.prototype.getLabel=function(r,i){if(r==null)return"";var n=i&&i.precision;n==null?n=Bh(r.value)||0:n==="auto"&&(n=this._intervalPrecision);var a=Bu(r.value,n,!0);return A5(a)},t.prototype.calcNiceTicks=function(r,i,n){r=r||5;var a=this._extent,u=a[1]-a[0];if(isFinite(u)){u<0&&(u=-u,a.reverse());var o=$Y(a,r,i,n);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var i=this._extent;if(i[0]===i[1])if(i[0]!==0){var n=Math.abs(i[0]);r.fixMax||(i[1]+=n/2),i[0]-=n/2}else i[1]=1;var a=i[1]-i[0];isFinite(a)||(i[0]=0,i[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var u=this._interval;r.fixMin||(i[0]=Bu(Math.floor(i[0]/u)*u)),r.fixMax||(i[1]=Bu(Math.ceil(i[1]/u)*u))},t.prototype.setNiceExtent=function(r,i){this._niceExtent=[r,i]},t.type="interval",t}(Bs);Bs.registerClass(q3);const Xp=q3;var j3=typeof Float32Array<"u",GY=j3?Float32Array:Array;function HY(e){return Ft(e)?j3?new Float32Array(e):e:new GY(e)}var qY="__ec_stack_";function W3(e){return e.get("stack")||qY+e.seriesIndex}function Z3(e){return e.dim+e.index}function jY(e,t){var r=[];return t.eachSeriesByType(e,function(i){KY(i)&&r.push(i)}),r}function WY(e){var t={};Ee(e,function(f){var p=f.coordinateSystem,v=p.getBaseAxis();if(!(v.type!=="time"&&v.type!=="value"))for(var _=f.getData(),y=v.dim+"_"+v.index,S=_.getDimensionIndex(_.mapDimension(v.dim)),A=_.getStore(),L=0,I=A.count();L<I;++L){var M=A.get(S,L);t[y]?t[y].push(M):t[y]=[M]}});var r={};for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];if(n){n.sort(function(f,p){return f-p});for(var a=null,u=1;u<n.length;++u){var o=n[u]-n[u-1];o>0&&(a=a===null?o:Math.min(a,o))}r[i]=a}}return r}function ZY(e){var t=WY(e),r=[];return Ee(e,function(i){var n=i.coordinateSystem,a=n.getBaseAxis(),u=a.getExtent(),o;if(a.type==="category")o=a.getBandWidth();else if(a.type==="value"||a.type==="time"){var f=a.dim+"_"+a.index,p=t[f],v=Math.abs(u[1]-u[0]),_=a.scale.getExtent(),y=Math.abs(_[1]-_[0]);o=p?v/y*p:v}else{var S=i.getData();o=Math.abs(u[1]-u[0])/S.count()}var A=mn(i.get("barWidth"),o),L=mn(i.get("barMaxWidth"),o),I=mn(i.get("barMinWidth")||(JY(i)?.5:1),o),M=i.get("barGap"),D=i.get("barCategoryGap");r.push({bandWidth:o,barWidth:A,barMaxWidth:L,barMinWidth:I,barGap:M,barCategoryGap:D,axisKey:Z3(a),stackId:W3(i)})}),XY(r)}function XY(e){var t={};Ee(e,function(i,n){var a=i.axisKey,u=i.bandWidth,o=t[a]||{bandWidth:u,remainedWidth:u,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},f=o.stacks;t[a]=o;var p=i.stackId;f[p]||o.autoWidthCount++,f[p]=f[p]||{width:0,maxWidth:0};var v=i.barWidth;v&&!f[p].width&&(f[p].width=v,v=Math.min(o.remainedWidth,v),o.remainedWidth-=v);var _=i.barMaxWidth;_&&(f[p].maxWidth=_);var y=i.barMinWidth;y&&(f[p].minWidth=y);var S=i.barGap;S!=null&&(o.gap=S);var A=i.barCategoryGap;A!=null&&(o.categoryGap=A)});var r={};return Ee(t,function(i,n){r[n]={};var a=i.stacks,u=i.bandWidth,o=i.categoryGap;if(o==null){var f=$r(a).length;o=Math.max(35-f*4,15)+"%"}var p=mn(o,u),v=mn(i.gap,1),_=i.remainedWidth,y=i.autoWidthCount,S=(_-p)/(y+(y-1)*v);S=Math.max(S,0),Ee(a,function(M){var D=M.maxWidth,O=M.minWidth;if(M.width){var N=M.width;D&&(N=Math.min(N,D)),O&&(N=Math.max(N,O)),M.width=N,_-=N+v*N,y--}else{var N=S;D&&D<N&&(N=Math.min(D,_)),O&&O>N&&(N=O),N!==S&&(M.width=N,_-=N+v*N,y--)}}),S=(_-p)/(y+(y-1)*v),S=Math.max(S,0);var A=0,L;Ee(a,function(M,D){M.width||(M.width=S),L=M,A+=M.width*(1+v)}),L&&(A-=L.width*v);var I=-A/2;Ee(a,function(M,D){r[n][D]=r[n][D]||{bandWidth:u,offset:I,width:M.width},I+=M.width*(1+v)})}),r}function YY(e,t,r){if(e&&t){var i=e[Z3(t)];return i!=null&&r!=null?i[W3(r)]:i}}function KY(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function JY(e){return e.pipelineContext&&e.pipelineContext.large}var QY=function(e,t,r,i){for(;r<i;){var n=r+i>>>1;e[n][1]<t?r=n+1:i=n}return r},X3=function(e){It(t,e);function t(r){var i=e.call(this,r)||this;return i.type="time",i}return t.prototype.getLabel=function(r){var i=this.getSetting("useUTC");return q_(r.value,RA[cW(Sh(this._minLevelUnit))]||RA.second,i,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,i,n){var a=this.getSetting("useUTC"),u=this.getSetting("locale");return hW(r,i,n,u,a)},t.prototype.getTicks=function(){var r=this._interval,i=this._extent,n=[];if(!r)return n;n.push({value:i[0],level:0});var a=this.getSetting("useUTC"),u=oK(this._minLevelUnit,this._approxInterval,a,i);return n=n.concat(u),n.push({value:i[1],level:0}),n},t.prototype.calcNiceExtent=function(r){var i=this._extent;if(i[0]===i[1]&&(i[0]-=Ha,i[1]+=Ha),i[1]===-1/0&&i[0]===1/0){var n=new Date;i[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),i[0]=i[1]-Ha}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,i,n){r=r||10;var a=this._extent,u=a[1]-a[0];this._approxInterval=u/r,i!=null&&this._approxInterval<i&&(this._approxInterval=i),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var o=Wv.length,f=Math.min(QY(Wv,this._approxInterval,0,o),o-1);this._interval=Wv[f][1],this._minLevelUnit=Wv[Math.max(f-1,0)][0]},t.prototype.parse=function(r){return Mi(r)?r:+Ps(r)},t.prototype.contain=function(r){return ey(this.parse(r),this._extent)},t.prototype.normalize=function(r){return ty(this.parse(r),this._extent)},t.prototype.scale=function(r){return ry(r,this._extent)},t.type="time",t}(Xp),Wv=[["second",p2],["minute",m2],["hour",Wd],["quarter-day",Wd*6],["half-day",Wd*12],["day",Ha*1.2],["half-week",Ha*3.5],["week",Ha*7],["month",Ha*31],["quarter",Ha*95],["half-year",kA/2],["year",kA]];function eK(e,t,r,i){var n=Ps(t),a=Ps(r),u=function(A){return zA(n,A,i)===zA(a,A,i)},o=function(){return u("year")},f=function(){return o()&&u("month")},p=function(){return f()&&u("day")},v=function(){return p()&&u("hour")},_=function(){return v()&&u("minute")},y=function(){return _()&&u("second")},S=function(){return y()&&u("millisecond")};switch(e){case"year":return o();case"month":return f();case"day":return p();case"hour":return v();case"minute":return _();case"second":return y();case"millisecond":return S()}}function tK(e,t){return e/=Ha,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function rK(e){var t=30*Ha;return e/=t,e>6?6:e>3?3:e>2?2:1}function iK(e){return e/=Wd,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function ZM(e,t){return e/=t?m2:p2,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function nK(e){return uk(e,!0)}function aK(e,t,r){var i=new Date(e);switch(Sh(t)){case"year":case"month":i[b5(r)](0);case"day":i[w5(r)](1);case"hour":i[S5(r)](0);case"minute":i[T5(r)](0);case"second":i[E5(r)](0),i[C5(r)](0)}return i.getTime()}function oK(e,t,r,i){var n=1e4,a=y5,u=0;function o(ae,he,ue,fe,ye,He,we){for(var it=new Date(he),et=he,Ct=it[fe]();et<ue&&et<=i[1];)we.push({value:et}),Ct+=ae,it[ye](Ct),et=it.getTime();we.push({value:et,notAdd:!0})}function f(ae,he,ue){var fe=[],ye=!he.length;if(!eK(Sh(ae),i[0],i[1],r)){ye&&(he=[{value:aK(new Date(i[0]),ae,r)},{value:i[1]}]);for(var He=0;He<he.length-1;He++){var we=he[He].value,it=he[He+1].value;if(we!==it){var et=void 0,Ct=void 0,zt=void 0,tr=!1;switch(ae){case"year":et=Math.max(1,Math.round(t/Ha/365)),Ct=v2(r),zt=fW(r);break;case"half-year":case"quarter":case"month":et=rK(t),Ct=Th(r),zt=b5(r);break;case"week":case"half-week":case"day":et=tK(t),Ct=j_(r),zt=w5(r),tr=!0;break;case"half-day":case"quarter-day":case"hour":et=iK(t),Ct=yp(r),zt=S5(r);break;case"minute":et=ZM(t,!0),Ct=W_(r),zt=T5(r);break;case"second":et=ZM(t,!1),Ct=Z_(r),zt=E5(r);break;case"millisecond":et=nK(t),Ct=X_(r),zt=C5(r);break}o(et,we,it,Ct,zt,tr,fe),ae==="year"&&ue.length>1&&He===0&&ue.unshift({value:ue[0].value-et})}}for(var He=0;He<fe.length;He++)ue.push(fe[He]);return fe}}for(var p=[],v=[],_=0,y=0,S=0;S<a.length&&u++<n;++S){var A=Sh(a[S]);if(uW(a[S])){f(a[S],p[p.length-1]||[],v);var L=a[S+1]?Sh(a[S+1]):null;if(A!==L){if(v.length){y=_,v.sort(function(ae,he){return ae.value-he.value});for(var I=[],M=0;M<v.length;++M){var D=v[M].value;(M===0||v[M-1].value!==D)&&(I.push(v[M]),D>=i[0]&&D<=i[1]&&_++)}var O=(i[1]-i[0])/t;if(_>O*1.5&&y>O/1.5||(p.push(I),_>O||e===a[S]))break}v=[]}}}for(var N=Pn(Zt(p,function(ae){return Pn(ae,function(he){return he.value>=i[0]&&he.value<=i[1]&&!he.notAdd})}),function(ae){return ae.length>0}),q=[],Z=N.length-1,S=0;S<N.length;++S)for(var Q=N[S],j=0;j<Q.length;++j)q.push({value:Q[j].value,level:Z-S});q.sort(function(ae,he){return ae.value-he.value});for(var ie=[],S=0;S<q.length;++S)(S===0||q[S].value!==q[S-1].value)&&ie.push(q[S]);return ie}Bs.registerClass(X3);const sK=X3;var XM=Bs.prototype,Kd=Xp.prototype,lK=Ji,uK=Math.floor,cK=Math.ceil,Zv=Math.pow,so=Math.log,F2=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new Xp,r._interval=0,r}return t.prototype.getTicks=function(r){var i=this._originalScale,n=this._extent,a=i.getExtent(),u=Kd.getTicks.call(this,r);return Zt(u,function(o){var f=o.value,p=Ji(Zv(this.base,f));return p=f===n[0]&&this._fixMin?Xv(p,a[0]):p,p=f===n[1]&&this._fixMax?Xv(p,a[1]):p,{value:p}},this)},t.prototype.setExtent=function(r,i){var n=so(this.base);r=so(Math.max(0,r))/n,i=so(Math.max(0,i))/n,Kd.setExtent.call(this,r,i)},t.prototype.getExtent=function(){var r=this.base,i=XM.getExtent.call(this);i[0]=Zv(r,i[0]),i[1]=Zv(r,i[1]);var n=this._originalScale,a=n.getExtent();return this._fixMin&&(i[0]=Xv(i[0],a[0])),this._fixMax&&(i[1]=Xv(i[1],a[1])),i},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var i=this.base;r[0]=so(r[0])/so(i),r[1]=so(r[1])/so(i),XM.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,i){this.unionExtent(r.getApproximateExtent(i))},t.prototype.calcNiceTicks=function(r){r=r||10;var i=this._extent,n=i[1]-i[0];if(!(n===1/0||n<=0)){var a=cH(n),u=r/n*a;for(u<=.5&&(a*=10);!isNaN(a)&&Math.abs(a)<1&&Math.abs(a)>0;)a*=10;var o=[Ji(cK(i[0]/a)*a),Ji(uK(i[1]/a)*a)];this._interval=a,this._niceExtent=o}},t.prototype.calcNiceExtent=function(r){Kd.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=so(r)/so(this.base),ey(r,this._extent)},t.prototype.normalize=function(r){return r=so(r)/so(this.base),ty(r,this._extent)},t.prototype.scale=function(r){return r=ry(r,this._extent),Zv(this.base,r)},t.type="log",t}(Bs),Y3=F2.prototype;Y3.getMinorTicks=Kd.getMinorTicks;Y3.getLabel=Kd.getLabel;function Xv(e,t){return lK(e,Bh(t))}Bs.registerClass(F2);const hK=F2;var fK=function(){function e(t,r,i){this._prepareParams(t,r,i)}return e.prototype._prepareParams=function(t,r,i){i[1]<i[0]&&(i=[NaN,NaN]),this._dataMin=i[0],this._dataMax=i[1];var n=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var a=this._modelMinRaw=r.get("min",!0);lr(a)?this._modelMinNum=Yv(t,a({min:i[0],max:i[1]})):a!=="dataMin"&&(this._modelMinNum=Yv(t,a));var u=this._modelMaxRaw=r.get("max",!0);if(lr(u)?this._modelMaxNum=Yv(t,u({min:i[0],max:i[1]})):u!=="dataMax"&&(this._modelMaxNum=Yv(t,u)),n)this._axisDataLen=r.getCategories().length;else{var o=r.get("boundaryGap"),f=Ft(o)?o:[o||0,o||0];typeof f[0]=="boolean"||typeof f[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ac(f[0],1),ac(f[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,i=this._dataMax,n=this._axisDataLen,a=this._boundaryGapInner,u=t?null:i-r||Math.abs(r),o=this._modelMinRaw==="dataMin"?r:this._modelMinNum,f=this._modelMaxRaw==="dataMax"?i:this._modelMaxNum,p=o!=null,v=f!=null;o==null&&(o=t?n?0:NaN:r-a[0]*u),f==null&&(f=t?n?n-1:NaN:i+a[1]*u),(o==null||!isFinite(o))&&(o=NaN),(f==null||!isFinite(f))&&(f=NaN);var _=$g(o)||$g(f)||t&&!n;this._needCrossZero&&(o>0&&f>0&&!p&&(o=0),o<0&&f<0&&!v&&(f=0));var y=this._determinedMin,S=this._determinedMax;return y!=null&&(o=y,p=!0),S!=null&&(f=S,v=!0),{min:o,max:f,minFixed:p,maxFixed:v,isBlank:_}},e.prototype.modifyDataMinMax=function(t,r){this[pK[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var i=dK[t];this[i]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),dK={min:"_determinedMin",max:"_determinedMax"},pK={min:"_dataMin",max:"_dataMax"};function mK(e,t,r){var i=e.rawExtentInfo;return i||(i=new fK(e,t,r),e.rawExtentInfo=i,i)}function Yv(e,t){return t==null?null:$g(t)?NaN:e.parse(t)}function K3(e,t){var r=e.type,i=mK(e,t,e.getExtent()).calculate();e.setBlank(i.isBlank);var n=i.min,a=i.max,u=t.ecModel;if(u&&r==="time"){var o=jY("bar",u),f=!1;if(Ee(o,function(_){f=f||_.getBaseAxis()===t.axis}),f){var p=ZY(o),v=vK(n,a,t,p);n=v.min,a=v.max}}return{extent:[n,a],fixMin:i.minFixed,fixMax:i.maxFixed}}function vK(e,t,r,i){var n=r.axis.getExtent(),a=n[1]-n[0],u=YY(i,r.axis);if(u===void 0)return{min:e,max:t};var o=1/0;Ee(u,function(S){o=Math.min(S.offset,o)});var f=-1/0;Ee(u,function(S){f=Math.max(S.offset+S.width,f)}),o=Math.abs(o),f=Math.abs(f);var p=o+f,v=t-e,_=1-(o+f)/a,y=v/_-v;return t+=y*(f/p),e-=y*(o/p),{min:e,max:t}}function YM(e,t){var r=t,i=K3(e,r),n=i.extent,a=r.get("splitNumber");e instanceof hK&&(e.base=r.get("logBase"));var u=e.type,o=r.get("interval"),f=u==="interval"||u==="time";e.setExtent(n[0],n[1]),e.calcNiceExtent({splitNumber:a,fixMin:i.fixMin,fixMax:i.fixMax,minInterval:f?r.get("minInterval"):null,maxInterval:f?r.get("maxInterval"):null}),o!=null&&e.setInterval&&e.setInterval(o)}function gK(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new H3({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new sK({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(Bs.getClass(t)||Xp)}}function _K(e){var t=e.scale.getExtent(),r=t[0],i=t[1];return!(r>0&&i>0||r<0&&i<0)}function Yp(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(i){return function(n,a){return e.scale.getFormattedLabel(n,a,i)}}(t):Wt(t)?function(i){return function(n){var a=e.scale.getLabel(n),u=i.replace("{value}",a??"");return u}}(t):lr(t)?function(i){return function(n,a){return r!=null&&(a=n.value-r),i(N2(e,n),a,n.level!=null?{level:n.level}:null)}}(t):function(i){return e.scale.getLabel(i)}}function N2(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function yK(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var i,n,a=r.getExtent();r instanceof H3?n=r.count():(i=r.getTicks(),n=i.length);var u=e.getLabelModel(),o=Yp(e),f,p=1;n>40&&(p=Math.ceil(n/40));for(var v=0;v<n;v+=p){var _=i?i[v]:{value:a[0]+v},y=o(_,v),S=u.getTextRect(y),A=xK(S,u.get("rotate")||0);f?f.union(A):f=A}return f}}function xK(e,t){var r=t*Math.PI/180,i=e.width,n=e.height,a=i*Math.abs(Math.cos(r))+Math.abs(n*Math.sin(r)),u=i*Math.abs(Math.sin(r))+Math.abs(n*Math.cos(r)),o=new ii(e.x,e.y,a,u);return o}function V2(e){var t=e.get("interval");return t??"auto"}function J3(e){return e.type==="category"&&V2(e.getLabelModel())===0}function bK(e,t){var r={};return Ee(e.mapDimensionsAll(t),function(i){r[LY(e,i)]=!0}),$r(r)}var wK=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),KM=[],SK={registerPreprocessor:k3,registerProcessor:R3,registerPostInit:iY,registerPostUpdate:nY,registerUpdateLifecycle:z2,registerAction:Qh,registerCoordinateSystem:aY,registerLayout:oY,registerVisual:fc,registerTransform:lY,registerLoading:z3,registerMap:sY,registerImpl:BX,PRIORITY:YX,ComponentModel:_i,ComponentView:Ds,SeriesModel:Nh,ChartView:rc,registerComponentModel:function(e){_i.registerClass(e)},registerComponentView:function(e){Ds.registerClass(e)},registerSeriesModel:function(e){Nh.registerClass(e)},registerChartView:function(e){rc.registerClass(e)},registerSubTypeDefaulter:function(e,t){_i.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){nH(e,t)}};function Vh(e){if(Ft(e)){Ee(e,function(t){Vh(t)});return}ri(KM,e)>=0||(KM.push(e),lr(e)&&(e={install:e}),e.install(SK))}var Cp=zi();function TK(e){return e.type==="category"?CK(e):MK(e)}function EK(e,t){return e.type==="category"?AK(e,t):{ticks:Zt(e.scale.getTicks(),function(r){return r.value})}}function CK(e){var t=e.getLabelModel(),r=Q3(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function Q3(e,t){var r=eR(e,"labels"),i=V2(t),n=tR(r,i);if(n)return n;var a,u;return lr(i)?a=nR(e,i):(u=i==="auto"?IK(e):i,a=iR(e,u)),rR(r,i,{labels:a,labelCategoryInterval:u})}function AK(e,t){var r=eR(e,"ticks"),i=V2(t),n=tR(r,i);if(n)return n;var a,u;if((!t.get("show")||e.scale.isBlank())&&(a=[]),lr(i))a=nR(e,i,!0);else if(i==="auto"){var o=Q3(e,e.getLabelModel());u=o.labelCategoryInterval,a=Zt(o.labels,function(f){return f.tickValue})}else u=i,a=iR(e,u,!0);return rR(r,i,{ticks:a,tickCategoryInterval:u})}function MK(e){var t=e.scale.getTicks(),r=Yp(e);return{labels:Zt(t,function(i,n){return{level:i.level,formattedLabel:r(i,n),rawLabel:e.scale.getLabel(i),tickValue:i.value}})}}function eR(e,t){return Cp(e)[t]||(Cp(e)[t]=[])}function tR(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function rR(e,t,r){return e.push({key:t,value:r}),r}function IK(e){var t=Cp(e).autoInterval;return t??(Cp(e).autoInterval=e.calculateCategoryInterval())}function PK(e){var t=DK(e),r=Yp(e),i=(t.axisRotate-t.labelRotate)/180*Math.PI,n=e.scale,a=n.getExtent(),u=n.count();if(a[1]-a[0]<1)return 0;var o=1;u>40&&(o=Math.max(1,Math.floor(u/40)));for(var f=a[0],p=e.dataToCoord(f+1)-e.dataToCoord(f),v=Math.abs(p*Math.cos(i)),_=Math.abs(p*Math.sin(i)),y=0,S=0;f<=a[1];f+=o){var A=0,L=0,I=qw(r({value:f}),t.font,"center","top");A=I.width*1.3,L=I.height*1.3,y=Math.max(y,A,7),S=Math.max(S,L,7)}var M=y/v,D=S/_;isNaN(M)&&(M=1/0),isNaN(D)&&(D=1/0);var O=Math.max(0,Math.floor(Math.min(M,D))),N=Cp(e.model),q=e.getExtent(),Z=N.lastAutoInterval,Q=N.lastTickCount;return Z!=null&&Q!=null&&Math.abs(Z-O)<=1&&Math.abs(Q-u)<=1&&Z>O&&N.axisExtent0===q[0]&&N.axisExtent1===q[1]?O=Z:(N.lastTickCount=u,N.lastAutoInterval=O,N.axisExtent0=q[0],N.axisExtent1=q[1]),O}function DK(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function iR(e,t,r){var i=Yp(e),n=e.scale,a=n.getExtent(),u=e.getLabelModel(),o=[],f=Math.max((t||0)+1,1),p=a[0],v=n.count();p!==0&&f>1&&v/f>2&&(p=Math.round(Math.ceil(p/f)*f));var _=J3(e),y=u.get("showMinLabel")||_,S=u.get("showMaxLabel")||_;y&&p!==a[0]&&L(a[0]);for(var A=p;A<=a[1];A+=f)L(A);S&&A-f!==a[1]&&L(a[1]);function L(I){var M={value:I};o.push(r?I:{formattedLabel:i(M),rawLabel:n.getLabel(M),tickValue:I})}return o}function nR(e,t,r){var i=e.scale,n=Yp(e),a=[];return Ee(i.getTicks(),function(u){var o=i.getLabel(u),f=u.value;t(u.value,o)&&a.push(r?f:{formattedLabel:n(u),rawLabel:o,tickValue:f})}),a}var JM=[0,1],LK=function(){function e(t,r,i){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=i||[0,0]}return e.prototype.contain=function(t){var r=this._extent,i=Math.min(r[0],r[1]),n=Math.max(r[0],r[1]);return t>=i&&t<=n},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return sH(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var i=this._extent;i[0]=t,i[1]=r},e.prototype.dataToCoord=function(t,r){var i=this._extent,n=this.scale;return t=n.normalize(t),this.onBand&&n.type==="ordinal"&&(i=i.slice(),QM(i,n.count())),GC(t,JM,i,r)},e.prototype.coordToData=function(t,r){var i=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(i=i.slice(),QM(i,n.count()));var a=GC(t,i,JM,r);return this.scale.scale(a)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),i=EK(this,r),n=i.ticks,a=Zt(n,function(o){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(o):o),tickValue:o}},this),u=r.get("alignWithLabel");return kK(this,a,u,t.clamp),a},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var i=this.scale.getMinorTicks(r),n=Zt(i,function(a){return Zt(a,function(u){return{coord:this.dataToCoord(u),tickValue:u}},this)},this);return n},e.prototype.getViewLabels=function(){return TK(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),i=r[1]-r[0]+(this.onBand?1:0);i===0&&(i=1);var n=Math.abs(t[1]-t[0]);return Math.abs(n)/i},e.prototype.calculateCategoryInterval=function(){return PK(this)},e}();function QM(e,t){var r=e[1]-e[0],i=t,n=r/i/2;e[0]+=n,e[1]-=n}function kK(e,t,r,i){var n=t.length;if(!e.onBand||r||!n)return;var a=e.getExtent(),u,o;if(n===1)t[0].coord=a[0],u=t[1]={coord:a[0]};else{var f=t[n-1].tickValue-t[0].tickValue,p=(t[n-1].coord-t[0].coord)/f;Ee(t,function(S){S.coord-=p/2});var v=e.scale.getExtent();o=1+v[1]-t[n-1].tickValue,u={coord:t[n-1].coord+p*o},t.push(u)}var _=a[0]>a[1];y(t[0].coord,a[0])&&(i?t[0].coord=a[0]:t.shift()),i&&y(a[0],t[0].coord)&&t.unshift({coord:a[0]}),y(a[1],u.coord)&&(i?u.coord=a[1]:t.pop()),i&&y(u.coord,a[1])&&t.push({coord:a[1]});function y(S,A){return S=Ji(S),A=Ji(A),_?S>A:S<A}}const RK=LK;function zK(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(!i.defaultAttr.ignore){var n=i.label,a=n.getComputedTransform(),u=n.getBoundingRect(),o=!a||a[1]<1e-5&&a[2]<1e-5,f=n.style.margin||0,p=u.clone();p.applyTransform(a),p.x-=f/2,p.y-=f/2,p.width+=f,p.height+=f;var v=o?new Kg(u,a):null;t.push({label:n,labelLine:i.labelLine,rect:p,localRect:u,obb:v,priority:i.priority,defaultAttr:i.defaultAttr,layoutOption:i.computedLayoutOption,axisAligned:o,transform:a})}}return t}function OK(e){var t=[];e.sort(function(L,I){return I.priority-L.priority});var r=new ii(0,0,0,0);function i(L){if(!L.ignore){var I=L.ensureState("emphasis");I.ignore==null&&(I.ignore=!1)}L.ignore=!0}for(var n=0;n<e.length;n++){var a=e[n],u=a.axisAligned,o=a.localRect,f=a.transform,p=a.label,v=a.labelLine;r.copy(a.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var _=a.obb,y=!1,S=0;S<t.length;S++){var A=t[S];if(r.intersect(A.rect)){if(u&&A.axisAligned){y=!0;break}if(A.obb||(A.obb=new Kg(A.localRect,A.transform)),_||(_=new Kg(o,f)),_.intersect(A.obb)){y=!0;break}}}y?(i(p),v&&i(v)):(p.attr("ignore",a.defaultAttr.ignore),v&&v.attr("ignore",a.defaultAttr.labelGuideIgnore),t.push(a))}}var H1=null;function BK(e){return H1||(H1=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),H1(e)}var q1=null;function FK(e){q1||(q1=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),q1(e)}function NK(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function Kv(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(i){r[i]=t[i]}),r}function aR(e,t,r){var i=window.getComputedStyle(e,r||null)||{display:"none"};return i[t]}function xb(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(aR(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var VK='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',bb=0,wg=null;function $K(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=HK.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var i=e.offsetWidth,n=e.offsetHeight,a=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===i&&e.offsetHeight===n)||u_(e)}),u=xb(e),o=u.detached,f=u.rendered;e.__resize_observer_triggered__=o===!1&&f===!1,e.__resize_observer__=a,a.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){u_(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(bb||(wg=NK(VK)),qK(e),e.__resize_rendered__=xb(e).rendered,window.MutationObserver){var p=new MutationObserver(e.__resize_mutation_handler__);p.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=p}}e.__resize_listeners__.push(t),bb++}function UK(e,t){var r=e.__resize_listeners__;if(r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",$2),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--bb&&wg&&wg.parentNode.removeChild(wg)}}function GK(e){var t=e.__resize_last__,r=t.width,i=t.height,n=e.offsetWidth,a=e.offsetHeight;return n!==r||a!==i?{width:n,height:a}:null}function HK(){var e=xb(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&(U2(this),this.addEventListener("scroll",$2,!0)),this.__resize_rendered__=t,u_(this))}function $2(){var e=this;U2(this),this.__resize_raf__&&FK(this.__resize_raf__),this.__resize_raf__=BK(function(){var t=GK(e);t&&(e.__resize_last__=t,u_(e))})}function u_(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function qK(e){var t=aR(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=Kv("div",{className:"resize-triggers"}),i=Kv("div",{className:"resize-expand-trigger"}),n=Kv("div"),a=Kv("div",{className:"resize-contract-trigger"});i.appendChild(n),r.appendChild(i),r.appendChild(a),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:i,expandChild:n,contract:a},U2(e),e.addEventListener("scroll",$2,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function U2(e){var t=e.__resize_triggers__,r=t.expand,i=t.expandChild,n=t.contract,a=n.scrollWidth,u=n.scrollHeight,o=r.offsetWidth,f=r.offsetHeight,p=r.scrollWidth,v=r.scrollHeight;n.scrollLeft=a,n.scrollTop=u,i.style.width=o+1+"px",i.style.height=f+1+"px",r.scrollLeft=p,r.scrollTop=v}var Ss=function(){return Ss=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Ss.apply(this,arguments)},jK=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function WK(e){return t=Object.create(null),jK.forEach(function(r){t[r]=function(i){return function(){for(var n=[],a=0;a<arguments.length;a++)n[a]=arguments[a];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[i].apply(e.value,n)}}(r)}),t;var t}var ZK={autoresize:Boolean},XK={loading:Boolean,loadingOptions:Object},YK=/^on[^a-z]/,KK=function(e){return YK.test(e)},eI=[],xd=[];(function(e,t){if(e&&typeof document<"u"){var r,i=t.prepend===!0?"prepend":"append",n=t.singleTag===!0,a=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(n){var u=eI.indexOf(a);u===-1&&(u=eI.push(a)-1,xd[u]={}),r=xd[u]&&xd[u][i]?xd[u][i]:xd[u][i]=o()}else r=o();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function o(){var f=document.createElement("style");if(f.setAttribute("type","text/css"),t.attributes)for(var p=Object.keys(t.attributes),v=0;v<p.length;v++)f.setAttribute(p[v],t.attributes[p[v]]);var _=i==="prepend"?"afterbegin":"beforeend";return a.insertAdjacentElement(_,f),f}})("x-vue-echarts{display:block;width:100%;height:100%}",{});var JK=Er({name:"echarts",props:Ss(Ss({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},ZK),XK),inheritAttrs:!1,setup:function(e,t){var r=t.attrs,i=Ld(),n=Ld(),a=Ld(),u=yi("ecTheme",null),o=yi("ecInitOptions",null),f=yi("ecUpdateOptions",null),p=Lp(e),v=p.autoresize,_=p.manualUpdate,y=p.loading,S=p.loadingOptions,A=St(function(){return a.value||e.option||null}),L=St(function(){return e.theme||jt(u)||{}}),I=St(function(){return e.initOptions||jt(o)||{}}),M=St(function(){return e.updateOptions||jt(f)||{}}),D=St(function(){return function(j){var ie={};for(var ae in j)KK(ae)||(ie[ae]=j[ae]);return ie}(r)}),O=Jb().proxy.$listeners;function N(j){if(i.value){var ie=n.value=tY(i.value,L.value,I.value);e.group&&(ie.group=e.group);var ae=O;ae||(ae={},Object.keys(r).filter(function(ue){return ue.indexOf("on")===0&&ue.length>2}).forEach(function(ue){var fe=ue.charAt(2).toLowerCase()+ue.slice(3);fe.substring(fe.length-4)==="Once"&&(fe="~".concat(fe.substring(0,fe.length-4))),ae[fe]=r[ue]})),Object.keys(ae).forEach(function(ue){var fe=ae[ue];if(fe){var ye=ue.toLowerCase();ye.charAt(0)==="~"&&(ye=ye.substring(1),fe.__once__=!0);var He=ie;if(ye.indexOf("zr:")===0&&(He=ie.getZr(),ye=ye.substring(3)),fe.__once__){delete fe.__once__;var we=fe;fe=function(){for(var it=[],et=0;et<arguments.length;et++)it[et]=arguments[et];we.apply(void 0,it),He.off(ye,fe)}}He.on(ye,fe)}}),v.value?Rp(function(){ie&&!ie.isDisposed()&&ie.resize(),he()}):he()}function he(){var ue=j||A.value;ue&&ie.setOption(ue,M.value)}}function q(){n.value&&(n.value.dispose(),n.value=void 0)}var Z=null;Ln(_,function(j){typeof Z=="function"&&(Z(),Z=null),j||(Z=Ln(function(){return e.option},function(ie,ae){ie&&(n.value?n.value.setOption(ie,Ss({notMerge:ie.value!==(ae==null?void 0:ae.value)},M.value)):N())},{deep:!0}))},{immediate:!0}),Ln([L,I],function(){q(),N()},{deep:!0}),dx(function(){e.group&&n.value&&(n.value.group=e.group)});var Q=WK(n);return function(j,ie,ae){var he=yi("ecLoadingOptions",{}),ue=St(function(){return Ss(Ss({},jt(he)),ae==null?void 0:ae.value)});dx(function(){var fe=j.value;fe&&(ie.value?fe.showLoading(ue.value):fe.hideLoading())})}(n,y,S),function(j,ie,ae){var he=null;Ln([ae,j,ie],function(ue,fe,ye){var He=ue[0],we=ue[1],it=ue[2];He&&we&&it&&(he=I2(function(){we.resize()},100),$K(He,he)),ye(function(){he&&He&&UK(He,he)})})}(n,v,i),Kn(function(){N()}),Op(q),Ss({chart:n,root:i,setOption:function(j,ie){e.manualUpdate&&(a.value=j),n.value?n.value.setOption(j,ie||{}):N(j)},nonEventAttrs:D},Q)},render:function(){var e=Ss({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",Sr("x-vue-echarts",e)}}),j1=Math.sin,W1=Math.cos,oR=Math.PI,Fu=Math.PI*2,QK=180/oR,eJ=function(){function e(){}return e.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},e.prototype.moveTo=function(t,r){this._add("M",t,r)},e.prototype.lineTo=function(t,r){this._add("L",t,r)},e.prototype.bezierCurveTo=function(t,r,i,n,a,u){this._add("C",t,r,i,n,a,u)},e.prototype.quadraticCurveTo=function(t,r,i,n){this._add("Q",t,r,i,n)},e.prototype.arc=function(t,r,i,n,a,u){this.ellipse(t,r,i,i,0,n,a,u)},e.prototype.ellipse=function(t,r,i,n,a,u,o,f){var p=o-u,v=!f,_=Math.abs(p),y=Sl(_-Fu)||(v?p>=Fu:-p>=Fu),S=p>0?p%Fu:p%Fu+Fu,A=!1;y?A=!0:Sl(_)?A=!1:A=S>=oR==!!v;var L=t+i*W1(u),I=r+n*j1(u);this._start&&this._add("M",L,I);var M=Math.round(a*QK);if(y){var D=1/this._p,O=(v?1:-1)*(Fu-D);this._add("A",i,n,M,1,+v,t+i*W1(u+O),r+n*j1(u+O)),D>.01&&this._add("A",i,n,M,0,+v,L,I)}else{var N=t+i*W1(o),q=r+n*j1(o);this._add("A",i,n,M,+A,+v,N,q)}},e.prototype.rect=function(t,r,i,n){this._add("M",t,r),this._add("l",i,0),this._add("l",0,n),this._add("l",-i,0),this._add("Z")},e.prototype.closePath=function(){this._d.length>0&&this._add("Z")},e.prototype._add=function(t,r,i,n,a,u,o,f,p){for(var v=[],_=this._p,y=1;y<arguments.length;y++){var S=arguments[y];if(isNaN(S)){this._invalid=!0;return}v.push(Math.round(S*_)/_)}this._d.push(t+v.join(" ")),this._start=t==="Z"},e.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},e.prototype.getStr=function(){return this._str},e}();const sR=eJ;var Jd="none",tJ=Math.round;function rJ(e){var t=e.fill;return t!=null&&t!==Jd}function iJ(e){var t=e.stroke;return t!=null&&t!==Jd}var wb=["lineCap","miterLimit","lineJoin"],nJ=Zt(wb,function(e){return"stroke-"+e.toLowerCase()});function aJ(e,t,r,i){var n=t.opacity==null?1:t.opacity;if(r instanceof Rs){e("opacity",n);return}if(rJ(t)){var a=hp(t.fill);e("fill",a.color);var u=t.fillOpacity!=null?t.fillOpacity*a.opacity*n:a.opacity*n;(i||u<1)&&e("fill-opacity",u)}else e("fill",Jd);if(iJ(t)){var o=hp(t.stroke);e("stroke",o.color);var f=t.strokeNoScale?r.getLineScale():1,p=f?(t.lineWidth||0)/f:0,v=t.strokeOpacity!=null?t.strokeOpacity*o.opacity*n:o.opacity*n,_=t.strokeFirst;if((i||p!==1)&&e("stroke-width",p),(i||_)&&e("paint-order",_?"stroke":"fill"),(i||v<1)&&e("stroke-opacity",v),t.lineDash){var y=D2(r),S=y[0],A=y[1];S&&(A=tJ(A||0),e("stroke-dasharray",S.join(",")),(A||i)&&e("stroke-dashoffset",A))}else i&&e("stroke-dasharray",Jd);for(var L=0;L<wb.length;L++){var I=wb[L];if(i||t[I]!==Xg[I]){var M=t[I]||Xg[I];M&&e(nJ[L],M)}}}else i&&e("stroke",Jd)}var lR="http://www.w3.org/2000/svg",uR="http://www.w3.org/1999/xlink",oJ="http://www.w3.org/2000/xmlns/",sJ="http://www.w3.org/XML/1998/namespace";function cR(e){return document.createElementNS(lR,e)}function Qi(e,t,r,i,n){return{tag:e,attrs:r||{},children:i,text:n,key:t}}function lJ(e,t){var r=[];if(t)for(var i in t){var n=t[i],a=i;n!==!1&&(n!==!0&&n!=null&&(a+='="'+n+'"'),r.push(a))}return"<"+e+" "+r.join(" ")+">"}function uJ(e){return"</"+e+">"}function G2(e,t){t=t||{};var r=t.newline?`
`:"";function i(n){var a=n.children,u=n.tag,o=n.attrs;return lJ(u,o)+wa(n.text)+(a?""+r+Zt(a,function(f){return i(f)}).join(r)+r:"")+uJ(u)}return i(e)}function cJ(e,t,r){r=r||{};var i=r.newline?`
`:"",n=" {"+i,a=i+"}",u=Zt($r(e),function(f){return f+n+Zt($r(e[f]),function(p){return p+":"+e[f][p]+";"}).join(i)+a}).join(i),o=Zt($r(t),function(f){return"@keyframes "+f+n+Zt($r(t[f]),function(p){return p+n+Zt($r(t[f][p]),function(v){var _=t[f][p][v];return v==="d"&&(_='path("'+_+'")'),v+":"+_+";"}).join(i)+a}).join(i)+a}).join(i);return!u&&!o?"":["<![CDATA[",u,o,"]]>"].join(i)}function Sb(e){return{zrId:e,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function tI(e,t,r,i){return Qi("svg","root",{width:e,height:t,xmlns:lR,"xmlns:xlink":uR,version:"1.1",baseProfile:"full",viewBox:i?"0 0 "+e+" "+t:!1},r)}var rI={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},$u="transform-origin";function hJ(e,t,r){var i=xt({},e.shape);xt(i,t),e.buildPath(r,i);var n=new sR;return n.reset(YL(e)),r.rebuildPath(n,1),n.generateStr(),n.getStr()}function fJ(e,t){var r=t.originX,i=t.originY;(r||i)&&(e[$u]=r+"px "+i+"px")}var dJ={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function hR(e,t){var r=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[r]=e,r}function pJ(e,t,r){var i=e.shape.paths,n={},a,u;if(Ee(i,function(f){var p=Sb(r.zrId);p.animation=!0,iy(f,{},p,!0);var v=p.cssAnims,_=p.cssNodes,y=$r(v),S=y.length;if(S){u=y[S-1];var A=v[u];for(var L in A){var I=A[L];n[L]=n[L]||{d:""},n[L].d+=I.d||""}for(var M in _){var D=_[M].animation;D.indexOf(u)>=0&&(a=D)}}}),!!a){t.d=!1;var o=hR(n,r);return a.replace(u,o)}}function iI(e){return Wt(e)?rI[e]?"cubic-bezier("+rI[e]+")":$w(e)?e:"":""}function iy(e,t,r,i){var n=e.animators,a=n.length,u=[];if(e instanceof a5){var o=pJ(e,t,r);if(o)u.push(o);else if(!a)return}else if(!a)return;for(var f={},p=0;p<a;p++){var v=n[p],_=[v.getMaxTime()/1e3+"s"],y=iI(v.getClip().easing),S=v.getDelay();y?_.push(y):_.push("linear"),S&&_.push(S/1e3+"s"),v.getLoop()&&_.push("infinite");var A=_.join(" ");f[A]=f[A]||[A,[]],f[A][1].push(v)}function L(D){var O=D[1],N=O.length,q={},Z={},Q={},j="animation-timing-function";function ie(nt,Ye,ft){for(var ut=nt.getTracks(),se=nt.getMaxTime(),me=0;me<ut.length;me++){var Ae=ut[me];if(Ae.needsAnimate()){var Ve=Ae.keyframes,We=Ae.propName;if(ft&&(We=ft(We)),We)for(var Ke=0;Ke<Ve.length;Ke++){var dt=Ve[Ke],qe=Math.round(dt.time/se*100)+"%",at=iI(dt.easing),Qe=dt.rawValue;(Wt(Qe)||Mi(Qe))&&(Ye[qe]=Ye[qe]||{},Ye[qe][We]=dt.rawValue,at&&(Ye[qe][j]=at))}}}}for(var ae=0;ae<N;ae++){var he=O[ae],ue=he.targetName;ue?ue==="shape"&&ie(he,Z):!i&&ie(he,q)}for(var fe in q){var ye={};tk(ye,e),xt(ye,q[fe]);var He=KL(ye),we=q[fe][j];Q[fe]=He?{transform:He}:{},fJ(Q[fe],ye),we&&(Q[fe][j]=we)}var it,et=!0;for(var fe in Z){Q[fe]=Q[fe]||{};var Ct=!it,we=Z[fe][j];Ct&&(it=new oc);var zt=it.len();it.reset(),Q[fe].d=hJ(e,Z[fe],it);var tr=it.len();if(!Ct&&zt!==tr){et=!1;break}we&&(Q[fe][j]=we)}if(!et)for(var fe in Q)delete Q[fe].d;if(!i)for(var ae=0;ae<N;ae++){var he=O[ae],ue=he.targetName;ue==="style"&&ie(he,Q,function(ut){return dJ[ut]})}for(var $t=$r(Q),Lr=!0,Ir,ae=1;ae<$t.length;ae++){var Cr=$t[ae-1],dr=$t[ae];if(Q[Cr][$u]!==Q[dr][$u]){Lr=!1;break}Ir=Q[Cr][$u]}if(Lr&&Ir){for(var fe in Q)Q[fe][$u]&&delete Q[fe][$u];t[$u]=Ir}if(Pn($t,function(nt){return $r(Q[nt]).length>0}).length){var Ge=hR(Q,r);return Ge+" "+D[0]+" both"}}for(var I in f){var o=L(f[I]);o&&u.push(o)}if(u.length){var M=r.zrId+"-cls-"+r.cssClassIdx++;r.cssNodes["."+M]={animation:u.join(",")},t.class=M}}var Ap=Math.round;function fR(e){return e&&Wt(e.src)}function dR(e){return e&&lr(e.toDataURL)}function H2(e,t,r,i){aJ(function(n,a){var u=n==="fill"||n==="stroke";u&&XL(a)?mR(t,e,n,i):u&&Uw(a)?vR(r,e,n,i):e[n]=a},t,r,!1),bJ(r,e,i)}function nI(e){return Sl(e[0]-1)&&Sl(e[1])&&Sl(e[2])&&Sl(e[3]-1)}function mJ(e){return Sl(e[4])&&Sl(e[5])}function q2(e,t,r){if(t&&!(mJ(t)&&nI(t))){var i=r?10:1e4;e.transform=nI(t)?"translate("+Ap(t[4]*i)/i+" "+Ap(t[5]*i)/i+")":TG(t)}}function aI(e,t,r){for(var i=e.points,n=[],a=0;a<i.length;a++)n.push(Ap(i[a][0]*r)/r),n.push(Ap(i[a][1]*r)/r);t.points=n.join(" ")}function oI(e){return!e.smooth}function vJ(e){var t=Zt(e,function(r){return typeof r=="string"?[r,r]:r});return function(r,i,n){for(var a=0;a<t.length;a++){var u=t[a],o=r[u[0]];o!=null&&(i[u[1]]=Ap(o*n)/n)}}}var gJ={circle:[vJ(["cx","cy","r"])],polyline:[aI,oI],polygon:[aI,oI]};function _J(e){for(var t=e.animators,r=0;r<t.length;r++)if(t[r].targetName==="shape")return!0;return!1}function pR(e,t){var r=e.style,i=e.shape,n=gJ[e.type],a={},u=t.animation,o="path",f=e.style.strokePercent,p=t.compress&&YL(e)||4;if(n&&!t.willUpdate&&!(n[1]&&!n[1](i))&&!(u&&_J(e))&&!(f<1)){o=e.type;var v=Math.pow(10,p);n[0](i,a,v)}else{var _=!e.path||e.shapeChanged();e.path||e.createPathProxy();var y=e.path;_&&(y.beginPath(),e.buildPath(y,e.shape),e.pathUpdated());var S=y.getVersion(),A=e,L=A.__svgPathBuilder;(A.__svgPathVersion!==S||!L||f!==A.__svgPathStrokePercent)&&(L||(L=A.__svgPathBuilder=new sR),L.reset(p),y.rebuildPath(L,f),L.generateStr(),A.__svgPathVersion=S,A.__svgPathStrokePercent=f),a.d=L.getStr()}return q2(a,e.transform),H2(a,r,e,t),t.animation&&iy(e,a,t),Qi(o,e.id+"",a)}function yJ(e,t){var r=e.style,i=r.image;if(i&&!Wt(i)&&(fR(i)?i=i.src:dR(i)&&(i=i.toDataURL())),!!i){var n=r.x||0,a=r.y||0,u=r.width,o=r.height,f={href:i,width:u,height:o};return n&&(f.x=n),a&&(f.y=a),q2(f,e.transform),H2(f,r,e,t),t.animation&&iy(e,f,t),Qi("image",e.id+"",f)}}function xJ(e,t){var r=e.style,i=r.text;if(i!=null&&(i+=""),!(!i||isNaN(r.x)||isNaN(r.y))){var n=r.font||Rl,a=r.x||0,u=CG(r.y||0,O_(n),r.textBaseline),o=EG[r.textAlign]||r.textAlign,f={"dominant-baseline":"central","text-anchor":o};if(Pk(r)){var p="",v=r.fontStyle,_=Ik(r.fontSize);if(!parseFloat(_))return;var y=r.fontFamily||bL,S=r.fontWeight;p+="font-size:"+_+";font-family:"+y+";",v&&v!=="normal"&&(p+="font-style:"+v+";"),S&&S!=="normal"&&(p+="font-weight:"+S+";"),f.style=p}else f.style="font: "+n;return i.match(/\s/)&&(f["xml:space"]="preserve"),a&&(f.x=a),u&&(f.y=u),q2(f,e.transform),H2(f,r,e,t),t.animation&&iy(e,f,t),Qi("text",e.id+"",f,void 0,i)}}function sI(e,t){if(e instanceof Jr)return pR(e,t);if(e instanceof Rs)return yJ(e,t);if(e instanceof Yg)return xJ(e,t)}function bJ(e,t,r){var i=e.style;if(AG(i)){var n=MG(e),a=r.shadowCache,u=a[n];if(!u){var o=e.getGlobalScale(),f=o[0],p=o[1];if(!f||!p)return;var v=i.shadowOffsetX||0,_=i.shadowOffsetY||0,y=i.shadowBlur,S=hp(i.shadowColor),A=S.opacity,L=S.color,I=y/2/f,M=y/2/p,D=I+" "+M;u=r.zrId+"-s"+r.shadowIdx++,r.defs[u]=Qi("filter",u,{id:u,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Qi("feDropShadow","",{dx:v/f,dy:_/p,stdDeviation:D,"flood-color":L,"flood-opacity":A})]),a[n]=u}t.filter=z_(u)}}function mR(e,t,r,i){var n=e[r],a,u={gradientUnits:n.global?"userSpaceOnUse":"objectBoundingBox"};if(WL(n))a="linearGradient",u.x1=n.x,u.y1=n.y,u.x2=n.x2,u.y2=n.y2;else if(ZL(n))a="radialGradient",u.cx=br(n.x,.5),u.cy=br(n.y,.5),u.r=br(n.r,.5);else return;for(var o=n.colorStops,f=[],p=0,v=o.length;p<v;++p){var _=Vx(o[p].offset)*100+"%",y=o[p].color,S=hp(y),A=S.color,L=S.opacity,I={offset:_};I["stop-color"]=A,L<1&&(I["stop-opacity"]=L),f.push(Qi("stop",p+"",I))}var M=Qi(a,"",u,f),D=G2(M),O=i.gradientCache,N=O[D];N||(N=i.zrId+"-g"+i.gradientIdx++,O[D]=N,u.id=N,i.defs[N]=Qi(a,N,u,f)),t[r]=z_(N)}function vR(e,t,r,i){var n=e.style[r],a=e.getBoundingRect(),u={},o=n.repeat,f=o==="no-repeat",p=o==="repeat-x",v=o==="repeat-y",_;if(jL(n)){var y=n.imageWidth,S=n.imageHeight,A=void 0,L=n.image;if(Wt(L)?A=L:fR(L)?A=L.src:dR(L)&&(A=L.toDataURL()),typeof Image>"u"){var I="Image width/height must been given explictly in svg-ssr renderer.";_o(y,I),_o(S,I)}else if(y==null||S==null){var M=function(ae,he){if(ae){var ue=ae.elm,fe=y||he.width,ye=S||he.height;ae.tag==="pattern"&&(p?(ye=1,fe/=a.width):v&&(fe=1,ye/=a.height)),ae.attrs.width=fe,ae.attrs.height=ye,ue&&(ue.setAttribute("width",fe),ue.setAttribute("height",ye))}},D=Yw(A,null,e,function(ae){f||M(Z,ae),M(_,ae)});D&&D.width&&D.height&&(y=y||D.width,S=S||D.height)}_=Qi("image","img",{href:A,width:y,height:S}),u.width=y,u.height=S}else n.svgElement&&(_=Dr(n.svgElement),u.width=n.svgWidth,u.height=n.svgHeight);if(_){var O,N;f?O=N=1:p?(N=1,O=u.width/a.width):v?(O=1,N=u.height/a.height):u.patternUnits="userSpaceOnUse",O!=null&&!isNaN(O)&&(u.width=O),N!=null&&!isNaN(N)&&(u.height=N);var q=KL(n);q&&(u.patternTransform=q);var Z=Qi("pattern","",u,[_]),Q=G2(Z),j=i.patternCache,ie=j[Q];ie||(ie=i.zrId+"-p"+i.patternIdx++,j[Q]=ie,u.id=ie,Z=i.defs[ie]=Qi("pattern",ie,u,[_])),t[r]=z_(ie)}}function wJ(e,t,r){var i=r.clipPathCache,n=r.defs,a=i[e.id];if(!a){a=r.zrId+"-c"+r.clipPathIdx++;var u={id:a};i[e.id]=a,n[a]=Qi("clipPath",a,u,[pR(e,r)])}t["clip-path"]=z_(a)}function lI(e){return document.createTextNode(e)}function ju(e,t,r){e.insertBefore(t,r)}function uI(e,t){e.removeChild(t)}function cI(e,t){e.appendChild(t)}function gR(e){return e.parentNode}function _R(e){return e.nextSibling}function Z1(e,t){e.textContent=t}var hI=58,SJ=120,TJ=Qi("","");function Tb(e){return e===void 0}function No(e){return e!==void 0}function EJ(e,t,r){for(var i={},n=t;n<=r;++n){var a=e[n].key;a!==void 0&&(i[a]=n)}return i}function Dd(e,t){var r=e.key===t.key,i=e.tag===t.tag;return i&&r}function Mp(e){var t,r=e.children,i=e.tag;if(No(i)){var n=e.elm=cR(i);if(j2(TJ,e),Ft(r))for(t=0;t<r.length;++t){var a=r[t];a!=null&&cI(n,Mp(a))}else No(e.text)&&!Kt(e.text)&&cI(n,lI(e.text))}else e.elm=lI(e.text);return e.elm}function yR(e,t,r,i,n){for(;i<=n;++i){var a=r[i];a!=null&&ju(e,Mp(a),t)}}function c_(e,t,r,i){for(;r<=i;++r){var n=t[r];if(n!=null)if(No(n.tag)){var a=gR(n.elm);uI(a,n.elm)}else uI(e,n.elm)}}function j2(e,t){var r,i=t.elm,n=e&&e.attrs||{},a=t.attrs||{};if(n!==a){for(r in a){var u=a[r],o=n[r];o!==u&&(u===!0?i.setAttribute(r,""):u===!1?i.removeAttribute(r):r.charCodeAt(0)!==SJ?i.setAttribute(r,u):r==="xmlns:xlink"||r==="xmlns"?i.setAttributeNS(oJ,r,u):r.charCodeAt(3)===hI?i.setAttributeNS(sJ,r,u):r.charCodeAt(5)===hI?i.setAttributeNS(uR,r,u):i.setAttribute(r,u))}for(r in n)r in a||i.removeAttribute(r)}}function CJ(e,t,r){for(var i=0,n=0,a=t.length-1,u=t[0],o=t[a],f=r.length-1,p=r[0],v=r[f],_,y,S,A;i<=a&&n<=f;)u==null?u=t[++i]:o==null?o=t[--a]:p==null?p=r[++n]:v==null?v=r[--f]:Dd(u,p)?(uh(u,p),u=t[++i],p=r[++n]):Dd(o,v)?(uh(o,v),o=t[--a],v=r[--f]):Dd(u,v)?(uh(u,v),ju(e,u.elm,_R(o.elm)),u=t[++i],v=r[--f]):Dd(o,p)?(uh(o,p),ju(e,o.elm,u.elm),o=t[--a],p=r[++n]):(Tb(_)&&(_=EJ(t,i,a)),y=_[p.key],Tb(y)?ju(e,Mp(p),u.elm):(S=t[y],S.tag!==p.tag?ju(e,Mp(p),u.elm):(uh(S,p),t[y]=void 0,ju(e,S.elm,u.elm))),p=r[++n]);(i<=a||n<=f)&&(i>a?(A=r[f+1]==null?null:r[f+1].elm,yR(e,A,r,n,f)):c_(e,t,i,a))}function uh(e,t){var r=t.elm=e.elm,i=e.children,n=t.children;e!==t&&(j2(e,t),Tb(t.text)?No(i)&&No(n)?i!==n&&CJ(r,i,n):No(n)?(No(e.text)&&Z1(r,""),yR(r,null,n,0,n.length-1)):No(i)?c_(r,i,0,i.length-1):No(e.text)&&Z1(r,""):e.text!==t.text&&(No(i)&&c_(r,i,0,i.length-1),Z1(r,t.text)))}function AJ(e,t){if(Dd(e,t))uh(e,t);else{var r=e.elm,i=gR(r);Mp(t),i!==null&&(ju(i,t.elm,_R(r)),c_(i,[e],0,0))}return t}var MJ=0,IJ=function(){function e(t,r,i){if(this.type="svg",this.refreshHover=fI(),this.configLayer=fI(),this.storage=r,this._opts=i=xt({},i),this.root=t,this._id="zr"+MJ++,this._oldVNode=tI(i.width,i.height),t&&!i.ssr){var n=this._viewport=document.createElement("div");n.style.cssText="position:relative;overflow:hidden";var a=this._svgDom=this._oldVNode.elm=cR("svg");j2(null,this._oldVNode),n.appendChild(a),t.appendChild(n)}this.resize(i.width,i.height)}return e.prototype.getType=function(){return this.type},e.prototype.getViewportRoot=function(){return this._viewport},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.getSvgDom=function(){return this._svgDom},e.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",AJ(this._oldVNode,t),this._oldVNode=t}},e.prototype.renderOneToVNode=function(t){return sI(t,Sb(this._id))},e.prototype.renderToVNode=function(t){t=t||{};var r=this.storage.getDisplayList(!0),i=this._width,n=this._height,a=Sb(this._id);a.animation=t.animation,a.willUpdate=t.willUpdate,a.compress=t.compress;var u=[],o=this._bgVNode=PJ(i,n,this._backgroundColor,a);o&&u.push(o);var f=t.compress?null:this._mainVNode=Qi("g","main",{},[]);this._paintList(r,a,f?f.children:u),f&&u.push(f);var p=Zt($r(a.defs),function(y){return a.defs[y]});if(p.length&&u.push(Qi("defs","defs",{},p)),t.animation){var v=cJ(a.cssNodes,a.cssAnims,{newline:!0});if(v){var _=Qi("style","stl",{},[],v);u.push(_)}}return tI(i,n,u,t.useViewBox)},e.prototype.renderToString=function(t){return t=t||{},G2(this.renderToVNode({animation:br(t.cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:br(t.useViewBox,!0)}),{newline:!0})},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t},e.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},e.prototype._paintList=function(t,r,i){for(var n=t.length,a=[],u=0,o,f,p=0,v=0;v<n;v++){var _=t[v];if(!_.invisible){var y=_.__clipPaths,S=y&&y.length||0,A=f&&f.length||0,L=void 0;for(L=Math.max(S-1,A-1);L>=0&&!(y&&f&&y[L]===f[L]);L--);for(var I=A-1;I>L;I--)u--,o=a[u-1];for(var M=L+1;M<S;M++){var D={};wJ(y[M],D,r);var O=Qi("g","clip-g-"+p++,D,[]);(o?o.children:i).push(O),a[u++]=O,o=O}f=y;var N=sI(_,r);N&&(o?o.children:i).push(N)}}},e.prototype.resize=function(t,r){var i=this._opts,n=this.root,a=this._viewport;if(t!=null&&(i.width=t),r!=null&&(i.height=r),n&&a&&(a.style.display="none",t=xM(n,0,i),r=xM(n,1,i),a.style.display=""),this._width!==t||this._height!==r){if(this._width=t,this._height=r,a){var u=a.style;u.width=t+"px",u.height=r+"px"}if(Uw(this._backgroundColor))this.refresh();else{var o=this._svgDom;o&&(o.setAttribute("width",t),o.setAttribute("height",r));var f=this._bgVNode&&this._bgVNode.elm;f&&(f.setAttribute("width",t),f.setAttribute("height",r))}}},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},e.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},e.prototype.toDataURL=function(t){var r=this.renderToString(),i="data:image/svg+xml;";return t?(r=PG(r),r&&i+"base64,"+r):i+"charset=UTF-8,"+encodeURIComponent(r)},e}();function fI(e){return function(){}}function PJ(e,t,r,i){var n;if(r&&r!=="none")if(n=Qi("rect","bg",{width:e,height:t,x:"0",y:"0",id:"0"}),XL(r))mR({fill:r},n.attrs,"fill",i);else if(Uw(r))vR({style:{fill:r},dirty:Zn,getBoundingRect:function(){return{width:e,height:t}}},n.attrs,"fill",i);else{var a=hp(r),u=a.color,o=a.opacity;n.attrs.fill=u,o<1&&(n.attrs["fill-opacity"]=o)}return n}const DJ=IJ;function LJ(e){e.registerPainter("svg",DJ)}function kJ(e,t){var r=e.mapDimensionsAll("defaultedLabel"),i=r.length;if(i===1){var n=Fh(e,t,r[0]);return n!=null?n+"":null}else if(i){for(var a=[],u=0;u<r.length;u++)a.push(Fh(e,t,r[u]));return a.join(" ")}}var RJ=function(e){It(t,e);function t(r,i,n,a){var u=e.call(this)||this;return u.updateData(r,i,n,a),u}return t.prototype._createSymbol=function(r,i,n,a,u){this.removeAll();var o=Jh(r,-1,-1,2,2,null,u);o.attr({z2:100,culling:!0,scaleX:a[0]/2,scaleY:a[1]/2}),o.drift=zJ,this._symbolType=r,this.add(o)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){mp(this.childAt(0))},t.prototype.downplay=function(){vp(this.childAt(0))},t.prototype.setZ=function(r,i){var n=this.childAt(0);n.zlevel=r,n.z=i},t.prototype.setDraggable=function(r,i){var n=this.childAt(0);n.draggable=r,n.cursor=!i&&r?"move":n.cursor},t.prototype.updateData=function(r,i,n,a){this.silent=!1;var u=r.getItemVisual(i,"symbol")||"circle",o=r.hostModel,f=t.getSymbolSize(r,i),p=u!==this._symbolType,v=a&&a.disableAnimation;if(p){var _=r.getItemVisual(i,"symbolKeepAspect");this._createSymbol(u,r,i,f,_)}else{var y=this.childAt(0);y.silent=!1;var S={scaleX:f[0]/2,scaleY:f[1]/2};v?y.attr(S):cc(y,S,o,i),Aj(y)}if(this._updateCommon(r,i,f,n,a),p){var y=this.childAt(0);if(!v){var S={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:y.style.opacity}};y.scaleX=y.scaleY=0,y.style.opacity=0,Zp(y,S,o,i)}}v&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,i,n,a,u){var o=this.childAt(0),f=r.hostModel,p,v,_,y,S,A,L,I,M;if(a&&(p=a.emphasisItemStyle,v=a.blurItemStyle,_=a.selectItemStyle,y=a.focus,S=a.blurScope,L=a.labelStatesModels,I=a.hoverScale,M=a.cursorStyle,A=a.emphasisDisabled),!a||r.hasItemOption){var D=a&&a.itemModel?a.itemModel:r.getItemModel(i),O=D.getModel("emphasis");p=O.getModel("itemStyle").getItemStyle(),_=D.getModel(["select","itemStyle"]).getItemStyle(),v=D.getModel(["blur","itemStyle"]).getItemStyle(),y=O.get("focus"),S=O.get("blurScope"),A=O.get("disabled"),L=G_(D),I=O.getShallow("scale"),M=D.getShallow("cursor")}var N=r.getItemVisual(i,"symbolRotate");o.attr("rotation",(N||0)*Math.PI/180||0);var q=P2(r.getItemVisual(i,"symbolOffset"),n);q&&(o.x=q[0],o.y=q[1]),M&&o.attr("cursor",M);var Z=r.getItemVisual(i,"style"),Q=Z.fill;if(o instanceof Rs){var j=o.style;o.useStyle(xt({image:j.image,x:j.x,y:j.y,width:j.width,height:j.height},Z))}else o.__isEmptyBrush?o.useStyle(xt({},Z)):o.useStyle(Z),o.style.decal=null,o.setColor(Q,u&&u.symbolInnerColor),o.style.strokeNoScale=!0;var ie=r.getItemVisual(i,"liftZ"),ae=this._z2;ie!=null?ae==null&&(this._z2=o.z2,o.z2+=ie):ae!=null&&(o.z2=ae,this._z2=null);var he=u&&u.useNameLabel;p5(o,L,{labelFetcher:f,labelDataIndex:i,defaultText:ue,inheritColor:Q,defaultOpacity:Z.opacity});function ue(He){return he?r.getName(He):kJ(r,He)}this._sizeX=n[0]/2,this._sizeY=n[1]/2;var fe=o.ensureState("emphasis");fe.style=p,o.ensureState("select").style=_,o.ensureState("blur").style=v;var ye=I==null||I===!0?Math.max(1.1,3/this._sizeY):isFinite(I)&&I>0?+I:1;fe.scaleX=this._sizeX*ye,fe.scaleY=this._sizeY*ye,this.setSymbolScale(1),i2(this,y,S,A)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,i,n){var a=this.childAt(0),u=fi(this).dataIndex,o=n&&n.animation;if(this.silent=a.silent=!0,n&&n.fadeLabel){var f=a.getTextContent();f&&Jg(f,{style:{opacity:0}},i,{dataIndex:u,removeOpt:o,cb:function(){a.removeTextContent()}})}else a.removeTextContent();Jg(a,{style:{opacity:0},scaleX:0,scaleY:0},i,{dataIndex:u,cb:r,removeOpt:o})},t.getSymbolSize=function(r,i){return p3(r.getItemVisual(i,"symbolSize"))},t}(_n);function zJ(e,t){this.parent.drift(e,t)}const OJ=RJ;function X1(e,t,r,i){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(i.isIgnore&&i.isIgnore(r))&&!(i.clipShape&&!i.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function dI(e){return e!=null&&!Kt(e)&&(e={isIgnore:e}),e||{}}function pI(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:G_(t),cursorStyle:t.get("cursor")}}var BJ=function(){function e(t){this.group=new _n,this._SymbolCtor=t||OJ}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=dI(r);var i=this.group,n=t.hostModel,a=this._data,u=this._SymbolCtor,o=r.disableAnimation,f=pI(t),p={disableAnimation:o},v=r.getSymbolPoint||function(_){return t.getItemLayout(_)};a||i.removeAll(),t.diff(a).add(function(_){var y=v(_);if(X1(t,y,_,r)){var S=new u(t,_,f,p);S.setPosition(y),t.setItemGraphicEl(_,S),i.add(S)}}).update(function(_,y){var S=a.getItemGraphicEl(y),A=v(_);if(!X1(t,A,_,r)){i.remove(S);return}var L=t.getItemVisual(_,"symbol")||"circle",I=S&&S.getSymbolType&&S.getSymbolType();if(!S||I&&I!==L)i.remove(S),S=new u(t,_,f,p),S.setPosition(A);else{S.updateData(t,_,f,p);var M={x:A[0],y:A[1]};o?S.attr(M):cc(S,M,n)}i.add(S),t.setItemGraphicEl(_,S)}).remove(function(_){var y=a.getItemGraphicEl(_);y&&y.fadeOut(function(){i.remove(y)},n)}).execute(),this._getSymbolPoint=v,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(i,n){var a=t._getSymbolPoint(n);i.setPosition(a),i.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=pI(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,i){this._progressiveEls=[],i=dI(i);function n(f){f.isGroup||(f.incremental=!0,f.ensureState("emphasis").hoverLayer=!0)}for(var a=t.start;a<t.end;a++){var u=r.getItemLayout(a);if(X1(r,u,a,i)){var o=new this._SymbolCtor(r,a,this._seriesScope);o.traverse(n),o.setPosition(u),this.group.add(o),r.setItemGraphicEl(a,o),this._progressiveEls.push(o)}}},e.prototype.eachRendered=function(t){$_(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,i=this._data;i&&t?i.eachItemGraphicEl(function(n){n.fadeOut(function(){r.remove(n)},i.hostModel)}):r.removeAll()},e}();const xR=BJ;function FJ(e,t,r,i,n){var a=e.getArea(),u=a.x,o=a.y,f=a.width,p=a.height,v=r.get(["lineStyle","width"])||2;u-=v/2,o-=v/2,f+=v,p+=v,u=Math.floor(u),f=Math.round(f);var _=new sa({shape:{x:u,y:o,width:f,height:p}});if(t){var y=e.getBaseAxis(),S=y.isHorizontal(),A=y.inverse;S?(A&&(_.shape.x+=f),_.shape.width=0):(A||(_.shape.y+=p),_.shape.height=0);var L=lr(n)?function(I){n(I,_)}:null;Zp(_,{shape:{width:f,height:p,x:u,y:o}},r,null,i,L)}return _}function NJ(e,t,r){var i=e.getArea(),n=Ji(i.r0,1),a=Ji(i.r,1),u=new a2({shape:{cx:Ji(e.cx,1),cy:Ji(e.cy,1),r0:n,r:a,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});if(t){var o=e.getBaseAxis().dim==="angle";o?u.shape.endAngle=i.startAngle:u.shape.r=n,Zp(u,{shape:{endAngle:i.endAngle,r:a}},r)}return u}function VJ(e,t,r,i,n){if(e){if(e.type==="polar")return NJ(e,t,r);if(e.type==="cartesian2d")return FJ(e,t,r,i,n)}else return null;return null}function bR(e,t){return{seriesType:e,plan:A2(),reset:function(r){var i=r.getData(),n=r.coordinateSystem,a=r.pipelineContext,u=t||a.large;if(n){var o=Zt(n.dimensions,function(S){return i.mapDimension(S)}).slice(0,2),f=o.length,p=i.getCalculationInfo("stackResultDimension");l_(i,o[0])&&(o[0]=p),l_(i,o[1])&&(o[1]=p);var v=i.getStore(),_=i.getDimensionIndex(o[0]),y=i.getDimensionIndex(o[1]);return f&&{progress:function(S,A){for(var L=S.end-S.start,I=u&&HY(L*f),M=[],D=[],O=S.start,N=0;O<S.end;O++){var q=void 0;if(f===1){var Z=v.get(_,O);q=n.dataToPoint(Z,null,D)}else M[0]=v.get(_,O),M[1]=v.get(y,O),q=n.dataToPoint(M,null,D);u?(I[N++]=q[0],I[N++]=q[1]):A.setItemLayout(O,q.slice())}u&&A.setLayout("points",I)}}}}}}var $J=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,i){return zY(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?5e3:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?1e4:this.get("progressiveThreshold"))},t.prototype.brushSelector=function(r,i,n){return n.point(i.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Nh);const UJ=$J;var wR=4,GJ=function(){function e(){}return e}(),HJ=function(e){It(t,e);function t(r){var i=e.call(this,r)||this;return i._off=0,i.hoverDataIdx=-1,i}return t.prototype.getDefaultShape=function(){return new GJ},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,i){var n=i.points,a=i.size,u=this.symbolProxy,o=u.shape,f=r.getContext?r.getContext():r,p=f&&a[0]<wR,v=this.softClipShape,_;if(p){this._ctx=f;return}for(this._ctx=null,_=this._off;_<n.length;){var y=n[_++],S=n[_++];isNaN(y)||isNaN(S)||v&&!v.contain(y,S)||(o.x=y-a[0]/2,o.y=S-a[1]/2,o.width=a[0],o.height=a[1],u.buildPath(r,o,!0))}this.incremental&&(this._off=_,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,i=r.points,n=r.size,a=this._ctx,u=this.softClipShape,o;if(a){for(o=this._off;o<i.length;){var f=i[o++],p=i[o++];isNaN(f)||isNaN(p)||u&&!u.contain(f,p)||a.fillRect(f-n[0]/2,p-n[1]/2,n[0],n[1])}this.incremental&&(this._off=o,this.notClear=!0)}},t.prototype.findDataIndex=function(r,i){for(var n=this.shape,a=n.points,u=n.size,o=Math.max(u[0],4),f=Math.max(u[1],4),p=a.length/2-1;p>=0;p--){var v=p*2,_=a[v]-o/2,y=a[v+1]-f/2;if(r>=_&&i>=y&&r<=_+o&&i<=y+f)return p}return-1},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect();if(r=n[0],i=n[1],a.contain(r,i)){var u=this.hoverDataIdx=this.findDataIndex(r,i);return u>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var i=this.shape,n=i.points,a=i.size,u=a[0],o=a[1],f=1/0,p=1/0,v=-1/0,_=-1/0,y=0;y<n.length;){var S=n[y++],A=n[y++];f=Math.min(S,f),v=Math.max(S,v),p=Math.min(A,p),_=Math.max(A,_)}r=this._rect=new ii(f-u/2,p-o/2,v-f+u,_-p+o)}return r},t}(Jr),qJ=function(){function e(){this.group=new _n}return e.prototype.updateData=function(t,r){this._clear();var i=this._create();i.setShape({points:t.getLayout("points")}),this._setCommon(i,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(i){if(i.startIndex!=null){var n=(i.endIndex-i.startIndex)*2,a=i.startIndex*4*2;r=new Float32Array(r.buffer,a,n)}i.setShape("points",r),i.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,i){var n=this._newAdded[0],a=r.getLayout("points"),u=n&&n.shape.points;if(u&&u.length<2e4){var o=u.length,f=new Float32Array(o+a.length);f.set(u),f.set(a,o),n.endIndex=t.end,n.setShape({points:f})}else{this._newAdded=[];var p=this._create();p.startIndex=t.start,p.endIndex=t.end,p.incremental=!0,p.setShape({points:a}),this._setCommon(p,r,i)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new HJ({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,i){var n=r.hostModel;i=i||{};var a=r.getVisual("symbolSize");t.setShape("size",a instanceof Array?a:[a,a]),t.softClipShape=i.clipShape||null,t.symbolProxy=Jh(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var u=t.shape.size[0]<wR;t.useStyle(n.getModel("itemStyle").getItemStyle(u?["color","shadowBlur","shadowColor"]:["color"]));var o=r.getVisual("style"),f=o&&o.fill;f&&t.setColor(f);var p=fi(t);p.seriesIndex=n.seriesIndex,t.on("mousemove",function(v){p.dataIndex=null;var _=t.hoverDataIdx;_>=0&&(p.dataIndex=_+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const jJ=qJ;var WJ=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=r.getData(),u=this._updateSymbolDraw(a,r);u.updateData(a,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,i,n){var a=r.getData(),u=this._updateSymbolDraw(a,r);u.incrementalPrepareUpdate(a),this._finished=!1},t.prototype.incrementalRender=function(r,i,n){this._symbolDraw.incrementalUpdate(r,i.getData(),{clipShape:this._getClipShape(i)}),this._finished=r.end===i.getData().count()},t.prototype.updateTransform=function(r,i,n){var a=r.getData();if(this.group.dirty(),!this._finished||a.count()>1e4)return{update:!0};var u=bR("").reset(r,i,n);u.progress&&u.progress({start:0,end:a.count(),count:a.count()},a),this._symbolDraw.updateLayout(a)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var i=r.coordinateSystem,n=i&&i.getArea&&i.getArea();return r.get("clip",!0)?n:null},t.prototype._updateSymbolDraw=function(r,i){var n=this._symbolDraw,a=i.pipelineContext,u=a.large;return(!n||u!==this._isLargeDraw)&&(n&&n.remove(),n=this._symbolDraw=u?new jJ:new xR,this._isLargeDraw=u,this.group.removeAll()),this.group.add(n.group),n},t.prototype.remove=function(r,i){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(rc);const ZJ=WJ;var XJ=function(e){It(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(_i);const YJ=XJ;var Eb=function(e){It(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",mo).models[0]},t.type="cartesian2dAxis",t}(_i);bo(Eb,wK);var SR={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},KJ=xi({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},SR),W2=xi({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},SR),JJ=xi({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},W2),QJ=pi({logBase:10},W2);const eQ={category:KJ,value:W2,time:JJ,log:QJ};var tQ={value:1,category:1,time:1,log:1};function mI(e,t,r,i){Ee(tQ,function(n,a){var u=xi(xi({},eQ[a],!0),i,!0),o=function(f){It(p,f);function p(){var v=f!==null&&f.apply(this,arguments)||this;return v.type=t+"Axis."+a,v}return p.prototype.mergeDefaultAndTheme=function(v,_){var y=bp(this),S=y?y2(v):{},A=_.getTheme();xi(v,A.get(a+"Axis")),xi(v,this.getDefaultOption()),v.type=vI(v),y&&wp(v,S,y)},p.prototype.optionUpdated=function(){var v=this.option;v.type==="category"&&(this.__ordinalMeta=_b.createByAxisModel(this))},p.prototype.getCategories=function(v){var _=this.option;if(_.type==="category")return v?_.data:this.__ordinalMeta.categories},p.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},p.type=t+"Axis."+a,p.defaultOption=u,p}(r);e.registerComponentModel(o)}),e.registerSubTypeDefaulter(t+"Axis",vI)}function vI(e){return e.type||(e.data?"category":"value")}var rQ=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return Zt(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Pn(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const iQ=rQ;var Cb=["x","y"];function gI(e){return e.type==="interval"||e.type==="time"}var nQ=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=Cb,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,i=this.getAxis("y").scale;if(!(!gI(r)||!gI(i))){var n=r.getExtent(),a=i.getExtent(),u=this.dataToPoint([n[0],a[0]]),o=this.dataToPoint([n[1],a[1]]),f=n[1]-n[0],p=a[1]-a[0];if(!(!f||!p)){var v=(o[0]-u[0])/f,_=(o[1]-u[1])/p,y=u[0]-n[0]*v,S=u[1]-a[0]*_,A=this._transform=[v,0,0,_,y,S];this._invTransform=Vw([],A)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var i=this.getAxis("x"),n=this.getAxis("y");return i.contain(i.toLocalCoord(r[0]))&&n.contain(n.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,i){var n=this.dataToPoint(r),a=this.dataToPoint(i),u=this.getArea(),o=new ii(n[0],n[1],a[0]-n[0],a[1]-n[1]);return u.intersect(o)},t.prototype.dataToPoint=function(r,i,n){n=n||[];var a=r[0],u=r[1];if(this._transform&&a!=null&&isFinite(a)&&u!=null&&isFinite(u))return Za(n,r,this._transform);var o=this.getAxis("x"),f=this.getAxis("y");return n[0]=o.toGlobalCoord(o.dataToCoord(a,i)),n[1]=f.toGlobalCoord(f.dataToCoord(u,i)),n},t.prototype.clampData=function(r,i){var n=this.getAxis("x").scale,a=this.getAxis("y").scale,u=n.getExtent(),o=a.getExtent(),f=n.parse(r[0]),p=a.parse(r[1]);return i=i||[],i[0]=Math.min(Math.max(Math.min(u[0],u[1]),f),Math.max(u[0],u[1])),i[1]=Math.min(Math.max(Math.min(o[0],o[1]),p),Math.max(o[0],o[1])),i},t.prototype.pointToData=function(r,i){var n=[];if(this._invTransform)return Za(n,r,this._invTransform);var a=this.getAxis("x"),u=this.getAxis("y");return n[0]=a.coordToData(a.toLocalCoord(r[0]),i),n[1]=u.coordToData(u.toLocalCoord(r[1]),i),n},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),i=this.getAxis("y").getGlobalExtent(),n=Math.min(r[0],r[1]),a=Math.min(i[0],i[1]),u=Math.max(r[0],r[1])-n,o=Math.max(i[0],i[1])-a;return new ii(n,a,u,o)},t}(iQ),aQ=function(e){It(t,e);function t(r,i,n,a,u){var o=e.call(this,r,i,n)||this;return o.index=0,o.type=a||"value",o.position=u||"bottom",o}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var i=this.getExtent();return i[0]=this.toGlobalCoord(i[0]),i[1]=this.toGlobalCoord(i[1]),r&&i[0]>i[1]&&i.reverse(),i},t.prototype.pointToData=function(r,i){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),i)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(RK);const oQ=aQ;function Ab(e,t,r){r=r||{};var i=e.coordinateSystem,n=t.axis,a={},u=n.getAxesOnZeroOf()[0],o=n.position,f=u?"onZero":o,p=n.dim,v=i.getRect(),_=[v.x,v.x+v.width,v.y,v.y+v.height],y={left:0,right:1,top:0,bottom:1,onZero:2},S=t.get("offset")||0,A=p==="x"?[_[2]-S,_[3]+S]:[_[0]-S,_[1]+S];if(u){var L=u.toGlobalCoord(u.dataToCoord(0));A[y.onZero]=Math.max(Math.min(L,A[1]),A[0])}a.position=[p==="y"?A[y[f]]:_[0],p==="x"?A[y[f]]:_[3]],a.rotation=Math.PI/2*(p==="x"?0:1);var I={top:-1,bottom:1,left:-1,right:1};a.labelDirection=a.tickDirection=a.nameDirection=I[o],a.labelOffset=u?A[y[o]]-A[y.onZero]:0,t.get(["axisTick","inside"])&&(a.tickDirection=-a.tickDirection),zh(r.labelInside,t.get(["axisLabel","inside"]))&&(a.labelDirection=-a.labelDirection);var M=t.get(["axisLabel","rotate"]);return a.labelRotate=f==="top"?-M:M,a.z2=1,a}function _I(e){return e.get("coordinateSystem")==="cartesian2d"}function yI(e){var t={xAxisModel:null,yAxisModel:null};return Ee(t,function(r,i){var n=i.replace(/Model$/,""),a=e.getReferringComponents(n,mo).models[0];t[i]=a}),t}var Y1=Math.log;function sQ(e,t,r){var i=Xp.prototype,n=i.getTicks.call(r),a=i.getTicks.call(r,!0),u=n.length-1,o=i.getInterval.call(r),f=K3(e,t),p=f.extent,v=f.fixMin,_=f.fixMax;if(e.type==="log"){var y=Y1(e.base);p=[Y1(p[0])/y,Y1(p[1])/y]}e.setExtent(p[0],p[1]),e.calcNiceExtent({splitNumber:u,fixMin:v,fixMax:_});var S=i.getExtent.call(e);v&&(p[0]=S[0]),_&&(p[1]=S[1]);var A=i.getInterval.call(e),L=p[0],I=p[1];if(v&&_)A=(I-L)/u;else if(v)for(I=p[0]+A*u;I<p[1]&&isFinite(I)&&isFinite(p[1]);)A=G1(A),I=p[0]+A*u;else if(_)for(L=p[1]-A*u;L>p[0]&&isFinite(L)&&isFinite(p[0]);)A=G1(A),L=p[1]-A*u;else{var M=e.getTicks().length-1;M>u&&(A=G1(A));var D=A*u;I=Math.ceil(p[1]/A)*A,L=Ji(I-D),L<0&&p[0]>=0?(L=0,I=Ji(D)):I>0&&p[1]<=0&&(I=0,L=-Ji(D))}var O=(n[0].value-a[0].value)/o,N=(n[u].value-a[u].value)/o;i.setExtent.call(e,L+A*O,I+A*N),i.setInterval.call(e,A),(O||N)&&i.setNiceExtent.call(e,L+A,I-A)}var lQ=function(){function e(t,r,i){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Cb,this._initCartesian(t,r,i),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var i=this._axesMap;this._updateScale(t,this.model);function n(u){var o,f=$r(u),p=f.length;if(p){for(var v=[],_=p-1;_>=0;_--){var y=+f[_],S=u[y],A=S.model,L=S.scale;yb(L)&&A.get("alignTicks")&&A.get("interval")==null?v.push(S):(YM(L,A),yb(L)&&(o=S))}v.length&&(o||(o=v.pop(),YM(o.scale,o.model)),Ee(v,function(I){sQ(I.scale,I.model,o.scale)}))}}n(i.x),n(i.y);var a={};Ee(i.x,function(u){xI(i,"y",u,a)}),Ee(i.y,function(u){xI(i,"x",u,a)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,i){var n=t.getBoxLayoutParams(),a=!i&&t.get("containLabel"),u=_2(n,{width:r.getWidth(),height:r.getHeight()});this._rect=u;var o=this._axesList;f(),a&&(Ee(o,function(p){if(!p.model.get(["axisLabel","inside"])){var v=yK(p);if(v){var _=p.isHorizontal()?"height":"width",y=p.model.get(["axisLabel","margin"]);u[_]-=v[_]+y,p.position==="top"?u.y+=v.height+y:p.position==="left"&&(u.x+=v.width+y)}}}),f()),Ee(this._coordsList,function(p){p.calcAffineTransform()});function f(){Ee(o,function(p){var v=p.isHorizontal(),_=v?[0,u.width]:[0,u.height],y=p.inverse?1:0;p.setExtent(_[y],_[1-y]),uQ(p,v?u.x:u.y)})}},e.prototype.getAxis=function(t,r){var i=this._axesMap[t];if(i!=null)return i[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var i="x"+t+"y"+r;return this._coordsMap[i]}Kt(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var n=0,a=this._coordsList;n<a.length;n++)if(a[n].getAxis("x").index===t||a[n].getAxis("y").index===r)return a[n]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,i){var n=this._findConvertTarget(r);return n.cartesian?n.cartesian.dataToPoint(i):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(i)):null},e.prototype.convertFromPixel=function(t,r,i){var n=this._findConvertTarget(r);return n.cartesian?n.cartesian.pointToData(i):n.axis?n.axis.coordToData(n.axis.toLocalCoord(i)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,i=t.xAxisModel||r&&r.getReferringComponents("xAxis",mo).models[0],n=t.yAxisModel||r&&r.getReferringComponents("yAxis",mo).models[0],a=t.gridModel,u=this._coordsList,o,f;if(r)o=r.coordinateSystem,ri(u,o)<0&&(o=null);else if(i&&n)o=this.getCartesian(i.componentIndex,n.componentIndex);else if(i)f=this.getAxis("x",i.componentIndex);else if(n)f=this.getAxis("y",n.componentIndex);else if(a){var p=a.coordinateSystem;p===this&&(o=this._coordsList[0])}return{cartesian:o,axis:f}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,i){var n=this,a=this,u={left:!1,right:!1,top:!1,bottom:!1},o={x:{},y:{}},f={x:0,y:0};if(r.eachComponent("xAxis",p("x"),this),r.eachComponent("yAxis",p("y"),this),!f.x||!f.y){this._axesMap={},this._axesList=[];return}this._axesMap=o,Ee(o.x,function(v,_){Ee(o.y,function(y,S){var A="x"+_+"y"+S,L=new nQ(A);L.master=n,L.model=t,n._coordsMap[A]=L,n._coordsList.push(L),L.addAxis(v),L.addAxis(y)})});function p(v){return function(_,y){if(K1(_,t)){var S=_.get("position");v==="x"?S!=="top"&&S!=="bottom"&&(S=u.bottom?"top":"bottom"):S!=="left"&&S!=="right"&&(S=u.left?"right":"left"),u[S]=!0;var A=new oQ(v,gK(_),[0,0],_.get("type"),S),L=A.type==="category";A.onBand=L&&_.get("boundaryGap"),A.inverse=_.get("inverse"),_.axis=A,A.model=_,A.grid=a,A.index=y,a._axesList.push(A),o[v][y]=A,f[v]++}}}},e.prototype._updateScale=function(t,r){Ee(this._axesList,function(n){if(n.scale.setExtent(1/0,-1/0),n.type==="category"){var a=n.model.get("categorySortInfo");n.scale.setSortInfo(a)}}),t.eachSeries(function(n){if(_I(n)){var a=yI(n),u=a.xAxisModel,o=a.yAxisModel;if(!K1(u,r)||!K1(o,r))return;var f=this.getCartesian(u.componentIndex,o.componentIndex),p=n.getData(),v=f.getAxis("x"),_=f.getAxis("y");i(p,v),i(p,_)}},this);function i(n,a){Ee(bK(n,a.dim),function(u){a.scale.unionExtentFromData(n,u)})}},e.prototype.getTooltipAxes=function(t){var r=[],i=[];return Ee(this.getCartesians(),function(n){var a=t!=null&&t!=="auto"?n.getAxis(t):n.getBaseAxis(),u=n.getOtherAxis(a);ri(r,a)<0&&r.push(a),ri(i,u)<0&&i.push(u)}),{baseAxes:r,otherAxes:i}},e.create=function(t,r){var i=[];return t.eachComponent("grid",function(n,a){var u=new e(n,t,r);u.name="grid_"+a,u.resize(n,r,!0),n.coordinateSystem=u,i.push(u)}),t.eachSeries(function(n){if(_I(n)){var a=yI(n),u=a.xAxisModel,o=a.yAxisModel,f=u.getCoordSysModel(),p=f.coordinateSystem;n.coordinateSystem=p.getCartesian(u.componentIndex,o.componentIndex)}}),i},e.dimensions=Cb,e}();function K1(e,t){return e.getCoordSysModel()===t}function xI(e,t,r,i){r.getAxesOnZeroOf=function(){return a?[a]:[]};var n=e[t],a,u=r.model,o=u.get(["axisLine","onZero"]),f=u.get(["axisLine","onZeroAxisIndex"]);if(!o)return;if(f!=null)bI(n[f])&&(a=n[f]);else for(var p in n)if(n.hasOwnProperty(p)&&bI(n[p])&&!i[v(n[p])]){a=n[p];break}a&&(i[v(a)]=!0);function v(_){return _.dim+"_"+_.index}}function bI(e){return e&&e.type!=="category"&&e.type!=="time"&&_K(e)}function uQ(e,t){var r=e.getExtent(),i=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(n){return n+t}:function(n){return i-n+t},e.toLocalCoord=e.dim==="x"?function(n){return n-t}:function(n){return i-n+t}}const cQ=lQ;var Tl=Math.PI,ic=function(){function e(t,r){this.group=new _n,this.opt=r,this.axisModel=t,pi(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var i=new _n({x:r.position[0],y:r.position[1],rotation:r.rotation});i.updateTransform(),this._transformGroup=i}return e.prototype.hasBuilder=function(t){return!!wI[t]},e.prototype.add=function(t){wI[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,i){var n=lk(r-t),a,u;return Wg(n)?(u=i>0?"top":"bottom",a="center"):Wg(n-Tl)?(u=i>0?"bottom":"top",a="center"):(u="middle",n>0&&n<Tl?a=i>0?"right":"left":a=i>0?"left":"right"),{rotation:n,textAlign:a,textVerticalAlign:u}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),wI={axisLine:function(e,t,r,i){var n=t.get(["axisLine","show"]);if(n==="auto"&&e.handleAutoShown&&(n=e.handleAutoShown("axisLine")),!!n){var a=t.axis.getExtent(),u=i.transform,o=[a[0],0],f=[a[1],0],p=o[0]>f[0];u&&(Za(o,o,u),Za(f,f,u));var v=xt({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),_=new zl({shape:{x1:o[0],y1:o[1],x2:f[0],y2:f[1]},style:v,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});gp(_.shape,_.style.lineWidth),_.anid="line",r.add(_);var y=t.get(["axisLine","symbol"]);if(y!=null){var S=t.get(["axisLine","symbolSize"]);Wt(y)&&(y=[y,y]),(Wt(S)||Mi(S))&&(S=[S,S]);var A=P2(t.get(["axisLine","symbolOffset"])||0,S),L=S[0],I=S[1];Ee([{rotate:e.rotation+Math.PI/2,offset:A[0],r:0},{rotate:e.rotation-Math.PI/2,offset:A[1],r:Math.sqrt((o[0]-f[0])*(o[0]-f[0])+(o[1]-f[1])*(o[1]-f[1]))}],function(M,D){if(y[D]!=="none"&&y[D]!=null){var O=Jh(y[D],-L/2,-I/2,L,I,v.stroke,!0),N=M.r+M.offset,q=p?f:o;O.attr({rotation:M.rotate,x:q[0]+N*Math.cos(e.rotation),y:q[1]-N*Math.sin(e.rotation),silent:!0,z2:11}),r.add(O)}})}}},axisTickLabel:function(e,t,r,i){var n=dQ(r,i,t,e),a=mQ(r,i,t,e);if(fQ(t,a,n),pQ(r,i,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var u=zK(Zt(a,function(o){return{label:o,priority:o.z2,defaultAttr:{ignore:o.ignore}}}));OK(u)}},axisName:function(e,t,r,i){var n=zh(e.axisName,t.get("name"));if(n){var a=t.get("nameLocation"),u=e.nameDirection,o=t.getModel("nameTextStyle"),f=t.get("nameGap")||0,p=t.axis.getExtent(),v=p[0]>p[1]?-1:1,_=[a==="start"?p[0]-v*f:a==="end"?p[1]+v*f:(p[0]+p[1])/2,TI(a)?e.labelOffset+u*f:0],y,S=t.get("nameRotate");S!=null&&(S=S*Tl/180);var A;TI(a)?y=ic.innerTextLayout(e.rotation,S??e.rotation,u):(y=hQ(e.rotation,a,S||0,p),A=e.axisNameAvailableWidth,A!=null&&(A=Math.abs(A/Math.sin(y.rotation)),!isFinite(A)&&(A=null)));var L=o.getFont(),I=t.get("nameTruncate",!0)||{},M=I.ellipsis,D=zh(e.nameTruncateMaxWidth,I.maxWidth,A),O=new yo({x:_[0],y:_[1],rotation:y.rotation,silent:ic.isLabelSilent(t),style:sc(o,{text:n,font:L,overflow:"truncate",width:D,ellipsis:M,fill:o.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:o.get("align")||y.textAlign,verticalAlign:o.get("verticalAlign")||y.textVerticalAlign}),z2:1});if(d5({el:O,componentModel:t,itemName:n}),O.__fullText=n,O.anid="name",t.get("triggerEvent")){var N=ic.makeAxisEventDataBase(t);N.targetType="axisName",N.name=n,fi(O).eventData=N}i.add(O),O.updateTransform(),r.add(O),O.decomposeTransform()}}};function hQ(e,t,r,i){var n=lk(r-e),a,u,o=i[0]>i[1],f=t==="start"&&!o||t!=="start"&&o;return Wg(n-Tl/2)?(u=f?"bottom":"top",a="center"):Wg(n-Tl*1.5)?(u=f?"top":"bottom",a="center"):(u="middle",n<Tl*1.5&&n>Tl/2?a=f?"left":"right":a=f?"right":"left"),{rotation:n,textAlign:a,textVerticalAlign:u}}function fQ(e,t,r){if(!J3(e.axis)){var i=e.get(["axisLabel","showMinLabel"]),n=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var a=t[0],u=t[1],o=t[t.length-1],f=t[t.length-2],p=r[0],v=r[1],_=r[r.length-1],y=r[r.length-2];i===!1?(za(a),za(p)):SI(a,u)&&(i?(za(u),za(v)):(za(a),za(p))),n===!1?(za(o),za(_)):SI(f,o)&&(n?(za(f),za(y)):(za(o),za(_)))}}function za(e){e&&(e.ignore=!0)}function SI(e,t){var r=e&&e.getBoundingRect().clone(),i=t&&t.getBoundingRect().clone();if(!(!r||!i)){var n=Fw([]);return Nw(n,n,-e.rotation),r.applyTransform(bh([],n,e.getLocalTransform())),i.applyTransform(bh([],n,t.getLocalTransform())),r.intersect(i)}}function TI(e){return e==="middle"||e==="center"}function TR(e,t,r,i,n){for(var a=[],u=[],o=[],f=0;f<e.length;f++){var p=e[f].coord;u[0]=p,u[1]=0,o[0]=p,o[1]=r,t&&(Za(u,u,t),Za(o,o,t));var v=new zl({shape:{x1:u[0],y1:u[1],x2:o[0],y2:o[1]},style:i,z2:2,autoBatch:!0,silent:!0});gp(v.shape,v.style.lineWidth),v.anid=n+"_"+e[f].tickValue,a.push(v)}return a}function dQ(e,t,r,i){var n=r.axis,a=r.getModel("axisTick"),u=a.get("show");if(u==="auto"&&i.handleAutoShown&&(u=i.handleAutoShown("axisTick")),!(!u||n.scale.isBlank())){for(var o=a.getModel("lineStyle"),f=i.tickDirection*a.get("length"),p=n.getTicksCoords(),v=TR(p,t.transform,f,pi(o.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),_=0;_<v.length;_++)e.add(v[_]);return v}}function pQ(e,t,r,i){var n=r.axis,a=r.getModel("minorTick");if(!(!a.get("show")||n.scale.isBlank())){var u=n.getMinorTicksCoords();if(u.length)for(var o=a.getModel("lineStyle"),f=i*a.get("length"),p=pi(o.getLineStyle(),pi(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),v=0;v<u.length;v++)for(var _=TR(u[v],t.transform,f,p,"minorticks_"+v),y=0;y<_.length;y++)e.add(_[y])}}function mQ(e,t,r,i){var n=r.axis,a=zh(i.axisLabelShow,r.get(["axisLabel","show"]));if(!(!a||n.scale.isBlank())){var u=r.getModel("axisLabel"),o=u.get("margin"),f=n.getViewLabels(),p=(zh(i.labelRotate,u.get("rotate"))||0)*Tl/180,v=ic.innerTextLayout(i.rotation,p,i.labelDirection),_=r.getCategories&&r.getCategories(!0),y=[],S=ic.isLabelSilent(r),A=r.get("triggerEvent");return Ee(f,function(L,I){var M=n.scale.type==="ordinal"?n.scale.getRawOrdinalNumber(L.tickValue):L.tickValue,D=L.formattedLabel,O=L.rawLabel,N=u;if(_&&_[M]){var q=_[M];Kt(q)&&q.textStyle&&(N=new Wn(q.textStyle,u,r.ecModel))}var Z=N.getTextColor()||r.get(["axisLine","lineStyle","color"]),Q=n.dataToCoord(M),j=new yo({x:Q,y:i.labelOffset+i.labelDirection*o,rotation:v.rotation,silent:S,z2:10+(L.level||0),style:sc(N,{text:D,align:N.getShallow("align",!0)||v.textAlign,verticalAlign:N.getShallow("verticalAlign",!0)||N.getShallow("baseline",!0)||v.textVerticalAlign,fill:lr(Z)?Z(n.type==="category"?O:n.type==="value"?M+"":M,I):Z})});if(j.anid="label_"+M,A){var ie=ic.makeAxisEventDataBase(r);ie.targetType="axisLabel",ie.value=O,ie.tickIndex=I,n.type==="category"&&(ie.dataIndex=M),fi(j).eventData=ie}t.add(j),j.updateTransform(),y.push(j),e.add(j),j.decomposeTransform()}),y}}const ER=ic;function vQ(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return gQ(r,e,t),r.seriesInvolved&&yQ(r,e),r}function gQ(e,t,r){var i=t.getComponent("tooltip"),n=t.getComponent("axisPointer"),a=n.get("link",!0)||[],u=[];Ee(r.getCoordinateSystems(),function(o){if(!o.axisPointerEnabled)return;var f=Ip(o.model),p=e.coordSysAxesInfo[f]={};e.coordSysMap[f]=o;var v=o.model,_=v.getModel("tooltip",i);if(Ee(o.getAxes(),ln(L,!1,null)),o.getTooltipAxes&&i&&_.get("show")){var y=_.get("trigger")==="axis",S=_.get(["axisPointer","type"])==="cross",A=o.getTooltipAxes(_.get(["axisPointer","axis"]));(y||S)&&Ee(A.baseAxes,ln(L,S?"cross":!0,y)),S&&Ee(A.otherAxes,ln(L,"cross",!1))}function L(I,M,D){var O=D.model.getModel("axisPointer",n),N=O.get("show");if(!(!N||N==="auto"&&!I&&!Mb(O))){M==null&&(M=O.get("triggerTooltip")),O=I?_Q(D,_,n,t,I,M):O;var q=O.get("snap"),Z=Ip(D.model),Q=M||q||D.type==="category",j=e.axesInfo[Z]={key:Z,axis:D,coordSys:o,axisPointerModel:O,triggerTooltip:M,involveSeries:Q,snap:q,useHandle:Mb(O),seriesModels:[],linkGroup:null};p[Z]=j,e.seriesInvolved=e.seriesInvolved||Q;var ie=xQ(a,D);if(ie!=null){var ae=u[ie]||(u[ie]={axesInfo:{}});ae.axesInfo[Z]=j,ae.mapper=a[ie].mapper,j.linkGroup=ae}}}})}function _Q(e,t,r,i,n,a){var u=t.getModel("axisPointer"),o=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],f={};Ee(o,function(y){f[y]=Dr(u.get(y))}),f.snap=e.type!=="category"&&!!a,u.get("type")==="cross"&&(f.type="line");var p=f.label||(f.label={});if(p.show==null&&(p.show=!1),n==="cross"){var v=u.get(["label","show"]);if(p.show=v??!0,!a){var _=f.lineStyle=u.get("crossStyle");_&&pi(p,_.textStyle)}}return e.model.getModel("axisPointer",new Wn(f,r,i))}function yQ(e,t){t.eachSeries(function(r){var i=r.coordinateSystem,n=r.get(["tooltip","trigger"],!0),a=r.get(["tooltip","show"],!0);!i||n==="none"||n===!1||n==="item"||a===!1||r.get(["axisPointer","show"],!0)===!1||Ee(e.coordSysAxesInfo[Ip(i.model)],function(u){var o=u.axis;i.getAxis(o.dim)===o&&(u.seriesModels.push(r),u.seriesDataCount==null&&(u.seriesDataCount=0),u.seriesDataCount+=r.getData().count())})})}function xQ(e,t){for(var r=t.model,i=t.dim,n=0;n<e.length;n++){var a=e[n]||{};if(J1(a[i+"AxisId"],r.id)||J1(a[i+"AxisIndex"],r.componentIndex)||J1(a[i+"AxisName"],r.name))return n}}function J1(e,t){return e==="all"||Ft(e)&&ri(e,t)>=0||e===t}function bQ(e){var t=Z2(e);if(t){var r=t.axisPointerModel,i=t.axis.scale,n=r.option,a=r.get("status"),u=r.get("value");u!=null&&(u=i.parse(u));var o=Mb(r);a==null&&(n.status=o?"show":"hide");var f=i.getExtent().slice();f[0]>f[1]&&f.reverse(),(u==null||u>f[1])&&(u=f[1]),u<f[0]&&(u=f[0]),n.value=u,o&&(n.status=t.axis.scale.isBlank()?"hide":"show")}}function Z2(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Ip(e)]}function wQ(e){var t=Z2(e);return t&&t.axisPointerModel}function Mb(e){return!!e.get(["handle","show"])}function Ip(e){return e.type+"||"+e.id}var EI={},SQ=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n,a){this.axisPointerClass&&bQ(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,n,!0)},t.prototype.updateAxisPointer=function(r,i,n,a){this._doUpdateAxisPointerClass(r,n,!1)},t.prototype.remove=function(r,i){var n=this._axisPointer;n&&n.remove(i)},t.prototype.dispose=function(r,i){this._disposeAxisPointer(i),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,i,n){var a=t.getAxisPointerClass(this.axisPointerClass);if(a){var u=wQ(r);u?(this._axisPointer||(this._axisPointer=new a)).render(r,u,i,n):this._disposeAxisPointer(i)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,i){EI[r]=i},t.getAxisPointerClass=function(r){return r&&EI[r]},t.type="axis",t}(Ds);const CR=SQ;var Ib=zi();function TQ(e,t,r,i){var n=r.axis;if(!n.scale.isBlank()){var a=r.getModel("splitArea"),u=a.getModel("areaStyle"),o=u.get("color"),f=i.coordinateSystem.getRect(),p=n.getTicksCoords({tickModel:a,clamp:!0});if(p.length){var v=o.length,_=Ib(e).splitAreaColors,y=wr(),S=0;if(_)for(var A=0;A<p.length;A++){var L=_.get(p[A].tickValue);if(L!=null){S=(L+(v-1)*A)%v;break}}var I=n.toGlobalCoord(p[0].coord),M=u.getAreaStyle();o=Ft(o)?o:[o];for(var A=1;A<p.length;A++){var D=n.toGlobalCoord(p[A].coord),O=void 0,N=void 0,q=void 0,Z=void 0;n.isHorizontal()?(O=I,N=f.y,q=D-O,Z=f.height,I=O+q):(O=f.x,N=I,q=f.width,Z=D-N,I=N+Z);var Q=p[A-1].tickValue;Q!=null&&y.set(Q,S),t.add(new sa({anid:Q!=null?"area_"+Q:null,shape:{x:O,y:N,width:q,height:Z},style:pi({fill:o[S]},M),autoBatch:!0,silent:!0})),S=(S+1)%v}Ib(e).splitAreaColors=y}}}function EQ(e){Ib(e).splitAreaColors=null}var CQ=["axisLine","axisTickLabel","axisName"],AQ=["splitArea","splitLine","minorSplitLine"],AR=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,i,n,a){this.group.removeAll();var u=this._axisGroup;if(this._axisGroup=new _n,this.group.add(this._axisGroup),!!r.get("show")){var o=r.getCoordSysModel(),f=Ab(o,r),p=new ER(r,xt({handleAutoShown:function(_){for(var y=o.coordinateSystem.getCartesians(),S=0;S<y.length;S++)if(yb(y[S].getOtherAxis(r.axis).scale))return!0;return!1}},f));Ee(CQ,p.add,p),this._axisGroup.add(p.getGroup()),Ee(AQ,function(_){r.get([_,"show"])&&MQ[_](this,this._axisGroup,r,o)},this);var v=a&&a.type==="changeAxisOrder"&&a.isInitSort;v||c5(u,this._axisGroup,r),e.prototype.render.call(this,r,i,n,a)}},t.prototype.remove=function(){EQ(this)},t.type="cartesianAxis",t}(CR),MQ={splitLine:function(e,t,r,i){var n=r.axis;if(!n.scale.isBlank()){var a=r.getModel("splitLine"),u=a.getModel("lineStyle"),o=u.get("color");o=Ft(o)?o:[o];for(var f=i.coordinateSystem.getRect(),p=n.isHorizontal(),v=0,_=n.getTicksCoords({tickModel:a}),y=[],S=[],A=u.getLineStyle(),L=0;L<_.length;L++){var I=n.toGlobalCoord(_[L].coord);p?(y[0]=I,y[1]=f.y,S[0]=I,S[1]=f.y+f.height):(y[0]=f.x,y[1]=I,S[0]=f.x+f.width,S[1]=I);var M=v++%o.length,D=_[L].tickValue,O=new zl({anid:D!=null?"line_"+_[L].tickValue:null,autoBatch:!0,shape:{x1:y[0],y1:y[1],x2:S[0],y2:S[1]},style:pi({stroke:o[M]},A),silent:!0});gp(O.shape,A.lineWidth),t.add(O)}}},minorSplitLine:function(e,t,r,i){var n=r.axis,a=r.getModel("minorSplitLine"),u=a.getModel("lineStyle"),o=i.coordinateSystem.getRect(),f=n.isHorizontal(),p=n.getMinorTicksCoords();if(p.length)for(var v=[],_=[],y=u.getLineStyle(),S=0;S<p.length;S++)for(var A=0;A<p[S].length;A++){var L=n.toGlobalCoord(p[S][A].coord);f?(v[0]=L,v[1]=o.y,_[0]=L,_[1]=o.y+o.height):(v[0]=o.x,v[1]=L,_[0]=o.x+o.width,_[1]=L);var I=new zl({anid:"minor_line_"+p[S][A].tickValue,autoBatch:!0,shape:{x1:v[0],y1:v[1],x2:_[0],y2:_[1]},style:y,silent:!0});gp(I.shape,y.lineWidth),t.add(I)}},splitArea:function(e,t,r,i){TQ(e,t,r,i)}},MR=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(AR),IQ=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=MR.type,r}return t.type="yAxis",t}(AR),PQ=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,i){this.group.removeAll(),r.get("show")&&this.group.add(new sa({shape:r.coordinateSystem.getRect(),style:pi({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(Ds),CI={offset:0};function IR(e){e.registerComponentView(PQ),e.registerComponentModel(YJ),e.registerCoordinateSystem("cartesian2d",cQ),mI(e,"x",Eb,CI),mI(e,"y",Eb,CI),e.registerComponentView(MR),e.registerComponentView(IQ),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function DQ(e){Vh(IR),e.registerSeriesModel(UJ),e.registerChartView(ZJ),e.registerLayout(bR("scatter"))}var AI=zl.prototype,Q1=s2.prototype,PR=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){It(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(PR);function ex(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var LQ=function(e){It(t,e);function t(r){var i=e.call(this,r)||this;return i.type="ec-line",i}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new PR},t.prototype.buildPath=function(r,i){ex(i)?AI.buildPath.call(this,r,i):Q1.buildPath.call(this,r,i)},t.prototype.pointAt=function(r){return ex(this.shape)?AI.pointAt.call(this,r):Q1.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var i=this.shape,n=ex(i)?[i.x2-i.x1,i.y2-i.y1]:Q1.tangentAt.call(this,r);return Ow(n,n)},t}(Jr);const kQ=LQ;var tx=["fromSymbol","toSymbol"];function MI(e){return"_"+e+"Type"}function II(e,t,r){var i=t.getItemVisual(r,e);if(!(!i||i==="none")){var n=t.getItemVisual(r,e+"Size"),a=t.getItemVisual(r,e+"Rotate"),u=t.getItemVisual(r,e+"Offset"),o=t.getItemVisual(r,e+"KeepAspect"),f=p3(n),p=P2(u||0,f),v=Jh(i,-f[0]/2+p[0],-f[1]/2+p[1],f[0],f[1],null,o);return v.__specifiedRotation=a==null||isNaN(a)?void 0:+a*Math.PI/180||0,v.name=e,v}}function RQ(e){var t=new kQ({name:"line",subPixelOptimize:!0});return Pb(t.shape,e),t}function Pb(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var zQ=function(e){It(t,e);function t(r,i,n){var a=e.call(this)||this;return a._createLine(r,i,n),a}return t.prototype._createLine=function(r,i,n){var a=r.hostModel,u=r.getItemLayout(i),o=RQ(u);o.shape.percent=0,Zp(o,{shape:{percent:1}},a,i),this.add(o),Ee(tx,function(f){var p=II(f,r,i);this.add(p),this[MI(f)]=r.getItemVisual(i,f)},this),this._updateCommonStl(r,i,n)},t.prototype.updateData=function(r,i,n){var a=r.hostModel,u=this.childOfName("line"),o=r.getItemLayout(i),f={shape:{}};Pb(f.shape,o),cc(u,f,a,i),Ee(tx,function(p){var v=r.getItemVisual(i,p),_=MI(p);if(this[_]!==v){this.remove(this.childOfName(p));var y=II(p,r,i);this.add(y)}this[_]=v},this),this._updateCommonStl(r,i,n)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,i,n){var a=r.hostModel,u=this.childOfName("line"),o=n&&n.emphasisLineStyle,f=n&&n.blurLineStyle,p=n&&n.selectLineStyle,v=n&&n.labelStatesModels,_=n&&n.emphasisDisabled,y=n&&n.focus,S=n&&n.blurScope;if(!n||r.hasItemOption){var A=r.getItemModel(i),L=A.getModel("emphasis");o=L.getModel("lineStyle").getLineStyle(),f=A.getModel(["blur","lineStyle"]).getLineStyle(),p=A.getModel(["select","lineStyle"]).getLineStyle(),_=L.get("disabled"),y=L.get("focus"),S=L.get("blurScope"),v=G_(A)}var I=r.getItemVisual(i,"style"),M=I.stroke;u.useStyle(I),u.style.fill=null,u.style.strokeNoScale=!0,u.ensureState("emphasis").style=o,u.ensureState("blur").style=f,u.ensureState("select").style=p,Ee(tx,function(Z){var Q=this.childOfName(Z);if(Q){Q.setColor(M),Q.style.opacity=I.opacity;for(var j=0;j<Xo.length;j++){var ie=Xo[j],ae=u.getState(ie);if(ae){var he=ae.style||{},ue=Q.ensureState(ie),fe=ue.style||(ue.style={});he.stroke!=null&&(fe[Q.__isEmptyBrush?"stroke":"fill"]=he.stroke),he.opacity!=null&&(fe.opacity=he.opacity)}}Q.markRedraw()}},this);var D=a.getRawValue(i);p5(this,v,{labelDataIndex:i,labelFetcher:{getFormattedLabel:function(Z,Q){return a.getFormattedLabel(Z,Q,r.dataType)}},inheritColor:M||"#000",defaultOpacity:I.opacity,defaultText:(D==null?r.getName(i):isFinite(D)?Ji(D):D)+""});var O=this.getTextContent();if(O){var N=v.normal;O.__align=O.style.align,O.__verticalAlign=O.style.verticalAlign,O.__position=N.get("position")||"middle";var q=N.get("distance");Ft(q)||(q=[q,q]),O.__labelDistance=q}this.setTextConfig({position:null,local:!0,inside:!1}),i2(this,y,S,_)},t.prototype.highlight=function(){mp(this)},t.prototype.downplay=function(){vp(this)},t.prototype.updateLayout=function(r,i){this.setLinePoints(r.getItemLayout(i))},t.prototype.setLinePoints=function(r){var i=this.childOfName("line");Pb(i.shape,r),i.dirty()},t.prototype.beforeUpdate=function(){var r=this,i=r.childOfName("fromSymbol"),n=r.childOfName("toSymbol"),a=r.getTextContent();if(!i&&!n&&(!a||a.ignore))return;for(var u=1,o=this.parent;o;)o.scaleX&&(u/=o.scaleX),o=o.parent;var f=r.childOfName("line");if(!this.__dirty&&!f.__dirty)return;var p=f.shape.percent,v=f.pointAt(0),_=f.pointAt(p),y=IL([],_,v);Ow(y,y);function S(ae,he){var ue=ae.__specifiedRotation;if(ue==null){var fe=f.tangentAt(he);ae.attr("rotation",(he===1?-1:1)*Math.PI/2-Math.atan2(fe[1],fe[0]))}else ae.attr("rotation",ue)}if(i&&(i.setPosition(v),S(i,0),i.scaleX=i.scaleY=u*p,i.markRedraw()),n&&(n.setPosition(_),S(n,1),n.scaleX=n.scaleY=u*p,n.markRedraw()),a&&!a.ignore){a.x=a.y=0,a.originX=a.originY=0;var A=void 0,L=void 0,I=a.__labelDistance,M=I[0]*u,D=I[1]*u,O=p/2,N=f.tangentAt(O),q=[N[1],-N[0]],Z=f.pointAt(O);q[1]>0&&(q[0]=-q[0],q[1]=-q[1]);var Q=N[0]<0?-1:1;if(a.__position!=="start"&&a.__position!=="end"){var j=-Math.atan2(N[1],N[0]);_[0]<v[0]&&(j=Math.PI+j),a.rotation=j}var ie=void 0;switch(a.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":ie=-D,L="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":ie=D,L="top";break;default:ie=0,L="middle"}switch(a.__position){case"end":a.x=y[0]*M+_[0],a.y=y[1]*D+_[1],A=y[0]>.8?"left":y[0]<-.8?"right":"center",L=y[1]>.8?"top":y[1]<-.8?"bottom":"middle";break;case"start":a.x=-y[0]*M+v[0],a.y=-y[1]*D+v[1],A=y[0]>.8?"right":y[0]<-.8?"left":"center",L=y[1]>.8?"bottom":y[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":a.x=M*Q+v[0],a.y=v[1]+ie,A=N[0]<0?"right":"left",a.originX=-M*Q,a.originY=-ie;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":a.x=Z[0],a.y=Z[1]+ie,A="center",a.originY=-ie;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":a.x=-M*Q+_[0],a.y=_[1]+ie,A=N[0]>=0?"right":"left",a.originX=M*Q,a.originY=-ie;break}a.scaleX=a.scaleY=u,a.setStyle({verticalAlign:a.__verticalAlign||L,align:a.__align||A})}},t}(_n);const X2=zQ;var OQ=function(){function e(t){this.group=new _n,this._LineCtor=t||X2}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var i=this,n=i.group,a=i._lineData;i._lineData=t,a||n.removeAll();var u=PI(t);t.diff(a).add(function(o){r._doAdd(t,o,u)}).update(function(o,f){r._doUpdate(a,t,f,o,u)}).remove(function(o){n.remove(a.getItemGraphicEl(o))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(r,i){r.updateLayout(t,i)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=PI(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function i(o){!o.isGroup&&!BQ(o)&&(o.incremental=!0,o.ensureState("emphasis").hoverLayer=!0)}for(var n=t.start;n<t.end;n++){var a=r.getItemLayout(n);if(rx(a)){var u=new this._LineCtor(r,n,this._seriesScope);u.traverse(i),this.group.add(u),r.setItemGraphicEl(n,u),this._progressiveEls.push(u)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){$_(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,i){var n=t.getItemLayout(r);if(rx(n)){var a=new this._LineCtor(t,r,i);t.setItemGraphicEl(r,a),this.group.add(a)}},e.prototype._doUpdate=function(t,r,i,n,a){var u=t.getItemGraphicEl(i);if(!rx(r.getItemLayout(n))){this.group.remove(u);return}u?u.updateData(r,n,a):u=new this._LineCtor(r,n,a),r.setItemGraphicEl(n,u),this.group.add(u)},e}();function BQ(e){return e.animators&&e.animators.length>0}function PI(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:G_(t)}}function DI(e){return isNaN(e[0])||isNaN(e[1])}function rx(e){return e&&!DI(e[0])&&!DI(e[1])}const FQ=OQ;var NQ=function(e){It(t,e);function t(r,i,n){var a=e.call(this)||this;return a.add(a.createLine(r,i,n)),a._updateEffectSymbol(r,i),a}return t.prototype.createLine=function(r,i,n){return new X2(r,i,n)},t.prototype._updateEffectSymbol=function(r,i){var n=r.getItemModel(i),a=n.getModel("effect"),u=a.get("symbolSize"),o=a.get("symbol");Ft(u)||(u=[u,u]);var f=r.getItemVisual(i,"style"),p=a.get("color")||f&&f.stroke,v=this.childAt(1);this._symbolType!==o&&(this.remove(v),v=Jh(o,-.5,-.5,1,1,p),v.z2=100,v.culling=!0,this.add(v)),v&&(v.setStyle("shadowColor",p),v.setStyle(a.getItemStyle(["color"])),v.scaleX=u[0],v.scaleY=u[1],v.setColor(p),this._symbolType=o,this._symbolScale=u,this._updateEffectAnimation(r,a,i))},t.prototype._updateEffectAnimation=function(r,i,n){var a=this.childAt(1);if(a){var u=r.getItemLayout(n),o=i.get("period")*1e3,f=i.get("loop"),p=i.get("roundTrip"),v=i.get("constantSpeed"),_=zh(i.get("delay"),function(S){return S/r.count()*o/3});if(a.ignore=!0,this._updateAnimationPoints(a,u),v>0&&(o=this._getLineLength(a)/v*1e3),o!==this._period||f!==this._loop||p!==this._roundTrip){a.stopAnimation();var y=void 0;lr(_)?y=_(n):y=_,a.__t>0&&(y=-o*a.__t),this._animateSymbol(a,o,y,f,p)}this._period=o,this._loop=f,this._roundTrip=p}},t.prototype._animateSymbol=function(r,i,n,a,u){if(i>0){r.__t=0;var o=this,f=r.animate("",a).when(u?i*2:i,{__t:u?2:1}).delay(n).during(function(){o._updateSymbolPosition(r)});a||f.done(function(){o.remove(r)}),f.start()}},t.prototype._getLineLength=function(r){return hh(r.__p1,r.__cp1)+hh(r.__cp1,r.__p2)},t.prototype._updateAnimationPoints=function(r,i){r.__p1=i[0],r.__p2=i[1],r.__cp1=i[2]||[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]},t.prototype.updateData=function(r,i,n){this.childAt(0).updateData(r,i,n),this._updateEffectSymbol(r,i)},t.prototype._updateSymbolPosition=function(r){var i=r.__p1,n=r.__p2,a=r.__cp1,u=r.__t<1?r.__t:2-r.__t,o=[r.x,r.y],f=o.slice(),p=pn,v=Fx;o[0]=p(i[0],a[0],n[0],u),o[1]=p(i[1],a[1],n[1],u);var _=r.__t<1?v(i[0],a[0],n[0],u):v(n[0],a[0],i[0],1-u),y=r.__t<1?v(i[1],a[1],n[1],u):v(n[1],a[1],i[1],1-u);r.rotation=-Math.atan2(y,_)-Math.PI/2,(this._symbolType==="line"||this._symbolType==="rect"||this._symbolType==="roundRect")&&(r.__lastT!==void 0&&r.__lastT<r.__t?(r.scaleY=hh(f,o)*1.05,u===1&&(o[0]=f[0]+(o[0]-f[0])/2,o[1]=f[1]+(o[1]-f[1])/2)):r.__lastT===1?r.scaleY=2*hh(i,o):r.scaleY=this._symbolScale[1]),r.__lastT=r.__t,r.ignore=!1,r.x=o[0],r.y=o[1]},t.prototype.updateLayout=function(r,i){this.childAt(0).updateLayout(r,i);var n=r.getItemModel(i).getModel("effect");this._updateEffectAnimation(r,n,i)},t}(_n);const DR=NQ;var VQ=function(e){It(t,e);function t(r,i,n){var a=e.call(this)||this;return a._createPolyline(r,i,n),a}return t.prototype._createPolyline=function(r,i,n){var a=r.getItemLayout(i),u=new o2({shape:{points:a}});this.add(u),this._updateCommonStl(r,i,n)},t.prototype.updateData=function(r,i,n){var a=r.hostModel,u=this.childAt(0),o={shape:{points:r.getItemLayout(i)}};cc(u,o,a,i),this._updateCommonStl(r,i,n)},t.prototype._updateCommonStl=function(r,i,n){var a=this.childAt(0),u=r.getItemModel(i),o=n&&n.emphasisLineStyle,f=n&&n.focus,p=n&&n.blurScope,v=n&&n.emphasisDisabled;if(!n||r.hasItemOption){var _=u.getModel("emphasis");o=_.getModel("lineStyle").getLineStyle(),v=_.get("disabled"),f=_.get("focus"),p=_.get("blurScope")}a.useStyle(r.getItemVisual(i,"style")),a.style.fill=null,a.style.strokeNoScale=!0;var y=a.ensureState("emphasis");y.style=o,i2(this,f,p,v)},t.prototype.updateLayout=function(r,i){var n=this.childAt(0);n.setShape("points",r.getItemLayout(i))},t}(_n);const LR=VQ;var $Q=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._lastFrame=0,r._lastFramePercent=0,r}return t.prototype.createLine=function(r,i,n){return new LR(r,i,n)},t.prototype._updateAnimationPoints=function(r,i){this._points=i;for(var n=[0],a=0,u=1;u<i.length;u++){var o=i[u-1],f=i[u];a+=hh(o,f),n.push(a)}if(a===0){this._length=0;return}for(var u=0;u<n.length;u++)n[u]/=a;this._offsets=n,this._length=a},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(r){var i=r.__t<1?r.__t:2-r.__t,n=this._points,a=this._offsets,u=n.length;if(a){var o=this._lastFrame,f;if(i<this._lastFramePercent){var p=Math.min(o+1,u-1);for(f=p;f>=0&&!(a[f]<=i);f--);f=Math.min(f,u-2)}else{for(f=o;f<u&&!(a[f]>i);f++);f=Math.min(f-1,u-2)}var v=(i-a[f])/(a[f+1]-a[f]),_=n[f],y=n[f+1];r.x=_[0]*(1-v)+v*y[0],r.y=_[1]*(1-v)+v*y[1];var S=r.__t<1?y[0]-_[0]:_[0]-y[0],A=r.__t<1?y[1]-_[1]:_[1]-y[1];r.rotation=-Math.atan2(A,S)-Math.PI/2,this._lastFrame=f,this._lastFramePercent=i,r.ignore=!1}},t}(DR);const UQ=$Q;var GQ=function(){function e(){this.polyline=!1,this.curveness=0,this.segs=[]}return e}(),HQ=function(e){It(t,e);function t(r){var i=e.call(this,r)||this;return i._off=0,i.hoverDataIdx=-1,i}return t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new GQ},t.prototype.buildPath=function(r,i){var n=i.segs,a=i.curveness,u;if(i.polyline)for(u=this._off;u<n.length;){var o=n[u++];if(o>0){r.moveTo(n[u++],n[u++]);for(var f=1;f<o;f++)r.lineTo(n[u++],n[u++])}}else for(u=this._off;u<n.length;){var p=n[u++],v=n[u++],_=n[u++],y=n[u++];if(r.moveTo(p,v),a>0){var S=(p+_)/2-(v-y)*a,A=(v+y)/2-(_-p)*a;r.quadraticCurveTo(S,A,_,y)}else r.lineTo(_,y)}this.incremental&&(this._off=u,this.notClear=!0)},t.prototype.findDataIndex=function(r,i){var n=this.shape,a=n.segs,u=n.curveness,o=this.style.lineWidth;if(n.polyline)for(var f=0,p=0;p<a.length;){var v=a[p++];if(v>0)for(var _=a[p++],y=a[p++],S=1;S<v;S++){var A=a[p++],L=a[p++];if(bl(_,y,A,L,o,r,i))return f}f++}else for(var f=0,p=0;p<a.length;){var _=a[p++],y=a[p++],A=a[p++],L=a[p++];if(u>0){var I=(_+A)/2-(y-L)*u,M=(y+L)/2-(A-_)*u;if(bk(_,y,I,M,A,L,o,r,i))return f}else if(bl(_,y,A,L,o,r,i))return f;f++}return-1},t.prototype.contain=function(r,i){var n=this.transformCoordToLocal(r,i),a=this.getBoundingRect();if(r=n[0],i=n[1],a.contain(r,i)){var u=this.hoverDataIdx=this.findDataIndex(r,i);return u>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var i=this.shape,n=i.segs,a=1/0,u=1/0,o=-1/0,f=-1/0,p=0;p<n.length;){var v=n[p++],_=n[p++];a=Math.min(v,a),o=Math.max(v,o),u=Math.min(_,u),f=Math.max(_,f)}r=this._rect=new ii(a,u,o,f)}return r},t}(Jr),qQ=function(){function e(){this.group=new _n}return e.prototype.updateData=function(t){this._clear();var r=this._create();r.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(r,t)},e.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},e.prototype.incrementalUpdate=function(t,r){var i=this._newAdded[0],n=r.getLayout("linesPoints"),a=i&&i.shape.segs;if(a&&a.length<2e4){var u=a.length,o=new Float32Array(u+n.length);o.set(a),o.set(n,u),i.setShape({segs:o})}else{this._newAdded=[];var f=this._create();f.incremental=!0,f.setShape({segs:n}),this._setCommon(f,r),f.__startIndex=t.start}},e.prototype.remove=function(){this._clear()},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new HQ({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},e.prototype._setCommon=function(t,r,i){var n=r.hostModel;t.setShape({polyline:n.get("polyline"),curveness:n.get(["lineStyle","curveness"])}),t.useStyle(n.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var a=r.getVisual("style");a&&a.stroke&&t.setStyle("stroke",a.stroke),t.setStyle("fill",null);var u=fi(t);u.seriesIndex=n.seriesIndex,t.on("mousemove",function(o){u.dataIndex=null;var f=t.hoverDataIdx;f>0&&(u.dataIndex=f+t.__startIndex)})},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const jQ=qQ;var WQ={seriesType:"lines",plan:A2(),reset:function(e){var t=e.coordinateSystem;if(t){var r=e.get("polyline"),i=e.pipelineContext.large;return{progress:function(n,a){var u=[];if(i){var o=void 0,f=n.end-n.start;if(r){for(var p=0,v=n.start;v<n.end;v++)p+=e.getLineCoordsCount(v);o=new Float32Array(f+p*2)}else o=new Float32Array(f*4);for(var _=0,y=[],v=n.start;v<n.end;v++){var S=e.getLineCoords(v,u);r&&(o[_++]=S);for(var A=0;A<S;A++)y=t.dataToPoint(u[A],!1,y),o[_++]=y[0],o[_++]=y[1]}a.setLayout("linesPoints",o)}else for(var v=n.start;v<n.end;v++){var L=a.getItemModel(v),S=e.getLineCoords(v,u),I=[];if(r)for(var M=0;M<S;M++)I.push(t.dataToPoint(u[M]));else{I[0]=t.dataToPoint(u[0]),I[1]=t.dataToPoint(u[1]);var D=L.get(["lineStyle","curveness"]);+D&&(I[2]=[(I[0][0]+I[1][0])/2-(I[0][1]-I[1][1])*D,(I[0][1]+I[1][1])/2-(I[1][0]-I[0][0])*D])}a.setItemLayout(v,I)}}}}}};const kR=WQ;var ZQ=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=r.getData(),u=this._updateLineDraw(a,r),o=r.get("zlevel"),f=r.get(["effect","trailLength"]),p=n.getZr(),v=p.painter.getType()==="svg";v||p.painter.getLayer(o).clear(!0),this._lastZlevel!=null&&!v&&p.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(r)&&f>0&&(v||p.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(f/10+.9,1),0)})),u.updateData(a);var _=r.get("clip",!0)&&VJ(r.coordinateSystem,!1,r);_?this.group.setClipPath(_):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},t.prototype.incrementalPrepareRender=function(r,i,n){var a=r.getData(),u=this._updateLineDraw(a,r);u.incrementalPrepareUpdate(a),this._clearLayer(n),this._finished=!1},t.prototype.incrementalRender=function(r,i,n){this._lineDraw.incrementalUpdate(r,i.getData()),this._finished=r.end===i.getData().count()},t.prototype.eachRendered=function(r){this._lineDraw&&this._lineDraw.eachRendered(r)},t.prototype.updateTransform=function(r,i,n){var a=r.getData(),u=r.pipelineContext;if(!this._finished||u.large||u.progressiveRender)return{update:!0};var o=kR.reset(r,i,n);o.progress&&o.progress({start:0,end:a.count(),count:a.count()},a),this._lineDraw.updateLayout(),this._clearLayer(n)},t.prototype._updateLineDraw=function(r,i){var n=this._lineDraw,a=this._showEffect(i),u=!!i.get("polyline"),o=i.pipelineContext,f=o.large;return(!n||a!==this._hasEffet||u!==this._isPolyline||f!==this._isLargeDraw)&&(n&&n.remove(),n=this._lineDraw=f?new jQ:new FQ(u?a?UQ:LR:a?DR:X2),this._hasEffet=a,this._isPolyline=u,this._isLargeDraw=f),this.group.add(n.group),n},t.prototype._showEffect=function(r){return!!r.get(["effect","show"])},t.prototype._clearLayer=function(r){var i=r.getZr(),n=i.painter.getType()==="svg";!n&&this._lastZlevel!=null&&i.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(r,i){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(i)},t.prototype.dispose=function(r,i){this.remove(r,i)},t.type="lines",t}(rc);const XQ=ZQ;var YQ=typeof Uint32Array>"u"?Array:Uint32Array,KQ=typeof Float64Array>"u"?Array:Float64Array;function LI(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=Zt(t,function(r){var i=[r[0].coord,r[1].coord],n={coords:i};return r[0].name&&(n.fromName=r[0].name),r[1].name&&(n.toName=r[1].name),AU([n,r[0],r[1]])}))}var JQ=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.visualStyleAccessPath="lineStyle",r.visualDrawType="stroke",r}return t.prototype.init=function(r){r.data=r.data||[],LI(r);var i=this._processFlatCoordsArray(r.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(r.data=new Float32Array(i.count)),e.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(r){if(LI(r),r.data){var i=this._processFlatCoordsArray(r.data);this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset,i.flatCoords&&(r.data=new Float32Array(i.count))}e.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(r){var i=this._processFlatCoordsArray(r.data);i.flatCoords&&(this._flatCoords?(this._flatCoords=Lx(this._flatCoords,i.flatCoords),this._flatCoordsOffset=Lx(this._flatCoordsOffset,i.flatCoordsOffset)):(this._flatCoords=i.flatCoords,this._flatCoordsOffset=i.flatCoordsOffset),r.data=new Float32Array(i.count)),this.getRawData().appendData(r.data)},t.prototype._getCoordsFromItemModel=function(r){var i=this.getData().getItemModel(r),n=i.option instanceof Array?i.option:i.getShallow("coords");return n},t.prototype.getLineCoordsCount=function(r){return this._flatCoordsOffset?this._flatCoordsOffset[r*2+1]:this._getCoordsFromItemModel(r).length},t.prototype.getLineCoords=function(r,i){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[r*2],a=this._flatCoordsOffset[r*2+1],u=0;u<a;u++)i[u]=i[u]||[],i[u][0]=this._flatCoords[n+u*2],i[u][1]=this._flatCoords[n+u*2+1];return a}else{for(var o=this._getCoordsFromItemModel(r),u=0;u<o.length;u++)i[u]=i[u]||[],i[u][0]=o[u][0],i[u][1]=o[u][1];return o.length}},t.prototype._processFlatCoordsArray=function(r){var i=0;if(this._flatCoords&&(i=this._flatCoords.length),Mi(r[0])){for(var n=r.length,a=new YQ(n),u=new KQ(n),o=0,f=0,p=0,v=0;v<n;){p++;var _=r[v++];a[f++]=o+i,a[f++]=_;for(var y=0;y<_;y++){var S=r[v++],A=r[v++];u[o++]=S,u[o++]=A}}return{flatCoordsOffset:new Uint32Array(a.buffer,0,f),flatCoords:u,count:p}}return{flatCoordsOffset:null,flatCoords:null,count:r.length}},t.prototype.getInitialData=function(r,i){var n=new B2(["value"],this);return n.hasItemOption=!1,n.initData(r.data,[],function(a,u,o,f){if(a instanceof Array)return NaN;n.hasItemOption=!0;var p=a.value;if(p!=null)return p instanceof Array?p[f]:p}),n},t.prototype.formatTooltip=function(r,i,n){var a=this.getData(),u=a.getItemModel(r),o=u.get("name");if(o)return o;var f=u.get("fromName"),p=u.get("toName"),v=[];return f!=null&&v.push(f),p!=null&&v.push(p),Ol("nameValue",{name:v.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var r=this.option.progressive;return r??(this.option.large?1e4:this.get("progressive"))},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r??(this.option.large?2e4:this.get("progressiveThreshold"))},t.prototype.getZLevelKey=function(){var r=this.getModel("effect"),i=r.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:r.get("show")&&i>0?i+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(Nh);const QQ=JQ;function Jv(e){return e instanceof Array||(e=[e,e]),e}var eee={seriesType:"lines",reset:function(e){var t=Jv(e.get("symbol")),r=Jv(e.get("symbolSize")),i=e.getData();i.setVisual("fromSymbol",t&&t[0]),i.setVisual("toSymbol",t&&t[1]),i.setVisual("fromSymbolSize",r&&r[0]),i.setVisual("toSymbolSize",r&&r[1]);function n(a,u){var o=a.getItemModel(u),f=Jv(o.getShallow("symbol",!0)),p=Jv(o.getShallow("symbolSize",!0));f[0]&&a.setItemVisual(u,"fromSymbol",f[0]),f[1]&&a.setItemVisual(u,"toSymbol",f[1]),p[0]&&a.setItemVisual(u,"fromSymbolSize",p[0]),p[1]&&a.setItemVisual(u,"toSymbolSize",p[1])}return{dataEach:i.hasItemOption?n:null}}};const tee=eee;function ree(e){e.registerChartView(XQ),e.registerSeriesModel(QQ),e.registerLayout(kR),e.registerVisual(tee)}var Wu=zi(),kI=Dr,ix=Ai,iee=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,i,n){var a=r.get("value"),u=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=i,!(!n&&this._lastValue===a&&this._lastStatus===u)){this._lastValue=a,this._lastStatus=u;var o=this._group,f=this._handle;if(!u||u==="hide"){o&&o.hide(),f&&f.hide();return}o&&o.show(),f&&f.show();var p={};this.makeElOption(p,a,t,r,i);var v=p.graphicKey;v!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=v;var _=this._moveAnimation=this.determineAnimation(t,r);if(!o)o=this._group=new _n,this.createPointerEl(o,p,t,r),this.createLabelEl(o,p,t,r),i.getZr().add(o);else{var y=ln(RI,r,_);this.updatePointerEl(o,p,y),this.updateLabelEl(o,p,y,r)}OI(o,r,!0),this._renderHandle(a)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var i=r.get("animation"),n=t.axis,a=n.type==="category",u=r.get("snap");if(!u&&!a)return!1;if(i==="auto"||i==null){var o=this.animationThreshold;if(a&&n.getBandWidth()>o)return!0;if(u){var f=Z2(t).seriesDataCount,p=n.getExtent();return Math.abs(p[0]-p[1])/f>o}return!1}return i===!0},e.prototype.makeElOption=function(t,r,i,n,a){},e.prototype.createPointerEl=function(t,r,i,n){var a=r.pointer;if(a){var u=Wu(t).pointerEl=new Uj[a.type](kI(r.pointer));t.add(u)}},e.prototype.createLabelEl=function(t,r,i,n){if(r.label){var a=Wu(t).labelEl=new yo(kI(r.label));t.add(a),zI(a,n)}},e.prototype.updatePointerEl=function(t,r,i){var n=Wu(t).pointerEl;n&&r.pointer&&(n.setStyle(r.pointer.style),i(n,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,i,n){var a=Wu(t).labelEl;a&&(a.setStyle(r.label.style),i(a,{x:r.label.x,y:r.label.y}),zI(a,n))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,i=this._api.getZr(),n=this._handle,a=r.getModel("handle"),u=r.get("status");if(!a.get("show")||!u||u==="hide"){n&&i.remove(n),this._handle=null;return}var o;this._handle||(o=!0,n=this._handle=h5(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(p){DL(p.event)},onmousedown:ix(this._onHandleDragMove,this,0,0),drift:ix(this._onHandleDragMove,this),ondragend:ix(this._onHandleDragEnd,this)}),i.add(n)),OI(n,r,!1),n.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var f=a.get("size");Ft(f)||(f=[f,f]),n.scaleX=f[0]/2,n.scaleY=f[1]/2,a3(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,o)}},e.prototype._moveHandleToValue=function(t,r){RI(this._axisPointerModel,!r&&this._moveAnimation,this._handle,nx(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var i=this._handle;if(i){this._dragging=!0;var n=this.updateHandleTransform(nx(i),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=n,i.stopAnimation(),i.attr(nx(n)),Wu(i).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var r=this._payloadInfo,i=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:i.axis.dim,axisIndex:i.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),i=this._group,n=this._handle;r&&i&&(this._lastGraphicKey=null,i&&r.remove(i),n&&r.remove(n),this._group=null,this._handle=null,this._payloadInfo=null),hb(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,i){return i=i||0,{x:t[i],y:t[1-i],width:r[i],height:r[1-i]}},e}();function RI(e,t,r,i){RR(Wu(r).lastProp,i)||(Wu(r).lastProp=i,t?cc(r,i,e):(r.stopAnimation(),r.attr(i)))}function RR(e,t){if(Kt(e)&&Kt(t)){var r=!0;return Ee(t,function(i,n){r=r&&RR(e[n],i)}),!!r}else return e===t}function zI(e,t){e[t.get(["label","show"])?"show":"hide"]()}function nx(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function OI(e,t,r){var i=t.get("z"),n=t.get("zlevel");e&&e.traverse(function(a){a.type!=="group"&&(i!=null&&(a.z=i),n!=null&&(a.zlevel=n),a.silent=r)})}const nee=iee;function aee(e){var t=e.get("type"),r=e.getModel(t+"Style"),i;return t==="line"?(i=r.getLineStyle(),i.fill=null):t==="shadow"&&(i=r.getAreaStyle(),i.stroke=null),i}function oee(e,t,r,i,n){var a=r.get("value"),u=zR(a,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),o=r.getModel("label"),f=g2(o.get("padding")||0),p=o.getFont(),v=qw(u,p),_=n.position,y=v.width+f[1]+f[3],S=v.height+f[0]+f[2],A=n.align;A==="right"&&(_[0]-=y),A==="center"&&(_[0]-=y/2);var L=n.verticalAlign;L==="bottom"&&(_[1]-=S),L==="middle"&&(_[1]-=S/2),see(_,y,S,i);var I=o.get("backgroundColor");(!I||I==="auto")&&(I=t.get(["axisLine","lineStyle","color"])),e.label={x:_[0],y:_[1],style:sc(o,{text:u,font:p,fill:o.getTextColor(),padding:f,backgroundColor:I}),z2:10}}function see(e,t,r,i){var n=i.getWidth(),a=i.getHeight();e[0]=Math.min(e[0]+t,n)-t,e[1]=Math.min(e[1]+r,a)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function zR(e,t,r,i,n){e=t.scale.parse(e);var a=t.scale.getLabel({value:e},{precision:n.precision}),u=n.formatter;if(u){var o={value:N2(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};Ee(i,function(f){var p=r.getSeriesByIndex(f.seriesIndex),v=f.dataIndexInside,_=p&&p.getDataParams(v);_&&o.seriesData.push(_)}),Wt(u)?a=u.replace("{value}",a):lr(u)&&(a=u(o))}return a}function OR(e,t,r){var i=cp();return Nw(i,i,r.rotation),Bx(i,i,r.position),h2([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],i)}function lee(e,t,r,i,n,a){var u=ER.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=n.get(["label","margin"]),oee(t,i,n,a,{position:OR(i.axis,e,r),align:u.textAlign,verticalAlign:u.textVerticalAlign})}function uee(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function cee(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var hee=function(e){It(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,i,n,a,u){var o=n.axis,f=o.grid,p=a.get("type"),v=BI(f,o).getOtherAxis(o).getGlobalExtent(),_=o.toGlobalCoord(o.dataToCoord(i,!0));if(p&&p!=="none"){var y=aee(a),S=fee[p](o,_,v);S.style=y,r.graphicKey=S.type,r.pointer=S}var A=Ab(f.model,n);lee(i,r,A,n,a,u)},t.prototype.getHandleTransform=function(r,i,n){var a=Ab(i.axis.grid.model,i,{labelInside:!1});a.labelMargin=n.get(["handle","margin"]);var u=OR(i.axis,r,a);return{x:u[0],y:u[1],rotation:a.rotation+(a.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,i,n,a){var u=n.axis,o=u.grid,f=u.getGlobalExtent(!0),p=BI(o,u).getOtherAxis(u).getGlobalExtent(),v=u.dim==="x"?0:1,_=[r.x,r.y];_[v]+=i[v],_[v]=Math.min(f[1],_[v]),_[v]=Math.max(f[0],_[v]);var y=(p[1]+p[0])/2,S=[y,y];S[v]=_[v];var A=[{verticalAlign:"middle"},{align:"center"}];return{x:_[0],y:_[1],rotation:r.rotation,cursorPoint:S,tooltipOption:A[v]}},t}(nee);function BI(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var fee={line:function(e,t,r){var i=uee([t,r[0]],[t,r[1]],FI(e));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(e,t,r){var i=Math.max(1,e.getBandWidth()),n=r[1]-r[0];return{type:"Rect",shape:cee([t-i/2,r[0]],[i,n],FI(e))}}};function FI(e){return e.dim==="x"?0:1}const dee=hee;var pee=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(_i);const mee=pee;var Ts=zi(),vee=Ee;function BR(e,t,r){if(!xr.node){var i=t.getZr();Ts(i).records||(Ts(i).records={}),gee(i,t);var n=Ts(i).records[e]||(Ts(i).records[e]={});n.handler=r}}function gee(e,t){if(Ts(e).initialized)return;Ts(e).initialized=!0,r("click",ln(NI,"click")),r("mousemove",ln(NI,"mousemove")),r("globalout",yee);function r(i,n){e.on(i,function(a){var u=xee(t);vee(Ts(e).records,function(o){o&&n(o,a,u.dispatchAction)}),_ee(u.pendings,t)})}}function _ee(e,t){var r=e.showTip.length,i=e.hideTip.length,n;r?n=e.showTip[r-1]:i&&(n=e.hideTip[i-1]),n&&(n.dispatchAction=null,t.dispatchAction(n))}function yee(e,t,r){e.handler("leave",null,r)}function NI(e,t,r,i){t.handler(e,r,i)}function xee(e){var t={showTip:[],hideTip:[]},r=function(i){var n=t[i.type];n?n.push(i):(i.dispatchAction=r,e.dispatchAction(i))};return{dispatchAction:r,pendings:t}}function Db(e,t){if(!xr.node){var r=t.getZr(),i=(Ts(r).records||{})[e];i&&(Ts(r).records[e]=null)}}var bee=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){var a=i.getComponent("tooltip"),u=r.get("triggerOn")||a&&a.get("triggerOn")||"mousemove|click";BR("axisPointer",n,function(o,f,p){u!=="none"&&(o==="leave"||u.indexOf(o)>=0)&&p({type:"updateAxisPointer",currTrigger:o,x:f&&f.offsetX,y:f&&f.offsetY})})},t.prototype.remove=function(r,i){Db("axisPointer",i)},t.prototype.dispose=function(r,i){Db("axisPointer",i)},t.type="axisPointer",t}(Ds);const wee=bee;function FR(e,t){var r=[],i=e.seriesIndex,n;if(i==null||!(n=t.getSeriesByIndex(i)))return{point:[]};var a=n.getData(),u=qp(a,e);if(u==null||u<0||Ft(u))return{point:[]};var o=a.getItemGraphicEl(u),f=n.coordinateSystem;if(n.getTooltipPosition)r=n.getTooltipPosition(u)||[];else if(f&&f.dataToPoint)if(e.isStacked){var p=f.getBaseAxis(),v=f.getOtherAxis(p),_=v.dim,y=p.dim,S=_==="x"||_==="radius"?1:0,A=a.mapDimension(y),L=[];L[S]=a.get(A,u),L[1-S]=a.get(a.getCalculationInfo("stackResultDimension"),u),r=f.dataToPoint(L)||[]}else r=f.dataToPoint(a.getValues(Zt(f.dimensions,function(M){return a.mapDimension(M)}),u))||[];else if(o){var I=o.getBoundingRect().clone();I.applyTransform(o.transform),r=[I.x+I.width/2,I.y+I.height/2]}return{point:r,el:o}}var VI=zi();function See(e,t,r){var i=e.currTrigger,n=[e.x,e.y],a=e,u=e.dispatchAction||Ai(r.dispatchAction,r),o=t.getComponent("axisPointer").coordSysAxesInfo;if(o){Sg(n)&&(n=FR({seriesIndex:a.seriesIndex,dataIndex:a.dataIndex},t).point);var f=Sg(n),p=a.axesInfo,v=o.axesInfo,_=i==="leave"||Sg(n),y={},S={},A={list:[],map:{}},L={showPointer:ln(Eee,S),showTooltip:ln(Cee,A)};Ee(o.coordSysMap,function(M,D){var O=f||M.containPoint(n);Ee(o.coordSysAxesInfo[D],function(N,q){var Z=N.axis,Q=Pee(p,N);if(!_&&O&&(!p||Q)){var j=Q&&Q.value;j==null&&!f&&(j=Z.pointToData(n)),j!=null&&$I(N,j,L,!1,y)}})});var I={};return Ee(v,function(M,D){var O=M.linkGroup;O&&!S[D]&&Ee(O.axesInfo,function(N,q){var Z=S[q];if(N!==M&&Z){var Q=Z.value;O.mapper&&(Q=M.axis.scale.parse(O.mapper(Q,UI(N),UI(M)))),I[M.key]=Q}})}),Ee(I,function(M,D){$I(v[D],M,L,!0,y)}),Aee(S,v,y),Mee(A,n,e,u),Iee(v,u,r),y}}function $I(e,t,r,i,n){var a=e.axis;if(!(a.scale.isBlank()||!a.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var u=Tee(t,e),o=u.payloadBatch,f=u.snapToValue;o[0]&&n.seriesIndex==null&&xt(n,o[0]),!i&&e.snap&&a.containData(f)&&f!=null&&(t=f),r.showPointer(e,t,o),r.showTooltip(e,u,f)}}function Tee(e,t){var r=t.axis,i=r.dim,n=e,a=[],u=Number.MAX_VALUE,o=-1;return Ee(t.seriesModels,function(f,p){var v=f.getData().mapDimensionsAll(i),_,y;if(f.getAxisTooltipData){var S=f.getAxisTooltipData(v,e,r);y=S.dataIndices,_=S.nestestValue}else{if(y=f.getData().indicesOfNearest(v[0],e,r.type==="category"?.5:null),!y.length)return;_=f.getData().get(v[0],y[0])}if(!(_==null||!isFinite(_))){var A=e-_,L=Math.abs(A);L<=u&&((L<u||A>=0&&o<0)&&(u=L,o=A,n=_,a.length=0),Ee(y,function(I){a.push({seriesIndex:f.seriesIndex,dataIndexInside:I,dataIndex:f.getData().getRawIndex(I)})}))}}),{payloadBatch:a,snapToValue:n}}function Eee(e,t,r,i){e[t.key]={value:r,payloadBatch:i}}function Cee(e,t,r,i){var n=r.payloadBatch,a=t.axis,u=a.model,o=t.axisPointerModel;if(!(!t.triggerTooltip||!n.length)){var f=t.coordSys.model,p=Ip(f),v=e.map[p];v||(v=e.map[p]={coordSysId:f.id,coordSysIndex:f.componentIndex,coordSysType:f.type,coordSysMainType:f.mainType,dataByAxis:[]},e.list.push(v)),v.dataByAxis.push({axisDim:a.dim,axisIndex:u.componentIndex,axisType:u.type,axisId:u.id,value:i,valueLabelOpt:{precision:o.get(["label","precision"]),formatter:o.get(["label","formatter"])},seriesDataIndices:n.slice()})}}function Aee(e,t,r){var i=r.axesInfo=[];Ee(t,function(n,a){var u=n.axisPointerModel.option,o=e[a];o?(!n.useHandle&&(u.status="show"),u.value=o.value,u.seriesDataIndices=(o.payloadBatch||[]).slice()):!n.useHandle&&(u.status="hide"),u.status==="show"&&i.push({axisDim:n.axis.dim,axisIndex:n.axis.model.componentIndex,value:u.value})})}function Mee(e,t,r,i){if(Sg(t)||!e.list.length){i({type:"hideTip"});return}var n=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:n.dataIndexInside,dataIndex:n.dataIndex,seriesIndex:n.seriesIndex,dataByCoordSys:e.list})}function Iee(e,t,r){var i=r.getZr(),n="axisPointerLastHighlights",a=VI(i)[n]||{},u=VI(i)[n]={};Ee(e,function(p,v){var _=p.axisPointerModel.option;_.status==="show"&&Ee(_.seriesDataIndices,function(y){var S=y.seriesIndex+" | "+y.dataIndex;u[S]=y})});var o=[],f=[];Ee(a,function(p,v){!u[v]&&f.push(p)}),Ee(u,function(p,v){!a[v]&&o.push(p)}),f.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:f}),o.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:o})}function Pee(e,t){for(var r=0;r<(e||[]).length;r++){var i=e[r];if(t.axis.dim===i.axisDim&&t.axis.model.componentIndex===i.axisIndex)return i}}function UI(e){var t=e.axis.model,r={},i=r.axisDim=e.axis.dim;return r.axisIndex=r[i+"AxisIndex"]=t.componentIndex,r.axisName=r[i+"AxisName"]=t.name,r.axisId=r[i+"AxisId"]=t.id,r}function Sg(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function NR(e){CR.registerAxisPointerClass("CartesianAxisPointer",dee),e.registerComponentModel(mee),e.registerComponentView(wee),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!Ft(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=vQ(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},See)}function Dee(e){Vh(IR),Vh(NR)}var Lee=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(_i);const kee=Lee;function VR(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function $R(e){if(xr.domSupported){for(var t=document.documentElement.style,r=0,i=e.length;r<i;r++)if(e[r]in t)return e[r]}}var UR=$R(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ree=$R(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function GR(e,t){if(!e)return t;t=M5(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function zee(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var Oee=GR(Ree,"transition"),Y2=GR(UR,"transform"),Bee="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(xr.transform3dSupported?"will-change:transform;":"");function Fee(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function Nee(e,t,r){if(!Wt(r)||r==="inside")return"";var i=e.get("backgroundColor"),n=e.get("borderWidth");t=xp(t);var a=Fee(r),u=Math.max(Math.round(n)*1.5,6),o="",f=Y2+":",p;ri(["left","right"],a)>-1?(o+="top:50%",f+="translateY(-50%) rotate("+(p=a==="left"?-225:-45)+"deg)"):(o+="left:50%",f+="translateX(-50%) rotate("+(p=a==="top"?225:45)+"deg)");var v=p*Math.PI/180,_=u+n,y=_*Math.abs(Math.cos(v))+_*Math.abs(Math.sin(v)),S=Math.round(((y-Math.SQRT2*n)/2+Math.SQRT2*n-(y-_)/2)*100)/100;o+=";"+a+":-"+S+"px";var A=t+" solid "+n+"px;",L=["position:absolute;width:"+u+"px;height:"+u+"px;z-index:-1;",o+";"+f+";","border-bottom:"+A,"border-right:"+A,"background-color:"+i+";"];return'<div style="'+L.join("")+'"></div>'}function Vee(e,t){var r="cubic-bezier(0.23,1,0.32,1)",i=" "+e/2+"s "+r,n="opacity"+i+",visibility"+i;return t||(i=" "+e+"s "+r,n+=xr.transformSupported?","+Y2+i:",left"+i+",top"+i),Oee+":"+n}function GI(e,t,r){var i=e.toFixed(0)+"px",n=t.toFixed(0)+"px";if(!xr.transformSupported)return r?"top:"+n+";left:"+i+";":[["top",n],["left",i]];var a=xr.transform3dSupported,u="translate"+(a?"3d":"")+"("+i+","+n+(a?",0":"")+")";return r?"top:0;left:0;"+Y2+":"+u+";":[["top",0],["left",0],[UR,u]]}function $ee(e){var t=[],r=e.get("fontSize"),i=e.getTextColor();i&&t.push("color:"+i),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var n=e.get("textShadowColor"),a=e.get("textShadowBlur")||0,u=e.get("textShadowOffsetX")||0,o=e.get("textShadowOffsetY")||0;return n&&a&&t.push("text-shadow:"+u+"px "+o+"px "+a+"px "+n),Ee(["decoration","align"],function(f){var p=e.get(f);p&&t.push("text-"+f+":"+p)}),t.join(";")}function Uee(e,t,r){var i=[],n=e.get("transitionDuration"),a=e.get("backgroundColor"),u=e.get("shadowBlur"),o=e.get("shadowColor"),f=e.get("shadowOffsetX"),p=e.get("shadowOffsetY"),v=e.getModel("textStyle"),_=i3(e,"html"),y=f+"px "+p+"px "+u+"px "+o;return i.push("box-shadow:"+y),t&&n&&i.push(Vee(n,r)),a&&i.push("background-color:"+a),Ee(["width","color","radius"],function(S){var A="border-"+S,L=M5(A),I=e.get(L);I!=null&&i.push(A+":"+I+(S==="color"?"":"px"))}),i.push($ee(v)),_!=null&&i.push("padding:"+g2(_).join("px ")+"px"),i.join(";")+";"}function HI(e,t,r,i,n){var a=t&&t.painter;if(r){var u=a&&a.getViewportRoot();u&&$U(e,u,document.body,i,n)}else{e[0]=i,e[1]=n;var o=a&&a.getViewportRootOffset();o&&(e[0]+=o.offsetLeft,e[1]+=o.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var Gee=function(){function e(t,r,i){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,xr.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var a=this._zr=r.getZr(),u=this._appendToBody=i&&i.appendToBody;HI(this._styleCoord,a,u,r.getWidth()/2,r.getHeight()/2),u?document.body.appendChild(n):t.appendChild(n),this._container=t;var o=this;n.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},n.onmousemove=function(f){if(f=f||window.event,!o._enterable){var p=a.handler,v=a.painter.getViewportRoot();Fa(v,f,!0),p.dispatch("mousemove",f)}},n.onmouseleave=function(){o._inContent=!1,o._enterable&&o._show&&o.hideLater(o._hideDelay)}}return e.prototype.update=function(t){var r=this._container,i=zee(r,"position"),n=r.style;n.position!=="absolute"&&i!=="absolute"&&(n.position="relative");var a=t.get("alwaysShowContent");a&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var i=this.el,n=i.style,a=this._styleCoord;i.innerHTML?n.cssText=Bee+Uee(t,!this._firstShow,this._longHide)+GI(a[0],a[1],!0)+("border-color:"+xp(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):n.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,i,n,a){var u=this.el;if(t==null){u.innerHTML="";return}var o="";if(Wt(a)&&i.get("trigger")==="item"&&!VR(i)&&(o=Nee(i,n,a)),Wt(t))u.innerHTML=t+o;else if(t){u.innerHTML="",Ft(t)||(t=[t]);for(var f=0;f<t.length;f++)Vg(t[f])&&t[f].parentNode!==u&&u.appendChild(t[f]);if(o&&u.childNodes.length){var p=document.createElement("div");p.innerHTML=o,u.appendChild(p)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var i=this._styleCoord;if(HI(i,this._zr,this._appendToBody,t,r),i[0]!=null&&i[1]!=null){var n=this.el.style,a=GI(i[0],i[1]);Ee(a,function(u){n[u[0]]=u[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",xr.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Ai(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const Hee=Gee;var qee=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),jI(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,i,n,a){var u=this;Kt(t)&&aa(""),this.el&&this._zr.remove(this.el);var o=i.getModel("textStyle");this.el=new yo({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:n,textShadowColor:o.get("textShadowColor"),fill:i.get(["textStyle","color"]),padding:i3(i,"richText"),verticalAlign:"top",align:"left"},z:i.get("z")}),Ee(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(p){u.el.style[p]=i.get(p)}),Ee(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(p){u.el.style[p]=o.get(p)||0}),this._zr.add(this.el);var f=this;this.el.on("mouseover",function(){f._enterable&&(clearTimeout(f._hideTimeout),f._show=!0),f._inContent=!0}),this.el.on("mouseout",function(){f._enterable&&f._show&&f.hideLater(f._hideDelay),f._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),i=qI(t.style);return[r.width+i.left+i.right,r.height+i.top+i.bottom]},e.prototype.moveTo=function(t,r){var i=this.el;if(i){var n=this._styleCoord;jI(n,this._zr,t,r),t=n[0],r=n[1];var a=i.style,u=vl(a.borderWidth||0),o=qI(a);i.x=t+u+o.left,i.y=r+u+o.top,i.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Ai(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function vl(e){return Math.max(0,e)}function qI(e){var t=vl(e.shadowBlur||0),r=vl(e.shadowOffsetX||0),i=vl(e.shadowOffsetY||0);return{left:vl(t-r),right:vl(t+r),top:vl(t-i),bottom:vl(t+i)}}function jI(e,t,r,i){e[0]=r,e[1]=i,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const jee=qee;var Wee=new sa({shape:{x:-1,y:-1,width:2,height:2}}),Zee=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,i){if(!(xr.node||!i.getDom())){var n=r.getComponent("tooltip"),a=this._renderMode=EH(n.get("renderMode"));this._tooltipContent=a==="richText"?new jee(i):new Hee(i.getDom(),i,{appendToBody:n.get("appendToBody",!0)})}},t.prototype.render=function(r,i,n){if(!(xr.node||!n.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=i,this._api=n,this._alwaysShowContent=r.get("alwaysShowContent");var a=this._tooltipContent;a.update(r),a.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?a3(this,"_updatePosition",50,"fixRate"):hb(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,i=r.get("triggerOn");BR("itemTooltip",this._api,Ai(function(n,a,u){i!=="none"&&(i.indexOf(n)>=0?this._tryShow(a,u):n==="leave"&&this._hide(u))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,i=this._ecModel,n=this._api,a=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&a!=="none"&&a!=="click"){var u=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!n.isDisposed()&&u.manuallyShowTip(r,i,n,{x:u._lastX,y:u._lastY,dataByCoordSys:u._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,i,n,a){if(!(a.from===this.uid||xr.node||!n.getDom())){var u=WI(a,n);this._ticket="";var o=a.dataByCoordSys,f=Jee(a,i,n);if(f){var p=f.el.getBoundingRect().clone();p.applyTransform(f.el.transform),this._tryShow({offsetX:p.x+p.width/2,offsetY:p.y+p.height/2,target:f.el,position:a.position,positionDefault:"bottom"},u)}else if(a.tooltip&&a.x!=null&&a.y!=null){var v=Wee;v.x=a.x,v.y=a.y,v.update(),fi(v).tooltipConfig={name:null,option:a.tooltip},this._tryShow({offsetX:a.x,offsetY:a.y,target:v},u)}else if(o)this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,dataByCoordSys:o,tooltipOption:a.tooltipOption},u);else if(a.seriesIndex!=null){if(this._manuallyAxisShowTip(r,i,n,a))return;var _=FR(a,i),y=_.point[0],S=_.point[1];y!=null&&S!=null&&this._tryShow({offsetX:y,offsetY:S,target:_.el,position:a.position,positionDefault:"bottom"},u)}else a.x!=null&&a.y!=null&&(n.dispatchAction({type:"updateAxisPointer",x:a.x,y:a.y}),this._tryShow({offsetX:a.x,offsetY:a.y,position:a.position,target:n.getZr().findHover(a.x,a.y).target},u))}},t.prototype.manuallyHideTip=function(r,i,n,a){var u=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&u.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,a.from!==this.uid&&this._hide(WI(a,n))},t.prototype._manuallyAxisShowTip=function(r,i,n,a){var u=a.seriesIndex,o=a.dataIndex,f=i.getComponent("axisPointer").coordSysAxesInfo;if(!(u==null||o==null||f==null)){var p=i.getSeriesByIndex(u);if(p){var v=p.getData(),_=bd([v.getItemModel(o),p,(p.coordinateSystem||{}).model],this._tooltipModel);if(_.get("trigger")==="axis")return n.dispatchAction({type:"updateAxisPointer",seriesIndex:u,dataIndex:o,position:a.position}),!0}}},t.prototype._tryShow=function(r,i){var n=r.target,a=this._tooltipModel;if(a){this._lastX=r.offsetX,this._lastY=r.offsetY;var u=r.dataByCoordSys;if(u&&u.length)this._showAxisTooltip(u,r);else if(n){this._lastDataByCoordSys=null;var o,f;Pd(n,function(p){if(fi(p).dataIndex!=null)return o=p,!0;if(fi(p).tooltipConfig!=null)return f=p,!0},!0),o?this._showSeriesItemTooltip(r,o,i):f?this._showComponentItemTooltip(r,f,i):this._hide(i)}else this._lastDataByCoordSys=null,this._hide(i)}},t.prototype._showOrMove=function(r,i){var n=r.get("showDelay");i=Ai(i,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(i,n):i()},t.prototype._showAxisTooltip=function(r,i){var n=this._ecModel,a=this._tooltipModel,u=[i.offsetX,i.offsetY],o=bd([i.tooltipOption],a),f=this._renderMode,p=[],v=Ol("section",{blocks:[],noHeader:!0}),_=[],y=new D1;Ee(r,function(D){Ee(D.dataByAxis,function(O){var N=n.getComponent(O.axisDim+"Axis",O.axisIndex),q=O.value;if(!(!N||q==null)){var Z=zR(q,N.axis,n,O.seriesDataIndices,O.valueLabelOpt),Q=Ol("section",{header:Z,noHeader:!Go(Z),sortBlocks:!0,blocks:[]});v.blocks.push(Q),Ee(O.seriesDataIndices,function(j){var ie=n.getSeriesByIndex(j.seriesIndex),ae=j.dataIndexInside,he=ie.getDataParams(ae);if(!(he.dataIndex<0)){he.axisDim=O.axisDim,he.axisIndex=O.axisIndex,he.axisType=O.axisType,he.axisId=O.axisId,he.axisValue=N2(N.axis,{value:q}),he.axisValueLabel=Z,he.marker=y.makeTooltipMarker("item",xp(he.color),f);var ue=tM(ie.formatTooltip(ae,!0,null)),fe=ue.frag;if(fe){var ye=bd([ie],a).get("valueFormatter");Q.blocks.push(ye?xt({valueFormatter:ye},fe):fe)}ue.text&&_.push(ue.text),p.push(he)}})}})}),v.blocks.reverse(),_.reverse();var S=i.position,A=o.get("order"),L=oM(v,y,f,A,n.get("useUTC"),o.get("textStyle"));L&&_.unshift(L);var I=f==="richText"?`

`:"<br/>",M=_.join(I);this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(r,p)?this._updatePosition(o,S,u[0],u[1],this._tooltipContent,p):this._showTooltipContent(o,M,p,Math.random()+"",u[0],u[1],S,null,y)})},t.prototype._showSeriesItemTooltip=function(r,i,n){var a=this._ecModel,u=fi(i),o=u.seriesIndex,f=a.getSeriesByIndex(o),p=u.dataModel||f,v=u.dataIndex,_=u.dataType,y=p.getData(_),S=this._renderMode,A=r.positionDefault,L=bd([y.getItemModel(v),p,f&&(f.coordinateSystem||{}).model],this._tooltipModel,A?{position:A}:null),I=L.get("trigger");if(!(I!=null&&I!=="item")){var M=p.getDataParams(v,_),D=new D1;M.marker=D.makeTooltipMarker("item",xp(M.color),S);var O=tM(p.formatTooltip(v,!1,_)),N=L.get("order"),q=L.get("valueFormatter"),Z=O.frag,Q=Z?oM(q?xt({valueFormatter:q},Z):Z,D,S,N,a.get("useUTC"),L.get("textStyle")):O.text,j="item_"+p.name+"_"+v;this._showOrMove(L,function(){this._showTooltipContent(L,Q,M,j,r.offsetX,r.offsetY,r.position,r.target,D)}),n({type:"showTip",dataIndexInside:v,dataIndex:y.getRawIndex(v),seriesIndex:o,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,i,n){var a=fi(i),u=a.tooltipConfig,o=u.option||{};if(Wt(o)){var f=o;o={content:f,formatter:f}}var p=[o],v=this._ecModel.getComponent(a.componentMainType,a.componentIndex);v&&p.push(v),p.push({formatter:o.content});var _=r.positionDefault,y=bd(p,this._tooltipModel,_?{position:_}:null),S=y.get("content"),A=Math.random()+"",L=new D1;this._showOrMove(y,function(){var I=Dr(y.get("formatterParams")||{});this._showTooltipContent(y,S,I,A,r.offsetX,r.offsetY,r.position,i,L)}),n({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,i,n,a,u,o,f,p,v){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var _=this._tooltipContent;_.setEnterable(r.get("enterable"));var y=r.get("formatter");f=f||r.get("position");var S=i,A=this._getNearestPoint([u,o],n,r.get("trigger"),r.get("borderColor")),L=A.color;if(y)if(Wt(y)){var I=r.ecModel.get("useUTC"),M=Ft(n)?n[0]:n,D=M&&M.axisType&&M.axisType.indexOf("time")>=0;S=y,D&&(S=q_(M.axisValue,S,I)),S=I5(S,n,!0)}else if(lr(y)){var O=Ai(function(N,q){N===this._ticket&&(_.setContent(q,v,r,L,f),this._updatePosition(r,f,u,o,_,n,p))},this);this._ticket=a,S=y(n,a,O)}else S=y;_.setContent(S,v,r,L,f),_.show(r,L),this._updatePosition(r,f,u,o,_,n,p)}},t.prototype._getNearestPoint=function(r,i,n,a){if(n==="axis"||Ft(i))return{color:a||(this._renderMode==="html"?"#fff":"none")};if(!Ft(i))return{color:a||i.color||i.borderColor}},t.prototype._updatePosition=function(r,i,n,a,u,o,f){var p=this._api.getWidth(),v=this._api.getHeight();i=i||r.get("position");var _=u.getSize(),y=r.get("align"),S=r.get("verticalAlign"),A=f&&f.getBoundingRect().clone();if(f&&A.applyTransform(f.transform),lr(i)&&(i=i([n,a],o,u.el,A,{viewSize:[p,v],contentSize:_.slice()})),Ft(i))n=mn(i[0],p),a=mn(i[1],v);else if(Kt(i)){var L=i;L.width=_[0],L.height=_[1];var I=_2(L,{width:p,height:v});n=I.x,a=I.y,y=null,S=null}else if(Wt(i)&&f){var M=Kee(i,A,_,r.get("borderWidth"));n=M[0],a=M[1]}else{var M=Xee(n,a,u,p,v,y?null:20,S?null:20);n=M[0],a=M[1]}if(y&&(n-=ZI(y)?_[0]/2:y==="right"?_[0]:0),S&&(a-=ZI(S)?_[1]/2:S==="bottom"?_[1]:0),VR(r)){var M=Yee(n,a,u,p,v);n=M[0],a=M[1]}u.moveTo(n,a)},t.prototype._updateContentNotChangedOnAxis=function(r,i){var n=this._lastDataByCoordSys,a=this._cbParamsList,u=!!n&&n.length===r.length;return u&&Ee(n,function(o,f){var p=o.dataByAxis||[],v=r[f]||{},_=v.dataByAxis||[];u=u&&p.length===_.length,u&&Ee(p,function(y,S){var A=_[S]||{},L=y.seriesDataIndices||[],I=A.seriesDataIndices||[];u=u&&y.value===A.value&&y.axisType===A.axisType&&y.axisId===A.axisId&&L.length===I.length,u&&Ee(L,function(M,D){var O=I[D];u=u&&M.seriesIndex===O.seriesIndex&&M.dataIndex===O.dataIndex}),a&&Ee(y.seriesDataIndices,function(M){var D=M.seriesIndex,O=i[D],N=a[D];O&&N&&N.data!==O.data&&(u=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=i,!!u},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,i){xr.node||!i.getDom()||(hb(this,"_updatePosition"),this._tooltipContent.dispose(),Db("itemTooltip",i))},t.type="tooltip",t}(Ds);function bd(e,t,r){var i=t.ecModel,n;r?(n=new Wn(r,i,i),n=new Wn(t.option,n,i)):n=t;for(var a=e.length-1;a>=0;a--){var u=e[a];u&&(u instanceof Wn&&(u=u.get("tooltip",!0)),Wt(u)&&(u={formatter:u}),u&&(n=new Wn(u,n,i)))}return n}function WI(e,t){return e.dispatchAction||Ai(t.dispatchAction,t)}function Xee(e,t,r,i,n,a,u){var o=r.getSize(),f=o[0],p=o[1];return a!=null&&(e+f+a+2>i?e-=f+a:e+=a),u!=null&&(t+p+u>n?t-=p+u:t+=u),[e,t]}function Yee(e,t,r,i,n){var a=r.getSize(),u=a[0],o=a[1];return e=Math.min(e+u,i)-u,t=Math.min(t+o,n)-o,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function Kee(e,t,r,i){var n=r[0],a=r[1],u=Math.ceil(Math.SQRT2*i)+8,o=0,f=0,p=t.width,v=t.height;switch(e){case"inside":o=t.x+p/2-n/2,f=t.y+v/2-a/2;break;case"top":o=t.x+p/2-n/2,f=t.y-a-u;break;case"bottom":o=t.x+p/2-n/2,f=t.y+v+u;break;case"left":o=t.x-n-u,f=t.y+v/2-a/2;break;case"right":o=t.x+p+u,f=t.y+v/2-a/2}return[o,f]}function ZI(e){return e==="center"||e==="middle"}function Jee(e,t,r){var i=Zw(e).queryOptionMap,n=i.keys()[0];if(!(!n||n==="series")){var a=jp(t,n,i.get(n),{useDefault:!1,enableAll:!1,enableNone:!1}),u=a.models[0];if(u){var o=r.getViewOfComponentModel(u),f;if(o.group.traverse(function(p){var v=fi(p).tooltipConfig;if(v&&v.name===e.name)return f=p,!0}),f)return{componentMainType:n,componentIndex:u.componentIndex,el:f}}}}const Qee=Zee;function ete(e){Vh(NR),e.registerComponentModel(kee),e.registerComponentView(Qee),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Zn),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Zn)}var tte=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(_i),rte=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,i,n){if(this.group.removeAll(),!!r.get("show")){var a=this.group,u=r.getModel("textStyle"),o=r.getModel("subtextStyle"),f=r.get("textAlign"),p=br(r.get("textBaseline"),r.get("textVerticalAlign")),v=new yo({style:sc(u,{text:r.get("text"),fill:u.getTextColor()},{disableBox:!0}),z2:10}),_=v.getBoundingRect(),y=r.get("subtext"),S=new yo({style:sc(o,{text:y,fill:o.getTextColor(),y:_.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),A=r.get("link"),L=r.get("sublink"),I=r.get("triggerEvent",!0);v.silent=!A&&!I,S.silent=!L&&!I,A&&v.on("click",function(){BA(A,"_"+r.get("target"))}),L&&S.on("click",function(){BA(L,"_"+r.get("subtarget"))}),fi(v).eventData=fi(S).eventData=I?{componentType:"title",componentIndex:r.componentIndex}:null,a.add(v),y&&a.add(S);var M=a.getBoundingRect(),D=r.getBoxLayoutParams();D.width=M.width,D.height=M.height;var O=_2(D,{width:n.getWidth(),height:n.getHeight()},r.get("padding"));f||(f=r.get("left")||r.get("right"),f==="middle"&&(f="center"),f==="right"?O.x+=O.width:f==="center"&&(O.x+=O.width/2)),p||(p=r.get("top")||r.get("bottom"),p==="center"&&(p="middle"),p==="bottom"?O.y+=O.height:p==="middle"&&(O.y+=O.height/2),p=p||"top"),a.x=O.x,a.y=O.y,a.markRedraw();var N={align:f,verticalAlign:p};v.setStyle(N),S.setStyle(N),M=a.getBoundingRect();var q=O.margin,Z=r.getItemStyle(["color","opacity"]);Z.fill=r.get("backgroundColor");var Q=new sa({shape:{x:M.x-q[3],y:M.y-q[0],width:M.width+q[1]+q[3],height:M.height+q[0]+q[2],r:r.get("borderRadius")},style:Z,subPixelOptimize:!0,silent:!0});a.add(Q)}},t.type="title",t}(Ds);function ite(e){e.registerComponentModel(tte),e.registerComponentView(rte)}function nte(e,t){if(!e)return!1;for(var r=Ft(e)?e:[e],i=0;i<r.length;i++)if(r[i]&&r[i][t])return!0;return!1}function Qv(e){Xx(e,"label",["show"])}var eg=zi(),HR=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,i,n){this.mergeDefaultAndTheme(r,n),this._mergeOption(r,n,!1,!0)},t.prototype.isAnimationEnabled=function(){if(xr.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,i){this._mergeOption(r,i,!1,!1)},t.prototype._mergeOption=function(r,i,n,a){var u=this.mainType;n||i.eachSeries(function(o){var f=o.get(this.mainType,!0),p=eg(o)[u];if(!f||!f.data){eg(o)[u]=null;return}p?p._mergeOption(f,i,!0):(a&&Qv(f),Ee(f.data,function(v){v instanceof Array?(Qv(v[0]),Qv(v[1])):Qv(v)}),p=this.createMarkerModelFromSeries(f,this,i),xt(p,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),p.__hostSeries=o),eg(o)[u]=p},this)},t.prototype.formatTooltip=function(r,i,n){var a=this.getData(),u=this.getRawValue(r),o=a.getName(r);return Ol("section",{header:this.name,blocks:[Ol("nameValue",{name:o,value:u,noName:!o,noValue:u==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,i){return eg(r)[i]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(_i);bo(HR,Z5.prototype);const h_=HR;var ate=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,i,n){return new t(r,i,n)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(h_);const ote=ate;function ste(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function lte(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function tg(e,t,r,i,n,a){var u=[],o=l_(t,i),f=o?t.getCalculationInfo("stackResultDimension"):i,p=qR(t,f,e),v=t.indicesOfNearest(f,p)[0];u[n]=t.get(r,v),u[a]=t.get(f,v);var _=t.get(i,v),y=Bh(t.get(i,v));return y=Math.min(y,20),y>=0&&(u[a]=+u[a].toFixed(y)),[u,_]}var ax={min:ln(tg,"min"),max:ln(tg,"max"),average:ln(tg,"average"),median:ln(tg,"median")};function ute(e,t){if(t){var r=e.getData(),i=e.coordinateSystem,n=i.dimensions;if(!lte(t)&&!Ft(t.coord)&&i){var a=cte(t,r,i,e);if(t=Dr(t),t.type&&ax[t.type]&&a.baseAxis&&a.valueAxis){var u=ri(n,a.baseAxis.dim),o=ri(n,a.valueAxis.dim),f=ax[t.type](r,a.baseDataDim,a.valueDataDim,u,o);t.coord=f[0],t.value=f[1]}else t.coord=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis]}if(t.coord==null)t.coord=[];else for(var p=t.coord,v=0;v<2;v++)ax[p[v]]&&(p[v]=qR(r,r.mapDimension(n[v]),p[v]));return t}}function cte(e,t,r,i){var n={};return e.valueIndex!=null||e.valueDim!=null?(n.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,n.valueAxis=r.getAxis(hte(i,n.valueDataDim)),n.baseAxis=r.getOtherAxis(n.valueAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim)):(n.baseAxis=i.getBaseAxis(),n.valueAxis=r.getOtherAxis(n.baseAxis),n.baseDataDim=t.mapDimension(n.baseAxis.dim),n.valueDataDim=t.mapDimension(n.valueAxis.dim)),n}function hte(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function fte(e,t){return e&&e.containData&&t.coord&&!ste(t)?e.containData(t.coord):!0}function dte(e,t){return e?function(r,i,n,a){var u=a<2?r.coord&&r.coord[a]:r.value;return Eh(u,t[a])}:function(r,i,n,a){return Eh(r.value,t[a])}}function qR(e,t,r){if(r==="average"){var i=0,n=0;return e.each(t,function(a,u){isNaN(a)||(i+=a,n++)}),i/n}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var ox=zi(),pte=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=wr()},t.prototype.render=function(r,i,n){var a=this,u=this.markerGroupMap;u.each(function(o){ox(o).keep=!1}),i.eachSeries(function(o){var f=h_.getMarkerModelFromSeries(o,a.type);f&&a.renderSeries(o,f,i,n)}),u.each(function(o){!ox(o).keep&&a.group.remove(o.group)})},t.prototype.markKeep=function(r){ox(r).keep=!0},t.prototype.toggleBlurSeries=function(r,i){var n=this;Ee(r,function(a){var u=h_.getMarkerModelFromSeries(a,n.type);if(u){var o=u.getData();o.eachItemGraphicEl(function(f){f&&(i?Ok(f):t2(f))})}})},t.type="marker",t}(Ds);const mte=pte;function XI(e,t,r){var i=t.coordinateSystem;e.each(function(n){var a=e.getItemModel(n),u,o=mn(a.get("x"),r.getWidth()),f=mn(a.get("y"),r.getHeight());if(!isNaN(o)&&!isNaN(f))u=[o,f];else if(t.getMarkerPosition)u=t.getMarkerPosition(e.getValues(e.dimensions,n));else if(i){var p=e.get(i.dimensions[0],n),v=e.get(i.dimensions[1],n);u=i.dataToPoint([p,v])}isNaN(o)||(u[0]=o),isNaN(f)||(u[1]=f),e.setItemLayout(n,u)})}var vte=function(e){It(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,i,n){i.eachSeries(function(a){var u=h_.getMarkerModelFromSeries(a,"markPoint");u&&(XI(u.getData(),a,n),this.markerGroupMap.get(a.id).updateLayout())},this)},t.prototype.renderSeries=function(r,i,n,a){var u=r.coordinateSystem,o=r.id,f=r.getData(),p=this.markerGroupMap,v=p.get(o)||p.set(o,new xR),_=gte(u,r,i);i.setData(_),XI(i.getData(),r,a),_.each(function(y){var S=_.getItemModel(y),A=S.getShallow("symbol"),L=S.getShallow("symbolSize"),I=S.getShallow("symbolRotate"),M=S.getShallow("symbolOffset"),D=S.getShallow("symbolKeepAspect");if(lr(A)||lr(L)||lr(I)||lr(M)){var O=i.getRawValue(y),N=i.getDataParams(y);lr(A)&&(A=A(O,N)),lr(L)&&(L=L(O,N)),lr(I)&&(I=I(O,N)),lr(M)&&(M=M(O,N))}var q=S.getModel("itemStyle").getItemStyle(),Z=d3(f,"color");q.fill||(q.fill=Z),_.setItemVisual(y,{symbol:A,symbolSize:L,symbolRotate:I,symbolOffset:M,symbolKeepAspect:D,style:q})}),v.updateData(_),this.group.add(v.group),_.eachItemGraphicEl(function(y){y.traverse(function(S){fi(S).dataModel=i})}),this.markKeep(v),v.group.silent=i.get("silent")||r.get("silent")},t.type="markPoint",t}(mte);function gte(e,t,r){var i;e?i=Zt(e&&e.dimensions,function(o){var f=t.getData().getDimensionInfo(t.getData().mapDimension(o))||{};return xt(xt({},f),{name:o,ordinalMeta:null})}):i=[{name:"value",type:"float"}];var n=new B2(i,r),a=Zt(r.get("data"),ln(ute,t));e&&(a=Pn(a,ln(fte,e)));var u=dte(!!e,i);return n.initData(a,null,u),n}const _te=vte;function yte(e){e.registerComponentModel(ote),e.registerComponentView(_te),e.registerPreprocessor(function(t){nte(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}Vh([LJ,ite,ete,yte,Dee,DQ,ree]);const xte={name:"BusChartVue",components:{"v-chart":JK},data:()=>({lines:[],stops1:[],stops2:[],historyBusData:[],echartsOption:{tooltip:{show:!1},title:[{subtext:`By bilibili@
GitHub@ni1o1`,sublink:"https://github.com/ni1o1/nikebus",textAlign:"right",bottom:"2%",left:"98%"}],grid:[{top:"10%",bottom:"0%",left:"26px",right:"14px"}],yAxis:[{inverse:!0,min:-100,max:4500,type:"value",boundaryGap:!1,show:!1,splitLine:{show:!1}}],xAxis:[{position:"top",verticalAlign:"top",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{interval:0},type:"category",data:[`1
`,`1
`,`2
`,`2
`],splitLine:{show:!1}}],series:[{type:"scatter",label:{fontSize:10,show:!0,color:"#999",position:"right",formatter:"{b}"},data:[]},{type:"lines",coordinateSystem:"cartesian2d",data:[]},{label:{fontSize:11,show:!0,color:"#000",textBorderColor:"#fff",textBorderWidth:2,fontWeight:"bold",position:"right",distance:-5,formatter:"{b}"},type:"scatter",name:"bus",data:[]}],stateAnimation:{duration:500}},timer:{},second:0}),methods:{setEchartsOption(e){this.echartsOption=e},load_data(){ba.all([ba.get("/bus_echart/line1.json"),ba.get("/bus_echart/line2.json"),ba.get("/bus_echart/stop1.json"),ba.get("/bus_echart/stop2.json")]).then(ba.spread((e,t,r,i)=>{const n=e.data,a=t.data,u=r.data,o=i.data;this.lines=[n,a],this.stops1=u,this.stops2=o;const f=u.features.map(S=>({value:[1,ms(n.features[0],S).properties.location*1e3],name:S.properties.name,symbolSize:8,itemStyle:{color:"#ff881b",opacity:1}})),p=u.features.map(S=>({value:[0,vs(n.features[0])*1e3-ms(n.features[0],S).properties.location*1e3],name:S.properties.name,symbolSize:8,itemStyle:{color:"#ff881b",opacity:1}})),v=o.features.map(S=>({value:[3,ms(a.features[0],S).properties.location*1e3],name:S.properties.name,symbolSize:8,itemStyle:{color:"#379ff4",opacity:1}})),_=o.features.map(S=>({value:[2,vs(a.features[0])*1e3-ms(a.features[0],S).properties.location*1e3],name:S.properties.name,symbolSize:8,itemStyle:{color:"#379ff4",opacity:1}})),y={series:[{data:[...f,...p,...v,..._]},{data:[{coords:[[0,0],[0,vs(n.features[0])*1e3]],lineStyle:{color:"#ff881b",width:2,opacity:1}},{coords:[[1,0],[1,vs(n.features[0])*1e3]],lineStyle:{color:"#ff881b",width:2,opacity:1}},{coords:[[2,0],[2,vs(a.features[0])*1e3]],lineStyle:{color:"#379ff4",width:2,opacity:1}},{coords:[[3,0],[3,vs(a.features[0])*1e3]],lineStyle:{color:"#379ff4",width:2,opacity:1}}]}]};this.setEchartsOption(y)}))},updateBusPos(){this.lines.length>0&&ba.get("https://bus.sustcra.com/api/v2/monitor_osm/").then(e=>{const r=e.data.filter(n=>n.is_operating==1).map(n=>{let a=0;n.route_code=="XYBS2"?a=1:n.route_code=="XYBS1"&&(a=0);const u=In([n.lng,n.lat]);let o=this.lines[a].features[0],f=ms(o,u),p=f.properties.location,v=p*1e3;return n.route_dir>0&&(v=vs(o)*1e3-p*1e3),f.properties.dist*1e3>100|v<100?{value:[-1,0],name:n.id,itemStyle:{color:"#222",show:!1},symbol:"image://https://bus.sustcra.com/bus-top-view.png",symbolSize:30,symbolRotate:180,speed:n.speed}:{value:[1-n.route_dir+a*2,v],name:n.id,itemStyle:{color:"#222"},symbol:"image://https://bus.sustcra.com/bus-top-view.png",symbolSize:30,symbolRotate:180,speed:n.speed}});this.historyBusData=r.filter(n=>typeof n<"u");const i={series:[{},{},{data:r}]};this.setEchartsOption(i)})},refresh(){this.second+=1,this.second%10===0?this.updateBusPos():navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{let t=e.coords.latitude,r=e.coords.longitude;const i=In([r,t]),n=oC(i,this.stops1),a=ms(this.lines[0].features[0],n).properties.location*1e3,u=vs(this.lines[0].features[0])*1e3-ms(this.lines[0].features[0],n).properties.location*1e3,o=oC(i,this.stops2),f=ms(this.lines[1].features[0],o).properties.location*1e3,p=vs(this.lines[1].features[0])*1e3-ms(this.lines[1].features[0],o).properties.location*1e3,v=this.historyBusData.filter(N=>N.value[0]===0&&N.value[1]<=u).map(N=>parseInt((u-N.value[1])/250)),_=this.historyBusData.filter(N=>N.value[0]===1&&N.value[1]<=a).map(N=>parseInt((a-N.value[1])/250)),y=this.historyBusData.filter(N=>N.value[0]===2&&N.value[1]<=p).map(N=>parseInt((p-N.value[1])/250)),S=this.historyBusData.filter(N=>N.value[0]===3&&N.value[1]<=f).map(N=>parseInt((f-N.value[1])/250)),A=v.length>0?`
 `+Math.min(...v)+"":"",L=_.length>0?`
  `+Math.min(..._)+"":"",I=y.length>0?`
   `+Math.min(...y)+"":"",M=S.length>0?`
    `+Math.min(...S)+"":"";let D=[],O=[];D=[{name:""+L,itemStyle:{color:"#ff881b"},coord:[1,a]},{name:""+A,itemStyle:{color:"#ff881b"},coord:[0,u]}],O=[{name:""+M,itemStyle:{color:"#379ff4"},coord:[3,f]},{name:""+I,itemStyle:{color:"#379ff4"},coord:[2,p]}],this.setEchartsOption({series:[{markPoint:{symbol:"arrow",symbolRotate:-90,symbolOffset:["-50%",0],symbolSize:10,label:{fontSize:10,show:!0,color:"#666",position:"left",formatter:"{b}"},data:[...D,...O]}},{},{}]})})}},watch:{lines:"updateBusPos"},mounted(){this.load_data(),this.updateBusPos(),this.timer=setInterval(()=>{this.refresh()},500)},unmounted(){clearInterval(this.timer)}},bte=e=>(AP("data-v-adb0a662"),e=e(),MP(),e),wte=bte(()=>rr("img",{src:"https://visitor-badge.laobi.icu/badge?page_id=nikebus",alt:"visitor badge",class:"visitor-badge"},null,-1));function Ste(e,t,r,i,n,a){const u=qn("v-chart");return lt(),Rt(Nr,null,[er(u,{class:"chart",option:e.echartsOption,autoresize:!0},null,8,["option"]),wte],64)}const Tte=Ur(xte,[["render",Ste],["__scopeId","data-v-adb0a662"],["__file","BusChartVue.vue"]]),Ete=xo({enhance({app:e}){e.component("BusTable",y$),e.component("Realtimemap",T$),e.component("WeatherSpan",I$),e.component("BusChartVue",Tte)}}),rg=[iF,oF,cF,wF,CF,LF,g7,A7,D7,z7,Ete],Cte=[["v-8daa1a0e","/",{title:""},["/index.html","/README.md"]],["v-74bc627b","/about/",{title:""},["/about/index.html","/about/README.md"]],["v-08ae5eba","/calendar/2018-2019.html",{title:" - 2018-2019 "},["/calendar/2018-2019","/calendar/2018-2019.md"]],["v-93cfbde4","/calendar/2019-2020.html",{title:" - 2019-2020 "},["/calendar/2019-2020","/calendar/2019-2020.md"]],["v-f917537a","/calendar/2020-2021.html",{title:" - 2020-2021 "},["/calendar/2020-2021","/calendar/2020-2021.md"]],["v-1a0de1a3","/calendar/2021-2022.html",{title:" - 2021-2022 "},["/calendar/2021-2022","/calendar/2021-2022.md"]],["v-190ab309","/calendar/2021fall.html",{title:""},["/calendar/2021fall","/calendar/2021fall.md"]],["v-9eb125fa","/calendar/2022-2023.html",{title:" - 2022-2023 "},["/calendar/2022-2023","/calendar/2022-2023.md"]],["v-96167c50","/calendar/",{title:""},["/calendar/index.html","/calendar/README.md"]],["v-96536bf0","/contact/",{title:""},["/contact/index.html","/contact/README.md"]],["v-dbd38712","/emergency/",{title:""},["/emergency/index.html","/emergency/README.md"]],["v-c73889da","/facility/",{title:""},["/facility/index.html","/facility/README.md"]],["v-2c5c0e04","/facility/building-11-elevator.html",{title:"11"},["/facility/building-11-elevator","/facility/building-11-elevator.md"]],["v-104cfa63","/if-you-are-a-freshman/2021.html",{title:"..."},["/if-you-are-a-freshman/2021","/if-you-are-a-freshman/2021.md"]],["v-780207b9","/if-you-are-a-freshman/",{title:"..."},["/if-you-are-a-freshman/index.html","/if-you-are-a-freshman/README.md"]],["v-14e6315a","/life/",{title:""},["/life/index.html","/life/README.md"]],["v-42f2be94","/life/vehicle-charger.html",{title:""},["/life/vehicle-charger","/life/vehicle-charger.md"]],["v-ed48bdf8","/media/",{title:""},["/media/index.html","/media/README.md"]],["v-f4bc5604","/miniapp/",{title:"-"},["/miniapp/index.html","/miniapp/README.md"]],["v-1500d063","/news/",{title:""},["/news/index.html","/news/README.md"]],["v-014445c8","/organizations/",{title:""},["/organizations/index.html","/organizations/README.md"]],["v-461d4a7c","/organizations/registered-organization-2019.html",{title:"2018-2019"},["/organizations/registered-organization-2019","/organizations/registered-organization-2019.md"]],["v-6ba7e826","/organizations/registered-organization-2020.html",{title:"2019-2020"},["/organizations/registered-organization-2020","/organizations/registered-organization-2020.md"]],["v-6d5cc0c5","/organizations/registered-organization-2021.html",{title:"2020-2021"},["/organizations/registered-organization-2021","/organizations/registered-organization-2021.md"]],["v-28ddfa13","/service/",{title:""},["/service/index.html","/service/README.md"]],["v-be92ea7e","/site-help/",{title:""},["/site-help/index.html","/site-help/README.md"]],["v-d7188082","/study/",{title:""},["/study/index.html","/study/README.md"]],["v-d1061704","/study/paper-tools.html",{title:" ddl "},["/study/paper-tools","/study/paper-tools.md"]],["v-4322d0a7","/surroundings/",{title:""},["/surroundings/index.html","/surroundings/README.md"]],["v-69b23ddf","/transport/",{title:""},["/transport/index.html","/transport/README.md"]],["v-1678dd6f","/transport/bustimer-wx.html",{title:" SUSTech Campus Bus Info"},["/transport/bustimer-wx","/transport/bustimer-wx.md"]],["v-1630dfb5","/transport/bustimer.html",{title:" SUSTech Campus Bus Info"},["/transport/bustimer","/transport/bustimer.md"]],["v-6a28f6e0","/transport/holiday.html",{title:" -  (2021618)"},["/transport/holiday","/transport/holiday.md"]],["v-48975204","/transport/redirect.html",{title:" - "},["/transport/redirect","/transport/redirect.md"]],["v-8059a7a6","/transport/workday.html",{title:" -  (2021618)"},["/transport/workday","/transport/workday.md"]],["v-181cc452","/contact/professor-emails/",{title:""},["/contact/professor-emails/index.html","/contact/professor-emails/README.md"]],["v-22cd7d0c","/facility/panolens/",{title:""},["/facility/panolens/index.html","/facility/panolens/README.md"]],["v-0e92d420","/if-you-are-a-freshman/preview/",{title:"2021"},["/if-you-are-a-freshman/preview/index.html","/if-you-are-a-freshman/preview/README.md"]],["v-2b8cac58","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87.html",{title:""},["/life/by-zhicheng-college/.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87","/life/by-zhicheng-college/.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AE%BF%E8%88%8D%E7%94%9F%E6%B4%BB%E7%AF%87.md"]],["v-66965350","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87.html",{title:""},["/life/by-zhicheng-college/.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87","/life/by-zhicheng-college/.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E6%A0%A1%E5%86%85%E4%BB%8B%E7%BB%8D%E7%AF%87.md"]],["v-66317da4","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87.html",{title:""},["/life/by-zhicheng-college/.html","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87","/life/by-zhicheng-college/.md","/life/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E7%A4%BE%E5%9B%A2%E7%AF%87.md"]],["v-5c3fcdf6","/life/catering/",{title:""},["/life/catering/index.html","/life/catering/README.md"]],["v-04710004","/life/dormitory/",{title:""},["/life/dormitory/index.html","/life/dormitory/README.md"]],["v-5589dd0c","/life/dormitory/dorm-floor-plan.html",{title:""},["/life/dormitory/dorm-floor-plan","/life/dormitory/dorm-floor-plan.md"]],["v-d42194b6","/life/freshman-register/",{title:""},["/life/freshman-register/index.html","/life/freshman-register/README.md"]],["v-20383a78","/life/sports-facility/",{title:""},["/life/sports-facility/index.html","/life/sports-facility/README.md"]],["v-42c1fa44","/service/campus-card/",{title:""},["/service/campus-card/index.html","/service/campus-card/README.md"]],["v-76cff034","/service/email/",{title:""},["/service/email/index.html","/service/email/README.md"]],["v-ac3449b2","/service/email/send-receive-email-by-proxy.html",{title:""},["/service/email/send-receive-email-by-proxy","/service/email/send-receive-email-by-proxy.md"]],["v-29860ed0","/service/mail-and-express/",{title:""},["/service/mail-and-express/index.html","/service/mail-and-express/README.md"]],["v-622da02f","/service/matlab/",{title:"MATLAB "},["/service/matlab/index.html","/service/matlab/README.md"]],["v-5e590ec6","/service/medical-treatment/",{title:""},["/service/medical-treatment/index.html","/service/medical-treatment/README.md"]],["v-1fa222d4","/service/network/",{title:" (its@sustech.edu.cn)"},["/service/network/index.html","/service/network/README.md"]],["v-48519846","/service/sakai/",{title:"Sakai | "},["/service/sakai/index.html","/service/sakai/README.md"]],["v-369295b4","/service/sid/",{title:"SID"},["/service/sid/index.html","/service/sid/README.md"]],["v-3692bb1f","/service/ssc/",{title:""},["/service/ssc/index.html","/service/ssc/README.md"]],["v-425958ce","/service/student-train-ticket/",{title:""},["/service/student-train-ticket/index.html","/service/student-train-ticket/README.md"]],["v-3692ee77","/service/tax/",{title:"-- "},["/service/tax/index.html","/service/tax/README.md"]],["v-2686552a","/service/unifound/",{title:""},["/service/unifound/index.html","/service/unifound/README.md"]],["v-45d74ec0","/service/work-wechat/",{title:""},["/service/work-wechat/index.html","/service/work-wechat/README.md"]],["v-772a5784","/study/borrow-books/",{title:""},["/study/borrow-books/index.html","/study/borrow-books/README.md"]],["v-8460eeb8","/study/by-shude-college/advice-on-study.html",{title:""},["/study/by-shude-college/advice-on-study","/study/by-shude-college/advice-on-study.md"]],["v-435bd49a","/study/by-shude-college/info-on-study.html",{title:""},["/study/by-shude-college/info-on-study","/study/by-shude-college/info-on-study.md"]],["v-6323734e","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87.html",{title:""},["/study/by-zhicheng-college/.html","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87","/study/by-zhicheng-college/.md","/study/by-zhicheng-college/%E6%96%B0%E7%94%9F%E6%94%BB%E7%95%A5%E4%B9%8B%E5%AD%A6%E4%B9%A0%E7%AF%87.md"]],["v-5eb748bf","/study/cse/innovative-project.html",{title:""},["/study/cse/innovative-project","/study/cse/innovative-project.md"]],["v-2a23f022","/service/blackboard/retrive-ics-url/",{title:"BB | BlackboardDDL"},["/service/blackboard/retrive-ics-url/index.html","/service/blackboard/retrive-ics-url/README.md"]],["v-66061b92","/service/network/apply-for-vpn/",{title:"VPN"},["/service/network/apply-for-vpn/index.html","/service/network/apply-for-vpn/README.md"]],["v-89ac2bec","/service/network/choose-a-pad/",{title:""},["/service/network/choose-a-pad/index.html","/service/network/choose-a-pad/README.md"]],["v-1549b190","/service/network/choose-a-router/",{title:""},["/service/network/choose-a-router/index.html","/service/network/choose-a-router/README.md"]],["v-9e1961f8","/service/network/eduroam/",{title:"eduroam"},["/service/network/eduroam/index.html","/service/network/eduroam/README.md"]],["v-6bba5e58","/service/network/ipv6/",{title:" IPv6 "},["/service/network/ipv6/index.html","/service/network/ipv6/README.md"]],["v-83a77034","/service/network/remote-desktop/",{title:""},["/service/network/remote-desktop/index.html","/service/network/remote-desktop/README.md"]],["v-296d1d15","/service/network/use-vpn/",{title:" SSL VPN "},["/service/network/use-vpn/index.html","/service/network/use-vpn/README.md"]],["v-fb711be8","/study/book-list-by-prof-yuan/2018/",{title:"2018"},["/study/book-list-by-prof-yuan/2018/index.html","/study/book-list-by-prof-yuan/2018/README.md"]],["v-3706649a","/404.html",{title:""},["/404"]]];var YI=Er({name:"Vuepress",setup(){const e=qB();return()=>Sr(e.value)}}),Ate=()=>Cte.reduce((e,[t,r,i,n])=>(e.push({name:t,path:r,component:YI,meta:i},...n.map(a=>({path:a,redirect:r}))),e),[{name:"404",path:"/:catchAll(.*)",component:YI}]),Mte=p9,Ite=()=>{const e=Y9({history:Mte(JP("/")),routes:Ate(),scrollBehavior:(t,r,i)=>i||(t.hash?{el:t.hash}:{top:0})});return e.beforeResolve(async(t,r)=>{var i;(t.path!==r.path||r===xs)&&([_l.value]=await Promise.all([ys.resolvePageData(t.name),(i=tD[t.name])==null?void 0:i.__asyncLoader()]))}),e},Pte=e=>{e.component("ClientOnly",aw),e.component("Content",YB)},Dte=(e,t,r)=>{const i=Kr(t.currentRoute.value.path);Ln(()=>t.currentRoute.value.path,y=>i.value=y);const n=St(()=>ys.resolveLayouts(r)),a=St(()=>ys.resolveRouteLocale(ch.value.locales,i.value)),u=St(()=>ys.resolveSiteLocaleData(ch.value,a.value)),o=St(()=>ys.resolvePageFrontmatter(_l.value)),f=St(()=>ys.resolvePageHeadTitle(_l.value,u.value)),p=St(()=>ys.resolvePageHead(f.value,o.value,u.value)),v=St(()=>ys.resolvePageLang(_l.value)),_=St(()=>ys.resolvePageLayout(_l.value,n.value));return e.provide($B,n),e.provide(iD,o),e.provide(HB,f),e.provide(nD,p),e.provide(aD,v),e.provide(sD,_),e.provide(iw,a),e.provide(lD,u),Object.defineProperties(e.config.globalProperties,{$frontmatter:{get:()=>o.value},$head:{get:()=>p.value},$headTitle:{get:()=>f.value},$lang:{get:()=>v.value},$page:{get:()=>_l.value},$routeLocale:{get:()=>a.value},$site:{get:()=>ch.value},$siteLocale:{get:()=>u.value},$withBase:{get:()=>E_}}),{layouts:n,pageData:_l,pageFrontmatter:o,pageHead:p,pageHeadTitle:f,pageLang:v,pageLayout:_,routeLocale:a,siteData:ch,siteLocaleData:u}},Lte=()=>{const e=GB(),t=oD(),r=Kr([]),i=()=>{e.value.forEach(a=>{const u=kte(a);u&&r.value.push(u)})},n=()=>{document.documentElement.lang=t.value,r.value.forEach(a=>{a.parentNode===document.head&&document.head.removeChild(a)}),r.value.splice(0,r.value.length),e.value.forEach(a=>{const u=Rte(a);u!==null&&(document.head.appendChild(u),r.value.push(u))})};Al(WB,n),Kn(()=>{i(),n(),Ln(()=>e.value,()=>n())})},kte=([e,t,r=""])=>{const i=Object.entries(t).map(([o,f])=>jo(f)?`[${o}=${JSON.stringify(f)}]`:f===!0?`[${o}]`:"").join(""),n=`head > ${e}${i}`;return Array.from(document.querySelectorAll(n)).find(o=>o.innerText===r)||null},Rte=([e,t,r])=>{if(!jo(e))return null;const i=document.createElement(e);return rw(t)&&Object.entries(t).forEach(([n,a])=>{jo(a)?i.setAttribute(n,a):a===!0&&i.setAttribute(n,"")}),jo(r)&&i.appendChild(document.createTextNode(r)),i},zte=LB,Ote=async()=>{var r;const e=zte({name:"VuepressApp",setup(){var i;Lte();for(const n of rg)(i=n.setup)==null||i.call(n);return()=>[Sr(xD),...rg.flatMap(({rootComponents:n=[]})=>n.map(a=>Sr(a)))]}}),t=Ite();Pte(e),Dte(e,t,rg);for(const i of rg)await((r=i.enhance)==null?void 0:r.call(i,{app:e,router:t,siteData:ch}));return e.use(t),{app:e,router:t}};Ote().then(({app:e,router:t})=>{t.isReady().then(()=>{e.mount("#app")})});export{Ur as _,er as a,rr as b,Rt as c,Ote as createVueApp,kl as d,OO as e,lt as o,qn as r,qi as w};
